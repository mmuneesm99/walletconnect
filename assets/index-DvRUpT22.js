(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function kh(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const It={},Vs=[],Un=()=>{},c3=()=>!1,Lf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Uh=t=>t.startsWith("onUpdate:"),Or=Object.assign,qh=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},u3=Object.prototype.hasOwnProperty,yt=(t,e)=>u3.call(t,e),$e=Array.isArray,js=t=>$f(t)==="[object Map]",dv=t=>$f(t)==="[object Set]",qe=t=>typeof t=="function",Yt=t=>typeof t=="string",Vi=t=>typeof t=="symbol",kt=t=>t!==null&&typeof t=="object",pv=t=>(kt(t)||qe(t))&&qe(t.then)&&qe(t.catch),vv=Object.prototype.toString,$f=t=>vv.call(t),h3=t=>$f(t).slice(8,-1),gv=t=>$f(t)==="[object Object]",zh=t=>Yt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Uo=kh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),kf=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},l3=/-(\w)/g,hn=kf(t=>t.replace(l3,(e,r)=>r?r.toUpperCase():"")),d3=/\B([A-Z])/g,_s=kf(t=>t.replace(d3,"-$1").toLowerCase()),Uf=kf(t=>t.charAt(0).toUpperCase()+t.slice(1)),dc=kf(t=>t?`on${Uf(t)}`:""),ps=(t,e)=>!Object.is(t,e),Wa=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},yv=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},zu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Yl;const qf=()=>Yl||(Yl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Vh(t){if($e(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=Yt(n)?y3(n):Vh(n);if(i)for(const s in i)e[s]=i[s]}return e}else if(Yt(t)||kt(t))return t}const p3=/;(?![^(]*\))/g,v3=/:([^]+)/,g3=/\/\*[^]*?\*\//g;function y3(t){const e={};return t.replace(g3,"").split(p3).forEach(r=>{if(r){const n=r.split(v3);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function jh(t){let e="";if(Yt(t))e=t;else if($e(t))for(let r=0;r<t.length;r++){const n=jh(t[r]);n&&(e+=n+" ")}else if(kt(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const b3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",m3=kh(b3);function bv(t){return!!t||t===""}const mv=t=>!!(t&&t.__v_isRef===!0),Ga=t=>Yt(t)?t:t==null?"":$e(t)||kt(t)&&(t.toString===vv||!qe(t.toString))?mv(t)?Ga(t.value):JSON.stringify(t,wv,2):String(t),wv=(t,e)=>mv(e)?wv(t,e.value):js(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,i],s)=>(r[pc(n,s)+" =>"]=i,r),{})}:dv(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>pc(r))}:Vi(e)?pc(e):kt(e)&&!$e(e)&&!gv(e)?String(e):e,pc=(t,e="")=>{var r;return Vi(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wr;class w3{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Wr,!e&&Wr&&(this.index=(Wr.scopes||(Wr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Wr;try{return Wr=this,e()}finally{Wr=r}}}on(){Wr=this}off(){Wr=this.parent}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function x3(){return Wr}let Mt;const vc=new WeakSet;class xv{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Wr&&Wr.active&&Wr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vc.has(this)&&(vc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ev(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zl(this),Av(this);const e=Mt,r=Mn;Mt=this,Mn=!0;try{return this.fn()}finally{Sv(this),Mt=e,Mn=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Wh(e);this.deps=this.depsTail=void 0,Zl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vu(this)&&this.run()}get dirty(){return Vu(this)}}let _v=0,qo,zo;function Ev(t,e=!1){if(t.flags|=8,e){t.next=zo,zo=t;return}t.next=qo,qo=t}function Hh(){_v++}function Kh(){if(--_v>0)return;if(zo){let e=zo;for(zo=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;qo;){let e=qo;for(qo=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function Av(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Sv(t){let e,r=t.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),Wh(n),_3(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=r}function Vu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Iv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Iv(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Zo))return;t.globalVersion=Zo;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Vu(t)){t.flags&=-3;return}const r=Mt,n=Mn;Mt=t,Mn=!0;try{Av(t);const i=t.fn(t._value);(e.version===0||ps(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Mt=r,Mn=n,Sv(t),t.flags&=-3}}function Wh(t,e=!1){const{dep:r,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)Wh(s,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function _3(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let Mn=!0;const Cv=[];function ji(){Cv.push(Mn),Mn=!1}function Hi(){const t=Cv.pop();Mn=t===void 0?!0:t}function Zl(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=Mt;Mt=void 0;try{e()}finally{Mt=r}}}let Zo=0;class E3{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mv{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Mt||!Mn||Mt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Mt)r=this.activeLink=new E3(Mt,this),Mt.deps?(r.prevDep=Mt.depsTail,Mt.depsTail.nextDep=r,Mt.depsTail=r):Mt.deps=Mt.depsTail=r,Ov(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Mt.depsTail,r.nextDep=void 0,Mt.depsTail.nextDep=r,Mt.depsTail=r,Mt.deps===r&&(Mt.deps=n)}return r}trigger(e){this.version++,Zo++,this.notify(e)}notify(e){Hh();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Kh()}}}function Ov(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Ov(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const ju=new WeakMap,vs=Symbol(""),Hu=Symbol(""),Jo=Symbol("");function br(t,e,r){if(Mn&&Mt){let n=ju.get(t);n||ju.set(t,n=new Map);let i=n.get(r);i||(n.set(r,i=new Mv),i.map=n,i.key=r),i.track()}}function bi(t,e,r,n,i,s){const o=ju.get(t);if(!o){Zo++;return}const a=f=>{f&&f.trigger()};if(Hh(),e==="clear")o.forEach(a);else{const f=$e(t),c=f&&zh(r);if(f&&r==="length"){const u=Number(n);o.forEach((h,d)=>{(d==="length"||d===Jo||!Vi(d)&&d>=u)&&a(h)})}else switch((r!==void 0||o.has(void 0))&&a(o.get(r)),c&&a(o.get(Jo)),e){case"add":f?c&&a(o.get("length")):(a(o.get(vs)),js(t)&&a(o.get(Hu)));break;case"delete":f||(a(o.get(vs)),js(t)&&a(o.get(Hu)));break;case"set":js(t)&&a(o.get(vs));break}}Kh()}function Os(t){const e=xt(t);return e===t?e:(br(e,"iterate",Jo),qn(t)?e:e.map(Yr))}function Gh(t){return br(t=xt(t),"iterate",Jo),t}const A3={__proto__:null,[Symbol.iterator](){return gc(this,Symbol.iterator,Yr)},concat(...t){return Os(this).concat(...t.map(e=>$e(e)?Os(e):e))},entries(){return gc(this,"entries",t=>(t[1]=Yr(t[1]),t))},every(t,e){return oi(this,"every",t,e,void 0,arguments)},filter(t,e){return oi(this,"filter",t,e,r=>r.map(Yr),arguments)},find(t,e){return oi(this,"find",t,e,Yr,arguments)},findIndex(t,e){return oi(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return oi(this,"findLast",t,e,Yr,arguments)},findLastIndex(t,e){return oi(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return oi(this,"forEach",t,e,void 0,arguments)},includes(...t){return yc(this,"includes",t)},indexOf(...t){return yc(this,"indexOf",t)},join(t){return Os(this).join(t)},lastIndexOf(...t){return yc(this,"lastIndexOf",t)},map(t,e){return oi(this,"map",t,e,void 0,arguments)},pop(){return lo(this,"pop")},push(...t){return lo(this,"push",t)},reduce(t,...e){return Jl(this,"reduce",t,e)},reduceRight(t,...e){return Jl(this,"reduceRight",t,e)},shift(){return lo(this,"shift")},some(t,e){return oi(this,"some",t,e,void 0,arguments)},splice(...t){return lo(this,"splice",t)},toReversed(){return Os(this).toReversed()},toSorted(t){return Os(this).toSorted(t)},toSpliced(...t){return Os(this).toSpliced(...t)},unshift(...t){return lo(this,"unshift",t)},values(){return gc(this,"values",Yr)}};function gc(t,e,r){const n=Gh(t),i=n[e]();return n!==t&&!qn(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=r(s.value)),s}),i}const S3=Array.prototype;function oi(t,e,r,n,i,s){const o=Gh(t),a=o!==t&&!qn(t),f=o[e];if(f!==S3[e]){const h=f.apply(t,s);return a?Yr(h):h}let c=r;o!==t&&(a?c=function(h,d){return r.call(this,Yr(h),d,t)}:r.length>2&&(c=function(h,d){return r.call(this,h,d,t)}));const u=f.call(o,c,n);return a&&i?i(u):u}function Jl(t,e,r,n){const i=Gh(t);let s=r;return i!==t&&(qn(t)?r.length>3&&(s=function(o,a,f){return r.call(this,o,a,f,t)}):s=function(o,a,f){return r.call(this,o,Yr(a),f,t)}),i[e](s,...n)}function yc(t,e,r){const n=xt(t);br(n,"iterate",Jo);const i=n[e](...r);return(i===-1||i===!1)&&Jh(r[0])?(r[0]=xt(r[0]),n[e](...r)):i}function lo(t,e,r=[]){ji(),Hh();const n=xt(t)[e].apply(t,r);return Kh(),Hi(),n}const I3=kh("__proto__,__v_isRef,__isVue"),Dv=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Vi));function C3(t){Vi(t)||(t=String(t));const e=xt(this);return br(e,"has",t),e.hasOwnProperty(t)}class Tv{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?L3:Fv:s?Pv:Nv).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=$e(e);if(!i){let f;if(o&&(f=A3[r]))return f;if(r==="hasOwnProperty")return C3}const a=Reflect.get(e,r,Cr(e)?e:n);return(Vi(r)?Dv.has(r):I3(r))||(i||br(e,"get",r),s)?a:Cr(a)?o&&zh(r)?a:a.value:kt(a)?i?Bv(a):Yh(a):a}}class Rv extends Tv{constructor(e=!1){super(!1,e)}set(e,r,n,i){let s=e[r];if(!this._isShallow){const f=Xs(s);if(!qn(n)&&!Xs(n)&&(s=xt(s),n=xt(n)),!$e(e)&&Cr(s)&&!Cr(n))return f?!1:(s.value=n,!0)}const o=$e(e)&&zh(r)?Number(r)<e.length:yt(e,r),a=Reflect.set(e,r,n,Cr(e)?e:i);return e===xt(i)&&(o?ps(n,s)&&bi(e,"set",r,n):bi(e,"add",r,n)),a}deleteProperty(e,r){const n=yt(e,r);e[r];const i=Reflect.deleteProperty(e,r);return i&&n&&bi(e,"delete",r,void 0),i}has(e,r){const n=Reflect.has(e,r);return(!Vi(r)||!Dv.has(r))&&br(e,"has",r),n}ownKeys(e){return br(e,"iterate",$e(e)?"length":vs),Reflect.ownKeys(e)}}class M3 extends Tv{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const O3=new Rv,D3=new M3,T3=new Rv(!0);const Ku=t=>t,Ca=t=>Reflect.getPrototypeOf(t);function R3(t,e,r){return function(...n){const i=this.__v_raw,s=xt(i),o=js(s),a=t==="entries"||t===Symbol.iterator&&o,f=t==="keys"&&o,c=i[t](...n),u=r?Ku:e?Wu:Yr;return!e&&br(s,"iterate",f?Hu:vs),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Ma(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function N3(t,e){const r={get(i){const s=this.__v_raw,o=xt(s),a=xt(i);t||(ps(i,a)&&br(o,"get",i),br(o,"get",a));const{has:f}=Ca(o),c=e?Ku:t?Wu:Yr;if(f.call(o,i))return c(s.get(i));if(f.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&br(xt(i),"iterate",vs),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=xt(s),a=xt(i);return t||(ps(i,a)&&br(o,"has",i),br(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,f=xt(a),c=e?Ku:t?Wu:Yr;return!t&&br(f,"iterate",vs),a.forEach((u,h)=>i.call(s,c(u),c(h),o))}};return Or(r,t?{add:Ma("add"),set:Ma("set"),delete:Ma("delete"),clear:Ma("clear")}:{add(i){!e&&!qn(i)&&!Xs(i)&&(i=xt(i));const s=xt(this);return Ca(s).has.call(s,i)||(s.add(i),bi(s,"add",i,i)),this},set(i,s){!e&&!qn(s)&&!Xs(s)&&(s=xt(s));const o=xt(this),{has:a,get:f}=Ca(o);let c=a.call(o,i);c||(i=xt(i),c=a.call(o,i));const u=f.call(o,i);return o.set(i,s),c?ps(s,u)&&bi(o,"set",i,s):bi(o,"add",i,s),this},delete(i){const s=xt(this),{has:o,get:a}=Ca(s);let f=o.call(s,i);f||(i=xt(i),f=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return f&&bi(s,"delete",i,void 0),c},clear(){const i=xt(this),s=i.size!==0,o=i.clear();return s&&bi(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=R3(i,t,e)}),r}function Xh(t,e){const r=N3(t,e);return(n,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(yt(r,i)&&i in n?r:n,i,s)}const P3={get:Xh(!1,!1)},F3={get:Xh(!1,!0)},B3={get:Xh(!0,!1)};const Nv=new WeakMap,Pv=new WeakMap,Fv=new WeakMap,L3=new WeakMap;function $3(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function k3(t){return t.__v_skip||!Object.isExtensible(t)?0:$3(h3(t))}function Yh(t){return Xs(t)?t:Zh(t,!1,O3,P3,Nv)}function U3(t){return Zh(t,!1,T3,F3,Pv)}function Bv(t){return Zh(t,!0,D3,B3,Fv)}function Zh(t,e,r,n,i){if(!kt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=k3(t);if(o===0)return t;const a=new Proxy(t,o===2?n:r);return i.set(t,a),a}function Vo(t){return Xs(t)?Vo(t.__v_raw):!!(t&&t.__v_isReactive)}function Xs(t){return!!(t&&t.__v_isReadonly)}function qn(t){return!!(t&&t.__v_isShallow)}function Jh(t){return t?!!t.__v_raw:!1}function xt(t){const e=t&&t.__v_raw;return e?xt(e):t}function q3(t){return!yt(t,"__v_skip")&&Object.isExtensible(t)&&yv(t,"__v_skip",!0),t}const Yr=t=>kt(t)?Yh(t):t,Wu=t=>kt(t)?Bv(t):t;function Cr(t){return t?t.__v_isRef===!0:!1}function z3(t){return Cr(t)?t.value:t}const V3={get:(t,e,r)=>e==="__v_raw"?t:z3(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return Cr(i)&&!Cr(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function Lv(t){return Vo(t)?t:new Proxy(t,V3)}class j3{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Mv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Zo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Mt!==this)return Ev(this,!0),!0}get value(){const e=this.dep.track();return Iv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function H3(t,e,r=!1){let n,i;return qe(t)?n=t:(n=t.get,i=t.set),new j3(n,i,r)}const Oa={},yf=new WeakMap;let ss;function K3(t,e=!1,r=ss){if(r){let n=yf.get(r);n||yf.set(r,n=[]),n.push(t)}}function W3(t,e,r=It){const{immediate:n,deep:i,once:s,scheduler:o,augmentJob:a,call:f}=r,c=T=>i?T:qn(T)||i===!1||i===0?mi(T,1):mi(T);let u,h,d,p,v=!1,x=!1;if(Cr(t)?(h=()=>t.value,v=qn(t)):Vo(t)?(h=()=>c(t),v=!0):$e(t)?(x=!0,v=t.some(T=>Vo(T)||qn(T)),h=()=>t.map(T=>{if(Cr(T))return T.value;if(Vo(T))return c(T);if(qe(T))return f?f(T,2):T()})):qe(t)?e?h=f?()=>f(t,2):t:h=()=>{if(d){ji();try{d()}finally{Hi()}}const T=ss;ss=u;try{return f?f(t,3,[p]):t(p)}finally{ss=T}}:h=Un,e&&i){const T=h,P=i===!0?1/0:i;h=()=>mi(T(),P)}const C=x3(),O=()=>{u.stop(),C&&C.active&&qh(C.effects,u)};if(s&&e){const T=e;e=(...P)=>{T(...P),O()}}let M=x?new Array(t.length).fill(Oa):Oa;const R=T=>{if(!(!(u.flags&1)||!u.dirty&&!T))if(e){const P=u.run();if(i||v||(x?P.some((N,$)=>ps(N,M[$])):ps(P,M))){d&&d();const N=ss;ss=u;try{const $=[P,M===Oa?void 0:x&&M[0]===Oa?[]:M,p];f?f(e,3,$):e(...$),M=P}finally{ss=N}}}else u.run()};return a&&a(R),u=new xv(h),u.scheduler=o?()=>o(R,!1):R,p=T=>K3(T,!1,u),d=u.onStop=()=>{const T=yf.get(u);if(T){if(f)f(T,4);else for(const P of T)P();yf.delete(u)}},e?n?R(!0):M=u.run():o?o(R.bind(null,!0),!0):u.run(),O.pause=u.pause.bind(u),O.resume=u.resume.bind(u),O.stop=O,O}function mi(t,e=1/0,r){if(e<=0||!kt(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Cr(t))mi(t.value,e,r);else if($e(t))for(let n=0;n<t.length;n++)mi(t[n],e,r);else if(dv(t)||js(t))t.forEach(n=>{mi(n,e,r)});else if(gv(t)){for(const n in t)mi(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&mi(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function aa(t,e,r,n){try{return n?t(...n):t()}catch(i){zf(i,e,r)}}function Hn(t,e,r,n){if(qe(t)){const i=aa(t,e,r,n);return i&&pv(i)&&i.catch(s=>{zf(s,e,r)}),i}if($e(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Hn(t[s],e,r,n));return i}}function zf(t,e,r,n=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||It;if(e){let a=e.parent;const f=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,f,c)===!1)return}a=a.parent}if(s){ji(),aa(s,null,10,[t,f,c]),Hi();return}}G3(t,r,i,n,o)}function G3(t,e,r,n=!0,i=!1){if(i)throw t;console.error(t)}const Sr=[];let Bn=-1;const Hs=[];let Ti=null,Bs=0;const $v=Promise.resolve();let bf=null;function X3(t){const e=bf||$v;return t?e.then(this?t.bind(this):t):e}function Y3(t){let e=Bn+1,r=Sr.length;for(;e<r;){const n=e+r>>>1,i=Sr[n],s=Qo(i);s<t||s===t&&i.flags&2?e=n+1:r=n}return e}function Qh(t){if(!(t.flags&1)){const e=Qo(t),r=Sr[Sr.length-1];!r||!(t.flags&2)&&e>=Qo(r)?Sr.push(t):Sr.splice(Y3(e),0,t),t.flags|=1,kv()}}function kv(){bf||(bf=$v.then(qv))}function Z3(t){$e(t)?Hs.push(...t):Ti&&t.id===-1?Ti.splice(Bs+1,0,t):t.flags&1||(Hs.push(t),t.flags|=1),kv()}function Ql(t,e,r=Bn+1){for(;r<Sr.length;r++){const n=Sr[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Sr.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Uv(t){if(Hs.length){const e=[...new Set(Hs)].sort((r,n)=>Qo(r)-Qo(n));if(Hs.length=0,Ti){Ti.push(...e);return}for(Ti=e,Bs=0;Bs<Ti.length;Bs++){const r=Ti[Bs];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Ti=null,Bs=0}}const Qo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function qv(t){try{for(Bn=0;Bn<Sr.length;Bn++){const e=Sr[Bn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),aa(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Bn<Sr.length;Bn++){const e=Sr[Bn];e&&(e.flags&=-2)}Bn=-1,Sr.length=0,Uv(),bf=null,(Sr.length||Hs.length)&&qv()}}let Zr=null,zv=null;function mf(t){const e=Zr;return Zr=t,zv=t&&t.type.__scopeId||null,e}function J3(t,e=Zr,r){if(!e||t._n)return t;const n=(...i)=>{n._d&&c0(-1);const s=mf(e);let o;try{o=t(...i)}finally{mf(s),n._d&&c0(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Vv(t,e){if(Zr===null)return t;const r=Kf(Zr),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,f=It]=e[i];s&&(qe(s)&&(s={mounted:s,updated:s}),s.deep&&mi(o),n.push({dir:s,instance:r,value:o,oldValue:void 0,arg:a,modifiers:f}))}return t}function Yi(t,e,r,n){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let f=a.dir[n];f&&(ji(),Hn(f,r,8,[t.el,a,t,e]),Hi())}}const Q3=Symbol("_vte"),eb=t=>t.__isTeleport;function el(t,e){t.shapeFlag&6&&t.component?(t.transition=e,el(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function jv(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function wf(t,e,r,n,i=!1){if($e(t)){t.forEach((v,x)=>wf(v,e&&($e(e)?e[x]:e),r,n,i));return}if(jo(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&wf(t,e,r,n.component.subTree);return}const s=n.shapeFlag&4?Kf(n.component):n.el,o=i?null:s,{i:a,r:f}=t,c=e&&e.r,u=a.refs===It?a.refs={}:a.refs,h=a.setupState,d=xt(h),p=h===It?()=>!1:v=>yt(d,v);if(c!=null&&c!==f&&(Yt(c)?(u[c]=null,p(c)&&(h[c]=null)):Cr(c)&&(c.value=null)),qe(f))aa(f,a,12,[o,u]);else{const v=Yt(f),x=Cr(f);if(v||x){const C=()=>{if(t.f){const O=v?p(f)?h[f]:u[f]:f.value;i?$e(O)&&qh(O,s):$e(O)?O.includes(s)||O.push(s):v?(u[f]=[s],p(f)&&(h[f]=u[f])):(f.value=[s],t.k&&(u[t.k]=f.value))}else v?(u[f]=o,p(f)&&(h[f]=o)):x&&(f.value=o,t.k&&(u[t.k]=o))};o?(C.id=-1,Hr(C,r)):C()}}}qf().requestIdleCallback;qf().cancelIdleCallback;const jo=t=>!!t.type.__asyncLoader,Hv=t=>t.type.__isKeepAlive;function tb(t,e){Kv(t,"a",e)}function rb(t,e){Kv(t,"da",e)}function Kv(t,e,r=mr){const n=t.__wdc||(t.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Vf(e,n,r),r){let i=r.parent;for(;i&&i.parent;)Hv(i.parent.vnode)&&nb(n,e,r,i),i=i.parent}}function nb(t,e,r,n){const i=Vf(e,t,n,!0);Wv(()=>{qh(n[e],i)},r)}function Vf(t,e,r=mr,n=!1){if(r){const i=r[t]||(r[t]=[]),s=e.__weh||(e.__weh=(...o)=>{ji();const a=fa(r),f=Hn(e,r,t,o);return a(),Hi(),f});return n?i.unshift(s):i.push(s),s}}const xi=t=>(e,r=mr)=>{(!ta||t==="sp")&&Vf(t,(...n)=>e(...n),r)},ib=xi("bm"),sb=xi("m"),ob=xi("bu"),ab=xi("u"),fb=xi("bum"),Wv=xi("um"),cb=xi("sp"),ub=xi("rtg"),hb=xi("rtc");function lb(t,e=mr){Vf("ec",t,e)}const db="components";function pb(t,e){return gb(db,t,!0,e)||t}const vb=Symbol.for("v-ndc");function gb(t,e,r=!0,n=!1){const i=Zr||mr;if(i){const s=i.type;{const a=im(s,!1);if(a&&(a===e||a===hn(e)||a===Uf(hn(e))))return s}const o=e0(i[t]||s[t],e)||e0(i.appContext[t],e);return!o&&n?s:o}}function e0(t,e){return t&&(t[e]||t[hn(e)]||t[Uf(hn(e))])}const Gu=t=>t?vg(t)?Kf(t):Gu(t.parent):null,Ho=Or(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gu(t.parent),$root:t=>Gu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Xv(t),$forceUpdate:t=>t.f||(t.f=()=>{Qh(t.update)}),$nextTick:t=>t.n||(t.n=X3.bind(t.proxy)),$watch:t=>$b.bind(t)}),bc=(t,e)=>t!==It&&!t.__isScriptSetup&&yt(t,e),yb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:o,type:a,appContext:f}=t;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return r[e];case 3:return s[e]}else{if(bc(n,e))return o[e]=1,n[e];if(i!==It&&yt(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&yt(c,e))return o[e]=3,s[e];if(r!==It&&yt(r,e))return o[e]=4,r[e];Xu&&(o[e]=0)}}const u=Ho[e];let h,d;if(u)return e==="$attrs"&&br(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(r!==It&&yt(r,e))return o[e]=4,r[e];if(d=f.config.globalProperties,yt(d,e))return d[e]},set({_:t},e,r){const{data:n,setupState:i,ctx:s}=t;return bc(i,e)?(i[e]=r,!0):n!==It&&yt(n,e)?(n[e]=r,!0):yt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:i,propsOptions:s}},o){let a;return!!r[o]||t!==It&&yt(t,o)||bc(e,o)||(a=s[0])&&yt(a,o)||yt(n,o)||yt(Ho,o)||yt(i.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:yt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function t0(t){return $e(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Xu=!0;function bb(t){const e=Xv(t),r=t.proxy,n=t.ctx;Xu=!1,e.beforeCreate&&r0(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:f,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:p,updated:v,activated:x,deactivated:C,beforeDestroy:O,beforeUnmount:M,destroyed:R,unmounted:T,render:P,renderTracked:N,renderTriggered:$,errorCaptured:U,serverPrefetch:V,expose:H,inheritAttrs:B,components:y,directives:b,filters:l}=e;if(c&&mb(c,n,null),o)for(const E in o){const I=o[E];qe(I)&&(n[E]=I.bind(r))}if(i){const E=i.call(r,r);kt(E)&&(t.data=Yh(E))}if(Xu=!0,s)for(const E in s){const I=s[E],A=qe(I)?I.bind(r,r):qe(I.get)?I.get.bind(r,r):Un,m=!qe(I)&&qe(I.set)?I.set.bind(r):Un,S=om({get:A,set:m});Object.defineProperty(n,E,{enumerable:!0,configurable:!0,get:()=>S.value,set:_=>S.value=_})}if(a)for(const E in a)Gv(a[E],n,r,E);if(f){const E=qe(f)?f.call(r):f;Reflect.ownKeys(E).forEach(I=>{Sb(I,E[I])})}u&&r0(u,t,"c");function w(E,I){$e(I)?I.forEach(A=>E(A.bind(r))):I&&E(I.bind(r))}if(w(ib,h),w(sb,d),w(ob,p),w(ab,v),w(tb,x),w(rb,C),w(lb,U),w(hb,N),w(ub,$),w(fb,M),w(Wv,T),w(cb,V),$e(H))if(H.length){const E=t.exposed||(t.exposed={});H.forEach(I=>{Object.defineProperty(E,I,{get:()=>r[I],set:A=>r[I]=A})})}else t.exposed||(t.exposed={});P&&t.render===Un&&(t.render=P),B!=null&&(t.inheritAttrs=B),y&&(t.components=y),b&&(t.directives=b),V&&jv(t)}function mb(t,e,r=Un){$e(t)&&(t=Yu(t));for(const n in t){const i=t[n];let s;kt(i)?"default"in i?s=Xa(i.from||n,i.default,!0):s=Xa(i.from||n):s=Xa(i),Cr(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[n]=s}}function r0(t,e,r){Hn($e(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function Gv(t,e,r,n){let i=n.includes(".")?cg(r,n):()=>r[n];if(Yt(t)){const s=e[t];qe(s)&&wc(i,s)}else if(qe(t))wc(i,t.bind(r));else if(kt(t))if($e(t))t.forEach(s=>Gv(s,e,r,n));else{const s=qe(t.handler)?t.handler.bind(r):e[t.handler];qe(s)&&wc(i,s,t)}}function Xv(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let f;return a?f=a:!i.length&&!r&&!n?f=e:(f={},i.length&&i.forEach(c=>xf(f,c,o,!0)),xf(f,e,o)),kt(e)&&s.set(e,f),f}function xf(t,e,r,n=!1){const{mixins:i,extends:s}=e;s&&xf(t,s,r,!0),i&&i.forEach(o=>xf(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const a=wb[o]||r&&r[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const wb={data:n0,props:i0,emits:i0,methods:To,computed:To,beforeCreate:Ar,created:Ar,beforeMount:Ar,mounted:Ar,beforeUpdate:Ar,updated:Ar,beforeDestroy:Ar,beforeUnmount:Ar,destroyed:Ar,unmounted:Ar,activated:Ar,deactivated:Ar,errorCaptured:Ar,serverPrefetch:Ar,components:To,directives:To,watch:_b,provide:n0,inject:xb};function n0(t,e){return e?t?function(){return Or(qe(t)?t.call(this,this):t,qe(e)?e.call(this,this):e)}:e:t}function xb(t,e){return To(Yu(t),Yu(e))}function Yu(t){if($e(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Ar(t,e){return t?[...new Set([].concat(t,e))]:e}function To(t,e){return t?Or(Object.create(null),t,e):e}function i0(t,e){return t?$e(t)&&$e(e)?[...new Set([...t,...e])]:Or(Object.create(null),t0(t),t0(e??{})):e}function _b(t,e){if(!t)return e;if(!e)return t;const r=Or(Object.create(null),t);for(const n in e)r[n]=Ar(t[n],e[n]);return r}function Yv(){return{app:null,config:{isNativeTag:c3,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Eb=0;function Ab(t,e){return function(n,i=null){qe(n)||(n=Or({},n)),i!=null&&!kt(i)&&(i=null);const s=Yv(),o=new WeakSet,a=[];let f=!1;const c=s.app={_uid:Eb++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:am,get config(){return s.config},set config(u){},use(u,...h){return o.has(u)||(u&&qe(u.install)?(o.add(u),u.install(c,...h)):qe(u)&&(o.add(u),u(c,...h))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,h){return h?(s.components[u]=h,c):s.components[u]},directive(u,h){return h?(s.directives[u]=h,c):s.directives[u]},mount(u,h,d){if(!f){const p=c._ceVNode||zn(n,i);return p.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),t(p,u,d),f=!0,c._container=u,u.__vue_app__=c,Kf(p.component)}},onUnmount(u){a.push(u)},unmount(){f&&(Hn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return s.provides[u]=h,c},runWithContext(u){const h=Ks;Ks=c;try{return u()}finally{Ks=h}}};return c}}let Ks=null;function Sb(t,e){if(mr){let r=mr.provides;const n=mr.parent&&mr.parent.provides;n===r&&(r=mr.provides=Object.create(n)),r[t]=e}}function Xa(t,e,r=!1){const n=mr||Zr;if(n||Ks){const i=Ks?Ks._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return r&&qe(e)?e.call(n&&n.proxy):e}}const Zv={},Jv=()=>Object.create(Zv),Qv=t=>Object.getPrototypeOf(t)===Zv;function Ib(t,e,r,n=!1){const i={},s=Jv();t.propsDefaults=Object.create(null),eg(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);r?t.props=n?i:U3(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function Cb(t,e,r,n){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=xt(i),[f]=t.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(jf(t.emitsOptions,d))continue;const p=e[d];if(f)if(yt(s,d))p!==s[d]&&(s[d]=p,c=!0);else{const v=hn(d);i[v]=Zu(f,a,v,p,t,!1)}else p!==s[d]&&(s[d]=p,c=!0)}}}else{eg(t,e,i,s)&&(c=!0);let u;for(const h in a)(!e||!yt(e,h)&&((u=_s(h))===h||!yt(e,u)))&&(f?r&&(r[h]!==void 0||r[u]!==void 0)&&(i[h]=Zu(f,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!yt(e,h))&&(delete s[h],c=!0)}c&&bi(t.attrs,"set","")}function eg(t,e,r,n){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let f in e){if(Uo(f))continue;const c=e[f];let u;i&&yt(i,u=hn(f))?!s||!s.includes(u)?r[u]=c:(a||(a={}))[u]=c:jf(t.emitsOptions,f)||(!(f in n)||c!==n[f])&&(n[f]=c,o=!0)}if(s){const f=xt(r),c=a||It;for(let u=0;u<s.length;u++){const h=s[u];r[h]=Zu(i,f,h,c[h],t,!yt(c,h))}}return o}function Zu(t,e,r,n,i,s){const o=t[r];if(o!=null){const a=yt(o,"default");if(a&&n===void 0){const f=o.default;if(o.type!==Function&&!o.skipFactory&&qe(f)){const{propsDefaults:c}=i;if(r in c)n=c[r];else{const u=fa(i);n=c[r]=f.call(null,e),u()}}else n=f;i.ce&&i.ce._setProp(r,n)}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===_s(r))&&(n=!0))}return n}const Mb=new WeakMap;function tg(t,e,r=!1){const n=r?Mb:e.propsCache,i=n.get(t);if(i)return i;const s=t.props,o={},a=[];let f=!1;if(!qe(t)){const u=h=>{f=!0;const[d,p]=tg(h,e,!0);Or(o,d),p&&a.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!f)return kt(t)&&n.set(t,Vs),Vs;if($e(s))for(let u=0;u<s.length;u++){const h=hn(s[u]);s0(h)&&(o[h]=It)}else if(s)for(const u in s){const h=hn(u);if(s0(h)){const d=s[u],p=o[h]=$e(d)||qe(d)?{type:d}:Or({},d),v=p.type;let x=!1,C=!0;if($e(v))for(let O=0;O<v.length;++O){const M=v[O],R=qe(M)&&M.name;if(R==="Boolean"){x=!0;break}else R==="String"&&(C=!1)}else x=qe(v)&&v.name==="Boolean";p[0]=x,p[1]=C,(x||yt(p,"default"))&&a.push(h)}}const c=[o,a];return kt(t)&&n.set(t,c),c}function s0(t){return t[0]!=="$"&&!Uo(t)}const rg=t=>t[0]==="_"||t==="$stable",tl=t=>$e(t)?t.map($n):[$n(t)],Ob=(t,e,r)=>{if(e._n)return e;const n=J3((...i)=>tl(e(...i)),r);return n._c=!1,n},ng=(t,e,r)=>{const n=t._ctx;for(const i in t){if(rg(i))continue;const s=t[i];if(qe(s))e[i]=Ob(i,s,n);else if(s!=null){const o=tl(s);e[i]=()=>o}}},ig=(t,e)=>{const r=tl(e);t.slots.default=()=>r},sg=(t,e,r)=>{for(const n in e)(r||n!=="_")&&(t[n]=e[n])},Db=(t,e,r)=>{const n=t.slots=Jv();if(t.vnode.shapeFlag&32){const i=e._;i?(sg(n,e,r),r&&yv(n,"_",i,!0)):ng(e,n)}else e&&ig(t,e)},Tb=(t,e,r)=>{const{vnode:n,slots:i}=t;let s=!0,o=It;if(n.shapeFlag&32){const a=e._;a?r&&a===1?s=!1:sg(i,e,r):(s=!e.$stable,ng(e,i)),o=e}else e&&(ig(t,e),o={default:1});if(s)for(const a in i)!rg(a)&&o[a]==null&&delete i[a]},Hr=Hb;function Rb(t){return Nb(t)}function Nb(t,e){const r=qf();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:o,createText:a,createComment:f,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:p=Un,insertStaticContent:v}=t,x=(L,z,K,X=null,te=null,re=null,ne=void 0,oe=null,se=!!z.dynamicChildren)=>{if(L===z)return;L&&!po(L,z)&&(X=G(L),_(L,te,re,!0),L=null),z.patchFlag===-2&&(se=!1,z.dynamicChildren=null);const{type:Q,ref:le,shapeFlag:fe}=z;switch(Q){case Hf:C(L,z,K,X);break;case ys:O(L,z,K,X);break;case xc:L==null&&M(z,K,X,ne);break;case gi:y(L,z,K,X,te,re,ne,oe,se);break;default:fe&1?P(L,z,K,X,te,re,ne,oe,se):fe&6?b(L,z,K,X,te,re,ne,oe,se):(fe&64||fe&128)&&Q.process(L,z,K,X,te,re,ne,oe,se,ue)}le!=null&&te&&wf(le,L&&L.ref,re,z||L,!z)},C=(L,z,K,X)=>{if(L==null)n(z.el=a(z.children),K,X);else{const te=z.el=L.el;z.children!==L.children&&c(te,z.children)}},O=(L,z,K,X)=>{L==null?n(z.el=f(z.children||""),K,X):z.el=L.el},M=(L,z,K,X)=>{[L.el,L.anchor]=v(L.children,z,K,X,L.el,L.anchor)},R=({el:L,anchor:z},K,X)=>{let te;for(;L&&L!==z;)te=d(L),n(L,K,X),L=te;n(z,K,X)},T=({el:L,anchor:z})=>{let K;for(;L&&L!==z;)K=d(L),i(L),L=K;i(z)},P=(L,z,K,X,te,re,ne,oe,se)=>{z.type==="svg"?ne="svg":z.type==="math"&&(ne="mathml"),L==null?N(z,K,X,te,re,ne,oe,se):V(L,z,te,re,ne,oe,se)},N=(L,z,K,X,te,re,ne,oe)=>{let se,Q;const{props:le,shapeFlag:fe,transition:ae,dirs:pe}=L;if(se=L.el=o(L.type,re,le&&le.is,le),fe&8?u(se,L.children):fe&16&&U(L.children,se,null,X,te,mc(L,re),ne,oe),pe&&Yi(L,null,X,"created"),$(se,L,L.scopeId,ne,X),le){for(const ve in le)ve!=="value"&&!Uo(ve)&&s(se,ve,null,le[ve],re,X);"value"in le&&s(se,"value",null,le.value,re),(Q=le.onVnodeBeforeMount)&&Dn(Q,X,L)}pe&&Yi(L,null,X,"beforeMount");const me=Pb(te,ae);me&&ae.beforeEnter(se),n(se,z,K),((Q=le&&le.onVnodeMounted)||me||pe)&&Hr(()=>{Q&&Dn(Q,X,L),me&&ae.enter(se),pe&&Yi(L,null,X,"mounted")},te)},$=(L,z,K,X,te)=>{if(K&&p(L,K),X)for(let re=0;re<X.length;re++)p(L,X[re]);if(te){let re=te.subTree;if(z===re||hg(re.type)&&(re.ssContent===z||re.ssFallback===z)){const ne=te.vnode;$(L,ne,ne.scopeId,ne.slotScopeIds,te.parent)}}},U=(L,z,K,X,te,re,ne,oe,se=0)=>{for(let Q=se;Q<L.length;Q++){const le=L[Q]=oe?Ri(L[Q]):$n(L[Q]);x(null,le,z,K,X,te,re,ne,oe)}},V=(L,z,K,X,te,re,ne)=>{const oe=z.el=L.el;let{patchFlag:se,dynamicChildren:Q,dirs:le}=z;se|=L.patchFlag&16;const fe=L.props||It,ae=z.props||It;let pe;if(K&&Zi(K,!1),(pe=ae.onVnodeBeforeUpdate)&&Dn(pe,K,z,L),le&&Yi(z,L,K,"beforeUpdate"),K&&Zi(K,!0),(fe.innerHTML&&ae.innerHTML==null||fe.textContent&&ae.textContent==null)&&u(oe,""),Q?H(L.dynamicChildren,Q,oe,K,X,mc(z,te),re):ne||I(L,z,oe,null,K,X,mc(z,te),re,!1),se>0){if(se&16)B(oe,fe,ae,K,te);else if(se&2&&fe.class!==ae.class&&s(oe,"class",null,ae.class,te),se&4&&s(oe,"style",fe.style,ae.style,te),se&8){const me=z.dynamicProps;for(let ve=0;ve<me.length;ve++){const xe=me[ve],Fe=fe[xe],be=ae[xe];(be!==Fe||xe==="value")&&s(oe,xe,Fe,be,te,K)}}se&1&&L.children!==z.children&&u(oe,z.children)}else!ne&&Q==null&&B(oe,fe,ae,K,te);((pe=ae.onVnodeUpdated)||le)&&Hr(()=>{pe&&Dn(pe,K,z,L),le&&Yi(z,L,K,"updated")},X)},H=(L,z,K,X,te,re,ne)=>{for(let oe=0;oe<z.length;oe++){const se=L[oe],Q=z[oe],le=se.el&&(se.type===gi||!po(se,Q)||se.shapeFlag&70)?h(se.el):K;x(se,Q,le,null,X,te,re,ne,!0)}},B=(L,z,K,X,te)=>{if(z!==K){if(z!==It)for(const re in z)!Uo(re)&&!(re in K)&&s(L,re,z[re],null,te,X);for(const re in K){if(Uo(re))continue;const ne=K[re],oe=z[re];ne!==oe&&re!=="value"&&s(L,re,oe,ne,te,X)}"value"in K&&s(L,"value",z.value,K.value,te)}},y=(L,z,K,X,te,re,ne,oe,se)=>{const Q=z.el=L?L.el:a(""),le=z.anchor=L?L.anchor:a("");let{patchFlag:fe,dynamicChildren:ae,slotScopeIds:pe}=z;pe&&(oe=oe?oe.concat(pe):pe),L==null?(n(Q,K,X),n(le,K,X),U(z.children||[],K,le,te,re,ne,oe,se)):fe>0&&fe&64&&ae&&L.dynamicChildren?(H(L.dynamicChildren,ae,K,te,re,ne,oe),(z.key!=null||te&&z===te.subTree)&&og(L,z,!0)):I(L,z,K,le,te,re,ne,oe,se)},b=(L,z,K,X,te,re,ne,oe,se)=>{z.slotScopeIds=oe,L==null?z.shapeFlag&512?te.ctx.activate(z,K,X,ne,se):l(z,K,X,te,re,ne,se):g(L,z,se)},l=(L,z,K,X,te,re,ne)=>{const oe=L.component=Qb(L,X,te);if(Hv(L)&&(oe.ctx.renderer=ue),em(oe,!1,ne),oe.asyncDep){if(te&&te.registerDep(oe,w,ne),!L.el){const se=oe.subTree=zn(ys);O(null,se,z,K)}}else w(oe,L,z,K,te,re,ne)},g=(L,z,K)=>{const X=z.component=L.component;if(Vb(L,z,K))if(X.asyncDep&&!X.asyncResolved){E(X,z,K);return}else X.next=z,X.update();else z.el=L.el,X.vnode=z},w=(L,z,K,X,te,re,ne)=>{const oe=()=>{if(L.isMounted){let{next:fe,bu:ae,u:pe,parent:me,vnode:ve}=L;{const Ue=ag(L);if(Ue){fe&&(fe.el=ve.el,E(L,fe,ne)),Ue.asyncDep.then(()=>{L.isUnmounted||oe()});return}}let xe=fe,Fe;Zi(L,!1),fe?(fe.el=ve.el,E(L,fe,ne)):fe=ve,ae&&Wa(ae),(Fe=fe.props&&fe.props.onVnodeBeforeUpdate)&&Dn(Fe,me,fe,ve),Zi(L,!0);const be=a0(L),ke=L.subTree;L.subTree=be,x(ke,be,h(ke.el),G(ke),L,te,re),fe.el=be.el,xe===null&&jb(L,be.el),pe&&Hr(pe,te),(Fe=fe.props&&fe.props.onVnodeUpdated)&&Hr(()=>Dn(Fe,me,fe,ve),te)}else{let fe;const{el:ae,props:pe}=z,{bm:me,m:ve,parent:xe,root:Fe,type:be}=L,ke=jo(z);Zi(L,!1),me&&Wa(me),!ke&&(fe=pe&&pe.onVnodeBeforeMount)&&Dn(fe,xe,z),Zi(L,!0);{Fe.ce&&Fe.ce._injectChildStyle(be);const Ue=L.subTree=a0(L);x(null,Ue,K,X,L,te,re),z.el=Ue.el}if(ve&&Hr(ve,te),!ke&&(fe=pe&&pe.onVnodeMounted)){const Ue=z;Hr(()=>Dn(fe,xe,Ue),te)}(z.shapeFlag&256||xe&&jo(xe.vnode)&&xe.vnode.shapeFlag&256)&&L.a&&Hr(L.a,te),L.isMounted=!0,z=K=X=null}};L.scope.on();const se=L.effect=new xv(oe);L.scope.off();const Q=L.update=se.run.bind(se),le=L.job=se.runIfDirty.bind(se);le.i=L,le.id=L.uid,se.scheduler=()=>Qh(le),Zi(L,!0),Q()},E=(L,z,K)=>{z.component=L;const X=L.vnode.props;L.vnode=z,L.next=null,Cb(L,z.props,X,K),Tb(L,z.children,K),ji(),Ql(L),Hi()},I=(L,z,K,X,te,re,ne,oe,se=!1)=>{const Q=L&&L.children,le=L?L.shapeFlag:0,fe=z.children,{patchFlag:ae,shapeFlag:pe}=z;if(ae>0){if(ae&128){m(Q,fe,K,X,te,re,ne,oe,se);return}else if(ae&256){A(Q,fe,K,X,te,re,ne,oe,se);return}}pe&8?(le&16&&j(Q,te,re),fe!==Q&&u(K,fe)):le&16?pe&16?m(Q,fe,K,X,te,re,ne,oe,se):j(Q,te,re,!0):(le&8&&u(K,""),pe&16&&U(fe,K,X,te,re,ne,oe,se))},A=(L,z,K,X,te,re,ne,oe,se)=>{L=L||Vs,z=z||Vs;const Q=L.length,le=z.length,fe=Math.min(Q,le);let ae;for(ae=0;ae<fe;ae++){const pe=z[ae]=se?Ri(z[ae]):$n(z[ae]);x(L[ae],pe,K,null,te,re,ne,oe,se)}Q>le?j(L,te,re,!0,!1,fe):U(z,K,X,te,re,ne,oe,se,fe)},m=(L,z,K,X,te,re,ne,oe,se)=>{let Q=0;const le=z.length;let fe=L.length-1,ae=le-1;for(;Q<=fe&&Q<=ae;){const pe=L[Q],me=z[Q]=se?Ri(z[Q]):$n(z[Q]);if(po(pe,me))x(pe,me,K,null,te,re,ne,oe,se);else break;Q++}for(;Q<=fe&&Q<=ae;){const pe=L[fe],me=z[ae]=se?Ri(z[ae]):$n(z[ae]);if(po(pe,me))x(pe,me,K,null,te,re,ne,oe,se);else break;fe--,ae--}if(Q>fe){if(Q<=ae){const pe=ae+1,me=pe<le?z[pe].el:X;for(;Q<=ae;)x(null,z[Q]=se?Ri(z[Q]):$n(z[Q]),K,me,te,re,ne,oe,se),Q++}}else if(Q>ae)for(;Q<=fe;)_(L[Q],te,re,!0),Q++;else{const pe=Q,me=Q,ve=new Map;for(Q=me;Q<=ae;Q++){const Be=z[Q]=se?Ri(z[Q]):$n(z[Q]);Be.key!=null&&ve.set(Be.key,Q)}let xe,Fe=0;const be=ae-me+1;let ke=!1,Ue=0;const Ae=new Array(be);for(Q=0;Q<be;Q++)Ae[Q]=0;for(Q=pe;Q<=fe;Q++){const Be=L[Q];if(Fe>=be){_(Be,te,re,!0);continue}let _e;if(Be.key!=null)_e=ve.get(Be.key);else for(xe=me;xe<=ae;xe++)if(Ae[xe-me]===0&&po(Be,z[xe])){_e=xe;break}_e===void 0?_(Be,te,re,!0):(Ae[_e-me]=Q+1,_e>=Ue?Ue=_e:ke=!0,x(Be,z[_e],K,null,te,re,ne,oe,se),Fe++)}const We=ke?Fb(Ae):Vs;for(xe=We.length-1,Q=be-1;Q>=0;Q--){const Be=me+Q,_e=z[Be],Ge=Be+1<le?z[Be+1].el:X;Ae[Q]===0?x(null,_e,K,Ge,te,re,ne,oe,se):ke&&(xe<0||Q!==We[xe]?S(_e,K,Ge,2):xe--)}}},S=(L,z,K,X,te=null)=>{const{el:re,type:ne,transition:oe,children:se,shapeFlag:Q}=L;if(Q&6){S(L.component.subTree,z,K,X);return}if(Q&128){L.suspense.move(z,K,X);return}if(Q&64){ne.move(L,z,K,ue);return}if(ne===gi){n(re,z,K);for(let fe=0;fe<se.length;fe++)S(se[fe],z,K,X);n(L.anchor,z,K);return}if(ne===xc){R(L,z,K);return}if(X!==2&&Q&1&&oe)if(X===0)oe.beforeEnter(re),n(re,z,K),Hr(()=>oe.enter(re),te);else{const{leave:fe,delayLeave:ae,afterLeave:pe}=oe,me=()=>n(re,z,K),ve=()=>{fe(re,()=>{me(),pe&&pe()})};ae?ae(re,me,ve):ve()}else n(re,z,K)},_=(L,z,K,X=!1,te=!1)=>{const{type:re,props:ne,ref:oe,children:se,dynamicChildren:Q,shapeFlag:le,patchFlag:fe,dirs:ae,cacheIndex:pe}=L;if(fe===-2&&(te=!1),oe!=null&&wf(oe,null,K,L,!0),pe!=null&&(z.renderCache[pe]=void 0),le&256){z.ctx.deactivate(L);return}const me=le&1&&ae,ve=!jo(L);let xe;if(ve&&(xe=ne&&ne.onVnodeBeforeUnmount)&&Dn(xe,z,L),le&6)D(L.component,K,X);else{if(le&128){L.suspense.unmount(K,X);return}me&&Yi(L,null,z,"beforeUnmount"),le&64?L.type.remove(L,z,K,ue,X):Q&&!Q.hasOnce&&(re!==gi||fe>0&&fe&64)?j(Q,z,K,!1,!0):(re===gi&&fe&384||!te&&le&16)&&j(se,z,K),X&&F(L)}(ve&&(xe=ne&&ne.onVnodeUnmounted)||me)&&Hr(()=>{xe&&Dn(xe,z,L),me&&Yi(L,null,z,"unmounted")},K)},F=L=>{const{type:z,el:K,anchor:X,transition:te}=L;if(z===gi){Y(K,X);return}if(z===xc){T(L);return}const re=()=>{i(K),te&&!te.persisted&&te.afterLeave&&te.afterLeave()};if(L.shapeFlag&1&&te&&!te.persisted){const{leave:ne,delayLeave:oe}=te,se=()=>ne(K,re);oe?oe(L.el,re,se):se()}else re()},Y=(L,z)=>{let K;for(;L!==z;)K=d(L),i(L),L=K;i(z)},D=(L,z,K)=>{const{bum:X,scope:te,job:re,subTree:ne,um:oe,m:se,a:Q}=L;o0(se),o0(Q),X&&Wa(X),te.stop(),re&&(re.flags|=8,_(ne,L,z,K)),oe&&Hr(oe,z),Hr(()=>{L.isUnmounted=!0},z),z&&z.pendingBranch&&!z.isUnmounted&&L.asyncDep&&!L.asyncResolved&&L.suspenseId===z.pendingId&&(z.deps--,z.deps===0&&z.resolve())},j=(L,z,K,X=!1,te=!1,re=0)=>{for(let ne=re;ne<L.length;ne++)_(L[ne],z,K,X,te)},G=L=>{if(L.shapeFlag&6)return G(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const z=d(L.anchor||L.el),K=z&&z[Q3];return K?d(K):z};let Z=!1;const ee=(L,z,K)=>{L==null?z._vnode&&_(z._vnode,null,null,!0):x(z._vnode||null,L,z,null,null,null,K),z._vnode=L,Z||(Z=!0,Ql(),Uv(),Z=!1)},ue={p:x,um:_,m:S,r:F,mt:l,mc:U,pc:I,pbc:H,n:G,o:t};return{render:ee,hydrate:void 0,createApp:Ab(ee)}}function mc({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Zi({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Pb(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function og(t,e,r=!1){const n=t.children,i=e.children;if($e(n)&&$e(i))for(let s=0;s<n.length;s++){const o=n[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Ri(i[s]),a.el=o.el),!r&&a.patchFlag!==-2&&og(o,a)),a.type===Hf&&(a.el=o.el)}}function Fb(t){const e=t.slice(),r=[0];let n,i,s,o,a;const f=t.length;for(n=0;n<f;n++){const c=t[n];if(c!==0){if(i=r[r.length-1],t[i]<c){e[n]=i,r.push(n);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,t[r[a]]<c?s=a+1:o=a;c<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=e[o];return r}function ag(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ag(e)}function o0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Bb=Symbol.for("v-scx"),Lb=()=>Xa(Bb);function wc(t,e,r){return fg(t,e,r)}function fg(t,e,r=It){const{immediate:n,deep:i,flush:s,once:o}=r,a=Or({},r),f=e&&n||!e&&s!=="post";let c;if(ta){if(s==="sync"){const p=Lb();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!f){const p=()=>{};return p.stop=Un,p.resume=Un,p.pause=Un,p}}const u=mr;a.call=(p,v,x)=>Hn(p,u,v,x);let h=!1;s==="post"?a.scheduler=p=>{Hr(p,u&&u.suspense)}:s!=="sync"&&(h=!0,a.scheduler=(p,v)=>{v?p():Qh(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const d=W3(t,e,a);return ta&&(c?c.push(d):f&&d()),d}function $b(t,e,r){const n=this.proxy,i=Yt(t)?t.includes(".")?cg(n,t):()=>n[t]:t.bind(n,n);let s;qe(e)?s=e:(s=e.handler,r=e);const o=fa(this),a=fg(i,s.bind(n),r);return o(),a}function cg(t,e){const r=e.split(".");return()=>{let n=t;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const kb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${hn(e)}Modifiers`]||t[`${_s(e)}Modifiers`];function Ub(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||It;let i=r;const s=e.startsWith("update:"),o=s&&kb(n,e.slice(7));o&&(o.trim&&(i=r.map(u=>Yt(u)?u.trim():u)),o.number&&(i=r.map(zu)));let a,f=n[a=dc(e)]||n[a=dc(hn(e))];!f&&s&&(f=n[a=dc(_s(e))]),f&&Hn(f,t,6,i);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Hn(c,t,6,i)}}function ug(t,e,r=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!qe(t)){const f=c=>{const u=ug(c,e,!0);u&&(a=!0,Or(o,u))};!r&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!s&&!a?(kt(t)&&n.set(t,null),null):($e(s)?s.forEach(f=>o[f]=null):Or(o,s),kt(t)&&n.set(t,o),o)}function jf(t,e){return!t||!Lf(e)?!1:(e=e.slice(2).replace(/Once$/,""),yt(t,e[0].toLowerCase()+e.slice(1))||yt(t,_s(e))||yt(t,e))}function a0(t){const{type:e,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:f,render:c,renderCache:u,props:h,data:d,setupState:p,ctx:v,inheritAttrs:x}=t,C=mf(t);let O,M;try{if(r.shapeFlag&4){const T=i||n,P=T;O=$n(c.call(P,T,u,h,p,d,v)),M=a}else{const T=e;O=$n(T.length>1?T(h,{attrs:a,slots:o,emit:f}):T(h,null)),M=e.props?a:qb(a)}}catch(T){Ko.length=0,zf(T,t,1),O=zn(ys)}let R=O;if(M&&x!==!1){const T=Object.keys(M),{shapeFlag:P}=R;T.length&&P&7&&(s&&T.some(Uh)&&(M=zb(M,s)),R=Ys(R,M,!1,!0))}return r.dirs&&(R=Ys(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(r.dirs):r.dirs),r.transition&&el(R,r.transition),O=R,mf(C),O}const qb=t=>{let e;for(const r in t)(r==="class"||r==="style"||Lf(r))&&((e||(e={}))[r]=t[r]);return e},zb=(t,e)=>{const r={};for(const n in t)(!Uh(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function Vb(t,e,r){const{props:n,children:i,component:s}=t,{props:o,children:a,patchFlag:f}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&f>=0){if(f&1024)return!0;if(f&16)return n?f0(n,o,c):!!o;if(f&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==n[d]&&!jf(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?f0(n,o,c):!0:!!o;return!1}function f0(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s]&&!jf(r,s))return!0}return!1}function jb({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const hg=t=>t.__isSuspense;function Hb(t,e){e&&e.pendingBranch?$e(t)?e.effects.push(...t):e.effects.push(t):Z3(t)}const gi=Symbol.for("v-fgt"),Hf=Symbol.for("v-txt"),ys=Symbol.for("v-cmt"),xc=Symbol.for("v-stc"),Ko=[];let Jr=null;function ks(t=!1){Ko.push(Jr=t?null:[])}function Kb(){Ko.pop(),Jr=Ko[Ko.length-1]||null}let ea=1;function c0(t,e=!1){ea+=t,t<0&&Jr&&e&&(Jr.hasOnce=!0)}function lg(t){return t.dynamicChildren=ea>0?Jr||Vs:null,Kb(),ea>0&&Jr&&Jr.push(t),t}function Ro(t,e,r,n,i,s){return lg(jt(t,e,r,n,i,s,!0))}function Wb(t,e,r,n,i){return lg(zn(t,e,r,n,i,!0))}function dg(t){return t?t.__v_isVNode===!0:!1}function po(t,e){return t.type===e.type&&t.key===e.key}const pg=({key:t})=>t??null,Ya=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Yt(t)||Cr(t)||qe(t)?{i:Zr,r:t,k:e,f:!!r}:t:null);function jt(t,e=null,r=null,n=0,i=null,s=t===gi?0:1,o=!1,a=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&pg(e),ref:e&&Ya(e),scopeId:zv,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Zr};return a?(rl(f,r),s&128&&t.normalize(f)):r&&(f.shapeFlag|=Yt(r)?8:16),ea>0&&!o&&Jr&&(f.patchFlag>0||s&6)&&f.patchFlag!==32&&Jr.push(f),f}const zn=Gb;function Gb(t,e=null,r=null,n=0,i=null,s=!1){if((!t||t===vb)&&(t=ys),dg(t)){const a=Ys(t,e,!0);return r&&rl(a,r),ea>0&&!s&&Jr&&(a.shapeFlag&6?Jr[Jr.indexOf(t)]=a:Jr.push(a)),a.patchFlag=-2,a}if(sm(t)&&(t=t.__vccOpts),e){e=Xb(e);let{class:a,style:f}=e;a&&!Yt(a)&&(e.class=jh(a)),kt(f)&&(Jh(f)&&!$e(f)&&(f=Or({},f)),e.style=Vh(f))}const o=Yt(t)?1:hg(t)?128:eb(t)?64:kt(t)?4:qe(t)?2:0;return jt(t,e,r,n,i,o,s,!0)}function Xb(t){return t?Jh(t)||Qv(t)?Or({},t):t:null}function Ys(t,e,r=!1,n=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:f}=t,c=e?Yb(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&pg(c),ref:e&&e.ref?r&&s?$e(s)?s.concat(Ya(e)):[s,Ya(e)]:Ya(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==gi?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:f,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ys(t.ssContent),ssFallback:t.ssFallback&&Ys(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return f&&n&&el(u,f.clone(u)),u}function Za(t=" ",e=0){return zn(Hf,null,t,e)}function _c(t="",e=!1){return e?(ks(),Wb(ys,null,t)):zn(ys,null,t)}function $n(t){return t==null||typeof t=="boolean"?zn(ys):$e(t)?zn(gi,null,t.slice()):dg(t)?Ri(t):zn(Hf,null,String(t))}function Ri(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ys(t)}function rl(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if($e(e))r=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),rl(t,i()),i._c&&(i._d=!0));return}else{r=32;const i=e._;!i&&!Qv(e)?e._ctx=Zr:i===3&&Zr&&(Zr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else qe(e)?(e={default:e,_ctx:Zr},r=32):(e=String(e),n&64?(r=16,e=[Za(e)]):r=8);t.children=e,t.shapeFlag|=r}function Yb(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=jh([e.class,n.class]));else if(i==="style")e.style=Vh([e.style,n.style]);else if(Lf(i)){const s=e[i],o=n[i];o&&s!==o&&!($e(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=n[i])}return e}function Dn(t,e,r,n=null){Hn(t,e,7,[r,n])}const Zb=Yv();let Jb=0;function Qb(t,e,r){const n=t.type,i=(e?e.appContext:t.appContext)||Zb,s={uid:Jb++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new w3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tg(n,i),emitsOptions:ug(n,i),emit:null,emitted:null,propsDefaults:It,inheritAttrs:n.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Ub.bind(null,s),t.ce&&t.ce(s),s}let mr=null,_f,Ju;{const t=qf(),e=(r,n)=>{let i;return(i=t[r])||(i=t[r]=[]),i.push(n),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};_f=e("__VUE_INSTANCE_SETTERS__",r=>mr=r),Ju=e("__VUE_SSR_SETTERS__",r=>ta=r)}const fa=t=>{const e=mr;return _f(t),t.scope.on(),()=>{t.scope.off(),_f(e)}},u0=()=>{mr&&mr.scope.off(),_f(null)};function vg(t){return t.vnode.shapeFlag&4}let ta=!1;function em(t,e=!1,r=!1){e&&Ju(e);const{props:n,children:i}=t.vnode,s=vg(t);Ib(t,n,s,e),Db(t,i,r);const o=s?tm(t,e):void 0;return e&&Ju(!1),o}function tm(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,yb);const{setup:n}=r;if(n){ji();const i=t.setupContext=n.length>1?nm(t):null,s=fa(t),o=aa(n,t,0,[t.props,i]),a=pv(o);if(Hi(),s(),(a||t.sp)&&!jo(t)&&jv(t),a){if(o.then(u0,u0),e)return o.then(f=>{h0(t,f)}).catch(f=>{zf(f,t,0)});t.asyncDep=o}else h0(t,o)}else gg(t)}function h0(t,e,r){qe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:kt(e)&&(t.setupState=Lv(e)),gg(t)}function gg(t,e,r){const n=t.type;t.render||(t.render=n.render||Un);{const i=fa(t);ji();try{bb(t)}finally{Hi(),i()}}}const rm={get(t,e){return br(t,"get",""),t[e]}};function nm(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,rm),slots:t.slots,emit:t.emit,expose:e}}function Kf(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Lv(q3(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ho)return Ho[r](t)},has(e,r){return r in e||r in Ho}})):t.proxy}function im(t,e=!0){return qe(t)?t.displayName||t.name:t.name||e&&t.__name}function sm(t){return qe(t)&&"__vccOpts"in t}const om=(t,e)=>H3(t,e,ta),am="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qu;const l0=typeof window<"u"&&window.trustedTypes;if(l0)try{Qu=l0.createPolicy("vue",{createHTML:t=>t})}catch{}const yg=Qu?t=>Qu.createHTML(t):t=>t,fm="http://www.w3.org/2000/svg",cm="http://www.w3.org/1998/Math/MathML",pi=typeof document<"u"?document:null,d0=pi&&pi.createElement("template"),um={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i=e==="svg"?pi.createElementNS(fm,t):e==="mathml"?pi.createElementNS(cm,t):r?pi.createElement(t,{is:r}):pi.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>pi.createTextNode(t),createComment:t=>pi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>pi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,i,s){const o=r?r.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{d0.innerHTML=yg(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=d0.content;if(n==="svg"||n==="mathml"){const f=a.firstChild;for(;f.firstChild;)a.appendChild(f.firstChild);a.removeChild(f)}e.insertBefore(a,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},hm=Symbol("_vtc");function lm(t,e,r){const n=t[hm];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Ef=Symbol("_vod"),bg=Symbol("_vsh"),dm={beforeMount(t,{value:e},{transition:r}){t[Ef]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):vo(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),vo(t,!0),n.enter(t)):n.leave(t,()=>{vo(t,!1)}):vo(t,e))},beforeUnmount(t,{value:e}){vo(t,e)}};function vo(t,e){t.style.display=e?t[Ef]:"none",t[bg]=!e}const pm=Symbol(""),vm=/(^|;)\s*display\s*:/;function gm(t,e,r){const n=t.style,i=Yt(r);let s=!1;if(r&&!i){if(e)if(Yt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&Ja(n,a,"")}else for(const o in e)r[o]==null&&Ja(n,o,"");for(const o in r)o==="display"&&(s=!0),Ja(n,o,r[o])}else if(i){if(e!==r){const o=n[pm];o&&(r+=";"+o),n.cssText=r,s=vm.test(r)}}else e&&t.removeAttribute("style");Ef in t&&(t[Ef]=s?n.display:"",t[bg]&&(n.display="none"))}const p0=/\s*!important$/;function Ja(t,e,r){if($e(r))r.forEach(n=>Ja(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=ym(t,e);p0.test(r)?t.setProperty(_s(n),r.replace(p0,""),"important"):t[n]=r}}const v0=["Webkit","Moz","ms"],Ec={};function ym(t,e){const r=Ec[e];if(r)return r;let n=hn(e);if(n!=="filter"&&n in t)return Ec[e]=n;n=Uf(n);for(let i=0;i<v0.length;i++){const s=v0[i]+n;if(s in t)return Ec[e]=s}return e}const g0="http://www.w3.org/1999/xlink";function y0(t,e,r,n,i,s=m3(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(g0,e.slice(6,e.length)):t.setAttributeNS(g0,e,r):r==null||s&&!bv(r)?t.removeAttribute(e):t.setAttribute(e,s?"":Vi(r)?String(r):r)}function b0(t,e,r,n,i){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?yg(r):r);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,f=r==null?t.type==="checkbox"?"on":"":String(r);(a!==f||!("_value"in t))&&(t.value=f),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const a=typeof t[e];a==="boolean"?r=bv(r):r==null&&a==="string"?(r="",o=!0):a==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(i||e)}function Ls(t,e,r,n){t.addEventListener(e,r,n)}function bm(t,e,r,n){t.removeEventListener(e,r,n)}const m0=Symbol("_vei");function mm(t,e,r,n,i=null){const s=t[m0]||(t[m0]={}),o=s[e];if(n&&o)o.value=n;else{const[a,f]=wm(e);if(n){const c=s[e]=Em(n,i);Ls(t,a,c,f)}else o&&(bm(t,a,o,f),s[e]=void 0)}}const w0=/(?:Once|Passive|Capture)$/;function wm(t){let e;if(w0.test(t)){e={};let n;for(;n=t.match(w0);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):_s(t.slice(2)),e]}let Ac=0;const xm=Promise.resolve(),_m=()=>Ac||(xm.then(()=>Ac=0),Ac=Date.now());function Em(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Hn(Am(n,r.value),e,5,[n])};return r.value=t,r.attached=_m(),r}function Am(t,e){if($e(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const x0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Sm=(t,e,r,n,i,s)=>{const o=i==="svg";e==="class"?lm(t,n,o):e==="style"?gm(t,r,n):Lf(e)?Uh(e)||mm(t,e,r,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Im(t,e,n,o))?(b0(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&y0(t,e,n,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Yt(n))?b0(t,hn(e),n,s,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),y0(t,e,n,o))};function Im(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&x0(e)&&qe(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return x0(e)&&Yt(r)?!1:e in t}const _0=t=>{const e=t.props["onUpdate:modelValue"]||!1;return $e(e)?r=>Wa(e,r):e};function Cm(t){t.target.composing=!0}function E0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Sc=Symbol("_assign"),Mm={created(t,{modifiers:{lazy:e,trim:r,number:n}},i){t[Sc]=_0(i);const s=n||i.props&&i.props.type==="number";Ls(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;r&&(a=a.trim()),s&&(a=zu(a)),t[Sc](a)}),r&&Ls(t,"change",()=>{t.value=t.value.trim()}),e||(Ls(t,"compositionstart",Cm),Ls(t,"compositionend",E0),Ls(t,"change",E0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:i,number:s}},o){if(t[Sc]=_0(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?zu(t.value):t.value,f=e??"";a!==f&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||i&&t.value.trim()===f)||(t.value=f))}},Om=Or({patchProp:Sm},um);let A0;function Dm(){return A0||(A0=Rb(Om))}const Tm=(...t)=>{const e=Dm().createApp(...t),{mount:r}=e;return e.mount=n=>{const i=Nm(n);if(!i)return;const s=e._component;!qe(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=r(i,!1,Rm(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Rm(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Nm(t){return Yt(t)?document.querySelector(t):t}var Sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ro(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Da={exports:{}},S0;function Pm(){if(S0)return Da.exports;S0=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(P,N,$){return Function.prototype.apply.call(P,N,$)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:r=function(P){return Object.getOwnPropertyNames(P)};function n(T){console&&console.warn&&console.warn(T)}var i=Number.isNaN||function(P){return P!==P};function s(){s.init.call(this)}Da.exports=s,Da.exports.once=O,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||i(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function f(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(P){for(var N=[],$=1;$<arguments.length;$++)N.push(arguments[$]);var U=P==="error",V=this._events;if(V!==void 0)U=U&&V.error===void 0;else if(!U)return!1;if(U){var H;if(N.length>0&&(H=N[0]),H instanceof Error)throw H;var B=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw B.context=H,B}var y=V[P];if(y===void 0)return!1;if(typeof y=="function")e(y,this,N);else for(var b=y.length,l=v(y,b),$=0;$<b;++$)e(l[$],this,N);return!0};function c(T,P,N,$){var U,V,H;if(a(N),V=T._events,V===void 0?(V=T._events=Object.create(null),T._eventsCount=0):(V.newListener!==void 0&&(T.emit("newListener",P,N.listener?N.listener:N),V=T._events),H=V[P]),H===void 0)H=V[P]=N,++T._eventsCount;else if(typeof H=="function"?H=V[P]=$?[N,H]:[H,N]:$?H.unshift(N):H.push(N),U=f(T),U>0&&H.length>U&&!H.warned){H.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=T,B.type=P,B.count=H.length,n(B)}return T}s.prototype.addListener=function(P,N){return c(this,P,N,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(P,N){return c(this,P,N,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(T,P,N){var $={fired:!1,wrapFn:void 0,target:T,type:P,listener:N},U=u.bind($);return U.listener=N,$.wrapFn=U,U}s.prototype.once=function(P,N){return a(N),this.on(P,h(this,P,N)),this},s.prototype.prependOnceListener=function(P,N){return a(N),this.prependListener(P,h(this,P,N)),this},s.prototype.removeListener=function(P,N){var $,U,V,H,B;if(a(N),U=this._events,U===void 0)return this;if($=U[P],$===void 0)return this;if($===N||$.listener===N)--this._eventsCount===0?this._events=Object.create(null):(delete U[P],U.removeListener&&this.emit("removeListener",P,$.listener||N));else if(typeof $!="function"){for(V=-1,H=$.length-1;H>=0;H--)if($[H]===N||$[H].listener===N){B=$[H].listener,V=H;break}if(V<0)return this;V===0?$.shift():x($,V),$.length===1&&(U[P]=$[0]),U.removeListener!==void 0&&this.emit("removeListener",P,B||N)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(P){var N,$,U;if($=this._events,$===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete $[P]),this;if(arguments.length===0){var V=Object.keys($),H;for(U=0;U<V.length;++U)H=V[U],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(N=$[P],typeof N=="function")this.removeListener(P,N);else if(N!==void 0)for(U=N.length-1;U>=0;U--)this.removeListener(P,N[U]);return this};function d(T,P,N){var $=T._events;if($===void 0)return[];var U=$[P];return U===void 0?[]:typeof U=="function"?N?[U.listener||U]:[U]:N?C(U):v(U,U.length)}s.prototype.listeners=function(P){return d(this,P,!0)},s.prototype.rawListeners=function(P){return d(this,P,!1)},s.listenerCount=function(T,P){return typeof T.listenerCount=="function"?T.listenerCount(P):p.call(T,P)},s.prototype.listenerCount=p;function p(T){var P=this._events;if(P!==void 0){var N=P[T];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function v(T,P){for(var N=new Array(P),$=0;$<P;++$)N[$]=T[$];return N}function x(T,P){for(;P+1<T.length;P++)T[P]=T[P+1];T.pop()}function C(T){for(var P=new Array(T.length),N=0;N<P.length;++N)P[N]=T[N].listener||T[N];return P}function O(T,P){return new Promise(function(N,$){function U(H){T.removeListener(P,V),$(H)}function V(){typeof T.removeListener=="function"&&T.removeListener("error",U),N([].slice.call(arguments))}R(T,P,V,{once:!0}),P!=="error"&&M(T,U,{once:!0})})}function M(T,P,N){typeof T.on=="function"&&R(T,"error",P,N)}function R(T,P,N,$){if(typeof T.on=="function")$.once?T.once(P,N):T.on(P,N);else if(typeof T.addEventListener=="function")T.addEventListener(P,function U(V){$.once&&T.removeEventListener(P,U),N(V)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return Da.exports}var On=Pm();const wg=ro(On);var Ic={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eh=function(t,e){return eh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},eh(t,e)};function Fm(t,e){eh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var th=function(){return th=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},th.apply(this,arguments)};function Bm(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Lm(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function $m(t,e){return function(r,n){e(r,n,t)}}function km(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Um(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function f(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,f)}c((n=n.apply(t,e||[])).next())})}function qm(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return f([c,u])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function zm(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Vm(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function rh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xg(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function jm(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xg(arguments[e]));return t}function Hm(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function ra(t){return this instanceof ra?(this.v=t,this):new ra(t)}function Km(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(p){return new Promise(function(v,x){s.push([d,p,v,x])>1||a(d,p)})})}function a(d,p){try{f(n[d](p))}catch(v){h(s[0][3],v)}}function f(d){d.value instanceof ra?Promise.resolve(d.value.v).then(c,u):h(s[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function h(d,p){d(p),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Wm(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:ra(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Gm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof rh=="function"?rh(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,f){o=t[s](o),i(a,f,o.done,o.value)})}}function i(s,o,a,f){Promise.resolve(f).then(function(c){s({value:c,done:a})},o)}}function Xm(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ym(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Zm(t){return t&&t.__esModule?t:{default:t}}function Jm(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Qm(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const ew=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return th},__asyncDelegator:Wm,__asyncGenerator:Km,__asyncValues:Gm,__await:ra,__awaiter:Um,__classPrivateFieldGet:Jm,__classPrivateFieldSet:Qm,__createBinding:zm,__decorate:Lm,__exportStar:Vm,__extends:Fm,__generator:qm,__importDefault:Zm,__importStar:Ym,__makeTemplateObject:Xm,__metadata:km,__param:$m,__read:xg,__rest:Bm,__spread:jm,__spreadArrays:Hm,__values:rh},Symbol.toStringTag,{value:"Module"})),ca=mg(ew);var Cc={},go={},I0;function tw(){if(I0)return go;I0=1,Object.defineProperty(go,"__esModule",{value:!0}),go.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return go.delay=t,go}var Ji={},Mc={},Qi={},C0;function rw(){return C0||(C0=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.ONE_THOUSAND=Qi.ONE_HUNDRED=void 0,Qi.ONE_HUNDRED=100,Qi.ONE_THOUSAND=1e3),Qi}var Oc={},M0;function nw(){return M0||(M0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Oc)),Oc}var O0;function _g(){return O0||(O0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ca;e.__exportStar(rw(),t),e.__exportStar(nw(),t)}(Mc)),Mc}var D0;function iw(){if(D0)return Ji;D0=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.fromMiliseconds=Ji.toMiliseconds=void 0;const t=_g();function e(n){return n*t.ONE_THOUSAND}Ji.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Ji.fromMiliseconds=r,Ji}var T0;function sw(){return T0||(T0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ca;e.__exportStar(tw(),t),e.__exportStar(iw(),t)}(Cc)),Cc}var Ds={},R0;function ow(){if(R0)return Ds;R0=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Ds.Watch=t,Ds.default=t,Ds}var Dc={},yo={},N0;function aw(){if(N0)return yo;N0=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.IWatch=void 0;class t{}return yo.IWatch=t,yo}var P0;function fw(){return P0||(P0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),ca.__exportStar(aw(),t)}(Dc)),Dc}var F0;function cw(){return F0||(F0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ca;e.__exportStar(sw(),t),e.__exportStar(ow(),t),e.__exportStar(fw(),t),e.__exportStar(_g(),t)}(Ic)),Ic}var de=cw();class Es{}let uw=class extends Es{constructor(e){super()}};const B0=de.FIVE_SECONDS,no={pulse:"heartbeat_pulse"};let hw=class Eg extends uw{constructor(e){super(e),this.events=new On.EventEmitter,this.interval=B0,this.interval=(e==null?void 0:e.interval)||B0}static async init(e){const r=new Eg(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),de.toMiliseconds(this.interval))}pulse(){this.events.emit(no.pulse)}};const lw=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,dw=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,pw=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function vw(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){gw(t);return}return e}function gw(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ta(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!pw.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(lw.test(t)||dw.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,vw)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function yw(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Qt(t,...e){try{return yw(t(...e))}catch(r){return Promise.reject(r)}}function bw(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function mw(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Qa(t){if(bw(t))return String(t);if(mw(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Qa(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const nh="base64:";function ww(t){return typeof t=="string"?t:nh+Ew(t)}function xw(t){return typeof t!="string"||!t.startsWith(nh)?t:_w(t.slice(nh.length))}function _w(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Ew(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function $r(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Aw(...t){return $r(t.join(":"))}function Ra(t){return t=$r(t),t?t+":":""}const Sw="memory",Iw=()=>{const t=new Map;return{name:Sw,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Cw(t={}){const e={mounts:{"":t.driver||Iw()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=c=>{for(const u of e.mountpoints)if(c.startsWith(u))return{base:u,relativeKey:c.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:c,driver:e.mounts[""]}},n=(c,u)=>e.mountpoints.filter(h=>h.startsWith(c)||u&&c.startsWith(h)).map(h=>({relativeBase:c.length>h.length?c.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(c,u)=>{if(e.watching){u=$r(u);for(const h of e.watchListeners)h(c,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const c in e.mounts)e.unwatch[c]=await L0(e.mounts[c],i,c)}},o=async()=>{if(e.watching){for(const c in e.unwatch)await e.unwatch[c]();e.unwatch={},e.watching=!1}},a=(c,u,h)=>{const d=new Map,p=v=>{let x=d.get(v.base);return x||(x={driver:v.driver,base:v.base,items:[]},d.set(v.base,x)),x};for(const v of c){const x=typeof v=="string",C=$r(x?v:v.key),O=x?void 0:v.value,M=x||!v.options?u:{...u,...v.options},R=r(C);p(R).items.push({key:C,value:O,relativeKey:R.relativeKey,options:M})}return Promise.all([...d.values()].map(v=>h(v))).then(v=>v.flat())},f={hasItem(c,u={}){c=$r(c);const{relativeKey:h,driver:d}=r(c);return Qt(d.hasItem,h,u)},getItem(c,u={}){c=$r(c);const{relativeKey:h,driver:d}=r(c);return Qt(d.getItem,h,u).then(p=>Ta(p))},getItems(c,u={}){return a(c,u,h=>h.driver.getItems?Qt(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(p=>({key:Aw(h.base,p.key),value:Ta(p.value)}))):Promise.all(h.items.map(d=>Qt(h.driver.getItem,d.relativeKey,d.options).then(p=>({key:d.key,value:Ta(p)})))))},getItemRaw(c,u={}){c=$r(c);const{relativeKey:h,driver:d}=r(c);return d.getItemRaw?Qt(d.getItemRaw,h,u):Qt(d.getItem,h,u).then(p=>xw(p))},async setItem(c,u,h={}){if(u===void 0)return f.removeItem(c);c=$r(c);const{relativeKey:d,driver:p}=r(c);p.setItem&&(await Qt(p.setItem,d,Qa(u),h),p.watch||i("update",c))},async setItems(c,u){await a(c,u,async h=>{if(h.driver.setItems)return Qt(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:Qa(d.value),options:d.options})),u);h.driver.setItem&&await Promise.all(h.items.map(d=>Qt(h.driver.setItem,d.relativeKey,Qa(d.value),d.options)))})},async setItemRaw(c,u,h={}){if(u===void 0)return f.removeItem(c,h);c=$r(c);const{relativeKey:d,driver:p}=r(c);if(p.setItemRaw)await Qt(p.setItemRaw,d,u,h);else if(p.setItem)await Qt(p.setItem,d,ww(u),h);else return;p.watch||i("update",c)},async removeItem(c,u={}){typeof u=="boolean"&&(u={removeMeta:u}),c=$r(c);const{relativeKey:h,driver:d}=r(c);d.removeItem&&(await Qt(d.removeItem,h,u),(u.removeMeta||u.removeMata)&&await Qt(d.removeItem,h+"$",u),d.watch||i("remove",c))},async getMeta(c,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),c=$r(c);const{relativeKey:h,driver:d}=r(c),p=Object.create(null);if(d.getMeta&&Object.assign(p,await Qt(d.getMeta,h,u)),!u.nativeOnly){const v=await Qt(d.getItem,h+"$",u).then(x=>Ta(x));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(p,v))}return p},setMeta(c,u,h={}){return this.setItem(c+"$",u,h)},removeMeta(c,u={}){return this.removeItem(c+"$",u)},async getKeys(c,u={}){c=Ra(c);const h=n(c,!0);let d=[];const p=[];for(const v of h){const x=await Qt(v.driver.getKeys,v.relativeBase,u);for(const C of x){const O=v.mountpoint+$r(C);d.some(M=>O.startsWith(M))||p.push(O)}d=[v.mountpoint,...d.filter(C=>!C.startsWith(v.mountpoint))]}return c?p.filter(v=>v.startsWith(c)&&v[v.length-1]!=="$"):p.filter(v=>v[v.length-1]!=="$")},async clear(c,u={}){c=Ra(c),await Promise.all(n(c,!1).map(async h=>{if(h.driver.clear)return Qt(h.driver.clear,h.relativeBase,u);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",u);return Promise.all(d.map(p=>h.driver.removeItem(p,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(c=>$0(c)))},async watch(c){return await s(),e.watchListeners.push(c),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==c),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(c,u){if(c=Ra(c),c&&e.mounts[c])throw new Error(`already mounted at ${c}`);return c&&(e.mountpoints.push(c),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[c]=u,e.watching&&Promise.resolve(L0(u,i,c)).then(h=>{e.unwatch[c]=h}).catch(console.error),f},async unmount(c,u=!0){var h,d;c=Ra(c),!(!c||!e.mounts[c])&&(e.watching&&c in e.unwatch&&((d=(h=e.unwatch)[c])==null||d.call(h),delete e.unwatch[c]),u&&await $0(e.mounts[c]),e.mountpoints=e.mountpoints.filter(p=>p!==c),delete e.mounts[c])},getMount(c=""){c=$r(c)+":";const u=r(c);return{driver:u.driver,base:u.base}},getMounts(c="",u={}){return c=$r(c),n(c,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(c,u={})=>f.getKeys(c,u),get:(c,u={})=>f.getItem(c,u),set:(c,u,h={})=>f.setItem(c,u,h),has:(c,u={})=>f.hasItem(c,u),del:(c,u={})=>f.removeItem(c,u),remove:(c,u={})=>f.removeItem(c,u)};return f}function L0(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function $0(t){typeof t.dispose=="function"&&await Qt(t.dispose)}function As(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function Ag(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=As(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}let Tc;function ua(){return Tc||(Tc=Ag("keyval-store","keyval")),Tc}function k0(t,e=ua()){return e("readonly",r=>As(r.get(t)))}function Mw(t,e,r=ua()){return r("readwrite",n=>(n.put(e,t),As(n.transaction)))}function Ow(t,e=ua()){return e("readwrite",r=>(r.delete(t),As(r.transaction)))}function Dw(t=ua()){return t("readwrite",e=>(e.clear(),As(e.transaction)))}function Tw(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},As(t.transaction)}function Rw(t=ua()){return t("readonly",e=>{if(e.getAllKeys)return As(e.getAllKeys());const r=[];return Tw(e,n=>r.push(n.key)).then(()=>r)})}const Nw=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Pw=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Zs(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Pw(t)}catch{return t}}function bs(t){return typeof t=="string"?t:Nw(t)||""}const Fw="idb-keyval";var Bw=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=Ag(t.dbName,t.storeName)),{name:Fw,options:t,async hasItem(i){return!(typeof await k0(r(i),n)>"u")},async getItem(i){return await k0(r(i),n)??null},setItem(i,s){return Mw(r(i),s,n)},removeItem(i){return Ow(r(i),n)},getKeys(){return Rw(n)},clear(){return Dw(n)}}};const Lw="WALLET_CONNECT_V2_INDEXED_DB",$w="keyvaluestorage";let kw=class{constructor(){this.indexedDb=Cw({driver:Bw({dbName:Lw,storeName:$w})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,bs(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ef={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Rc<"u"&&Rc.localStorage?ef.exports=Rc.localStorage:typeof window<"u"&&window.localStorage?ef.exports=window.localStorage:ef.exports=new e})();function Uw(t){var e;return[t[0],Zs((e=t[1])!=null?e:"")]}let qw=class{constructor(){this.localStorage=ef.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Uw)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Zs(r)}async setItem(e,r){this.localStorage.setItem(e,bs(r))}async removeItem(e){this.localStorage.removeItem(e)}};const zw="wc_storage_version",U0=1,Vw=async(t,e,r)=>{const n=zw,i=await e.getItem(n);if(i&&i>=U0){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const f=a.toLowerCase();if(f.includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect")){const c=await t.getItem(a);await e.setItem(a,c),o.push(a)}}await e.setItem(n,U0),r(e),jw(t,o)},jw=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let Hw=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new qw;this.storage=e;try{const r=new kw;Vw(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var Nc,q0;function Kw(){if(q0)return Nc;q0=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Nc=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var f=new Array(a);f[0]=s(r);for(var c=1;c<a;c++)f[c]=s(n[c]);return f.join(" ")}if(typeof r!="string")return r;var u=n.length;if(u===0)return r;for(var h="",d=1-o,p=-1,v=r&&r.length||0,x=0;x<v;){if(r.charCodeAt(x)===37&&x+1<v){switch(p=p>-1?p:0,r.charCodeAt(x+1)){case 100:case 102:if(d>=u||n[d]==null)break;p<x&&(h+=r.slice(p,x)),h+=Number(n[d]),p=x+2,x++;break;case 105:if(d>=u||n[d]==null)break;p<x&&(h+=r.slice(p,x)),h+=Math.floor(Number(n[d])),p=x+2,x++;break;case 79:case 111:case 106:if(d>=u||n[d]===void 0)break;p<x&&(h+=r.slice(p,x));var C=typeof n[d];if(C==="string"){h+="'"+n[d]+"'",p=x+2,x++;break}if(C==="function"){h+=n[d].name||"<anonymous>",p=x+2,x++;break}h+=s(n[d]),p=x+2,x++;break;case 115:if(d>=u)break;p<x&&(h+=r.slice(p,x)),h+=String(n[d]),p=x+2,x++;break;case 37:p<x&&(h+=r.slice(p,x)),h+="%",p=x+2,x++,d--;break}++d}++x}return p===-1?r:(p<v&&(h+=r.slice(p)),h)}return Nc}var Pc,z0;function Ww(){if(z0)return Pc;z0=1;const t=Kw();Pc=i;const e=P().console||{},r={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:x,wrapResponseSerializer:x,wrapErrorSerializer:x,req:v,res:v,err:d};function n(N,$){return Array.isArray(N)?N.filter(function(V){return V!=="!stdSerializers.err"}):N===!0?Object.keys($):!1}function i(N){N=N||{},N.browser=N.browser||{};const $=N.browser.transmit;if($&&typeof $.send!="function")throw Error("pino: transmit option must have a send function");const U=N.browser.write||e;N.browser.write&&(N.browser.asObject=!0);const V=N.serializers||{},H=n(N.browser.serialize,V);let B=N.browser.serialize;Array.isArray(N.browser.serialize)&&N.browser.serialize.indexOf("!stdSerializers.err")>-1&&(B=!1);const y=["error","fatal","warn","info","debug","trace"];typeof U=="function"&&(U.error=U.fatal=U.warn=U.info=U.debug=U.trace=U),N.enabled===!1&&(N.level="silent");const b=N.level||"info",l=Object.create(U);l.log||(l.log=C),Object.defineProperty(l,"levelVal",{get:w}),Object.defineProperty(l,"level",{get:E,set:I});const g={transmit:$,serialize:H,asObject:N.browser.asObject,levels:y,timestamp:p(N)};l.levels=i.levels,l.level=b,l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=C,l.serializers=V,l._serialize=H,l._stdErrSerialize=B,l.child=A,$&&(l._logEvent=h());function w(){return this.level==="silent"?1/0:this.levels.values[this.level]}function E(){return this._level}function I(m){if(m!=="silent"&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,s(g,l,"error","log"),s(g,l,"fatal","error"),s(g,l,"warn","error"),s(g,l,"info","log"),s(g,l,"debug","log"),s(g,l,"trace","log")}function A(m,S){if(!m)throw new Error("missing bindings for child Pino");S=S||{},H&&m.serializers&&(S.serializers=m.serializers);const _=S.serializers;if(H&&_){var F=Object.assign({},V,_),Y=N.browser.serialize===!0?Object.keys(F):H;delete m.serializers,f([m],Y,F,this._stdErrSerialize)}function D(j){this._childLevel=(j._childLevel|0)+1,this.error=c(j,m,"error"),this.fatal=c(j,m,"fatal"),this.warn=c(j,m,"warn"),this.info=c(j,m,"info"),this.debug=c(j,m,"debug"),this.trace=c(j,m,"trace"),F&&(this.serializers=F,this._serialize=Y),$&&(this._logEvent=h([].concat(j._logEvent.bindings,m)))}return D.prototype=this,new D(this)}return l}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:O,epochTime:M,unixTime:R,isoTime:T});function s(N,$,U,V){const H=Object.getPrototypeOf($);$[U]=$.levelVal>$.levels.values[U]?C:H[U]?H[U]:e[U]||e[V]||C,o(N,$,U)}function o(N,$,U){!N.transmit&&$[U]===C||($[U]=function(V){return function(){const B=N.timestamp(),y=new Array(arguments.length),b=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var l=0;l<y.length;l++)y[l]=arguments[l];if(N.serialize&&!N.asObject&&f(y,this._serialize,this.serializers,this._stdErrSerialize),N.asObject?V.call(b,a(this,U,y,B)):V.apply(b,y),N.transmit){const g=N.transmit.level||$.level,w=i.levels.values[g],E=i.levels.values[U];if(E<w)return;u(this,{ts:B,methodLevel:U,methodValue:E,transmitValue:i.levels.values[N.transmit.level||$.level],send:N.transmit.send,val:$.levelVal},y)}}}($[U]))}function a(N,$,U,V){N._serialize&&f(U,N._serialize,N.serializers,N._stdErrSerialize);const H=U.slice();let B=H[0];const y={};V&&(y.time=V),y.level=i.levels.values[$];let b=(N._childLevel|0)+1;if(b<1&&(b=1),B!==null&&typeof B=="object"){for(;b--&&typeof H[0]=="object";)Object.assign(y,H.shift());B=H.length?t(H.shift(),H):void 0}else typeof B=="string"&&(B=t(H.shift(),H));return B!==void 0&&(y.msg=B),y}function f(N,$,U,V){for(const H in N)if(V&&N[H]instanceof Error)N[H]=i.stdSerializers.err(N[H]);else if(typeof N[H]=="object"&&!Array.isArray(N[H]))for(const B in N[H])$&&$.indexOf(B)>-1&&B in U&&(N[H][B]=U[B](N[H][B]))}function c(N,$,U){return function(){const V=new Array(1+arguments.length);V[0]=$;for(var H=1;H<V.length;H++)V[H]=arguments[H-1];return N[U].apply(this,V)}}function u(N,$,U){const V=$.send,H=$.ts,B=$.methodLevel,y=$.methodValue,b=$.val,l=N._logEvent.bindings;f(U,N._serialize||Object.keys(N.serializers),N.serializers,N._stdErrSerialize===void 0?!0:N._stdErrSerialize),N._logEvent.ts=H,N._logEvent.messages=U.filter(function(g){return l.indexOf(g)===-1}),N._logEvent.level.label=B,N._logEvent.level.value=y,V(B,N._logEvent,b),N._logEvent=h(l)}function h(N){return{ts:0,messages:[],bindings:N||[],level:{label:"",value:0}}}function d(N){const $={type:N.constructor.name,msg:N.message,stack:N.stack};for(const U in N)$[U]===void 0&&($[U]=N[U]);return $}function p(N){return typeof N.timestamp=="function"?N.timestamp:N.timestamp===!1?O:M}function v(){return{}}function x(N){return N}function C(){}function O(){return!1}function M(){return Date.now()}function R(){return Math.round(Date.now()/1e3)}function T(){return new Date(Date.now()).toISOString()}function P(){function N($){return typeof $<"u"&&$}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return N(self)||N(window)||N(this)||{}}}return Pc}var $s=Ww();const Wf=ro($s),Gw={level:"info"},ha="custom_context",nl=1e3*1024;let Xw=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},V0=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new Xw(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},Sg=class{constructor(e,r=nl){this.level=e??"error",this.levelValue=$s.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new V0(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===$s.levels.values.error?console.error(e):r===$s.levels.values.warn?console.warn(e):r===$s.levels.values.debug?console.debug(e):r===$s.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(bs({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new V0(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(bs({extraMetadata:e})),new Blob(r,{type:"application/json"})}};class Yw{constructor(e,r=nl){this.baseChunkLogger=new Sg(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}let Zw=class{constructor(e,r=nl){this.baseChunkLogger=new Sg(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Jw=Object.defineProperty,Qw=Object.defineProperties,ex=Object.getOwnPropertyDescriptors,j0=Object.getOwnPropertySymbols,tx=Object.prototype.hasOwnProperty,rx=Object.prototype.propertyIsEnumerable,H0=(t,e,r)=>e in t?Jw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Af=(t,e)=>{for(var r in e||(e={}))tx.call(e,r)&&H0(t,r,e[r]);if(j0)for(var r of j0(e))rx.call(e,r)&&H0(t,r,e[r]);return t},Sf=(t,e)=>Qw(t,ex(e));function il(t){return Sf(Af({},t),{level:(t==null?void 0:t.level)||Gw.level})}function nx(t,e=ha){return t[e]||""}function ix(t,e,r=ha){return t[r]=e,t}function zr(t,e=ha){let r="";return typeof t.bindings>"u"?r=nx(t,e):r=t.bindings().context||"",r}function sx(t,e,r=ha){const n=zr(t,r);return n.trim()?`${n}/${e}`:e}function Dr(t,e,r=ha){const n=sx(t,e,r),i=t.child({context:n});return ix(i,n,r)}function ox(t){var e,r;const n=new Yw((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Wf(Sf(Af({},t.opts),{level:"trace",browser:Sf(Af({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function ax(t){var e;const r=new Zw((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Wf(Sf(Af({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function fx(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?ox(t):ax(t)}let cx=class extends Es{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},ux=class extends Es{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}};class hx{constructor(e,r){this.logger=e,this.core=r}}let lx=class extends Es{constructor(e,r){super(),this.relayer=e,this.logger=r}};class dx extends Es{constructor(e){super()}}let px=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},vx=class extends Es{constructor(e,r){super(),this.relayer=e,this.logger=r}},gx=class extends Es{constructor(e,r){super(),this.core=e,this.logger=r}},yx=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},bx=class{constructor(e,r){this.projectId=e,this.logger=r}},mx=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}},wx=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},xx=class{constructor(e){this.client=e}};function _x(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ig(t,...e){if(!_x(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function K0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ex(t,e){Ig(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ts=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fc=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Ax(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Cg(t){return typeof t=="string"&&(t=Ax(t)),Ig(t),t}let Sx=class{clone(){return this._cloneInto()}};function Ix(t){const e=n=>t().update(Cg(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Mg(t=32){if(Ts&&typeof Ts.getRandomValues=="function")return Ts.getRandomValues(new Uint8Array(t));if(Ts&&typeof Ts.randomBytes=="function")return Ts.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Cx(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),f=n?4:0,c=n?0:4;t.setUint32(e+f,o,n),t.setUint32(e+c,a,n)}class Mx extends Sx{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Fc(this.buffer)}update(e){K0(this);const{view:r,buffer:n,blockLen:i}=this;e=Cg(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const f=Fc(e);for(;i<=s-o;o+=i)this.process(f,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){K0(this),Ex(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;Cx(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Fc(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=f/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const Na=BigInt(2**32-1),ih=BigInt(32);function Og(t,e=!1){return e?{h:Number(t&Na),l:Number(t>>ih&Na)}:{h:Number(t>>ih&Na)|0,l:Number(t&Na)|0}}function Ox(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Og(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Dx=(t,e)=>BigInt(t>>>0)<<ih|BigInt(e>>>0),Tx=(t,e,r)=>t>>>r,Rx=(t,e,r)=>t<<32-r|e>>>r,Nx=(t,e,r)=>t>>>r|e<<32-r,Px=(t,e,r)=>t<<32-r|e>>>r,Fx=(t,e,r)=>t<<64-r|e>>>r-32,Bx=(t,e,r)=>t>>>r-32|e<<64-r,Lx=(t,e)=>e,$x=(t,e)=>t,kx=(t,e,r)=>t<<r|e>>>32-r,Ux=(t,e,r)=>e<<r|t>>>32-r,qx=(t,e,r)=>e<<r-32|t>>>64-r,zx=(t,e,r)=>t<<r-32|e>>>64-r;function Vx(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const jx=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Hx=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Kx=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Wx=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Gx=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Xx=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,Ve={fromBig:Og,split:Ox,toBig:Dx,shrSH:Tx,shrSL:Rx,rotrSH:Nx,rotrSL:Px,rotrBH:Fx,rotrBL:Bx,rotr32H:Lx,rotr32L:$x,rotlSH:kx,rotlSL:Ux,rotlBH:qx,rotlBL:zx,add:Vx,add3L:jx,add3H:Hx,add4L:Kx,add4H:Wx,add5H:Xx,add5L:Gx},[Yx,Zx]=Ve.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Si=new Uint32Array(80),Ii=new Uint32Array(80);let Jx=class extends Mx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:f,Eh:c,El:u,Fh:h,Fl:d,Gh:p,Gl:v,Hh:x,Hl:C}=this;return[e,r,n,i,s,o,a,f,c,u,h,d,p,v,x,C]}set(e,r,n,i,s,o,a,f,c,u,h,d,p,v,x,C){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=f|0,this.Eh=c|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=p|0,this.Gl=v|0,this.Hh=x|0,this.Hl=C|0}process(e,r){for(let R=0;R<16;R++,r+=4)Si[R]=e.getUint32(r),Ii[R]=e.getUint32(r+=4);for(let R=16;R<80;R++){const T=Si[R-15]|0,P=Ii[R-15]|0,N=Ve.rotrSH(T,P,1)^Ve.rotrSH(T,P,8)^Ve.shrSH(T,P,7),$=Ve.rotrSL(T,P,1)^Ve.rotrSL(T,P,8)^Ve.shrSL(T,P,7),U=Si[R-2]|0,V=Ii[R-2]|0,H=Ve.rotrSH(U,V,19)^Ve.rotrBH(U,V,61)^Ve.shrSH(U,V,6),B=Ve.rotrSL(U,V,19)^Ve.rotrBL(U,V,61)^Ve.shrSL(U,V,6),y=Ve.add4L($,B,Ii[R-7],Ii[R-16]),b=Ve.add4H(y,N,H,Si[R-7],Si[R-16]);Si[R]=b|0,Ii[R]=y|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:f,Dh:c,Dl:u,Eh:h,El:d,Fh:p,Fl:v,Gh:x,Gl:C,Hh:O,Hl:M}=this;for(let R=0;R<80;R++){const T=Ve.rotrSH(h,d,14)^Ve.rotrSH(h,d,18)^Ve.rotrBH(h,d,41),P=Ve.rotrSL(h,d,14)^Ve.rotrSL(h,d,18)^Ve.rotrBL(h,d,41),N=h&p^~h&x,$=d&v^~d&C,U=Ve.add5L(M,P,$,Zx[R],Ii[R]),V=Ve.add5H(U,O,T,N,Yx[R],Si[R]),H=U|0,B=Ve.rotrSH(n,i,28)^Ve.rotrBH(n,i,34)^Ve.rotrBH(n,i,39),y=Ve.rotrSL(n,i,28)^Ve.rotrBL(n,i,34)^Ve.rotrBL(n,i,39),b=n&s^n&a^s&a,l=i&o^i&f^o&f;O=x|0,M=C|0,x=p|0,C=v|0,p=h|0,v=d|0,{h,l:d}=Ve.add(c|0,u|0,V|0,H|0),c=a|0,u=f|0,a=s|0,f=o|0,s=n|0,o=i|0;const g=Ve.add3L(H,y,l);n=Ve.add3H(g,V,B,b),i=g|0}({h:n,l:i}=Ve.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Ve.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:f}=Ve.add(this.Ch|0,this.Cl|0,a|0,f|0),{h:c,l:u}=Ve.add(this.Dh|0,this.Dl|0,c|0,u|0),{h,l:d}=Ve.add(this.Eh|0,this.El|0,h|0,d|0),{h:p,l:v}=Ve.add(this.Fh|0,this.Fl|0,p|0,v|0),{h:x,l:C}=Ve.add(this.Gh|0,this.Gl|0,x|0,C|0),{h:O,l:M}=Ve.add(this.Hh|0,this.Hl|0,O|0,M|0),this.set(n,i,s,o,a,f,c,u,h,d,p,v,x,C,O,M)}roundClean(){Si.fill(0),Ii.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Qx=Ix(()=>new Jx);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sl=BigInt(0),Dg=BigInt(1),e8=BigInt(2);function ol(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function al(t){if(!ol(t))throw new Error("Uint8Array expected")}function Bc(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const t8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function fl(t){al(t);let e="";for(let r=0;r<t.length;r++)e+=t8[t[r]];return e}function Tg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?sl:BigInt("0x"+t)}const ai={_0:48,_9:57,A:65,F:70,a:97,f:102};function W0(t){if(t>=ai._0&&t<=ai._9)return t-ai._0;if(t>=ai.A&&t<=ai.F)return t-(ai.A-10);if(t>=ai.a&&t<=ai.f)return t-(ai.a-10)}function Rg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=W0(t.charCodeAt(s)),a=W0(t.charCodeAt(s+1));if(o===void 0||a===void 0){const f=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+s)}n[i]=o*16+a}return n}function r8(t){return Tg(fl(t))}function tf(t){return al(t),Tg(fl(Uint8Array.from(t).reverse()))}function Ng(t,e){return Rg(t.toString(16).padStart(e*2,"0"))}function sh(t,e){return Ng(t,e).reverse()}function fi(t,e,r){let n;if(typeof e=="string")try{n=Rg(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(ol(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function G0(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];al(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}const Lc=t=>typeof t=="bigint"&&sl<=t;function n8(t,e,r){return Lc(t)&&Lc(e)&&Lc(r)&&e<=t&&t<r}function bo(t,e,r,n){if(!n8(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function i8(t){let e;for(e=0;t>sl;t>>=Dg,e+=1);return e}const s8=t=>(e8<<BigInt(t-1))-Dg,o8={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ol(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function cl(t,e,r={}){const n=(i,s,o)=>{const a=o8[s];if(typeof a!="function")throw new Error("invalid validator function");const f=t[i];if(!(o&&f===void 0)&&!a(f,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+f)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function X0(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const nr=BigInt(0),zt=BigInt(1),fs=BigInt(2),a8=BigInt(3),oh=BigInt(4),Y0=BigInt(5),Z0=BigInt(8);function Wt(t,e){const r=t%e;return r>=nr?r:e+r}function f8(t,e,r){if(e<nr)throw new Error("invalid exponent, negatives unsupported");if(r<=nr)throw new Error("invalid modulus");if(r===zt)return nr;let n=zt;for(;e>nr;)e&zt&&(n=n*t%r),t=t*t%r,e>>=zt;return n}function Tn(t,e,r){let n=t;for(;e-- >nr;)n*=n,n%=r;return n}function J0(t,e){if(t===nr)throw new Error("invert: expected non-zero number");if(e<=nr)throw new Error("invert: expected positive modulus, got "+e);let r=Wt(t,e),n=e,i=nr,s=zt;for(;r!==nr;){const o=n/r,a=n%r,f=i-s*o;n=r,r=a,i=s,s=f}if(n!==zt)throw new Error("invert: does not exist");return Wt(i,e)}function c8(t){const e=(t-zt)/fs;let r,n,i;for(r=t-zt,n=0;r%fs===nr;r/=fs,n++);for(i=fs;i<t&&f8(i,e,t)!==t-zt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+zt)/oh;return function(a,f){const c=a.pow(f,o);if(!a.eql(a.sqr(c),f))throw new Error("Cannot find square root");return c}}const s=(r+zt)/fs;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let f=n,c=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let v=o.sqr(h);d<f&&!o.eql(v,o.ONE);d++)v=o.sqr(v);const p=o.pow(c,zt<<BigInt(f-d-1));c=o.sqr(p),u=o.mul(u,p),h=o.mul(h,c),f=d}return u}}function u8(t){if(t%oh===a8){const e=(t+zt)/oh;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%Z0===Y0){const e=(t-Y0)/Z0;return function(r,n){const i=r.mul(n,fs),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,fs),s),f=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(f),n))throw new Error("Cannot find square root");return f}}return c8(t)}const h8=(t,e)=>(Wt(t,e)&zt)===zt,l8=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function d8(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=l8.reduce((n,i)=>(n[i]="function",n),e);return cl(t,r)}function p8(t,e,r){if(r<nr)throw new Error("invalid exponent, negatives unsupported");if(r===nr)return t.ONE;if(r===zt)return e;let n=t.ONE,i=e;for(;r>nr;)r&zt&&(n=t.mul(n,i)),i=t.sqr(i),r>>=zt;return n}function v8(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function Pg(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Fg(t,e,r=!1,n={}){if(t<=nr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Pg(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:s8(i),ZERO:nr,ONE:zt,create:f=>Wt(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return nr<=f&&f<t},is0:f=>f===nr,isOdd:f=>(f&zt)===zt,neg:f=>Wt(-f,t),eql:(f,c)=>f===c,sqr:f=>Wt(f*f,t),add:(f,c)=>Wt(f+c,t),sub:(f,c)=>Wt(f-c,t),mul:(f,c)=>Wt(f*c,t),pow:(f,c)=>p8(a,f,c),div:(f,c)=>Wt(f*J0(c,t),t),sqrN:f=>f*f,addN:(f,c)=>f+c,subN:(f,c)=>f-c,mulN:(f,c)=>f*c,inv:f=>J0(f,t),sqrt:n.sqrt||(f=>(o||(o=u8(t)),o(a,f))),invertBatch:f=>v8(a,f),cmov:(f,c,u)=>u?c:f,toBytes:f=>r?sh(f,s):Ng(f,s),fromBytes:f=>{if(f.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+f.length);return r?tf(f):r8(f)}});return Object.freeze(a)}const Q0=BigInt(0),Pa=BigInt(1);function $c(t,e){const r=e.negate();return t?r:e}function Bg(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kc(t,e){Bg(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function g8(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function y8(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Uc=new WeakMap,Lg=new WeakMap;function qc(t){return Lg.get(t)||1}function b8(t,e){return{constTimeNegate:$c,hasPrecomputes(r){return qc(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>Q0;)n&Pa&&(i=i.add(s)),s=s.double(),n>>=Pa;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=kc(n,e),o=[];let a=r,f=a;for(let c=0;c<i;c++){f=a,o.push(f);for(let u=1;u<s;u++)f=f.add(a),o.push(f);a=f.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=kc(r,e);let a=t.ZERO,f=t.BASE;const c=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let d=0;d<s;d++){const p=d*o;let v=Number(i&c);i>>=h,v>o&&(v-=u,i+=Pa);const x=p,C=p+Math.abs(v)-1,O=d%2!==0,M=v<0;v===0?f=f.add($c(O,n[x])):a=a.add($c(M,n[C]))}return{p:a,f}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=kc(r,e),f=BigInt(2**r-1),c=2**r,u=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(i===Q0)break;let p=Number(i&f);if(i>>=u,p>a&&(p-=c,i+=Pa),p===0)continue;let v=n[d+Math.abs(p)-1];p<0&&(v=v.negate()),s=s.add(v)}return s},getPrecomputes(r,n,i){let s=Uc.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Uc.set(n,i(s))),s},wNAFCached(r,n,i){const s=qc(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=qc(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){Bg(n,e),Lg.set(r,n),Uc.delete(r)}}}function m8(t,e,r,n){if(g8(r,t),y8(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=i8(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,f=new Array(a+1).fill(i),c=Math.floor((e.BITS-1)/o)*o;let u=i;for(let h=c;h>=0;h-=o){f.fill(i);for(let p=0;p<n.length;p++){const v=n[p],x=Number(v>>BigInt(h)&BigInt(a));f[x]=f[x].add(r[p])}let d=i;for(let p=f.length-1,v=i;p>0;p--)v=v.add(f[p]),d=d.add(v);if(u=u.add(d),h!==0)for(let p=0;p<o;p++)u=u.double()}return u}function w8(t){return d8(t.Fp),cl(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pg(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const yn=BigInt(0),Br=BigInt(1),Fa=BigInt(2),x8=BigInt(8),_8={zip215:!0};function E8(t){const e=w8(t);return cl(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function A8(t){const e=E8(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:f}=e,c=Fa<<BigInt(a*8)-Br,u=r.create,h=Fg(e.n,e.nBitLength),d=e.uvRatio||((g,w)=>{try{return{isValid:!0,value:r.sqrt(g*r.inv(w))}}catch{return{isValid:!1,value:yn}}}),p=e.adjustScalarBytes||(g=>g),v=e.domain||((g,w,E)=>{if(Bc("phflag",E),w.length||E)throw new Error("Contexts/pre-hash are not supported");return g});function x(g,w){bo("coordinate "+g,w,yn,c)}function C(g){if(!(g instanceof R))throw new Error("ExtendedPoint expected")}const O=X0((g,w)=>{const{ex:E,ey:I,ez:A}=g,m=g.is0();w==null&&(w=m?x8:r.inv(A));const S=u(E*w),_=u(I*w),F=u(A*w);if(m)return{x:yn,y:Br};if(F!==Br)throw new Error("invZ was invalid");return{x:S,y:_}}),M=X0(g=>{const{a:w,d:E}=e;if(g.is0())throw new Error("bad point: ZERO");const{ex:I,ey:A,ez:m,et:S}=g,_=u(I*I),F=u(A*A),Y=u(m*m),D=u(Y*Y),j=u(_*w),G=u(Y*u(j+F)),Z=u(D+u(E*u(_*F)));if(G!==Z)throw new Error("bad point: equation left != right (1)");const ee=u(I*A),ue=u(m*S);if(ee!==ue)throw new Error("bad point: equation left != right (2)");return!0});class R{constructor(w,E,I,A){this.ex=w,this.ey=E,this.ez=I,this.et=A,x("x",w),x("y",E),x("z",I),x("t",A),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof R)throw new Error("extended point not allowed");const{x:E,y:I}=w||{};return x("x",E),x("y",I),new R(E,I,Br,u(E*I))}static normalizeZ(w){const E=r.invertBatch(w.map(I=>I.ez));return w.map((I,A)=>I.toAffine(E[A])).map(R.fromAffine)}static msm(w,E){return m8(R,h,w,E)}_setWindowSize(w){N.setWindowSize(this,w)}assertValidity(){M(this)}equals(w){C(w);const{ex:E,ey:I,ez:A}=this,{ex:m,ey:S,ez:_}=w,F=u(E*_),Y=u(m*A),D=u(I*_),j=u(S*A);return F===Y&&D===j}is0(){return this.equals(R.ZERO)}negate(){return new R(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:w}=e,{ex:E,ey:I,ez:A}=this,m=u(E*E),S=u(I*I),_=u(Fa*u(A*A)),F=u(w*m),Y=E+I,D=u(u(Y*Y)-m-S),j=F+S,G=j-_,Z=F-S,ee=u(D*G),ue=u(j*Z),he=u(D*Z),L=u(G*j);return new R(ee,ue,L,he)}add(w){C(w);const{a:E,d:I}=e,{ex:A,ey:m,ez:S,et:_}=this,{ex:F,ey:Y,ez:D,et:j}=w;if(E===BigInt(-1)){const oe=u((m-A)*(Y+F)),se=u((m+A)*(Y-F)),Q=u(se-oe);if(Q===yn)return this.double();const le=u(S*Fa*j),fe=u(_*Fa*D),ae=fe+le,pe=se+oe,me=fe-le,ve=u(ae*Q),xe=u(pe*me),Fe=u(ae*me),be=u(Q*pe);return new R(ve,xe,be,Fe)}const G=u(A*F),Z=u(m*Y),ee=u(_*I*j),ue=u(S*D),he=u((A+m)*(F+Y)-G-Z),L=ue-ee,z=ue+ee,K=u(Z-E*G),X=u(he*L),te=u(z*K),re=u(he*K),ne=u(L*z);return new R(X,te,ne,re)}subtract(w){return this.add(w.negate())}wNAF(w){return N.wNAFCached(this,w,R.normalizeZ)}multiply(w){const E=w;bo("scalar",E,Br,n);const{p:I,f:A}=this.wNAF(E);return R.normalizeZ([I,A])[0]}multiplyUnsafe(w,E=R.ZERO){const I=w;return bo("scalar",I,yn,n),I===yn?P:this.is0()||I===Br?this:N.wNAFCachedUnsafe(this,I,R.normalizeZ,E)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return N.unsafeLadder(this,n).is0()}toAffine(w){return O(this,w)}clearCofactor(){const{h:w}=e;return w===Br?this:this.multiplyUnsafe(w)}static fromHex(w,E=!1){const{d:I,a:A}=e,m=r.BYTES;w=fi("pointHex",w,m),Bc("zip215",E);const S=w.slice(),_=w[m-1];S[m-1]=_&-129;const F=tf(S),Y=E?c:r.ORDER;bo("pointHex.y",F,yn,Y);const D=u(F*F),j=u(D-Br),G=u(I*D-A);let{isValid:Z,value:ee}=d(j,G);if(!Z)throw new Error("Point.fromHex: invalid y coordinate");const ue=(ee&Br)===Br,he=(_&128)!==0;if(!E&&ee===yn&&he)throw new Error("Point.fromHex: x=0 and x_0=1");return he!==ue&&(ee=u(-ee)),R.fromAffine({x:ee,y:F})}static fromPrivateKey(w){return V(w).point}toRawBytes(){const{x:w,y:E}=this.toAffine(),I=sh(E,r.BYTES);return I[I.length-1]|=w&Br?128:0,I}toHex(){return fl(this.toRawBytes())}}R.BASE=new R(e.Gx,e.Gy,Br,u(e.Gx*e.Gy)),R.ZERO=new R(yn,Br,Br,yn);const{BASE:T,ZERO:P}=R,N=b8(R,a*8);function $(g){return Wt(g,n)}function U(g){return $(tf(g))}function V(g){const w=r.BYTES;g=fi("private key",g,w);const E=fi("hashed private key",s(g),2*w),I=p(E.slice(0,w)),A=E.slice(w,2*w),m=U(I),S=T.multiply(m),_=S.toRawBytes();return{head:I,prefix:A,scalar:m,point:S,pointBytes:_}}function H(g){return V(g).pointBytes}function B(g=new Uint8Array,...w){const E=G0(...w);return U(s(v(E,fi("context",g),!!i)))}function y(g,w,E={}){g=fi("message",g),i&&(g=i(g));const{prefix:I,scalar:A,pointBytes:m}=V(w),S=B(E.context,I,g),_=T.multiply(S).toRawBytes(),F=B(E.context,_,m,g),Y=$(S+F*A);bo("signature.s",Y,yn,n);const D=G0(_,sh(Y,r.BYTES));return fi("result",D,r.BYTES*2)}const b=_8;function l(g,w,E,I=b){const{context:A,zip215:m}=I,S=r.BYTES;g=fi("signature",g,2*S),w=fi("message",w),E=fi("publicKey",E,S),m!==void 0&&Bc("zip215",m),i&&(w=i(w));const _=tf(g.slice(S,2*S));let F,Y,D;try{F=R.fromHex(E,m),Y=R.fromHex(g.slice(0,S),m),D=T.multiplyUnsafe(_)}catch{return!1}if(!m&&F.isSmallOrder())return!1;const j=B(A,Y.toRawBytes(),F.toRawBytes(),w);return Y.add(F.multiplyUnsafe(j)).subtract(D).clearCofactor().equals(R.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:H,sign:y,verify:l,ExtendedPoint:R,utils:{getExtendedPublicKey:V,randomPrivateKey:()=>o(r.BYTES),precompute(g=8,w=R.BASE){return w._setWindowSize(g),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const ul=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ed=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const S8=BigInt(1),td=BigInt(2);BigInt(3);const I8=BigInt(5),C8=BigInt(8);function M8(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=ul,o=t*t%s*t%s,a=Tn(o,td,s)*o%s,f=Tn(a,S8,s)*t%s,c=Tn(f,I8,s)*f%s,u=Tn(c,e,s)*c%s,h=Tn(u,r,s)*u%s,d=Tn(h,n,s)*h%s,p=Tn(d,i,s)*d%s,v=Tn(p,i,s)*d%s,x=Tn(v,e,s)*c%s;return{pow_p_5_8:Tn(x,td,s)*t%s,b2:o}}function O8(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function D8(t,e){const r=ul,n=Wt(e*e*e,r),i=Wt(n*n*e,r),s=M8(t*i).pow_p_5_8;let o=Wt(t*n*s,r);const a=Wt(e*o*o,r),f=o,c=Wt(o*ed,r),u=a===t,h=a===Wt(-t,r),d=a===Wt(-t*ed,r);return u&&(o=f),(h||d)&&(o=c),h8(o,r)&&(o=Wt(-o,r)),{isValid:u||h,value:o}}const T8=Fg(ul,void 0,!0),R8={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:T8,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:C8,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Qx,randomBytes:Mg,adjustScalarBytes:O8,uvRatio:D8},$g=A8(R8),N8="EdDSA",P8="JWT",If=".",Gf="base64url",kg="utf8",Ug="utf8",F8=":",B8="did",L8="key",rd="base58btc",$8="z",k8="K36",U8=32;function hl(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function qg(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?hl(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function zg(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=qg(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return hl(r)}function q8(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,f=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,C=0,O=0,M=v.length;O!==M&&v[O]===0;)O++,x++;for(var R=(M-O)*u+1>>>0,T=new Uint8Array(R);O!==M;){for(var P=v[O],N=0,$=R-1;(P!==0||N<C)&&$!==-1;$--,N++)P+=256*T[$]>>>0,T[$]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");C=N,O++}for(var U=R-C;U!==R&&T[U]===0;)U++;for(var V=f.repeat(x);U<R;++U)V+=t.charAt(T[U]);return V}function d(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var x=0;if(v[x]!==" "){for(var C=0,O=0;v[x]===f;)C++,x++;for(var M=(v.length-x)*c+1>>>0,R=new Uint8Array(M);v[x];){var T=r[v.charCodeAt(x)];if(T===255)return;for(var P=0,N=M-1;(T!==0||P<O)&&N!==-1;N--,P++)T+=a*R[N]>>>0,R[N]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");O=P,x++}if(v[x]!==" "){for(var $=M-O;$!==M&&R[$]===0;)$++;for(var U=new Uint8Array(C+(M-$)),V=C;$!==M;)U[V++]=R[$++];return U}}}function p(v){var x=d(v);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var z8=q8,V8=z8;const Vg=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},j8=t=>new TextEncoder().encode(t),H8=t=>new TextDecoder().decode(t);let K8=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},W8=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jg(this,e)}},G8=class{constructor(e){this.decoders=e}or(e){return jg(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const jg=(t,e)=>new G8({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let X8=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new K8(e,r,n),this.decoder=new W8(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Xf=({name:t,prefix:e,encode:r,decode:n})=>new X8(t,e,r,n),la=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=V8(r,e);return Xf({prefix:t,name:e,encode:n,decode:s=>Vg(i(s))})},Y8=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,f=0,c=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&f>>a)}if(a>=r||255&f<<8-a)throw new SyntaxError("Unexpected end of data");return o},Z8=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let f=0;f<t.length;++f)for(a=a<<8|t[f],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},lr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Xf({prefix:e,name:t,encode(i){return Z8(i,n,r)},decode(i){return Y8(i,n,r,t)}}),J8=Xf({prefix:"\0",name:"identity",encode:t=>H8(t),decode:t=>j8(t)});var Q8=Object.freeze({__proto__:null,identity:J8});const e4=lr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var t4=Object.freeze({__proto__:null,base2:e4});const r4=lr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var n4=Object.freeze({__proto__:null,base8:r4});const i4=la({prefix:"9",name:"base10",alphabet:"0123456789"});var s4=Object.freeze({__proto__:null,base10:i4});const o4=lr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),a4=lr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var f4=Object.freeze({__proto__:null,base16:o4,base16upper:a4});const c4=lr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),u4=lr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),h4=lr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),l4=lr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),d4=lr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),p4=lr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),v4=lr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),g4=lr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),y4=lr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var b4=Object.freeze({__proto__:null,base32:c4,base32upper:u4,base32pad:h4,base32padupper:l4,base32hex:d4,base32hexupper:p4,base32hexpad:v4,base32hexpadupper:g4,base32z:y4});const m4=la({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),w4=la({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var x4=Object.freeze({__proto__:null,base36:m4,base36upper:w4});const _4=la({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),E4=la({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var A4=Object.freeze({__proto__:null,base58btc:_4,base58flickr:E4});const S4=lr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),I4=lr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),C4=lr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),M4=lr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var O4=Object.freeze({__proto__:null,base64:S4,base64pad:I4,base64url:C4,base64urlpad:M4});const Hg=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),D4=Hg.reduce((t,e,r)=>(t[r]=e,t),[]),T4=Hg.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function R4(t){return t.reduce((e,r)=>(e+=D4[r],e),"")}function N4(t){const e=[];for(const r of t){const n=T4[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const P4=Xf({prefix:"🚀",name:"base256emoji",encode:R4,decode:N4});var F4=Object.freeze({__proto__:null,base256emoji:P4}),B4=Kg,nd=128,L4=-128,$4=Math.pow(2,31);function Kg(t,e,r){e=e||[],r=r||0;for(var n=r;t>=$4;)e[r++]=t&255|nd,t/=128;for(;t&L4;)e[r++]=t&255|nd,t>>>=7;return e[r]=t|0,Kg.bytes=r-n+1,e}var k4=ah,U4=128,id=127;function ah(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw ah.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&id)<<i:(o&id)*Math.pow(2,i),i+=7}while(o>=U4);return ah.bytes=s-n,r}var q4=Math.pow(2,7),z4=Math.pow(2,14),V4=Math.pow(2,21),j4=Math.pow(2,28),H4=Math.pow(2,35),K4=Math.pow(2,42),W4=Math.pow(2,49),G4=Math.pow(2,56),X4=Math.pow(2,63),Y4=function(t){return t<q4?1:t<z4?2:t<V4?3:t<j4?4:t<H4?5:t<K4?6:t<W4?7:t<G4?8:t<X4?9:10},Z4={encode:B4,decode:k4,encodingLength:Y4},Wg=Z4;const sd=(t,e,r=0)=>(Wg.encode(t,e,r),e),od=t=>Wg.encodingLength(t),fh=(t,e)=>{const r=e.byteLength,n=od(t),i=n+od(r),s=new Uint8Array(i+r);return sd(t,s,0),sd(r,s,n),s.set(e,i),new J4(t,r,e,s)};let J4=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const Gg=({name:t,code:e,encode:r})=>new Q4(t,e,r);let Q4=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?fh(this.code,r):r.then(n=>fh(this.code,n))}else throw Error("Unknown type, must be binary type")}};const Xg=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),e6=Gg({name:"sha2-256",code:18,encode:Xg("SHA-256")}),t6=Gg({name:"sha2-512",code:19,encode:Xg("SHA-512")});var r6=Object.freeze({__proto__:null,sha256:e6,sha512:t6});const Yg=0,n6="identity",Zg=Vg,i6=t=>fh(Yg,Zg(t)),s6={code:Yg,name:n6,encode:Zg,digest:i6};var o6=Object.freeze({__proto__:null,identity:s6});new TextEncoder,new TextDecoder;const ad={...Q8,...t4,...n4,...s4,...f4,...b4,...x4,...A4,...O4,...F4};({...r6,...o6});function Jg(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const fd=Jg("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),zc=Jg("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=qg(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Qg={utf8:fd,"utf-8":fd,hex:ad.base16,latin1:zc,ascii:zc,binary:zc,...ad};function Yf(t,e="utf8"){const r=Qg[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function io(t,e="utf8"){const r=Qg[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?hl(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function cd(t){return Zs(Yf(io(t,Gf),kg))}function Cf(t){return Yf(io(bs(t),kg),Gf)}function e2(t){const e=io(k8,rd),r=$8+Yf(zg([e,t]),rd);return[B8,L8,r].join(F8)}function a6(t){return Yf(t,Gf)}function f6(t){return io(t,Gf)}function c6(t){return io([Cf(t.header),Cf(t.payload)].join(If),Ug)}function u6(t){return[Cf(t.header),Cf(t.payload),a6(t.signature)].join(If)}function ch(t){const e=t.split(If),r=cd(e[0]),n=cd(e[1]),i=f6(e[2]),s=io(e.slice(0,2).join(If),Ug);return{header:r,payload:n,signature:i,data:s}}function ud(t=Mg(U8)){const e=$g.getPublicKey(t);return{secretKey:zg([t,e]),publicKey:e}}async function h6(t,e,r,n,i=de.fromMiliseconds(Date.now())){const s={alg:N8,typ:P8},o=e2(n.publicKey),a=i+r,f={iss:o,sub:t,aud:e,iat:i,exp:a},c=c6({header:s,payload:f}),u=$g.sign(c,n.secretKey.slice(0,32));return u6({header:s,payload:f,signature:u})}var hd=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},l6=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),d6=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),p6=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),v6=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),g6=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),y6=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,b6=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ld=3,m6=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",y6]],dd=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function w6(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new g6:typeof navigator<"u"?_6(navigator.userAgent):A6()}function x6(t){return t!==""&&m6.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function _6(t){var e=x6(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new v6;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<ld&&(i=hd(hd([],i,!0),S6(ld-i.length),!0)):i=[];var s=i.join("."),o=E6(t),a=b6.exec(t);return a&&a[1]?new p6(r,s,o,a[1]):new l6(r,s,o)}function E6(t){for(var e=0,r=dd.length;e<r;e++){var n=dd[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function A6(){var t=typeof process<"u"&&process.version;return t?new d6(process.version.slice(1)):null}function S6(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var At={},pd;function t2(){if(pd)return At;pd=1,Object.defineProperty(At,"__esModule",{value:!0}),At.getLocalStorage=At.getLocalStorageOrThrow=At.getCrypto=At.getCryptoOrThrow=At.getLocation=At.getLocationOrThrow=At.getNavigator=At.getNavigatorOrThrow=At.getDocument=At.getDocumentOrThrow=At.getFromWindowOrThrow=At.getFromWindow=void 0;function t(d){let p;return typeof window<"u"&&typeof window[d]<"u"&&(p=window[d]),p}At.getFromWindow=t;function e(d){const p=t(d);if(!p)throw new Error(`${d} is not defined in Window`);return p}At.getFromWindowOrThrow=e;function r(){return e("document")}At.getDocumentOrThrow=r;function n(){return t("document")}At.getDocument=n;function i(){return e("navigator")}At.getNavigatorOrThrow=i;function s(){return t("navigator")}At.getNavigator=s;function o(){return e("location")}At.getLocationOrThrow=o;function a(){return t("location")}At.getLocation=a;function f(){return e("crypto")}At.getCryptoOrThrow=f;function c(){return t("crypto")}At.getCrypto=c;function u(){return e("localStorage")}At.getLocalStorageOrThrow=u;function h(){return t("localStorage")}return At.getLocalStorage=h,At}var ms=t2(),mo={},vd;function I6(){if(vd)return mo;vd=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.getWindowMetadata=void 0;const t=t2();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function i(){const p=r.getElementsByTagName("link"),v=[];for(let x=0;x<p.length;x++){const C=p[x],O=C.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const M=C.getAttribute("href");if(M)if(M.toLowerCase().indexOf("https:")===-1&&M.toLowerCase().indexOf("http:")===-1&&M.indexOf("//")!==0){let R=n.protocol+"//"+n.host;if(M.indexOf("/")===0)R+=M;else{const T=n.pathname.split("/");T.pop();const P=T.join("/");R+=P+"/"+M}v.push(R)}else if(M.indexOf("//")===0){const R=n.protocol+M;v.push(R)}else v.push(M)}}return v}function s(...p){const v=r.getElementsByTagName("meta");for(let x=0;x<v.length;x++){const C=v[x],O=["itemprop","property","name"].map(M=>C.getAttribute(M)).filter(M=>M?p.includes(M):!1);if(O.length&&O){const M=C.getAttribute("content");if(M)return M}}return""}function o(){let p=s("name","og:site_name","og:title","twitter:title");return p||(p=r.title),p}function a(){return s("description","og:description","twitter:description","keywords")}const f=o(),c=a(),u=n.origin,h=i();return{description:c,url:u,icons:h,name:f}}return mo.getWindowMetadata=e,mo}var C6=I6();const M6="logger/5.7.0";let gd=!1,yd=!1;const rf={debug:1,default:2,info:2,warning:3,error:4,off:5};let bd=rf.default,Vc=null;function O6(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(t){return t.message}return null}const md=O6();var uh;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(uh||(uh={}));var An;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(An||(An={}));const wd="0123456789abcdef";class Pt{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();rf[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(bd>rf[n])&&console.log.apply(console,r)}debug(...e){this._log(Pt.levels.DEBUG,e)}info(...e){this._log(Pt.levels.INFO,e)}warn(...e){this._log(Pt.levels.WARNING,e)}makeError(e,r,n){if(yd)return this.makeError("censored error",r,{});r||(r=Pt.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(f=>{const c=n[f];try{if(c instanceof Uint8Array){let u="";for(let h=0;h<c.length;h++)u+=wd[c[h]>>4],u+=wd[c[h]&15];i.push(f+"=Uint8Array(0x"+u+")")}else i.push(f+"="+JSON.stringify(c))}catch{i.push(f+"="+JSON.stringify(n[f].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case An.NUMERIC_FAULT:{o="NUMERIC_FAULT";const f=e;switch(f){case"overflow":case"underflow":case"division-by-zero":o+="-"+f;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case An.CALL_EXCEPTION:case An.INSUFFICIENT_FUNDS:case An.MISSING_NEW:case An.NONCE_EXPIRED:case An.REPLACEMENT_UNDERPRICED:case An.TRANSACTION_REPLACED:case An.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(n).forEach(function(f){a[f]=n[f]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,Pt.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){md&&this.throwError("platform missing String.prototype.normalize",Pt.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:md})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,Pt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,Pt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,Pt.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,Pt.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",Pt.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Pt.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Pt.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Vc||(Vc=new Pt(M6)),Vc}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Pt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),gd){if(!e)return;this.globalLogger().throwError("error censorship permanent",Pt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}yd=!!e,gd=!!r}static setLogLevel(e){const r=rf[e.toLowerCase()];if(r==null){Pt.globalLogger().warn("invalid log level - "+e);return}bd=r}static from(e){return new Pt(e)}}Pt.errors=An;Pt.levels=uh;const D6="bytes/5.7.0",Ut=new Pt(D6);function r2(t){return!!t.toHexString}function Wo(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Wo(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function T6(t){return Vn(t)&&!(t.length%2)||ll(t)}function xd(t){return typeof t=="number"&&t==t&&t%1===0}function ll(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!xd(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!xd(r)||r<0||r>=256)return!1}return!0}function tr(t,e){if(e||(e={}),typeof t=="number"){Ut.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Wo(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),r2(t)&&(t=t.toHexString()),Vn(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Ut.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return Wo(new Uint8Array(n))}return ll(t)?Wo(new Uint8Array(t)):Ut.throwArgumentError("invalid arrayify value","value",t)}function R6(t,e){t=tr(t),t.length>e&&Ut.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Wo(r)}function Vn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const jc="0123456789abcdef";function Gr(t,e){if(e||(e={}),typeof t=="number"){Ut.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=jc[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),r2(t))return t.toHexString();if(Vn(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Ut.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(ll(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=jc[(i&240)>>4]+jc[i&15]}return r}return Ut.throwArgumentError("invalid hexlify value","value",t)}function N6(t){if(typeof t!="string")t=Gr(t);else if(!Vn(t)||t.length%2)return null;return(t.length-2)/2}function _d(t,e,r){return typeof t!="string"?t=Gr(t):(!Vn(t)||t.length%2)&&Ut.throwArgumentError("invalid hexData","value",t),e=2+2*e,"0x"+t.substring(e)}function Ws(t,e){for(typeof t!="string"?t=Gr(t):Vn(t)||Ut.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Ut.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function n2(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(T6(t)){let r=tr(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=Gr(r.slice(0,32)),e.s=Gr(r.slice(32,64))):r.length===65?(e.r=Gr(r.slice(0,32)),e.s=Gr(r.slice(32,64)),e.v=r[64]):Ut.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Ut.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=Gr(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=R6(tr(e._vs),32);e._vs=Gr(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Ut.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=Gr(i);e.s==null?e.s=o:e.s!==o&&Ut.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Ut.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Ut.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Vn(e.r)?Ut.throwArgumentError("signature missing or invalid r","signature",t):e.r=Ws(e.r,32),e.s==null||!Vn(e.s)?Ut.throwArgumentError("signature missing or invalid s","signature",t):e.s=Ws(e.s,32);const r=tr(e.s);r[0]>=128&&Ut.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=Gr(r);e._vs&&(Vn(e._vs)||Ut.throwArgumentError("signature invalid _vs","signature",t),e._vs=Ws(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Ut.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}var nf={exports:{}};const P6={},F6=Object.freeze(Object.defineProperty({__proto__:null,default:P6},Symbol.toStringTag,{value:"Module"})),dl=mg(F6);var B6=nf.exports,Ed;function L6(){return Ed||(Ed=1,function(t){(function(e,r){function n(b,l){if(!b)throw new Error(l||"Assertion failed")}function i(b,l){b.super_=l;var g=function(){};g.prototype=l.prototype,b.prototype=new g,b.prototype.constructor=b}function s(b,l,g){if(s.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((l==="le"||l==="be")&&(g=l,l=10),this._init(b||0,l||10,g||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=dl.Buffer}catch{}s.isBN=function(l){return l instanceof s?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===s.wordSize&&Array.isArray(l.words)},s.max=function(l,g){return l.cmp(g)>0?l:g},s.min=function(l,g){return l.cmp(g)<0?l:g},s.prototype._init=function(l,g,w){if(typeof l=="number")return this._initNumber(l,g,w);if(typeof l=="object")return this._initArray(l,g,w);g==="hex"&&(g=16),n(g===(g|0)&&g>=2&&g<=36),l=l.toString().replace(/\s+/g,"");var E=0;l[0]==="-"&&(E++,this.negative=1),E<l.length&&(g===16?this._parseHex(l,E,w):(this._parseBase(l,g,E),w==="le"&&this._initArray(this.toArray(),g,w)))},s.prototype._initNumber=function(l,g,w){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),g,w)},s.prototype._initArray=function(l,g,w){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var I,A,m=0;if(w==="be")for(E=l.length-1,I=0;E>=0;E-=3)A=l[E]|l[E-1]<<8|l[E-2]<<16,this.words[I]|=A<<m&67108863,this.words[I+1]=A>>>26-m&67108863,m+=24,m>=26&&(m-=26,I++);else if(w==="le")for(E=0,I=0;E<l.length;E+=3)A=l[E]|l[E+1]<<8|l[E+2]<<16,this.words[I]|=A<<m&67108863,this.words[I+1]=A>>>26-m&67108863,m+=24,m>=26&&(m-=26,I++);return this._strip()};function a(b,l){var g=b.charCodeAt(l);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;n(!1,"Invalid character in "+b)}function f(b,l,g){var w=a(b,g);return g-1>=l&&(w|=a(b,g-1)<<4),w}s.prototype._parseHex=function(l,g,w){this.length=Math.ceil((l.length-g)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var I=0,A=0,m;if(w==="be")for(E=l.length-1;E>=g;E-=2)m=f(l,g,E)<<I,this.words[A]|=m&67108863,I>=18?(I-=18,A+=1,this.words[A]|=m>>>26):I+=8;else{var S=l.length-g;for(E=S%2===0?g+1:g;E<l.length;E+=2)m=f(l,g,E)<<I,this.words[A]|=m&67108863,I>=18?(I-=18,A+=1,this.words[A]|=m>>>26):I+=8}this._strip()};function c(b,l,g,w){for(var E=0,I=0,A=Math.min(b.length,g),m=l;m<A;m++){var S=b.charCodeAt(m)-48;E*=w,S>=49?I=S-49+10:S>=17?I=S-17+10:I=S,n(S>=0&&I<w,"Invalid character"),E+=I}return E}s.prototype._parseBase=function(l,g,w){this.words=[0],this.length=1;for(var E=0,I=1;I<=67108863;I*=g)E++;E--,I=I/g|0;for(var A=l.length-w,m=A%E,S=Math.min(A,A-m)+w,_=0,F=w;F<S;F+=E)_=c(l,F,F+E,g),this.imuln(I),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(m!==0){var Y=1;for(_=c(l,F,l.length,g),F=0;F<m;F++)Y*=g;this.imuln(Y),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this._strip()},s.prototype.copy=function(l){l.words=new Array(this.length);for(var g=0;g<this.length;g++)l.words[g]=this.words[g];l.length=this.length,l.negative=this.negative,l.red=this.red};function u(b,l){b.words=l.words,b.length=l.length,b.negative=l.negative,b.red=l.red}if(s.prototype._move=function(l){u(l,this)},s.prototype.clone=function(){var l=new s(null);return this.copy(l),l},s.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(l,g){l=l||10,g=g|0||1;var w;if(l===16||l==="hex"){w="";for(var E=0,I=0,A=0;A<this.length;A++){var m=this.words[A],S=((m<<E|I)&16777215).toString(16);I=m>>>24-E&16777215,E+=2,E>=26&&(E-=26,A--),I!==0||A!==this.length-1?w=d[6-S.length]+S+w:w=S+w}for(I!==0&&(w=I.toString(16)+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(l===(l|0)&&l>=2&&l<=36){var _=p[l],F=v[l];w="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var D=Y.modrn(F).toString(l);Y=Y.idivn(F),Y.isZero()?w=D+w:w=d[_-D.length]+D+w}for(this.isZero()&&(w="0"+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(l,g){return this.toArrayLike(o,l,g)}),s.prototype.toArray=function(l,g){return this.toArrayLike(Array,l,g)};var x=function(l,g){return l.allocUnsafe?l.allocUnsafe(g):new l(g)};s.prototype.toArrayLike=function(l,g,w){this._strip();var E=this.byteLength(),I=w||Math.max(1,E);n(E<=I,"byte array longer than desired length"),n(I>0,"Requested array length <= 0");var A=x(l,I),m=g==="le"?"LE":"BE";return this["_toArrayLike"+m](A,E),A},s.prototype._toArrayLikeLE=function(l,g){for(var w=0,E=0,I=0,A=0;I<this.length;I++){var m=this.words[I]<<A|E;l[w++]=m&255,w<l.length&&(l[w++]=m>>8&255),w<l.length&&(l[w++]=m>>16&255),A===6?(w<l.length&&(l[w++]=m>>24&255),E=0,A=0):(E=m>>>24,A+=2)}if(w<l.length)for(l[w++]=E;w<l.length;)l[w++]=0},s.prototype._toArrayLikeBE=function(l,g){for(var w=l.length-1,E=0,I=0,A=0;I<this.length;I++){var m=this.words[I]<<A|E;l[w--]=m&255,w>=0&&(l[w--]=m>>8&255),w>=0&&(l[w--]=m>>16&255),A===6?(w>=0&&(l[w--]=m>>24&255),E=0,A=0):(E=m>>>24,A+=2)}if(w>=0)for(l[w--]=E;w>=0;)l[w--]=0},Math.clz32?s.prototype._countBits=function(l){return 32-Math.clz32(l)}:s.prototype._countBits=function(l){var g=l,w=0;return g>=4096&&(w+=13,g>>>=13),g>=64&&(w+=7,g>>>=7),g>=8&&(w+=4,g>>>=4),g>=2&&(w+=2,g>>>=2),w+g},s.prototype._zeroBits=function(l){if(l===0)return 26;var g=l,w=0;return g&8191||(w+=13,g>>>=13),g&127||(w+=7,g>>>=7),g&15||(w+=4,g>>>=4),g&3||(w+=2,g>>>=2),g&1||w++,w},s.prototype.bitLength=function(){var l=this.words[this.length-1],g=this._countBits(l);return(this.length-1)*26+g};function C(b){for(var l=new Array(b.bitLength()),g=0;g<l.length;g++){var w=g/26|0,E=g%26;l[g]=b.words[w]>>>E&1}return l}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,g=0;g<this.length;g++){var w=this._zeroBits(this.words[g]);if(l+=w,w!==26)break}return l},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},s.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]|l.words[g];return this._strip()},s.prototype.ior=function(l){return n((this.negative|l.negative)===0),this.iuor(l)},s.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},s.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},s.prototype.iuand=function(l){var g;this.length>l.length?g=l:g=this;for(var w=0;w<g.length;w++)this.words[w]=this.words[w]&l.words[w];return this.length=g.length,this._strip()},s.prototype.iand=function(l){return n((this.negative|l.negative)===0),this.iuand(l)},s.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},s.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},s.prototype.iuxor=function(l){var g,w;this.length>l.length?(g=this,w=l):(g=l,w=this);for(var E=0;E<w.length;E++)this.words[E]=g.words[E]^w.words[E];if(this!==g)for(;E<g.length;E++)this.words[E]=g.words[E];return this.length=g.length,this._strip()},s.prototype.ixor=function(l){return n((this.negative|l.negative)===0),this.iuxor(l)},s.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},s.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},s.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var g=Math.ceil(l/26)|0,w=l%26;this._expand(g),w>0&&g--;for(var E=0;E<g;E++)this.words[E]=~this.words[E]&67108863;return w>0&&(this.words[E]=~this.words[E]&67108863>>26-w),this._strip()},s.prototype.notn=function(l){return this.clone().inotn(l)},s.prototype.setn=function(l,g){n(typeof l=="number"&&l>=0);var w=l/26|0,E=l%26;return this._expand(w+1),g?this.words[w]=this.words[w]|1<<E:this.words[w]=this.words[w]&~(1<<E),this._strip()},s.prototype.iadd=function(l){var g;if(this.negative!==0&&l.negative===0)return this.negative=0,g=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,g=this.isub(l),l.negative=1,g._normSign();var w,E;this.length>l.length?(w=this,E=l):(w=l,E=this);for(var I=0,A=0;A<E.length;A++)g=(w.words[A]|0)+(E.words[A]|0)+I,this.words[A]=g&67108863,I=g>>>26;for(;I!==0&&A<w.length;A++)g=(w.words[A]|0)+I,this.words[A]=g&67108863,I=g>>>26;if(this.length=w.length,I!==0)this.words[this.length]=I,this.length++;else if(w!==this)for(;A<w.length;A++)this.words[A]=w.words[A];return this},s.prototype.add=function(l){var g;return l.negative!==0&&this.negative===0?(l.negative=0,g=this.sub(l),l.negative^=1,g):l.negative===0&&this.negative!==0?(this.negative=0,g=l.sub(this),this.negative=1,g):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},s.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var g=this.iadd(l);return l.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var w=this.cmp(l);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,I;w>0?(E=this,I=l):(E=l,I=this);for(var A=0,m=0;m<I.length;m++)g=(E.words[m]|0)-(I.words[m]|0)+A,A=g>>26,this.words[m]=g&67108863;for(;A!==0&&m<E.length;m++)g=(E.words[m]|0)+A,A=g>>26,this.words[m]=g&67108863;if(A===0&&m<E.length&&E!==this)for(;m<E.length;m++)this.words[m]=E.words[m];return this.length=Math.max(this.length,m),E!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(l){return this.clone().isub(l)};function O(b,l,g){g.negative=l.negative^b.negative;var w=b.length+l.length|0;g.length=w,w=w-1|0;var E=b.words[0]|0,I=l.words[0]|0,A=E*I,m=A&67108863,S=A/67108864|0;g.words[0]=m;for(var _=1;_<w;_++){for(var F=S>>>26,Y=S&67108863,D=Math.min(_,l.length-1),j=Math.max(0,_-b.length+1);j<=D;j++){var G=_-j|0;E=b.words[G]|0,I=l.words[j]|0,A=E*I+Y,F+=A/67108864|0,Y=A&67108863}g.words[_]=Y|0,S=F|0}return S!==0?g.words[_]=S|0:g.length--,g._strip()}var M=function(l,g,w){var E=l.words,I=g.words,A=w.words,m=0,S,_,F,Y=E[0]|0,D=Y&8191,j=Y>>>13,G=E[1]|0,Z=G&8191,ee=G>>>13,ue=E[2]|0,he=ue&8191,L=ue>>>13,z=E[3]|0,K=z&8191,X=z>>>13,te=E[4]|0,re=te&8191,ne=te>>>13,oe=E[5]|0,se=oe&8191,Q=oe>>>13,le=E[6]|0,fe=le&8191,ae=le>>>13,pe=E[7]|0,me=pe&8191,ve=pe>>>13,xe=E[8]|0,Fe=xe&8191,be=xe>>>13,ke=E[9]|0,Ue=ke&8191,Ae=ke>>>13,We=I[0]|0,Be=We&8191,_e=We>>>13,Ge=I[1]|0,at=Ge&8191,Se=Ge>>>13,it=I[2]|0,ft=it&8191,Te=it>>>13,Je=I[3]|0,Xe=Je&8191,Me=Je>>>13,Qe=I[4]|0,et=Qe&8191,Ie=Qe>>>13,ct=I[5]|0,ut=ct&8191,Re=ct>>>13,ht=I[6]|0,lt=ht&8191,Oe=ht>>>13,tt=I[7]|0,Ke=tt&8191,Ne=tt>>>13,dt=I[8]|0,pt=dt&8191,Pe=dt>>>13,vt=I[9]|0,je=vt&8191,st=vt>>>13;w.negative=l.negative^g.negative,w.length=19,S=Math.imul(D,Be),_=Math.imul(D,_e),_=_+Math.imul(j,Be)|0,F=Math.imul(j,_e);var Rr=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,S=Math.imul(Z,Be),_=Math.imul(Z,_e),_=_+Math.imul(ee,Be)|0,F=Math.imul(ee,_e),S=S+Math.imul(D,at)|0,_=_+Math.imul(D,Se)|0,_=_+Math.imul(j,at)|0,F=F+Math.imul(j,Se)|0;var Nr=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,S=Math.imul(he,Be),_=Math.imul(he,_e),_=_+Math.imul(L,Be)|0,F=Math.imul(L,_e),S=S+Math.imul(Z,at)|0,_=_+Math.imul(Z,Se)|0,_=_+Math.imul(ee,at)|0,F=F+Math.imul(ee,Se)|0,S=S+Math.imul(D,ft)|0,_=_+Math.imul(D,Te)|0,_=_+Math.imul(j,ft)|0,F=F+Math.imul(j,Te)|0;var Pr=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,S=Math.imul(K,Be),_=Math.imul(K,_e),_=_+Math.imul(X,Be)|0,F=Math.imul(X,_e),S=S+Math.imul(he,at)|0,_=_+Math.imul(he,Se)|0,_=_+Math.imul(L,at)|0,F=F+Math.imul(L,Se)|0,S=S+Math.imul(Z,ft)|0,_=_+Math.imul(Z,Te)|0,_=_+Math.imul(ee,ft)|0,F=F+Math.imul(ee,Te)|0,S=S+Math.imul(D,Xe)|0,_=_+Math.imul(D,Me)|0,_=_+Math.imul(j,Xe)|0,F=F+Math.imul(j,Me)|0;var Fr=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,S=Math.imul(re,Be),_=Math.imul(re,_e),_=_+Math.imul(ne,Be)|0,F=Math.imul(ne,_e),S=S+Math.imul(K,at)|0,_=_+Math.imul(K,Se)|0,_=_+Math.imul(X,at)|0,F=F+Math.imul(X,Se)|0,S=S+Math.imul(he,ft)|0,_=_+Math.imul(he,Te)|0,_=_+Math.imul(L,ft)|0,F=F+Math.imul(L,Te)|0,S=S+Math.imul(Z,Xe)|0,_=_+Math.imul(Z,Me)|0,_=_+Math.imul(ee,Xe)|0,F=F+Math.imul(ee,Me)|0,S=S+Math.imul(D,et)|0,_=_+Math.imul(D,Ie)|0,_=_+Math.imul(j,et)|0,F=F+Math.imul(j,Ie)|0;var Vt=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,S=Math.imul(se,Be),_=Math.imul(se,_e),_=_+Math.imul(Q,Be)|0,F=Math.imul(Q,_e),S=S+Math.imul(re,at)|0,_=_+Math.imul(re,Se)|0,_=_+Math.imul(ne,at)|0,F=F+Math.imul(ne,Se)|0,S=S+Math.imul(K,ft)|0,_=_+Math.imul(K,Te)|0,_=_+Math.imul(X,ft)|0,F=F+Math.imul(X,Te)|0,S=S+Math.imul(he,Xe)|0,_=_+Math.imul(he,Me)|0,_=_+Math.imul(L,Xe)|0,F=F+Math.imul(L,Me)|0,S=S+Math.imul(Z,et)|0,_=_+Math.imul(Z,Ie)|0,_=_+Math.imul(ee,et)|0,F=F+Math.imul(ee,Ie)|0,S=S+Math.imul(D,ut)|0,_=_+Math.imul(D,Re)|0,_=_+Math.imul(j,ut)|0,F=F+Math.imul(j,Re)|0;var Xn=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,S=Math.imul(fe,Be),_=Math.imul(fe,_e),_=_+Math.imul(ae,Be)|0,F=Math.imul(ae,_e),S=S+Math.imul(se,at)|0,_=_+Math.imul(se,Se)|0,_=_+Math.imul(Q,at)|0,F=F+Math.imul(Q,Se)|0,S=S+Math.imul(re,ft)|0,_=_+Math.imul(re,Te)|0,_=_+Math.imul(ne,ft)|0,F=F+Math.imul(ne,Te)|0,S=S+Math.imul(K,Xe)|0,_=_+Math.imul(K,Me)|0,_=_+Math.imul(X,Xe)|0,F=F+Math.imul(X,Me)|0,S=S+Math.imul(he,et)|0,_=_+Math.imul(he,Ie)|0,_=_+Math.imul(L,et)|0,F=F+Math.imul(L,Ie)|0,S=S+Math.imul(Z,ut)|0,_=_+Math.imul(Z,Re)|0,_=_+Math.imul(ee,ut)|0,F=F+Math.imul(ee,Re)|0,S=S+Math.imul(D,lt)|0,_=_+Math.imul(D,Oe)|0,_=_+Math.imul(j,lt)|0,F=F+Math.imul(j,Oe)|0;var Yn=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,S=Math.imul(me,Be),_=Math.imul(me,_e),_=_+Math.imul(ve,Be)|0,F=Math.imul(ve,_e),S=S+Math.imul(fe,at)|0,_=_+Math.imul(fe,Se)|0,_=_+Math.imul(ae,at)|0,F=F+Math.imul(ae,Se)|0,S=S+Math.imul(se,ft)|0,_=_+Math.imul(se,Te)|0,_=_+Math.imul(Q,ft)|0,F=F+Math.imul(Q,Te)|0,S=S+Math.imul(re,Xe)|0,_=_+Math.imul(re,Me)|0,_=_+Math.imul(ne,Xe)|0,F=F+Math.imul(ne,Me)|0,S=S+Math.imul(K,et)|0,_=_+Math.imul(K,Ie)|0,_=_+Math.imul(X,et)|0,F=F+Math.imul(X,Ie)|0,S=S+Math.imul(he,ut)|0,_=_+Math.imul(he,Re)|0,_=_+Math.imul(L,ut)|0,F=F+Math.imul(L,Re)|0,S=S+Math.imul(Z,lt)|0,_=_+Math.imul(Z,Oe)|0,_=_+Math.imul(ee,lt)|0,F=F+Math.imul(ee,Oe)|0,S=S+Math.imul(D,Ke)|0,_=_+Math.imul(D,Ne)|0,_=_+Math.imul(j,Ke)|0,F=F+Math.imul(j,Ne)|0;var Zn=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,S=Math.imul(Fe,Be),_=Math.imul(Fe,_e),_=_+Math.imul(be,Be)|0,F=Math.imul(be,_e),S=S+Math.imul(me,at)|0,_=_+Math.imul(me,Se)|0,_=_+Math.imul(ve,at)|0,F=F+Math.imul(ve,Se)|0,S=S+Math.imul(fe,ft)|0,_=_+Math.imul(fe,Te)|0,_=_+Math.imul(ae,ft)|0,F=F+Math.imul(ae,Te)|0,S=S+Math.imul(se,Xe)|0,_=_+Math.imul(se,Me)|0,_=_+Math.imul(Q,Xe)|0,F=F+Math.imul(Q,Me)|0,S=S+Math.imul(re,et)|0,_=_+Math.imul(re,Ie)|0,_=_+Math.imul(ne,et)|0,F=F+Math.imul(ne,Ie)|0,S=S+Math.imul(K,ut)|0,_=_+Math.imul(K,Re)|0,_=_+Math.imul(X,ut)|0,F=F+Math.imul(X,Re)|0,S=S+Math.imul(he,lt)|0,_=_+Math.imul(he,Oe)|0,_=_+Math.imul(L,lt)|0,F=F+Math.imul(L,Oe)|0,S=S+Math.imul(Z,Ke)|0,_=_+Math.imul(Z,Ne)|0,_=_+Math.imul(ee,Ke)|0,F=F+Math.imul(ee,Ne)|0,S=S+Math.imul(D,pt)|0,_=_+Math.imul(D,Pe)|0,_=_+Math.imul(j,pt)|0,F=F+Math.imul(j,Pe)|0;var Jn=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,S=Math.imul(Ue,Be),_=Math.imul(Ue,_e),_=_+Math.imul(Ae,Be)|0,F=Math.imul(Ae,_e),S=S+Math.imul(Fe,at)|0,_=_+Math.imul(Fe,Se)|0,_=_+Math.imul(be,at)|0,F=F+Math.imul(be,Se)|0,S=S+Math.imul(me,ft)|0,_=_+Math.imul(me,Te)|0,_=_+Math.imul(ve,ft)|0,F=F+Math.imul(ve,Te)|0,S=S+Math.imul(fe,Xe)|0,_=_+Math.imul(fe,Me)|0,_=_+Math.imul(ae,Xe)|0,F=F+Math.imul(ae,Me)|0,S=S+Math.imul(se,et)|0,_=_+Math.imul(se,Ie)|0,_=_+Math.imul(Q,et)|0,F=F+Math.imul(Q,Ie)|0,S=S+Math.imul(re,ut)|0,_=_+Math.imul(re,Re)|0,_=_+Math.imul(ne,ut)|0,F=F+Math.imul(ne,Re)|0,S=S+Math.imul(K,lt)|0,_=_+Math.imul(K,Oe)|0,_=_+Math.imul(X,lt)|0,F=F+Math.imul(X,Oe)|0,S=S+Math.imul(he,Ke)|0,_=_+Math.imul(he,Ne)|0,_=_+Math.imul(L,Ke)|0,F=F+Math.imul(L,Ne)|0,S=S+Math.imul(Z,pt)|0,_=_+Math.imul(Z,Pe)|0,_=_+Math.imul(ee,pt)|0,F=F+Math.imul(ee,Pe)|0,S=S+Math.imul(D,je)|0,_=_+Math.imul(D,st)|0,_=_+Math.imul(j,je)|0,F=F+Math.imul(j,st)|0;var Qn=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,S=Math.imul(Ue,at),_=Math.imul(Ue,Se),_=_+Math.imul(Ae,at)|0,F=Math.imul(Ae,Se),S=S+Math.imul(Fe,ft)|0,_=_+Math.imul(Fe,Te)|0,_=_+Math.imul(be,ft)|0,F=F+Math.imul(be,Te)|0,S=S+Math.imul(me,Xe)|0,_=_+Math.imul(me,Me)|0,_=_+Math.imul(ve,Xe)|0,F=F+Math.imul(ve,Me)|0,S=S+Math.imul(fe,et)|0,_=_+Math.imul(fe,Ie)|0,_=_+Math.imul(ae,et)|0,F=F+Math.imul(ae,Ie)|0,S=S+Math.imul(se,ut)|0,_=_+Math.imul(se,Re)|0,_=_+Math.imul(Q,ut)|0,F=F+Math.imul(Q,Re)|0,S=S+Math.imul(re,lt)|0,_=_+Math.imul(re,Oe)|0,_=_+Math.imul(ne,lt)|0,F=F+Math.imul(ne,Oe)|0,S=S+Math.imul(K,Ke)|0,_=_+Math.imul(K,Ne)|0,_=_+Math.imul(X,Ke)|0,F=F+Math.imul(X,Ne)|0,S=S+Math.imul(he,pt)|0,_=_+Math.imul(he,Pe)|0,_=_+Math.imul(L,pt)|0,F=F+Math.imul(L,Pe)|0,S=S+Math.imul(Z,je)|0,_=_+Math.imul(Z,st)|0,_=_+Math.imul(ee,je)|0,F=F+Math.imul(ee,st)|0;var tn=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(tn>>>26)|0,tn&=67108863,S=Math.imul(Ue,ft),_=Math.imul(Ue,Te),_=_+Math.imul(Ae,ft)|0,F=Math.imul(Ae,Te),S=S+Math.imul(Fe,Xe)|0,_=_+Math.imul(Fe,Me)|0,_=_+Math.imul(be,Xe)|0,F=F+Math.imul(be,Me)|0,S=S+Math.imul(me,et)|0,_=_+Math.imul(me,Ie)|0,_=_+Math.imul(ve,et)|0,F=F+Math.imul(ve,Ie)|0,S=S+Math.imul(fe,ut)|0,_=_+Math.imul(fe,Re)|0,_=_+Math.imul(ae,ut)|0,F=F+Math.imul(ae,Re)|0,S=S+Math.imul(se,lt)|0,_=_+Math.imul(se,Oe)|0,_=_+Math.imul(Q,lt)|0,F=F+Math.imul(Q,Oe)|0,S=S+Math.imul(re,Ke)|0,_=_+Math.imul(re,Ne)|0,_=_+Math.imul(ne,Ke)|0,F=F+Math.imul(ne,Ne)|0,S=S+Math.imul(K,pt)|0,_=_+Math.imul(K,Pe)|0,_=_+Math.imul(X,pt)|0,F=F+Math.imul(X,Pe)|0,S=S+Math.imul(he,je)|0,_=_+Math.imul(he,st)|0,_=_+Math.imul(L,je)|0,F=F+Math.imul(L,st)|0;var ei=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(ei>>>26)|0,ei&=67108863,S=Math.imul(Ue,Xe),_=Math.imul(Ue,Me),_=_+Math.imul(Ae,Xe)|0,F=Math.imul(Ae,Me),S=S+Math.imul(Fe,et)|0,_=_+Math.imul(Fe,Ie)|0,_=_+Math.imul(be,et)|0,F=F+Math.imul(be,Ie)|0,S=S+Math.imul(me,ut)|0,_=_+Math.imul(me,Re)|0,_=_+Math.imul(ve,ut)|0,F=F+Math.imul(ve,Re)|0,S=S+Math.imul(fe,lt)|0,_=_+Math.imul(fe,Oe)|0,_=_+Math.imul(ae,lt)|0,F=F+Math.imul(ae,Oe)|0,S=S+Math.imul(se,Ke)|0,_=_+Math.imul(se,Ne)|0,_=_+Math.imul(Q,Ke)|0,F=F+Math.imul(Q,Ne)|0,S=S+Math.imul(re,pt)|0,_=_+Math.imul(re,Pe)|0,_=_+Math.imul(ne,pt)|0,F=F+Math.imul(ne,Pe)|0,S=S+Math.imul(K,je)|0,_=_+Math.imul(K,st)|0,_=_+Math.imul(X,je)|0,F=F+Math.imul(X,st)|0;var ti=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(ti>>>26)|0,ti&=67108863,S=Math.imul(Ue,et),_=Math.imul(Ue,Ie),_=_+Math.imul(Ae,et)|0,F=Math.imul(Ae,Ie),S=S+Math.imul(Fe,ut)|0,_=_+Math.imul(Fe,Re)|0,_=_+Math.imul(be,ut)|0,F=F+Math.imul(be,Re)|0,S=S+Math.imul(me,lt)|0,_=_+Math.imul(me,Oe)|0,_=_+Math.imul(ve,lt)|0,F=F+Math.imul(ve,Oe)|0,S=S+Math.imul(fe,Ke)|0,_=_+Math.imul(fe,Ne)|0,_=_+Math.imul(ae,Ke)|0,F=F+Math.imul(ae,Ne)|0,S=S+Math.imul(se,pt)|0,_=_+Math.imul(se,Pe)|0,_=_+Math.imul(Q,pt)|0,F=F+Math.imul(Q,Pe)|0,S=S+Math.imul(re,je)|0,_=_+Math.imul(re,st)|0,_=_+Math.imul(ne,je)|0,F=F+Math.imul(ne,st)|0;var gr=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(gr>>>26)|0,gr&=67108863,S=Math.imul(Ue,ut),_=Math.imul(Ue,Re),_=_+Math.imul(Ae,ut)|0,F=Math.imul(Ae,Re),S=S+Math.imul(Fe,lt)|0,_=_+Math.imul(Fe,Oe)|0,_=_+Math.imul(be,lt)|0,F=F+Math.imul(be,Oe)|0,S=S+Math.imul(me,Ke)|0,_=_+Math.imul(me,Ne)|0,_=_+Math.imul(ve,Ke)|0,F=F+Math.imul(ve,Ne)|0,S=S+Math.imul(fe,pt)|0,_=_+Math.imul(fe,Pe)|0,_=_+Math.imul(ae,pt)|0,F=F+Math.imul(ae,Pe)|0,S=S+Math.imul(se,je)|0,_=_+Math.imul(se,st)|0,_=_+Math.imul(Q,je)|0,F=F+Math.imul(Q,st)|0;var ri=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(ri>>>26)|0,ri&=67108863,S=Math.imul(Ue,lt),_=Math.imul(Ue,Oe),_=_+Math.imul(Ae,lt)|0,F=Math.imul(Ae,Oe),S=S+Math.imul(Fe,Ke)|0,_=_+Math.imul(Fe,Ne)|0,_=_+Math.imul(be,Ke)|0,F=F+Math.imul(be,Ne)|0,S=S+Math.imul(me,pt)|0,_=_+Math.imul(me,Pe)|0,_=_+Math.imul(ve,pt)|0,F=F+Math.imul(ve,Pe)|0,S=S+Math.imul(fe,je)|0,_=_+Math.imul(fe,st)|0,_=_+Math.imul(ae,je)|0,F=F+Math.imul(ae,st)|0;var ni=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(ni>>>26)|0,ni&=67108863,S=Math.imul(Ue,Ke),_=Math.imul(Ue,Ne),_=_+Math.imul(Ae,Ke)|0,F=Math.imul(Ae,Ne),S=S+Math.imul(Fe,pt)|0,_=_+Math.imul(Fe,Pe)|0,_=_+Math.imul(be,pt)|0,F=F+Math.imul(be,Pe)|0,S=S+Math.imul(me,je)|0,_=_+Math.imul(me,st)|0,_=_+Math.imul(ve,je)|0,F=F+Math.imul(ve,st)|0;var ii=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(ii>>>26)|0,ii&=67108863,S=Math.imul(Ue,pt),_=Math.imul(Ue,Pe),_=_+Math.imul(Ae,pt)|0,F=Math.imul(Ae,Pe),S=S+Math.imul(Fe,je)|0,_=_+Math.imul(Fe,st)|0,_=_+Math.imul(be,je)|0,F=F+Math.imul(be,st)|0;var fo=(m+S|0)+((_&8191)<<13)|0;m=(F+(_>>>13)|0)+(fo>>>26)|0,fo&=67108863,S=Math.imul(Ue,je),_=Math.imul(Ue,st),_=_+Math.imul(Ae,je)|0,F=Math.imul(Ae,st);var co=(m+S|0)+((_&8191)<<13)|0;return m=(F+(_>>>13)|0)+(co>>>26)|0,co&=67108863,A[0]=Rr,A[1]=Nr,A[2]=Pr,A[3]=Fr,A[4]=Vt,A[5]=Xn,A[6]=Yn,A[7]=Zn,A[8]=Jn,A[9]=Qn,A[10]=tn,A[11]=ei,A[12]=ti,A[13]=gr,A[14]=ri,A[15]=ni,A[16]=ii,A[17]=fo,A[18]=co,m!==0&&(A[19]=m,w.length++),w};Math.imul||(M=O);function R(b,l,g){g.negative=l.negative^b.negative,g.length=b.length+l.length;for(var w=0,E=0,I=0;I<g.length-1;I++){var A=E;E=0;for(var m=w&67108863,S=Math.min(I,l.length-1),_=Math.max(0,I-b.length+1);_<=S;_++){var F=I-_,Y=b.words[F]|0,D=l.words[_]|0,j=Y*D,G=j&67108863;A=A+(j/67108864|0)|0,G=G+m|0,m=G&67108863,A=A+(G>>>26)|0,E+=A>>>26,A&=67108863}g.words[I]=m,w=A,A=E}return w!==0?g.words[I]=w:g.length--,g._strip()}function T(b,l,g){return R(b,l,g)}s.prototype.mulTo=function(l,g){var w,E=this.length+l.length;return this.length===10&&l.length===10?w=M(this,l,g):E<63?w=O(this,l,g):E<1024?w=R(this,l,g):w=T(this,l,g),w},s.prototype.mul=function(l){var g=new s(null);return g.words=new Array(this.length+l.length),this.mulTo(l,g)},s.prototype.mulf=function(l){var g=new s(null);return g.words=new Array(this.length+l.length),T(this,l,g)},s.prototype.imul=function(l){return this.clone().mulTo(l,this)},s.prototype.imuln=function(l){var g=l<0;g&&(l=-l),n(typeof l=="number"),n(l<67108864);for(var w=0,E=0;E<this.length;E++){var I=(this.words[E]|0)*l,A=(I&67108863)+(w&67108863);w>>=26,w+=I/67108864|0,w+=A>>>26,this.words[E]=A&67108863}return w!==0&&(this.words[E]=w,this.length++),g?this.ineg():this},s.prototype.muln=function(l){return this.clone().imuln(l)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(l){var g=C(l);if(g.length===0)return new s(1);for(var w=this,E=0;E<g.length&&g[E]===0;E++,w=w.sqr());if(++E<g.length)for(var I=w.sqr();E<g.length;E++,I=I.sqr())g[E]!==0&&(w=w.mul(I));return w},s.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var g=l%26,w=(l-g)/26,E=67108863>>>26-g<<26-g,I;if(g!==0){var A=0;for(I=0;I<this.length;I++){var m=this.words[I]&E,S=(this.words[I]|0)-m<<g;this.words[I]=S|A,A=m>>>26-g}A&&(this.words[I]=A,this.length++)}if(w!==0){for(I=this.length-1;I>=0;I--)this.words[I+w]=this.words[I];for(I=0;I<w;I++)this.words[I]=0;this.length+=w}return this._strip()},s.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},s.prototype.iushrn=function(l,g,w){n(typeof l=="number"&&l>=0);var E;g?E=(g-g%26)/26:E=0;var I=l%26,A=Math.min((l-I)/26,this.length),m=67108863^67108863>>>I<<I,S=w;if(E-=A,E=Math.max(0,E),S){for(var _=0;_<A;_++)S.words[_]=this.words[_];S.length=A}if(A!==0)if(this.length>A)for(this.length-=A,_=0;_<this.length;_++)this.words[_]=this.words[_+A];else this.words[0]=0,this.length=1;var F=0;for(_=this.length-1;_>=0&&(F!==0||_>=E);_--){var Y=this.words[_]|0;this.words[_]=F<<26-I|Y>>>I,F=Y&m}return S&&F!==0&&(S.words[S.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(l,g,w){return n(this.negative===0),this.iushrn(l,g,w)},s.prototype.shln=function(l){return this.clone().ishln(l)},s.prototype.ushln=function(l){return this.clone().iushln(l)},s.prototype.shrn=function(l){return this.clone().ishrn(l)},s.prototype.ushrn=function(l){return this.clone().iushrn(l)},s.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var g=l%26,w=(l-g)/26,E=1<<g;if(this.length<=w)return!1;var I=this.words[w];return!!(I&E)},s.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var g=l%26,w=(l-g)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(g!==0&&w++,this.length=Math.min(w,this.length),g!==0){var E=67108863^67108863>>>g<<g;this.words[this.length-1]&=E}return this._strip()},s.prototype.maskn=function(l){return this.clone().imaskn(l)},s.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},s.prototype._iaddn=function(l){this.words[0]+=l;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},s.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},s.prototype.addn=function(l){return this.clone().iaddn(l)},s.prototype.subn=function(l){return this.clone().isubn(l)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(l,g,w){var E=l.length+w,I;this._expand(E);var A,m=0;for(I=0;I<l.length;I++){A=(this.words[I+w]|0)+m;var S=(l.words[I]|0)*g;A-=S&67108863,m=(A>>26)-(S/67108864|0),this.words[I+w]=A&67108863}for(;I<this.length-w;I++)A=(this.words[I+w]|0)+m,m=A>>26,this.words[I+w]=A&67108863;if(m===0)return this._strip();for(n(m===-1),m=0,I=0;I<this.length;I++)A=-(this.words[I]|0)+m,m=A>>26,this.words[I]=A&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(l,g){var w=this.length-l.length,E=this.clone(),I=l,A=I.words[I.length-1]|0,m=this._countBits(A);w=26-m,w!==0&&(I=I.ushln(w),E.iushln(w),A=I.words[I.length-1]|0);var S=E.length-I.length,_;if(g!=="mod"){_=new s(null),_.length=S+1,_.words=new Array(_.length);for(var F=0;F<_.length;F++)_.words[F]=0}var Y=E.clone()._ishlnsubmul(I,1,S);Y.negative===0&&(E=Y,_&&(_.words[S]=1));for(var D=S-1;D>=0;D--){var j=(E.words[I.length+D]|0)*67108864+(E.words[I.length+D-1]|0);for(j=Math.min(j/A|0,67108863),E._ishlnsubmul(I,j,D);E.negative!==0;)j--,E.negative=0,E._ishlnsubmul(I,1,D),E.isZero()||(E.negative^=1);_&&(_.words[D]=j)}return _&&_._strip(),E._strip(),g!=="div"&&w!==0&&E.iushrn(w),{div:_||null,mod:E}},s.prototype.divmod=function(l,g,w){if(n(!l.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var E,I,A;return this.negative!==0&&l.negative===0?(A=this.neg().divmod(l,g),g!=="mod"&&(E=A.div.neg()),g!=="div"&&(I=A.mod.neg(),w&&I.negative!==0&&I.iadd(l)),{div:E,mod:I}):this.negative===0&&l.negative!==0?(A=this.divmod(l.neg(),g),g!=="mod"&&(E=A.div.neg()),{div:E,mod:A.mod}):this.negative&l.negative?(A=this.neg().divmod(l.neg(),g),g!=="div"&&(I=A.mod.neg(),w&&I.negative!==0&&I.isub(l)),{div:A.div,mod:I}):l.length>this.length||this.cmp(l)<0?{div:new s(0),mod:this}:l.length===1?g==="div"?{div:this.divn(l.words[0]),mod:null}:g==="mod"?{div:null,mod:new s(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new s(this.modrn(l.words[0]))}:this._wordDiv(l,g)},s.prototype.div=function(l){return this.divmod(l,"div",!1).div},s.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},s.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},s.prototype.divRound=function(l){var g=this.divmod(l);if(g.mod.isZero())return g.div;var w=g.div.negative!==0?g.mod.isub(l):g.mod,E=l.ushrn(1),I=l.andln(1),A=w.cmp(E);return A<0||I===1&&A===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},s.prototype.modrn=function(l){var g=l<0;g&&(l=-l),n(l<=67108863);for(var w=(1<<26)%l,E=0,I=this.length-1;I>=0;I--)E=(w*E+(this.words[I]|0))%l;return g?-E:E},s.prototype.modn=function(l){return this.modrn(l)},s.prototype.idivn=function(l){var g=l<0;g&&(l=-l),n(l<=67108863);for(var w=0,E=this.length-1;E>=0;E--){var I=(this.words[E]|0)+w*67108864;this.words[E]=I/l|0,w=I%l}return this._strip(),g?this.ineg():this},s.prototype.divn=function(l){return this.clone().idivn(l)},s.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var g=this,w=l.clone();g.negative!==0?g=g.umod(l):g=g.clone();for(var E=new s(1),I=new s(0),A=new s(0),m=new s(1),S=0;g.isEven()&&w.isEven();)g.iushrn(1),w.iushrn(1),++S;for(var _=w.clone(),F=g.clone();!g.isZero();){for(var Y=0,D=1;!(g.words[0]&D)&&Y<26;++Y,D<<=1);if(Y>0)for(g.iushrn(Y);Y-- >0;)(E.isOdd()||I.isOdd())&&(E.iadd(_),I.isub(F)),E.iushrn(1),I.iushrn(1);for(var j=0,G=1;!(w.words[0]&G)&&j<26;++j,G<<=1);if(j>0)for(w.iushrn(j);j-- >0;)(A.isOdd()||m.isOdd())&&(A.iadd(_),m.isub(F)),A.iushrn(1),m.iushrn(1);g.cmp(w)>=0?(g.isub(w),E.isub(A),I.isub(m)):(w.isub(g),A.isub(E),m.isub(I))}return{a:A,b:m,gcd:w.iushln(S)}},s.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var g=this,w=l.clone();g.negative!==0?g=g.umod(l):g=g.clone();for(var E=new s(1),I=new s(0),A=w.clone();g.cmpn(1)>0&&w.cmpn(1)>0;){for(var m=0,S=1;!(g.words[0]&S)&&m<26;++m,S<<=1);if(m>0)for(g.iushrn(m);m-- >0;)E.isOdd()&&E.iadd(A),E.iushrn(1);for(var _=0,F=1;!(w.words[0]&F)&&_<26;++_,F<<=1);if(_>0)for(w.iushrn(_);_-- >0;)I.isOdd()&&I.iadd(A),I.iushrn(1);g.cmp(w)>=0?(g.isub(w),E.isub(I)):(w.isub(g),I.isub(E))}var Y;return g.cmpn(1)===0?Y=E:Y=I,Y.cmpn(0)<0&&Y.iadd(l),Y},s.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var g=this.clone(),w=l.clone();g.negative=0,w.negative=0;for(var E=0;g.isEven()&&w.isEven();E++)g.iushrn(1),w.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;w.isEven();)w.iushrn(1);var I=g.cmp(w);if(I<0){var A=g;g=w,w=A}else if(I===0||w.cmpn(1)===0)break;g.isub(w)}while(!0);return w.iushln(E)},s.prototype.invm=function(l){return this.egcd(l).a.umod(l)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(l){return this.words[0]&l},s.prototype.bincn=function(l){n(typeof l=="number");var g=l%26,w=(l-g)/26,E=1<<g;if(this.length<=w)return this._expand(w+1),this.words[w]|=E,this;for(var I=E,A=w;I!==0&&A<this.length;A++){var m=this.words[A]|0;m+=I,I=m>>>26,m&=67108863,this.words[A]=m}return I!==0&&(this.words[A]=I,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(l){var g=l<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var w;if(this.length>1)w=1;else{g&&(l=-l),n(l<=67108863,"Number is too big");var E=this.words[0]|0;w=E===l?0:E<l?-1:1}return this.negative!==0?-w|0:w},s.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var g=this.ucmp(l);return this.negative!==0?-g|0:g},s.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var g=0,w=this.length-1;w>=0;w--){var E=this.words[w]|0,I=l.words[w]|0;if(E!==I){E<I?g=-1:E>I&&(g=1);break}}return g},s.prototype.gtn=function(l){return this.cmpn(l)===1},s.prototype.gt=function(l){return this.cmp(l)===1},s.prototype.gten=function(l){return this.cmpn(l)>=0},s.prototype.gte=function(l){return this.cmp(l)>=0},s.prototype.ltn=function(l){return this.cmpn(l)===-1},s.prototype.lt=function(l){return this.cmp(l)===-1},s.prototype.lten=function(l){return this.cmpn(l)<=0},s.prototype.lte=function(l){return this.cmp(l)<=0},s.prototype.eqn=function(l){return this.cmpn(l)===0},s.prototype.eq=function(l){return this.cmp(l)===0},s.red=function(l){return new B(l)},s.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(l){return this.red=l,this},s.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},s.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},s.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},s.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},s.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},s.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},s.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},s.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var P={k256:null,p224:null,p192:null,p25519:null};function N(b,l){this.name=b,this.p=new s(l,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var l=new s(null);return l.words=new Array(Math.ceil(this.n/13)),l},N.prototype.ireduce=function(l){var g=l,w;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),w=g.bitLength();while(w>this.n);var E=w<this.n?-1:g.ucmp(this.p);return E===0?(g.words[0]=0,g.length=1):E>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},N.prototype.split=function(l,g){l.iushrn(this.n,0,g)},N.prototype.imulK=function(l){return l.imul(this.k)};function $(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i($,N),$.prototype.split=function(l,g){for(var w=4194303,E=Math.min(l.length,9),I=0;I<E;I++)g.words[I]=l.words[I];if(g.length=E,l.length<=9){l.words[0]=0,l.length=1;return}var A=l.words[9];for(g.words[g.length++]=A&w,I=10;I<l.length;I++){var m=l.words[I]|0;l.words[I-10]=(m&w)<<4|A>>>22,A=m}A>>>=22,l.words[I-10]=A,A===0&&l.length>10?l.length-=10:l.length-=9},$.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var g=0,w=0;w<l.length;w++){var E=l.words[w]|0;g+=E*977,l.words[w]=g&67108863,g=E*64+(g/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function U(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(U,N);function V(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(V,N);function H(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(H,N),H.prototype.imulK=function(l){for(var g=0,w=0;w<l.length;w++){var E=(l.words[w]|0)*19+g,I=E&67108863;E>>>=26,l.words[w]=I,g=E}return g!==0&&(l.words[l.length++]=g),l},s._prime=function(l){if(P[l])return P[l];var g;if(l==="k256")g=new $;else if(l==="p224")g=new U;else if(l==="p192")g=new V;else if(l==="p25519")g=new H;else throw new Error("Unknown prime "+l);return P[l]=g,g};function B(b){if(typeof b=="string"){var l=s._prime(b);this.m=l.p,this.prime=l}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}B.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},B.prototype._verify2=function(l,g){n((l.negative|g.negative)===0,"red works only with positives"),n(l.red&&l.red===g.red,"red works only with red numbers")},B.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(u(l,l.umod(this.m)._forceRed(this)),l)},B.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},B.prototype.add=function(l,g){this._verify2(l,g);var w=l.add(g);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},B.prototype.iadd=function(l,g){this._verify2(l,g);var w=l.iadd(g);return w.cmp(this.m)>=0&&w.isub(this.m),w},B.prototype.sub=function(l,g){this._verify2(l,g);var w=l.sub(g);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},B.prototype.isub=function(l,g){this._verify2(l,g);var w=l.isub(g);return w.cmpn(0)<0&&w.iadd(this.m),w},B.prototype.shl=function(l,g){return this._verify1(l),this.imod(l.ushln(g))},B.prototype.imul=function(l,g){return this._verify2(l,g),this.imod(l.imul(g))},B.prototype.mul=function(l,g){return this._verify2(l,g),this.imod(l.mul(g))},B.prototype.isqr=function(l){return this.imul(l,l.clone())},B.prototype.sqr=function(l){return this.mul(l,l)},B.prototype.sqrt=function(l){if(l.isZero())return l.clone();var g=this.m.andln(3);if(n(g%2===1),g===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(l,w)}for(var E=this.m.subn(1),I=0;!E.isZero()&&E.andln(1)===0;)I++,E.iushrn(1);n(!E.isZero());var A=new s(1).toRed(this),m=A.redNeg(),S=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new s(2*_*_).toRed(this);this.pow(_,S).cmp(m)!==0;)_.redIAdd(m);for(var F=this.pow(_,E),Y=this.pow(l,E.addn(1).iushrn(1)),D=this.pow(l,E),j=I;D.cmp(A)!==0;){for(var G=D,Z=0;G.cmp(A)!==0;Z++)G=G.redSqr();n(Z<j);var ee=this.pow(F,new s(1).iushln(j-Z-1));Y=Y.redMul(ee),F=ee.redSqr(),D=D.redMul(F),j=Z}return Y},B.prototype.invm=function(l){var g=l._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},B.prototype.pow=function(l,g){if(g.isZero())return new s(1).toRed(this);if(g.cmpn(1)===0)return l.clone();var w=4,E=new Array(1<<w);E[0]=new s(1).toRed(this),E[1]=l;for(var I=2;I<E.length;I++)E[I]=this.mul(E[I-1],l);var A=E[0],m=0,S=0,_=g.bitLength()%26;for(_===0&&(_=26),I=g.length-1;I>=0;I--){for(var F=g.words[I],Y=_-1;Y>=0;Y--){var D=F>>Y&1;if(A!==E[0]&&(A=this.sqr(A)),D===0&&m===0){S=0;continue}m<<=1,m|=D,S++,!(S!==w&&(I!==0||Y!==0))&&(A=this.mul(A,E[m]),S=0,m=0)}_=26}return A},B.prototype.convertTo=function(l){var g=l.umod(this.m);return g===l?g.clone():g},B.prototype.convertFrom=function(l){var g=l.clone();return g.red=null,g},s.mont=function(l){return new y(l)};function y(b){B.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(y,B),y.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},y.prototype.convertFrom=function(l){var g=this.imod(l.mul(this.rinv));return g.red=null,g},y.prototype.imul=function(l,g){if(l.isZero()||g.isZero())return l.words[0]=0,l.length=1,l;var w=l.imul(g),E=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=w.isub(E).iushrn(this.shift),A=I;return I.cmp(this.m)>=0?A=I.isub(this.m):I.cmpn(0)<0&&(A=I.iadd(this.m)),A._forceRed(this)},y.prototype.mul=function(l,g){if(l.isZero()||g.isZero())return new s(0)._forceRed(this);var w=l.mul(g),E=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=w.isub(E).iushrn(this.shift),A=I;return I.cmp(this.m)>=0?A=I.isub(this.m):I.cmpn(0)<0&&(A=I.iadd(this.m)),A._forceRed(this)},y.prototype.invm=function(l){var g=this.imod(l._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,B6)}(nf)),nf.exports}var $6=L6();const Le=ro($6);var k6=Le.BN;function U6(t){return new k6(t,36).toString(16)}var Hc={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */var Ad;function q6(){return Ad||(Ad=1,function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=Sn:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,f=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],h=[4,1024,262144,67108864],d=[1,256,65536,16777216],p=[6,1536,393216,100663296],v=[0,8,16,24],x=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],C=[224,256,384,512],O=[128,256],M=["hex","buffer","arrayBuffer","array","digest"],R={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(D){return Object.prototype.toString.call(D)==="[object Array]"}),f&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(D){return typeof D=="object"&&D.buffer&&D.buffer.constructor===ArrayBuffer});for(var T=function(D,j,G){return function(Z){return new _(D,j,D).update(Z)[G]()}},P=function(D,j,G){return function(Z,ee){return new _(D,j,ee).update(Z)[G]()}},N=function(D,j,G){return function(Z,ee,ue,he){return l["cshake"+D].update(Z,ee,ue,he)[G]()}},$=function(D,j,G){return function(Z,ee,ue,he){return l["kmac"+D].update(Z,ee,ue,he)[G]()}},U=function(D,j,G,Z){for(var ee=0;ee<M.length;++ee){var ue=M[ee];D[ue]=j(G,Z,ue)}return D},V=function(D,j){var G=T(D,j,"hex");return G.create=function(){return new _(D,j,D)},G.update=function(Z){return G.create().update(Z)},U(G,T,D,j)},H=function(D,j){var G=P(D,j,"hex");return G.create=function(Z){return new _(D,j,Z)},G.update=function(Z,ee){return G.create(ee).update(Z)},U(G,P,D,j)},B=function(D,j){var G=R[D],Z=N(D,j,"hex");return Z.create=function(ee,ue,he){return!ue&&!he?l["shake"+D].create(ee):new _(D,j,ee).bytepad([ue,he],G)},Z.update=function(ee,ue,he,L){return Z.create(ue,he,L).update(ee)},U(Z,N,D,j)},y=function(D,j){var G=R[D],Z=$(D,j,"hex");return Z.create=function(ee,ue,he){return new F(D,j,ue).bytepad(["KMAC",he],G).bytepad([ee],G)},Z.update=function(ee,ue,he,L){return Z.create(ee,he,L).update(ue)},U(Z,$,D,j)},b=[{name:"keccak",padding:d,bits:C,createMethod:V},{name:"sha3",padding:p,bits:C,createMethod:V},{name:"shake",padding:u,bits:O,createMethod:H},{name:"cshake",padding:h,bits:O,createMethod:B},{name:"kmac",padding:h,bits:O,createMethod:y}],l={},g=[],w=0;w<b.length;++w)for(var E=b[w],I=E.bits,A=0;A<I.length;++A){var m=E.name+"_"+I[A];if(g.push(m),l[m]=E.createMethod(I[A],E.padding),E.name!=="sha3"){var S=E.name+I[A];g.push(S),l[S]=l[m]}}function _(D,j,G){this.blocks=[],this.s=[],this.padding=j,this.outputBits=G,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(D<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=G>>5,this.extraBytes=(G&31)>>3;for(var Z=0;Z<50;++Z)this.s[Z]=0}_.prototype.update=function(D){if(this.finalized)throw new Error(r);var j,G=typeof D;if(G!=="string"){if(G==="object"){if(D===null)throw new Error(e);if(f&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!f||!ArrayBuffer.isView(D)))throw new Error(e)}else throw new Error(e);j=!0}for(var Z=this.blocks,ee=this.byteCount,ue=D.length,he=this.blockCount,L=0,z=this.s,K,X;L<ue;){if(this.reset)for(this.reset=!1,Z[0]=this.block,K=1;K<he+1;++K)Z[K]=0;if(j)for(K=this.start;L<ue&&K<ee;++L)Z[K>>2]|=D[L]<<v[K++&3];else for(K=this.start;L<ue&&K<ee;++L)X=D.charCodeAt(L),X<128?Z[K>>2]|=X<<v[K++&3]:X<2048?(Z[K>>2]|=(192|X>>6)<<v[K++&3],Z[K>>2]|=(128|X&63)<<v[K++&3]):X<55296||X>=57344?(Z[K>>2]|=(224|X>>12)<<v[K++&3],Z[K>>2]|=(128|X>>6&63)<<v[K++&3],Z[K>>2]|=(128|X&63)<<v[K++&3]):(X=65536+((X&1023)<<10|D.charCodeAt(++L)&1023),Z[K>>2]|=(240|X>>18)<<v[K++&3],Z[K>>2]|=(128|X>>12&63)<<v[K++&3],Z[K>>2]|=(128|X>>6&63)<<v[K++&3],Z[K>>2]|=(128|X&63)<<v[K++&3]);if(this.lastByteIndex=K,K>=ee){for(this.start=K-ee,this.block=Z[he],K=0;K<he;++K)z[K]^=Z[K];Y(z),this.reset=!0}else this.start=K}return this},_.prototype.encode=function(D,j){var G=D&255,Z=1,ee=[G];for(D=D>>8,G=D&255;G>0;)ee.unshift(G),D=D>>8,G=D&255,++Z;return j?ee.push(Z):ee.unshift(Z),this.update(ee),ee.length},_.prototype.encodeString=function(D){var j,G=typeof D;if(G!=="string"){if(G==="object"){if(D===null)throw new Error(e);if(f&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!f||!ArrayBuffer.isView(D)))throw new Error(e)}else throw new Error(e);j=!0}var Z=0,ee=D.length;if(j)Z=ee;else for(var ue=0;ue<D.length;++ue){var he=D.charCodeAt(ue);he<128?Z+=1:he<2048?Z+=2:he<55296||he>=57344?Z+=3:(he=65536+((he&1023)<<10|D.charCodeAt(++ue)&1023),Z+=4)}return Z+=this.encode(Z*8),this.update(D),Z},_.prototype.bytepad=function(D,j){for(var G=this.encode(j),Z=0;Z<D.length;++Z)G+=this.encodeString(D[Z]);var ee=j-G%j,ue=[];return ue.length=ee,this.update(ue),this},_.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var D=this.blocks,j=this.lastByteIndex,G=this.blockCount,Z=this.s;if(D[j>>2]|=this.padding[j&3],this.lastByteIndex===this.byteCount)for(D[0]=D[G],j=1;j<G+1;++j)D[j]=0;for(D[G-1]|=2147483648,j=0;j<G;++j)Z[j]^=D[j];Y(Z)}},_.prototype.toString=_.prototype.hex=function(){this.finalize();for(var D=this.blockCount,j=this.s,G=this.outputBlocks,Z=this.extraBytes,ee=0,ue=0,he="",L;ue<G;){for(ee=0;ee<D&&ue<G;++ee,++ue)L=j[ee],he+=c[L>>4&15]+c[L&15]+c[L>>12&15]+c[L>>8&15]+c[L>>20&15]+c[L>>16&15]+c[L>>28&15]+c[L>>24&15];ue%D===0&&(Y(j),ee=0)}return Z&&(L=j[ee],he+=c[L>>4&15]+c[L&15],Z>1&&(he+=c[L>>12&15]+c[L>>8&15]),Z>2&&(he+=c[L>>20&15]+c[L>>16&15])),he},_.prototype.arrayBuffer=function(){this.finalize();var D=this.blockCount,j=this.s,G=this.outputBlocks,Z=this.extraBytes,ee=0,ue=0,he=this.outputBits>>3,L;Z?L=new ArrayBuffer(G+1<<2):L=new ArrayBuffer(he);for(var z=new Uint32Array(L);ue<G;){for(ee=0;ee<D&&ue<G;++ee,++ue)z[ue]=j[ee];ue%D===0&&Y(j)}return Z&&(z[ee]=j[ee],L=L.slice(0,he)),L},_.prototype.buffer=_.prototype.arrayBuffer,_.prototype.digest=_.prototype.array=function(){this.finalize();for(var D=this.blockCount,j=this.s,G=this.outputBlocks,Z=this.extraBytes,ee=0,ue=0,he=[],L,z;ue<G;){for(ee=0;ee<D&&ue<G;++ee,++ue)L=ue<<2,z=j[ee],he[L]=z&255,he[L+1]=z>>8&255,he[L+2]=z>>16&255,he[L+3]=z>>24&255;ue%D===0&&Y(j)}return Z&&(L=ue<<2,z=j[ee],he[L]=z&255,Z>1&&(he[L+1]=z>>8&255),Z>2&&(he[L+2]=z>>16&255)),he};function F(D,j,G){_.call(this,D,j,G)}F.prototype=new _,F.prototype.finalize=function(){return this.encode(this.outputBits,!0),_.prototype.finalize.call(this)};var Y=function(D){var j,G,Z,ee,ue,he,L,z,K,X,te,re,ne,oe,se,Q,le,fe,ae,pe,me,ve,xe,Fe,be,ke,Ue,Ae,We,Be,_e,Ge,at,Se,it,ft,Te,Je,Xe,Me,Qe,et,Ie,ct,ut,Re,ht,lt,Oe,tt,Ke,Ne,dt,pt,Pe,vt,je,st,Rr,Nr,Pr,Fr,Vt;for(Z=0;Z<48;Z+=2)ee=D[0]^D[10]^D[20]^D[30]^D[40],ue=D[1]^D[11]^D[21]^D[31]^D[41],he=D[2]^D[12]^D[22]^D[32]^D[42],L=D[3]^D[13]^D[23]^D[33]^D[43],z=D[4]^D[14]^D[24]^D[34]^D[44],K=D[5]^D[15]^D[25]^D[35]^D[45],X=D[6]^D[16]^D[26]^D[36]^D[46],te=D[7]^D[17]^D[27]^D[37]^D[47],re=D[8]^D[18]^D[28]^D[38]^D[48],ne=D[9]^D[19]^D[29]^D[39]^D[49],j=re^(he<<1|L>>>31),G=ne^(L<<1|he>>>31),D[0]^=j,D[1]^=G,D[10]^=j,D[11]^=G,D[20]^=j,D[21]^=G,D[30]^=j,D[31]^=G,D[40]^=j,D[41]^=G,j=ee^(z<<1|K>>>31),G=ue^(K<<1|z>>>31),D[2]^=j,D[3]^=G,D[12]^=j,D[13]^=G,D[22]^=j,D[23]^=G,D[32]^=j,D[33]^=G,D[42]^=j,D[43]^=G,j=he^(X<<1|te>>>31),G=L^(te<<1|X>>>31),D[4]^=j,D[5]^=G,D[14]^=j,D[15]^=G,D[24]^=j,D[25]^=G,D[34]^=j,D[35]^=G,D[44]^=j,D[45]^=G,j=z^(re<<1|ne>>>31),G=K^(ne<<1|re>>>31),D[6]^=j,D[7]^=G,D[16]^=j,D[17]^=G,D[26]^=j,D[27]^=G,D[36]^=j,D[37]^=G,D[46]^=j,D[47]^=G,j=X^(ee<<1|ue>>>31),G=te^(ue<<1|ee>>>31),D[8]^=j,D[9]^=G,D[18]^=j,D[19]^=G,D[28]^=j,D[29]^=G,D[38]^=j,D[39]^=G,D[48]^=j,D[49]^=G,oe=D[0],se=D[1],Re=D[11]<<4|D[10]>>>28,ht=D[10]<<4|D[11]>>>28,Ae=D[20]<<3|D[21]>>>29,We=D[21]<<3|D[20]>>>29,Nr=D[31]<<9|D[30]>>>23,Pr=D[30]<<9|D[31]>>>23,et=D[40]<<18|D[41]>>>14,Ie=D[41]<<18|D[40]>>>14,Se=D[2]<<1|D[3]>>>31,it=D[3]<<1|D[2]>>>31,Q=D[13]<<12|D[12]>>>20,le=D[12]<<12|D[13]>>>20,lt=D[22]<<10|D[23]>>>22,Oe=D[23]<<10|D[22]>>>22,Be=D[33]<<13|D[32]>>>19,_e=D[32]<<13|D[33]>>>19,Fr=D[42]<<2|D[43]>>>30,Vt=D[43]<<2|D[42]>>>30,pt=D[5]<<30|D[4]>>>2,Pe=D[4]<<30|D[5]>>>2,ft=D[14]<<6|D[15]>>>26,Te=D[15]<<6|D[14]>>>26,fe=D[25]<<11|D[24]>>>21,ae=D[24]<<11|D[25]>>>21,tt=D[34]<<15|D[35]>>>17,Ke=D[35]<<15|D[34]>>>17,Ge=D[45]<<29|D[44]>>>3,at=D[44]<<29|D[45]>>>3,Fe=D[6]<<28|D[7]>>>4,be=D[7]<<28|D[6]>>>4,vt=D[17]<<23|D[16]>>>9,je=D[16]<<23|D[17]>>>9,Je=D[26]<<25|D[27]>>>7,Xe=D[27]<<25|D[26]>>>7,pe=D[36]<<21|D[37]>>>11,me=D[37]<<21|D[36]>>>11,Ne=D[47]<<24|D[46]>>>8,dt=D[46]<<24|D[47]>>>8,ct=D[8]<<27|D[9]>>>5,ut=D[9]<<27|D[8]>>>5,ke=D[18]<<20|D[19]>>>12,Ue=D[19]<<20|D[18]>>>12,st=D[29]<<7|D[28]>>>25,Rr=D[28]<<7|D[29]>>>25,Me=D[38]<<8|D[39]>>>24,Qe=D[39]<<8|D[38]>>>24,ve=D[48]<<14|D[49]>>>18,xe=D[49]<<14|D[48]>>>18,D[0]=oe^~Q&fe,D[1]=se^~le&ae,D[10]=Fe^~ke&Ae,D[11]=be^~Ue&We,D[20]=Se^~ft&Je,D[21]=it^~Te&Xe,D[30]=ct^~Re&lt,D[31]=ut^~ht&Oe,D[40]=pt^~vt&st,D[41]=Pe^~je&Rr,D[2]=Q^~fe&pe,D[3]=le^~ae&me,D[12]=ke^~Ae&Be,D[13]=Ue^~We&_e,D[22]=ft^~Je&Me,D[23]=Te^~Xe&Qe,D[32]=Re^~lt&tt,D[33]=ht^~Oe&Ke,D[42]=vt^~st&Nr,D[43]=je^~Rr&Pr,D[4]=fe^~pe&ve,D[5]=ae^~me&xe,D[14]=Ae^~Be&Ge,D[15]=We^~_e&at,D[24]=Je^~Me&et,D[25]=Xe^~Qe&Ie,D[34]=lt^~tt&Ne,D[35]=Oe^~Ke&dt,D[44]=st^~Nr&Fr,D[45]=Rr^~Pr&Vt,D[6]=pe^~ve&oe,D[7]=me^~xe&se,D[16]=Be^~Ge&Fe,D[17]=_e^~at&be,D[26]=Me^~et&Se,D[27]=Qe^~Ie&it,D[36]=tt^~Ne&ct,D[37]=Ke^~dt&ut,D[46]=Nr^~Fr&pt,D[47]=Pr^~Vt&Pe,D[8]=ve^~oe&Q,D[9]=xe^~se&le,D[18]=Ge^~Fe&ke,D[19]=at^~be&Ue,D[28]=et^~Se&ft,D[29]=Ie^~it&Te,D[38]=Ne^~ct&Re,D[39]=dt^~ut&ht,D[48]=Fr^~pt&vt,D[49]=Vt^~Pe&je,D[0]^=x[Z],D[1]^=x[Z+1]};if(a)t.exports=l;else for(w=0;w<g.length;++w)i[g[w]]=l[g[w]]})()}(Hc)),Hc.exports}var z6=q6();const V6=ro(z6);function i2(t){return"0x"+V6.keccak_256(tr(t))}const j6="address/5.7.0",No=new Pt(j6);function Sd(t){Vn(t,20)||No.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=tr(i2(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const H6=9007199254740991;function K6(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const pl={};for(let t=0;t<10;t++)pl[String(t)]=String(t);for(let t=0;t<26;t++)pl[String.fromCharCode(65+t)]=String(10+t);const Id=Math.floor(K6(H6));function W6(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>pl[n]).join("");for(;e.length>=Id;){let n=e.substring(0,Id);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function G6(t){let e=null;if(typeof t!="string"&&No.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=Sd(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&No.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==W6(t)&&No.throwArgumentError("bad icap checksum","address",t),e=U6(t.substring(4));e.length<40;)e="0"+e;e=Sd("0x"+e)}else No.throwArgumentError("invalid address","address",t);return e}function wo(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}var Kc={},mt={},Wc,Cd;function Ss(){if(Cd)return Wc;Cd=1,Wc=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,i){if(r!=n)throw new Error(i||"Assertion failed: "+r+" != "+n)},Wc}var Ba={exports:{}},Md;function Zf(){return Md||(Md=1,typeof Object.create=="function"?Ba.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ba.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),Ba.exports}var Od;function Gn(){if(Od)return mt;Od=1;var t=Ss(),e=Zf();mt.inherits=e;function r(y,b){return(y.charCodeAt(b)&64512)!==55296||b<0||b+1>=y.length?!1:(y.charCodeAt(b+1)&64512)===56320}function n(y,b){if(Array.isArray(y))return y.slice();if(!y)return[];var l=[];if(typeof y=="string")if(b){if(b==="hex")for(y=y.replace(/[^a-z0-9]+/ig,""),y.length%2!==0&&(y="0"+y),w=0;w<y.length;w+=2)l.push(parseInt(y[w]+y[w+1],16))}else for(var g=0,w=0;w<y.length;w++){var E=y.charCodeAt(w);E<128?l[g++]=E:E<2048?(l[g++]=E>>6|192,l[g++]=E&63|128):r(y,w)?(E=65536+((E&1023)<<10)+(y.charCodeAt(++w)&1023),l[g++]=E>>18|240,l[g++]=E>>12&63|128,l[g++]=E>>6&63|128,l[g++]=E&63|128):(l[g++]=E>>12|224,l[g++]=E>>6&63|128,l[g++]=E&63|128)}else for(w=0;w<y.length;w++)l[w]=y[w]|0;return l}mt.toArray=n;function i(y){for(var b="",l=0;l<y.length;l++)b+=a(y[l].toString(16));return b}mt.toHex=i;function s(y){var b=y>>>24|y>>>8&65280|y<<8&16711680|(y&255)<<24;return b>>>0}mt.htonl=s;function o(y,b){for(var l="",g=0;g<y.length;g++){var w=y[g];b==="little"&&(w=s(w)),l+=f(w.toString(16))}return l}mt.toHex32=o;function a(y){return y.length===1?"0"+y:y}mt.zero2=a;function f(y){return y.length===7?"0"+y:y.length===6?"00"+y:y.length===5?"000"+y:y.length===4?"0000"+y:y.length===3?"00000"+y:y.length===2?"000000"+y:y.length===1?"0000000"+y:y}mt.zero8=f;function c(y,b,l,g){var w=l-b;t(w%4===0);for(var E=new Array(w/4),I=0,A=b;I<E.length;I++,A+=4){var m;g==="big"?m=y[A]<<24|y[A+1]<<16|y[A+2]<<8|y[A+3]:m=y[A+3]<<24|y[A+2]<<16|y[A+1]<<8|y[A],E[I]=m>>>0}return E}mt.join32=c;function u(y,b){for(var l=new Array(y.length*4),g=0,w=0;g<y.length;g++,w+=4){var E=y[g];b==="big"?(l[w]=E>>>24,l[w+1]=E>>>16&255,l[w+2]=E>>>8&255,l[w+3]=E&255):(l[w+3]=E>>>24,l[w+2]=E>>>16&255,l[w+1]=E>>>8&255,l[w]=E&255)}return l}mt.split32=u;function h(y,b){return y>>>b|y<<32-b}mt.rotr32=h;function d(y,b){return y<<b|y>>>32-b}mt.rotl32=d;function p(y,b){return y+b>>>0}mt.sum32=p;function v(y,b,l){return y+b+l>>>0}mt.sum32_3=v;function x(y,b,l,g){return y+b+l+g>>>0}mt.sum32_4=x;function C(y,b,l,g,w){return y+b+l+g+w>>>0}mt.sum32_5=C;function O(y,b,l,g){var w=y[b],E=y[b+1],I=g+E>>>0,A=(I<g?1:0)+l+w;y[b]=A>>>0,y[b+1]=I}mt.sum64=O;function M(y,b,l,g){var w=b+g>>>0,E=(w<b?1:0)+y+l;return E>>>0}mt.sum64_hi=M;function R(y,b,l,g){var w=b+g;return w>>>0}mt.sum64_lo=R;function T(y,b,l,g,w,E,I,A){var m=0,S=b;S=S+g>>>0,m+=S<b?1:0,S=S+E>>>0,m+=S<E?1:0,S=S+A>>>0,m+=S<A?1:0;var _=y+l+w+I+m;return _>>>0}mt.sum64_4_hi=T;function P(y,b,l,g,w,E,I,A){var m=b+g+E+A;return m>>>0}mt.sum64_4_lo=P;function N(y,b,l,g,w,E,I,A,m,S){var _=0,F=b;F=F+g>>>0,_+=F<b?1:0,F=F+E>>>0,_+=F<E?1:0,F=F+A>>>0,_+=F<A?1:0,F=F+S>>>0,_+=F<S?1:0;var Y=y+l+w+I+m+_;return Y>>>0}mt.sum64_5_hi=N;function $(y,b,l,g,w,E,I,A,m,S){var _=b+g+E+A+S;return _>>>0}mt.sum64_5_lo=$;function U(y,b,l){var g=b<<32-l|y>>>l;return g>>>0}mt.rotr64_hi=U;function V(y,b,l){var g=y<<32-l|b>>>l;return g>>>0}mt.rotr64_lo=V;function H(y,b,l){return y>>>l}mt.shr64_hi=H;function B(y,b,l){var g=y<<32-l|b>>>l;return g>>>0}return mt.shr64_lo=B,mt}var Gc={},Dd;function da(){if(Dd)return Gc;Dd=1;var t=Gn(),e=Ss();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Gc.BlockHash=r,r.prototype.update=function(i,s){if(i=t.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var o=i.length%this._delta8;this.pending=i.slice(i.length-o,i.length),this.pending.length===0&&(this.pending=null),i=t.join32(i,0,i.length-o,this.endian);for(var a=0;a<i.length;a+=this._delta32)this._update(i,a,a+this._delta32)}return this},r.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},r.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,o=s-(i+this.padLength)%s,a=new Array(o+this.padLength);a[0]=128;for(var f=1;f<o;f++)a[f]=0;if(i<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)a[f++]=0;a[f++]=0,a[f++]=0,a[f++]=0,a[f++]=0,a[f++]=i>>>24&255,a[f++]=i>>>16&255,a[f++]=i>>>8&255,a[f++]=i&255}else for(a[f++]=i&255,a[f++]=i>>>8&255,a[f++]=i>>>16&255,a[f++]=i>>>24&255,a[f++]=0,a[f++]=0,a[f++]=0,a[f++]=0,c=8;c<this.padLength;c++)a[f++]=0;return a},Gc}var es={},Rn={},Td;function s2(){if(Td)return Rn;Td=1;var t=Gn(),e=t.rotr32;function r(u,h,d,p){if(u===0)return n(h,d,p);if(u===1||u===3)return s(h,d,p);if(u===2)return i(h,d,p)}Rn.ft_1=r;function n(u,h,d){return u&h^~u&d}Rn.ch32=n;function i(u,h,d){return u&h^u&d^h&d}Rn.maj32=i;function s(u,h,d){return u^h^d}Rn.p32=s;function o(u){return e(u,2)^e(u,13)^e(u,22)}Rn.s0_256=o;function a(u){return e(u,6)^e(u,11)^e(u,25)}Rn.s1_256=a;function f(u){return e(u,7)^e(u,18)^u>>>3}Rn.g0_256=f;function c(u){return e(u,17)^e(u,19)^u>>>10}return Rn.g1_256=c,Rn}var Xc,Rd;function X6(){if(Rd)return Xc;Rd=1;var t=Gn(),e=da(),r=s2(),n=t.rotl32,i=t.sum32,s=t.sum32_5,o=r.ft_1,a=e.BlockHash,f=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(c,a),Xc=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(h,d){for(var p=this.W,v=0;v<16;v++)p[v]=h[d+v];for(;v<p.length;v++)p[v]=n(p[v-3]^p[v-8]^p[v-14]^p[v-16],1);var x=this.h[0],C=this.h[1],O=this.h[2],M=this.h[3],R=this.h[4];for(v=0;v<p.length;v++){var T=~~(v/20),P=s(n(x,5),o(T,C,O,M),R,p[v],f[T]);R=M,M=O,O=n(C,30),C=x,x=P}this.h[0]=i(this.h[0],x),this.h[1]=i(this.h[1],C),this.h[2]=i(this.h[2],O),this.h[3]=i(this.h[3],M),this.h[4]=i(this.h[4],R)},c.prototype._digest=function(h){return h==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},Xc}var Yc,Nd;function o2(){if(Nd)return Yc;Nd=1;var t=Gn(),e=da(),r=s2(),n=Ss(),i=t.sum32,s=t.sum32_4,o=t.sum32_5,a=r.ch32,f=r.maj32,c=r.s0_256,u=r.s1_256,h=r.g0_256,d=r.g1_256,p=e.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function x(){if(!(this instanceof x))return new x;p.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}return t.inherits(x,p),Yc=x,x.blockSize=512,x.outSize=256,x.hmacStrength=192,x.padLength=64,x.prototype._update=function(O,M){for(var R=this.W,T=0;T<16;T++)R[T]=O[M+T];for(;T<R.length;T++)R[T]=s(d(R[T-2]),R[T-7],h(R[T-15]),R[T-16]);var P=this.h[0],N=this.h[1],$=this.h[2],U=this.h[3],V=this.h[4],H=this.h[5],B=this.h[6],y=this.h[7];for(n(this.k.length===R.length),T=0;T<R.length;T++){var b=o(y,u(V),a(V,H,B),this.k[T],R[T]),l=i(c(P),f(P,N,$));y=B,B=H,H=V,V=i(U,b),U=$,$=N,N=P,P=i(b,l)}this.h[0]=i(this.h[0],P),this.h[1]=i(this.h[1],N),this.h[2]=i(this.h[2],$),this.h[3]=i(this.h[3],U),this.h[4]=i(this.h[4],V),this.h[5]=i(this.h[5],H),this.h[6]=i(this.h[6],B),this.h[7]=i(this.h[7],y)},x.prototype._digest=function(O){return O==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},Yc}var Zc,Pd;function Y6(){if(Pd)return Zc;Pd=1;var t=Gn(),e=o2();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),Zc=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},Zc}var Jc,Fd;function a2(){if(Fd)return Jc;Fd=1;var t=Gn(),e=da(),r=Ss(),n=t.rotr64_hi,i=t.rotr64_lo,s=t.shr64_hi,o=t.shr64_lo,a=t.sum64,f=t.sum64_hi,c=t.sum64_lo,u=t.sum64_4_hi,h=t.sum64_4_lo,d=t.sum64_5_hi,p=t.sum64_5_lo,v=e.BlockHash,x=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function C(){if(!(this instanceof C))return new C;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=x,this.W=new Array(160)}t.inherits(C,v),Jc=C,C.blockSize=1024,C.outSize=512,C.hmacStrength=192,C.padLength=128,C.prototype._prepareBlock=function(l,g){for(var w=this.W,E=0;E<32;E++)w[E]=l[g+E];for(;E<w.length;E+=2){var I=B(w[E-4],w[E-3]),A=y(w[E-4],w[E-3]),m=w[E-14],S=w[E-13],_=V(w[E-30],w[E-29]),F=H(w[E-30],w[E-29]),Y=w[E-32],D=w[E-31];w[E]=u(I,A,m,S,_,F,Y,D),w[E+1]=h(I,A,m,S,_,F,Y,D)}},C.prototype._update=function(l,g){this._prepareBlock(l,g);var w=this.W,E=this.h[0],I=this.h[1],A=this.h[2],m=this.h[3],S=this.h[4],_=this.h[5],F=this.h[6],Y=this.h[7],D=this.h[8],j=this.h[9],G=this.h[10],Z=this.h[11],ee=this.h[12],ue=this.h[13],he=this.h[14],L=this.h[15];r(this.k.length===w.length);for(var z=0;z<w.length;z+=2){var K=he,X=L,te=$(D,j),re=U(D,j),ne=O(D,j,G,Z,ee),oe=M(D,j,G,Z,ee,ue),se=this.k[z],Q=this.k[z+1],le=w[z],fe=w[z+1],ae=d(K,X,te,re,ne,oe,se,Q,le,fe),pe=p(K,X,te,re,ne,oe,se,Q,le,fe);K=P(E,I),X=N(E,I),te=R(E,I,A,m,S),re=T(E,I,A,m,S,_);var me=f(K,X,te,re),ve=c(K,X,te,re);he=ee,L=ue,ee=G,ue=Z,G=D,Z=j,D=f(F,Y,ae,pe),j=c(Y,Y,ae,pe),F=S,Y=_,S=A,_=m,A=E,m=I,E=f(ae,pe,me,ve),I=c(ae,pe,me,ve)}a(this.h,0,E,I),a(this.h,2,A,m),a(this.h,4,S,_),a(this.h,6,F,Y),a(this.h,8,D,j),a(this.h,10,G,Z),a(this.h,12,ee,ue),a(this.h,14,he,L)},C.prototype._digest=function(l){return l==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function O(b,l,g,w,E){var I=b&g^~b&E;return I<0&&(I+=4294967296),I}function M(b,l,g,w,E,I){var A=l&w^~l&I;return A<0&&(A+=4294967296),A}function R(b,l,g,w,E){var I=b&g^b&E^g&E;return I<0&&(I+=4294967296),I}function T(b,l,g,w,E,I){var A=l&w^l&I^w&I;return A<0&&(A+=4294967296),A}function P(b,l){var g=n(b,l,28),w=n(l,b,2),E=n(l,b,7),I=g^w^E;return I<0&&(I+=4294967296),I}function N(b,l){var g=i(b,l,28),w=i(l,b,2),E=i(l,b,7),I=g^w^E;return I<0&&(I+=4294967296),I}function $(b,l){var g=n(b,l,14),w=n(b,l,18),E=n(l,b,9),I=g^w^E;return I<0&&(I+=4294967296),I}function U(b,l){var g=i(b,l,14),w=i(b,l,18),E=i(l,b,9),I=g^w^E;return I<0&&(I+=4294967296),I}function V(b,l){var g=n(b,l,1),w=n(b,l,8),E=s(b,l,7),I=g^w^E;return I<0&&(I+=4294967296),I}function H(b,l){var g=i(b,l,1),w=i(b,l,8),E=o(b,l,7),I=g^w^E;return I<0&&(I+=4294967296),I}function B(b,l){var g=n(b,l,19),w=n(l,b,29),E=s(b,l,6),I=g^w^E;return I<0&&(I+=4294967296),I}function y(b,l){var g=i(b,l,19),w=i(l,b,29),E=o(b,l,6),I=g^w^E;return I<0&&(I+=4294967296),I}return Jc}var Qc,Bd;function Z6(){if(Bd)return Qc;Bd=1;var t=Gn(),e=a2();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),Qc=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},Qc}var Ld;function J6(){return Ld||(Ld=1,es.sha1=X6(),es.sha224=Y6(),es.sha256=o2(),es.sha384=Z6(),es.sha512=a2()),es}var eu={},$d;function Q6(){if($d)return eu;$d=1;var t=Gn(),e=da(),r=t.rotl32,n=t.sum32,i=t.sum32_3,s=t.sum32_4,o=e.BlockHash;function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(a,o),eu.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(C,O){for(var M=this.h[0],R=this.h[1],T=this.h[2],P=this.h[3],N=this.h[4],$=M,U=R,V=T,H=P,B=N,y=0;y<80;y++){var b=n(r(s(M,f(y,R,T,P),C[h[y]+O],c(y)),p[y]),N);M=N,N=P,P=r(T,10),T=R,R=b,b=n(r(s($,f(79-y,U,V,H),C[d[y]+O],u(y)),v[y]),B),$=B,B=H,H=r(V,10),V=U,U=b}b=i(this.h[1],T,H),this.h[1]=i(this.h[2],P,B),this.h[2]=i(this.h[3],N,$),this.h[3]=i(this.h[4],M,U),this.h[4]=i(this.h[0],R,V),this.h[0]=b},a.prototype._digest=function(C){return C==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function f(x,C,O,M){return x<=15?C^O^M:x<=31?C&O|~C&M:x<=47?(C|~O)^M:x<=63?C&M|O&~M:C^(O|~M)}function c(x){return x<=15?0:x<=31?1518500249:x<=47?1859775393:x<=63?2400959708:2840853838}function u(x){return x<=15?1352829926:x<=31?1548603684:x<=47?1836072691:x<=63?2053994217:0}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return eu}var tu,kd;function e_(){if(kd)return tu;kd=1;var t=Gn(),e=Ss();function r(n,i,s){if(!(this instanceof r))return new r(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(i,s))}return tu=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,s){return this.inner.update(i,s),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},tu}var Ud;function Jf(){return Ud||(Ud=1,function(t){var e=t;e.utils=Gn(),e.common=da(),e.sha=J6(),e.ripemd=Q6(),e.hmac=e_(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(Kc)),Kc}var t_=Jf();const li=ro(t_);function so(t,e,r){return r={path:e,exports:{},require:function(n,i){return r_(n,i??r.path)}},t(r,r.exports),r.exports}function r_(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var vl=f2;function f2(t,e){if(!t)throw new Error(e||"Assertion failed")}f2.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Cn=so(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var f=[];if(typeof o!="string"){for(var c=0;c<o.length;c++)f[c]=o[c]|0;return f}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var c=0;c<o.length;c+=2)f.push(parseInt(o[c]+o[c+1],16))}else for(var c=0;c<o.length;c++){var u=o.charCodeAt(c),h=u>>8,d=u&255;h?f.push(h,d):f.push(d)}return f}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var a="",f=0;f<o.length;f++)a+=i(o[f].toString(16));return a}r.toHex=s,r.encode=function(a,f){return f==="hex"?s(a):a}}),en=so(function(t,e){var r=e;r.assert=vl,r.toArray=Cn.toArray,r.zero2=Cn.zero2,r.toHex=Cn.toHex,r.encode=Cn.encode;function n(f,c,u){var h=new Array(Math.max(f.bitLength(),u)+1);h.fill(0);for(var d=1<<c+1,p=f.clone(),v=0;v<h.length;v++){var x,C=p.andln(d-1);p.isOdd()?(C>(d>>1)-1?x=(d>>1)-C:x=C,p.isubn(x)):x=0,h[v]=x,p.iushrn(1)}return h}r.getNAF=n;function i(f,c){var u=[[],[]];f=f.clone(),c=c.clone();for(var h=0,d=0,p;f.cmpn(-h)>0||c.cmpn(-d)>0;){var v=f.andln(3)+h&3,x=c.andln(3)+d&3;v===3&&(v=-1),x===3&&(x=-1);var C;v&1?(p=f.andln(7)+h&7,(p===3||p===5)&&x===2?C=-v:C=v):C=0,u[0].push(C);var O;x&1?(p=c.andln(7)+d&7,(p===3||p===5)&&v===2?O=-x:O=x):O=0,u[1].push(O),2*h===C+1&&(h=1-h),2*d===O+1&&(d=1-d),f.iushrn(1),c.iushrn(1)}return u}r.getJSF=i;function s(f,c,u){var h="_"+c;f.prototype[c]=function(){return this[h]!==void 0?this[h]:this[h]=u.call(this)}}r.cachedProperty=s;function o(f){return typeof f=="string"?r.toArray(f,"hex"):f}r.parseBytes=o;function a(f){return new Le(f,"hex","le")}r.intFromLE=a}),Mf=en.getNAF,n_=en.getJSF,Of=en.assert;function Ki(t,e){this.type=t,this.p=new Le(e.p,16),this.red=e.prime?Le.red(e.prime):Le.mont(this.p),this.zero=new Le(0).toRed(this.red),this.one=new Le(1).toRed(this.red),this.two=new Le(2).toRed(this.red),this.n=e.n&&new Le(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Is=Ki;Ki.prototype.point=function(){throw new Error("Not implemented")};Ki.prototype.validate=function(){throw new Error("Not implemented")};Ki.prototype._fixedNafMul=function(e,r){Of(e.precomputed);var n=e._getDoubles(),i=Mf(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,f;for(a=0;a<i.length;a+=n.step){f=0;for(var c=a+n.step-1;c>=a;c--)f=(f<<1)+i[c];o.push(f)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=s;d>0;d--){for(a=0;a<o.length;a++)f=o[a],f===d?h=h.mixedAdd(n.points[a]):f===-d&&(h=h.mixedAdd(n.points[a].neg()));u=u.add(h)}return u.toP()};Ki.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Mf(r,n,this._bitLength),a=this.jpoint(null,null,null),f=o.length-1;f>=0;f--){for(var c=0;f>=0&&o[f]===0;f--)c++;if(f>=0&&c++,a=a.dblp(c),f<0)break;var u=o[f];Of(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};Ki.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,f=this._wnafT3,c=0,u,h,d;for(u=0;u<i;u++){d=r[u];var p=d._getNAFPoints(e);o[u]=p.wnd,a[u]=p.points}for(u=i-1;u>=1;u-=2){var v=u-1,x=u;if(o[v]!==1||o[x]!==1){f[v]=Mf(n[v],o[v],this._bitLength),f[x]=Mf(n[x],o[x],this._bitLength),c=Math.max(f[v].length,c),c=Math.max(f[x].length,c);continue}var C=[r[v],null,null,r[x]];r[v].y.cmp(r[x].y)===0?(C[1]=r[v].add(r[x]),C[2]=r[v].toJ().mixedAdd(r[x].neg())):r[v].y.cmp(r[x].y.redNeg())===0?(C[1]=r[v].toJ().mixedAdd(r[x]),C[2]=r[v].add(r[x].neg())):(C[1]=r[v].toJ().mixedAdd(r[x]),C[2]=r[v].toJ().mixedAdd(r[x].neg()));var O=[-3,-1,-5,-7,0,7,5,1,3],M=n_(n[v],n[x]);for(c=Math.max(M[0].length,c),f[v]=new Array(c),f[x]=new Array(c),h=0;h<c;h++){var R=M[0][h]|0,T=M[1][h]|0;f[v][h]=O[(R+1)*3+(T+1)],f[x][h]=0,a[v]=C}}var P=this.jpoint(null,null,null),N=this._wnafT4;for(u=c;u>=0;u--){for(var $=0;u>=0;){var U=!0;for(h=0;h<i;h++)N[h]=f[h][u]|0,N[h]!==0&&(U=!1);if(!U)break;$++,u--}if(u>=0&&$++,P=P.dblp($),u<0)break;for(h=0;h<i;h++){var V=N[h];V!==0&&(V>0?d=a[h][V-1>>1]:V<0&&(d=a[h][-V-1>>1].neg()),d.type==="affine"?P=P.mixedAdd(d):P=P.add(d))}}for(u=0;u<i;u++)a[u]=null;return s?P:P.toP()};function dn(t,e){this.curve=t,this.type=e,this.precomputed=null}Ki.BasePoint=dn;dn.prototype.eq=function(){throw new Error("Not implemented")};dn.prototype.validate=function(){return this.curve.validate(this)};Ki.prototype.decodePoint=function(e,r){e=en.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Of(e[e.length-1]%2===0):e[0]===7&&Of(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};dn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};dn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};dn.prototype.encode=function(e,r){return en.encode(this._encode(r),e)};dn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};dn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};dn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};dn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};dn.prototype._getBeta=function(){return null};dn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var gl=so(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),i_=en.assert;function pn(t){Is.call(this,"short",t),this.a=new Le(t.a,16).toRed(this.red),this.b=new Le(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}gl(pn,Is);var s_=pn;pn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Le(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Le(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],i_(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Le(a.a,16),b:new Le(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};pn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Le.mont(e),n=new Le(2).toRed(r).redInvm(),i=n.redNeg(),s=new Le(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};pn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Le(1),o=new Le(0),a=new Le(0),f=new Le(1),c,u,h,d,p,v,x,C=0,O,M;n.cmpn(0)!==0;){var R=i.div(n);O=i.sub(R.mul(n)),M=a.sub(R.mul(s));var T=f.sub(R.mul(o));if(!h&&O.cmp(r)<0)c=x.neg(),u=s,h=O.neg(),d=M;else if(h&&++C===2)break;x=O,i=n,n=O,a=s,s=M,f=o,o=T}p=O.neg(),v=M;var P=h.sqr().add(d.sqr()),N=p.sqr().add(v.sqr());return N.cmp(P)>=0&&(p=c,v=u),h.negative&&(h=h.neg(),d=d.neg()),p.negative&&(p=p.neg(),v=v.neg()),[{a:h,b:d},{a:p,b:v}]};pn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),f=o.mul(i.a),c=s.mul(n.b),u=o.mul(i.b),h=e.sub(a).sub(f),d=c.add(u).neg();return{k1:h,k2:d}};pn.prototype.pointFromX=function(e,r){e=new Le(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};pn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};pn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),f=e[o],c=f._getBeta();a.k1.negative&&(a.k1.ineg(),f=f.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),i[o*2]=f,i[o*2+1]=c,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,n),h=0;h<o*2;h++)i[h]=null,s[h]=null;return u};function sr(t,e,r,n){Is.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Le(e,16),this.y=new Le(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}gl(sr,Is.BasePoint);pn.prototype.point=function(e,r,n){return new sr(this,e,r,n)};pn.prototype.pointFromJSON=function(e,r){return sr.fromJSON(this,e,r)};sr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};sr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};sr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};sr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};sr.prototype.isInfinity=function(){return this.inf};sr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};sr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};sr.prototype.getX=function(){return this.x.fromRed()};sr.prototype.getY=function(){return this.y.fromRed()};sr.prototype.mul=function(e){return e=new Le(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};sr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};sr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};sr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};sr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};sr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function dr(t,e,r,n){Is.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Le(0)):(this.x=new Le(e,16),this.y=new Le(r,16),this.z=new Le(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}gl(dr,Is.BasePoint);pn.prototype.jpoint=function(e,r,n){return new dr(this,e,r,n)};dr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};dr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};dr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),f=i.redSub(s),c=o.redSub(a);if(f.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=f.redSqr(),h=u.redMul(f),d=i.redMul(u),p=c.redSqr().redIAdd(h).redISub(d).redISub(d),v=c.redMul(d.redISub(p)).redISub(o.redMul(h)),x=this.z.redMul(e.z).redMul(f);return this.curve.jpoint(p,v,x)};dr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),f=s.redSub(o);if(a.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),h=n.redMul(c),d=f.redSqr().redIAdd(u).redISub(h).redISub(h),p=f.redMul(h.redISub(d)).redISub(s.redMul(u)),v=this.z.redMul(a);return this.curve.jpoint(d,p,v)};dr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,f=this.z,c=f.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var h=o.redSqr(),d=u.redSqr(),p=d.redSqr(),v=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(c)),x=o.redMul(d),C=v.redSqr().redISub(x.redAdd(x)),O=x.redISub(C),M=v.redMul(O);M=M.redIAdd(M).redISub(p);var R=u.redMul(f);r+1<e&&(c=c.redMul(p)),o=C,f=R,u=M}return this.curve.jpoint(o,u.redMul(s),f)};dr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};dr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var f=i.redAdd(i).redIAdd(i),c=f.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=c,r=f.redMul(a.redISub(c)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),d=this.y.redSqr(),p=d.redSqr(),v=this.x.redAdd(d).redSqr().redISub(h).redISub(p);v=v.redIAdd(v);var x=h.redAdd(h).redIAdd(h),C=x.redSqr(),O=p.redIAdd(p);O=O.redIAdd(O),O=O.redIAdd(O),e=C.redISub(v).redISub(v),r=x.redMul(v.redISub(e)).redISub(O),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};dr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=f.redSqr().redISub(a).redISub(a);e=c;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),r=f.redMul(a.redISub(c)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),d=this.y.redSqr(),p=this.x.redMul(d),v=this.x.redSub(h).redMul(this.x.redAdd(h));v=v.redAdd(v).redIAdd(v);var x=p.redIAdd(p);x=x.redIAdd(x);var C=x.redAdd(x);e=v.redSqr().redISub(C),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(h);var O=d.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O),r=v.redMul(x.redISub(e)).redISub(O)}return this.curve.jpoint(e,r,n)};dr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),f=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(a),h=f.redSqr().redISub(u.redAdd(u)),d=u.redISub(h),p=a.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var v=f.redMul(d).redISub(p),x=n.redAdd(n).redMul(i);return this.curve.jpoint(h,v,x)};dr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var f=a.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var u=s.redIAdd(a).redSqr().redISub(o).redISub(f).redISub(c),h=r.redMul(u);h=h.redIAdd(h),h=h.redIAdd(h);var d=this.x.redMul(f).redISub(h);d=d.redIAdd(d),d=d.redIAdd(d);var p=this.y.redMul(u.redMul(c.redISub(u)).redISub(a.redMul(f)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var v=this.z.redAdd(a).redSqr().redISub(n).redISub(f);return this.curve.jpoint(d,p,v)};dr.prototype.mul=function(e,r){return e=new Le(e,r),this.curve._wnafMul(this,e)};dr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};dr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};dr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};dr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var sf=so(function(t,e){var r=e;r.base=Is,r.short=s_,r.mont=null,r.edwards=null}),of=so(function(t,e){var r=e,n=en.assert;function i(a){a.type==="short"?this.curve=new sf.short(a):a.type==="edwards"?this.curve=new sf.edwards(a):this.curve=new sf.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(a,f){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var c=new i(f);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:c}),c}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:li.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:li.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:li.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:li.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:li.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:li.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:li.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:li.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function zi(t){if(!(this instanceof zi))return new zi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Cn.toArray(t.entropy,t.entropyEnc||"hex"),r=Cn.toArray(t.nonce,t.nonceEnc||"hex"),n=Cn.toArray(t.pers,t.persEnc||"hex");vl(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var c2=zi;zi.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};zi.prototype._hmac=function(){return new li.hmac(this.hash,this.K)};zi.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};zi.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Cn.toArray(e,r),n=Cn.toArray(n,i),vl(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};zi.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Cn.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Cn.encode(o,r)};var hh=en.assert;function wr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var yl=wr;wr.fromPublic=function(e,r,n){return r instanceof wr?r:new wr(e,{pub:r,pubEnc:n})};wr.fromPrivate=function(e,r,n){return r instanceof wr?r:new wr(e,{priv:r,privEnc:n})};wr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};wr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};wr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};wr.prototype._importPrivate=function(e,r){this.priv=new Le(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};wr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?hh(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&hh(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};wr.prototype.derive=function(e){return e.validate()||hh(e.validate(),"public point not validated"),e.mul(this.priv).getX()};wr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};wr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};wr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var o_=en.assert;function Qf(t,e){if(t instanceof Qf)return t;this._importDER(t,e)||(o_(t.r&&t.s,"Signature without r or s"),this.r=new Le(t.r,16),this.s=new Le(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var ec=Qf;function a_(){this.place=0}function ru(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function qd(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Qf.prototype._importDER=function(e,r){e=en.toArray(e,r);var n=new a_;if(e[n.place++]!==48)return!1;var i=ru(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=ru(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=ru(e,n);if(a===!1||e.length!==a+n.place)return!1;var f=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(f[0]===0)if(f[1]&128)f=f.slice(1);else return!1;return this.r=new Le(o),this.s=new Le(f),this.recoveryParam=null,!0};function nu(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Qf.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=qd(r),n=qd(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];nu(i,r.length),i=i.concat(r),i.push(2),nu(i,n.length);var s=i.concat(n),o=[48];return nu(o,s.length),o=o.concat(s),en.encode(o,e)};var f_=function(){throw new Error("unsupported")},u2=en.assert;function ln(t){if(!(this instanceof ln))return new ln(t);typeof t=="string"&&(u2(Object.prototype.hasOwnProperty.call(of,t),"Unknown curve "+t),t=of[t]),t instanceof of.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var c_=ln;ln.prototype.keyPair=function(e){return new yl(this,e)};ln.prototype.keyFromPrivate=function(e,r){return yl.fromPrivate(this,e,r)};ln.prototype.keyFromPublic=function(e,r){return yl.fromPublic(this,e,r)};ln.prototype.genKeyPair=function(e){e||(e={});for(var r=new c2({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||f_(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Le(2));;){var s=new Le(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};ln.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};ln.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Le(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),f=new c2({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),c=this.n.sub(new Le(1)),u=0;;u++){var h=i.k?i.k(u):new Le(f.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(c)>=0)){var d=this.g.mul(h);if(!d.isInfinity()){var p=d.getX(),v=p.umod(this.n);if(v.cmpn(0)!==0){var x=h.invm(this.n).mul(v.mul(r.getPrivate()).iadd(e));if(x=x.umod(this.n),x.cmpn(0)!==0){var C=(d.getY().isOdd()?1:0)|(p.cmp(v)!==0?2:0);return i.canonical&&x.cmp(this.nh)>0&&(x=this.n.sub(x),C^=1),new ec({r:v,s:x,recoveryParam:C})}}}}}};ln.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Le(e,16)),n=this.keyFromPublic(n,i),r=new ec(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),f=a.mul(e).umod(this.n),c=a.mul(s).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(f,n.getPublic(),c),u.isInfinity()?!1:u.eqXToP(s)):(u=this.g.mulAdd(f,n.getPublic(),c),u.isInfinity()?!1:u.getX().umod(this.n).cmp(s)===0)};ln.prototype.recoverPubKey=function(t,e,r,n){u2((3&r)===r,"The recovery param is more than two bits"),e=new ec(e,n);var i=this.n,s=new Le(t),o=e.r,a=e.s,f=r&1,c=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?o=this.curve.pointFromX(o.add(this.curve.n),f):o=this.curve.pointFromX(o,f);var u=e.r.invm(i),h=i.sub(s).mul(u).umod(i),d=a.mul(u).umod(i);return this.g.mulAdd(h,o,d)};ln.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new ec(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var u_=so(function(t,e){var r=e;r.version="6.5.4",r.utils=en,r.rand=function(){throw new Error("unsupported")},r.curve=sf,r.curves=of,r.ec=c_,r.eddsa=null}),h_=u_.ec;const l_="signing-key/5.7.0",lh=new Pt(l_);let iu=null;function Ni(){return iu||(iu=new h_("secp256k1")),iu}class d_{constructor(e){wo(this,"curve","secp256k1"),wo(this,"privateKey",Gr(e)),N6(this.privateKey)!==32&&lh.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Ni().keyFromPrivate(tr(this.privateKey));wo(this,"publicKey","0x"+r.getPublic(!1,"hex")),wo(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),wo(this,"_isSigningKey",!0)}_addPoint(e){const r=Ni().keyFromPublic(tr(this.publicKey)),n=Ni().keyFromPublic(tr(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=Ni().keyFromPrivate(tr(this.privateKey)),n=tr(e);n.length!==32&&lh.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return n2({recoveryParam:i.recoveryParam,r:Ws("0x"+i.r.toString(16),32),s:Ws("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=Ni().keyFromPrivate(tr(this.privateKey)),n=Ni().keyFromPublic(tr(h2(e)));return Ws("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function p_(t,e){const r=n2(e),n={r:tr(r.r),s:tr(r.s)};return"0x"+Ni().recoverPubKey(tr(t),n,r.recoveryParam).encode("hex",!1)}function h2(t,e){const r=tr(t);return r.length===32?new d_(r).publicKey:r.length===33?"0x"+Ni().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?Gr(r):lh.throwArgumentError("invalid public or private key","key","[REDACTED]")}var zd;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(zd||(zd={}));function v_(t){const e=h2(t);return G6(_d(i2(_d(e,1)),12))}function g_(t,e){return v_(p_(tr(t),e))}function l2(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function su(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=l2(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function y_(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,f=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,C=0,O=0,M=v.length;O!==M&&v[O]===0;)O++,x++;for(var R=(M-O)*u+1>>>0,T=new Uint8Array(R);O!==M;){for(var P=v[O],N=0,$=R-1;(P!==0||N<C)&&$!==-1;$--,N++)P+=256*T[$]>>>0,T[$]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");C=N,O++}for(var U=R-C;U!==R&&T[U]===0;)U++;for(var V=f.repeat(x);U<R;++U)V+=t.charAt(T[U]);return V}function d(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var x=0;if(v[x]!==" "){for(var C=0,O=0;v[x]===f;)C++,x++;for(var M=(v.length-x)*c+1>>>0,R=new Uint8Array(M);v[x];){var T=r[v.charCodeAt(x)];if(T===255)return;for(var P=0,N=M-1;(T!==0||P<O)&&N!==-1;N--,P++)T+=a*R[N]>>>0,R[N]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");O=P,x++}if(v[x]!==" "){for(var $=M-O;$!==M&&R[$]===0;)$++;for(var U=new Uint8Array(C+(M-$)),V=C;$!==M;)U[V++]=R[$++];return U}}}function p(v){var x=d(v);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var b_=y_,m_=b_;const w_=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},x_=t=>new TextEncoder().encode(t),__=t=>new TextDecoder().decode(t);class E_{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}let A_=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return d2(this,e)}};class S_{constructor(e){this.decoders=e}or(e){return d2(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const d2=(t,e)=>new S_({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class I_{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new E_(e,r,n),this.decoder=new A_(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const tc=({name:t,prefix:e,encode:r,decode:n})=>new I_(t,e,r,n),pa=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=m_(r,e);return tc({prefix:t,name:e,encode:n,decode:s=>w_(i(s))})},C_=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,f=0,c=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&f>>a)}if(a>=r||255&f<<8-a)throw new SyntaxError("Unexpected end of data");return o},M_=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let f=0;f<t.length;++f)for(a=a<<8|t[f],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},pr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>tc({prefix:e,name:t,encode(i){return M_(i,n,r)},decode(i){return C_(i,n,r,t)}}),O_=tc({prefix:"\0",name:"identity",encode:t=>__(t),decode:t=>x_(t)}),D_=Object.freeze(Object.defineProperty({__proto__:null,identity:O_},Symbol.toStringTag,{value:"Module"})),T_=pr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),R_=Object.freeze(Object.defineProperty({__proto__:null,base2:T_},Symbol.toStringTag,{value:"Module"})),N_=pr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),P_=Object.freeze(Object.defineProperty({__proto__:null,base8:N_},Symbol.toStringTag,{value:"Module"})),F_=pa({prefix:"9",name:"base10",alphabet:"0123456789"}),B_=Object.freeze(Object.defineProperty({__proto__:null,base10:F_},Symbol.toStringTag,{value:"Module"})),L_=pr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$_=pr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),k_=Object.freeze(Object.defineProperty({__proto__:null,base16:L_,base16upper:$_},Symbol.toStringTag,{value:"Module"})),U_=pr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),q_=pr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),z_=pr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),V_=pr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),j_=pr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),H_=pr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),K_=pr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),W_=pr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G_=pr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),X_=Object.freeze(Object.defineProperty({__proto__:null,base32:U_,base32hex:j_,base32hexpad:K_,base32hexpadupper:W_,base32hexupper:H_,base32pad:z_,base32padupper:V_,base32upper:q_,base32z:G_},Symbol.toStringTag,{value:"Module"})),Y_=pa({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Z_=pa({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),J_=Object.freeze(Object.defineProperty({__proto__:null,base36:Y_,base36upper:Z_},Symbol.toStringTag,{value:"Module"})),Q_=pa({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),e5=pa({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),t5=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Q_,base58flickr:e5},Symbol.toStringTag,{value:"Module"})),r5=pr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),n5=pr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),i5=pr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),s5=pr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),o5=Object.freeze(Object.defineProperty({__proto__:null,base64:r5,base64pad:n5,base64url:i5,base64urlpad:s5},Symbol.toStringTag,{value:"Module"})),p2=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),a5=p2.reduce((t,e,r)=>(t[r]=e,t),[]),f5=p2.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function c5(t){return t.reduce((e,r)=>(e+=a5[r],e),"")}function u5(t){const e=[];for(const r of t){const n=f5[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const h5=tc({prefix:"🚀",name:"base256emoji",encode:c5,decode:u5}),l5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:h5},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Vd={...D_,...R_,...P_,...B_,...k_,...X_,...J_,...t5,...o5,...l5};function v2(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const jd=v2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ou=v2("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=l2(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),g2={utf8:jd,"utf-8":jd,hex:Vd.base16,latin1:ou,ascii:ou,binary:ou,...Vd};function cn(t,e="utf8"){const r=g2[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Mr(t,e="utf8"){const r=g2[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var au={};const d5="6.6.1",p5={version:d5};var fu={},af={exports:{}},v5=af.exports,Hd;function _i(){return Hd||(Hd=1,function(t){(function(e,r){function n(B,y){if(!B)throw new Error(y||"Assertion failed")}function i(B,y){B.super_=y;var b=function(){};b.prototype=y.prototype,B.prototype=new b,B.prototype.constructor=B}function s(B,y,b){if(s.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((y==="le"||y==="be")&&(b=y,y=10),this._init(B||0,y||10,b||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=dl.Buffer}catch{}s.isBN=function(y){return y instanceof s?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===s.wordSize&&Array.isArray(y.words)},s.max=function(y,b){return y.cmp(b)>0?y:b},s.min=function(y,b){return y.cmp(b)<0?y:b},s.prototype._init=function(y,b,l){if(typeof y=="number")return this._initNumber(y,b,l);if(typeof y=="object")return this._initArray(y,b,l);b==="hex"&&(b=16),n(b===(b|0)&&b>=2&&b<=36),y=y.toString().replace(/\s+/g,"");var g=0;y[0]==="-"&&(g++,this.negative=1),g<y.length&&(b===16?this._parseHex(y,g,l):(this._parseBase(y,b,g),l==="le"&&this._initArray(this.toArray(),b,l)))},s.prototype._initNumber=function(y,b,l){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(n(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),b,l)},s.prototype._initArray=function(y,b,l){if(n(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var w,E,I=0;if(l==="be")for(g=y.length-1,w=0;g>=0;g-=3)E=y[g]|y[g-1]<<8|y[g-2]<<16,this.words[w]|=E<<I&67108863,this.words[w+1]=E>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);else if(l==="le")for(g=0,w=0;g<y.length;g+=3)E=y[g]|y[g+1]<<8|y[g+2]<<16,this.words[w]|=E<<I&67108863,this.words[w+1]=E>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);return this.strip()};function a(B,y){var b=B.charCodeAt(y);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function f(B,y,b){var l=a(B,b);return b-1>=y&&(l|=a(B,b-1)<<4),l}s.prototype._parseHex=function(y,b,l){this.length=Math.ceil((y.length-b)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var w=0,E=0,I;if(l==="be")for(g=y.length-1;g>=b;g-=2)I=f(y,b,g)<<w,this.words[E]|=I&67108863,w>=18?(w-=18,E+=1,this.words[E]|=I>>>26):w+=8;else{var A=y.length-b;for(g=A%2===0?b+1:b;g<y.length;g+=2)I=f(y,b,g)<<w,this.words[E]|=I&67108863,w>=18?(w-=18,E+=1,this.words[E]|=I>>>26):w+=8}this.strip()};function c(B,y,b,l){for(var g=0,w=Math.min(B.length,b),E=y;E<w;E++){var I=B.charCodeAt(E)-48;g*=l,I>=49?g+=I-49+10:I>=17?g+=I-17+10:g+=I}return g}s.prototype._parseBase=function(y,b,l){this.words=[0],this.length=1;for(var g=0,w=1;w<=67108863;w*=b)g++;g--,w=w/b|0;for(var E=y.length-l,I=E%g,A=Math.min(E,E-I)+l,m=0,S=l;S<A;S+=g)m=c(y,S,S+g,b),this.imuln(w),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(I!==0){var _=1;for(m=c(y,S,y.length,b),S=0;S<I;S++)_*=b;this.imuln(_),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this.strip()},s.prototype.copy=function(y){y.words=new Array(this.length);for(var b=0;b<this.length;b++)y.words[b]=this.words[b];y.length=this.length,y.negative=this.negative,y.red=this.red},s.prototype.clone=function(){var y=new s(null);return this.copy(y),y},s.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(y,b){y=y||10,b=b|0||1;var l;if(y===16||y==="hex"){l="";for(var g=0,w=0,E=0;E<this.length;E++){var I=this.words[E],A=((I<<g|w)&16777215).toString(16);w=I>>>24-g&16777215,g+=2,g>=26&&(g-=26,E--),w!==0||E!==this.length-1?l=u[6-A.length]+A+l:l=A+l}for(w!==0&&(l=w.toString(16)+l);l.length%b!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(y===(y|0)&&y>=2&&y<=36){var m=h[y],S=d[y];l="";var _=this.clone();for(_.negative=0;!_.isZero();){var F=_.modn(S).toString(y);_=_.idivn(S),_.isZero()?l=F+l:l=u[m-F.length]+F+l}for(this.isZero()&&(l="0"+l);l.length%b!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(y,b){return n(typeof o<"u"),this.toArrayLike(o,y,b)},s.prototype.toArray=function(y,b){return this.toArrayLike(Array,y,b)},s.prototype.toArrayLike=function(y,b,l){var g=this.byteLength(),w=l||Math.max(1,g);n(g<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0"),this.strip();var E=b==="le",I=new y(w),A,m,S=this.clone();if(E){for(m=0;!S.isZero();m++)A=S.andln(255),S.iushrn(8),I[m]=A;for(;m<w;m++)I[m]=0}else{for(m=0;m<w-g;m++)I[m]=0;for(m=0;!S.isZero();m++)A=S.andln(255),S.iushrn(8),I[w-m-1]=A}return I},Math.clz32?s.prototype._countBits=function(y){return 32-Math.clz32(y)}:s.prototype._countBits=function(y){var b=y,l=0;return b>=4096&&(l+=13,b>>>=13),b>=64&&(l+=7,b>>>=7),b>=8&&(l+=4,b>>>=4),b>=2&&(l+=2,b>>>=2),l+b},s.prototype._zeroBits=function(y){if(y===0)return 26;var b=y,l=0;return b&8191||(l+=13,b>>>=13),b&127||(l+=7,b>>>=7),b&15||(l+=4,b>>>=4),b&3||(l+=2,b>>>=2),b&1||l++,l},s.prototype.bitLength=function(){var y=this.words[this.length-1],b=this._countBits(y);return(this.length-1)*26+b};function p(B){for(var y=new Array(B.bitLength()),b=0;b<y.length;b++){var l=b/26|0,g=b%26;y[b]=(B.words[l]&1<<g)>>>g}return y}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,b=0;b<this.length;b++){var l=this._zeroBits(this.words[b]);if(y+=l,l!==26)break}return y},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},s.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var b=0;b<y.length;b++)this.words[b]=this.words[b]|y.words[b];return this.strip()},s.prototype.ior=function(y){return n((this.negative|y.negative)===0),this.iuor(y)},s.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},s.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},s.prototype.iuand=function(y){var b;this.length>y.length?b=y:b=this;for(var l=0;l<b.length;l++)this.words[l]=this.words[l]&y.words[l];return this.length=b.length,this.strip()},s.prototype.iand=function(y){return n((this.negative|y.negative)===0),this.iuand(y)},s.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},s.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},s.prototype.iuxor=function(y){var b,l;this.length>y.length?(b=this,l=y):(b=y,l=this);for(var g=0;g<l.length;g++)this.words[g]=b.words[g]^l.words[g];if(this!==b)for(;g<b.length;g++)this.words[g]=b.words[g];return this.length=b.length,this.strip()},s.prototype.ixor=function(y){return n((this.negative|y.negative)===0),this.iuxor(y)},s.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},s.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},s.prototype.inotn=function(y){n(typeof y=="number"&&y>=0);var b=Math.ceil(y/26)|0,l=y%26;this._expand(b),l>0&&b--;for(var g=0;g<b;g++)this.words[g]=~this.words[g]&67108863;return l>0&&(this.words[g]=~this.words[g]&67108863>>26-l),this.strip()},s.prototype.notn=function(y){return this.clone().inotn(y)},s.prototype.setn=function(y,b){n(typeof y=="number"&&y>=0);var l=y/26|0,g=y%26;return this._expand(l+1),b?this.words[l]=this.words[l]|1<<g:this.words[l]=this.words[l]&~(1<<g),this.strip()},s.prototype.iadd=function(y){var b;if(this.negative!==0&&y.negative===0)return this.negative=0,b=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,b=this.isub(y),y.negative=1,b._normSign();var l,g;this.length>y.length?(l=this,g=y):(l=y,g=this);for(var w=0,E=0;E<g.length;E++)b=(l.words[E]|0)+(g.words[E]|0)+w,this.words[E]=b&67108863,w=b>>>26;for(;w!==0&&E<l.length;E++)b=(l.words[E]|0)+w,this.words[E]=b&67108863,w=b>>>26;if(this.length=l.length,w!==0)this.words[this.length]=w,this.length++;else if(l!==this)for(;E<l.length;E++)this.words[E]=l.words[E];return this},s.prototype.add=function(y){var b;return y.negative!==0&&this.negative===0?(y.negative=0,b=this.sub(y),y.negative^=1,b):y.negative===0&&this.negative!==0?(this.negative=0,b=y.sub(this),this.negative=1,b):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},s.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var b=this.iadd(y);return y.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var l=this.cmp(y);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,w;l>0?(g=this,w=y):(g=y,w=this);for(var E=0,I=0;I<w.length;I++)b=(g.words[I]|0)-(w.words[I]|0)+E,E=b>>26,this.words[I]=b&67108863;for(;E!==0&&I<g.length;I++)b=(g.words[I]|0)+E,E=b>>26,this.words[I]=b&67108863;if(E===0&&I<g.length&&g!==this)for(;I<g.length;I++)this.words[I]=g.words[I];return this.length=Math.max(this.length,I),g!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(y){return this.clone().isub(y)};function v(B,y,b){b.negative=y.negative^B.negative;var l=B.length+y.length|0;b.length=l,l=l-1|0;var g=B.words[0]|0,w=y.words[0]|0,E=g*w,I=E&67108863,A=E/67108864|0;b.words[0]=I;for(var m=1;m<l;m++){for(var S=A>>>26,_=A&67108863,F=Math.min(m,y.length-1),Y=Math.max(0,m-B.length+1);Y<=F;Y++){var D=m-Y|0;g=B.words[D]|0,w=y.words[Y]|0,E=g*w+_,S+=E/67108864|0,_=E&67108863}b.words[m]=_|0,A=S|0}return A!==0?b.words[m]=A|0:b.length--,b.strip()}var x=function(y,b,l){var g=y.words,w=b.words,E=l.words,I=0,A,m,S,_=g[0]|0,F=_&8191,Y=_>>>13,D=g[1]|0,j=D&8191,G=D>>>13,Z=g[2]|0,ee=Z&8191,ue=Z>>>13,he=g[3]|0,L=he&8191,z=he>>>13,K=g[4]|0,X=K&8191,te=K>>>13,re=g[5]|0,ne=re&8191,oe=re>>>13,se=g[6]|0,Q=se&8191,le=se>>>13,fe=g[7]|0,ae=fe&8191,pe=fe>>>13,me=g[8]|0,ve=me&8191,xe=me>>>13,Fe=g[9]|0,be=Fe&8191,ke=Fe>>>13,Ue=w[0]|0,Ae=Ue&8191,We=Ue>>>13,Be=w[1]|0,_e=Be&8191,Ge=Be>>>13,at=w[2]|0,Se=at&8191,it=at>>>13,ft=w[3]|0,Te=ft&8191,Je=ft>>>13,Xe=w[4]|0,Me=Xe&8191,Qe=Xe>>>13,et=w[5]|0,Ie=et&8191,ct=et>>>13,ut=w[6]|0,Re=ut&8191,ht=ut>>>13,lt=w[7]|0,Oe=lt&8191,tt=lt>>>13,Ke=w[8]|0,Ne=Ke&8191,dt=Ke>>>13,pt=w[9]|0,Pe=pt&8191,vt=pt>>>13;l.negative=y.negative^b.negative,l.length=19,A=Math.imul(F,Ae),m=Math.imul(F,We),m=m+Math.imul(Y,Ae)|0,S=Math.imul(Y,We);var je=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(je>>>26)|0,je&=67108863,A=Math.imul(j,Ae),m=Math.imul(j,We),m=m+Math.imul(G,Ae)|0,S=Math.imul(G,We),A=A+Math.imul(F,_e)|0,m=m+Math.imul(F,Ge)|0,m=m+Math.imul(Y,_e)|0,S=S+Math.imul(Y,Ge)|0;var st=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(st>>>26)|0,st&=67108863,A=Math.imul(ee,Ae),m=Math.imul(ee,We),m=m+Math.imul(ue,Ae)|0,S=Math.imul(ue,We),A=A+Math.imul(j,_e)|0,m=m+Math.imul(j,Ge)|0,m=m+Math.imul(G,_e)|0,S=S+Math.imul(G,Ge)|0,A=A+Math.imul(F,Se)|0,m=m+Math.imul(F,it)|0,m=m+Math.imul(Y,Se)|0,S=S+Math.imul(Y,it)|0;var Rr=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,A=Math.imul(L,Ae),m=Math.imul(L,We),m=m+Math.imul(z,Ae)|0,S=Math.imul(z,We),A=A+Math.imul(ee,_e)|0,m=m+Math.imul(ee,Ge)|0,m=m+Math.imul(ue,_e)|0,S=S+Math.imul(ue,Ge)|0,A=A+Math.imul(j,Se)|0,m=m+Math.imul(j,it)|0,m=m+Math.imul(G,Se)|0,S=S+Math.imul(G,it)|0,A=A+Math.imul(F,Te)|0,m=m+Math.imul(F,Je)|0,m=m+Math.imul(Y,Te)|0,S=S+Math.imul(Y,Je)|0;var Nr=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,A=Math.imul(X,Ae),m=Math.imul(X,We),m=m+Math.imul(te,Ae)|0,S=Math.imul(te,We),A=A+Math.imul(L,_e)|0,m=m+Math.imul(L,Ge)|0,m=m+Math.imul(z,_e)|0,S=S+Math.imul(z,Ge)|0,A=A+Math.imul(ee,Se)|0,m=m+Math.imul(ee,it)|0,m=m+Math.imul(ue,Se)|0,S=S+Math.imul(ue,it)|0,A=A+Math.imul(j,Te)|0,m=m+Math.imul(j,Je)|0,m=m+Math.imul(G,Te)|0,S=S+Math.imul(G,Je)|0,A=A+Math.imul(F,Me)|0,m=m+Math.imul(F,Qe)|0,m=m+Math.imul(Y,Me)|0,S=S+Math.imul(Y,Qe)|0;var Pr=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,A=Math.imul(ne,Ae),m=Math.imul(ne,We),m=m+Math.imul(oe,Ae)|0,S=Math.imul(oe,We),A=A+Math.imul(X,_e)|0,m=m+Math.imul(X,Ge)|0,m=m+Math.imul(te,_e)|0,S=S+Math.imul(te,Ge)|0,A=A+Math.imul(L,Se)|0,m=m+Math.imul(L,it)|0,m=m+Math.imul(z,Se)|0,S=S+Math.imul(z,it)|0,A=A+Math.imul(ee,Te)|0,m=m+Math.imul(ee,Je)|0,m=m+Math.imul(ue,Te)|0,S=S+Math.imul(ue,Je)|0,A=A+Math.imul(j,Me)|0,m=m+Math.imul(j,Qe)|0,m=m+Math.imul(G,Me)|0,S=S+Math.imul(G,Qe)|0,A=A+Math.imul(F,Ie)|0,m=m+Math.imul(F,ct)|0,m=m+Math.imul(Y,Ie)|0,S=S+Math.imul(Y,ct)|0;var Fr=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,A=Math.imul(Q,Ae),m=Math.imul(Q,We),m=m+Math.imul(le,Ae)|0,S=Math.imul(le,We),A=A+Math.imul(ne,_e)|0,m=m+Math.imul(ne,Ge)|0,m=m+Math.imul(oe,_e)|0,S=S+Math.imul(oe,Ge)|0,A=A+Math.imul(X,Se)|0,m=m+Math.imul(X,it)|0,m=m+Math.imul(te,Se)|0,S=S+Math.imul(te,it)|0,A=A+Math.imul(L,Te)|0,m=m+Math.imul(L,Je)|0,m=m+Math.imul(z,Te)|0,S=S+Math.imul(z,Je)|0,A=A+Math.imul(ee,Me)|0,m=m+Math.imul(ee,Qe)|0,m=m+Math.imul(ue,Me)|0,S=S+Math.imul(ue,Qe)|0,A=A+Math.imul(j,Ie)|0,m=m+Math.imul(j,ct)|0,m=m+Math.imul(G,Ie)|0,S=S+Math.imul(G,ct)|0,A=A+Math.imul(F,Re)|0,m=m+Math.imul(F,ht)|0,m=m+Math.imul(Y,Re)|0,S=S+Math.imul(Y,ht)|0;var Vt=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,A=Math.imul(ae,Ae),m=Math.imul(ae,We),m=m+Math.imul(pe,Ae)|0,S=Math.imul(pe,We),A=A+Math.imul(Q,_e)|0,m=m+Math.imul(Q,Ge)|0,m=m+Math.imul(le,_e)|0,S=S+Math.imul(le,Ge)|0,A=A+Math.imul(ne,Se)|0,m=m+Math.imul(ne,it)|0,m=m+Math.imul(oe,Se)|0,S=S+Math.imul(oe,it)|0,A=A+Math.imul(X,Te)|0,m=m+Math.imul(X,Je)|0,m=m+Math.imul(te,Te)|0,S=S+Math.imul(te,Je)|0,A=A+Math.imul(L,Me)|0,m=m+Math.imul(L,Qe)|0,m=m+Math.imul(z,Me)|0,S=S+Math.imul(z,Qe)|0,A=A+Math.imul(ee,Ie)|0,m=m+Math.imul(ee,ct)|0,m=m+Math.imul(ue,Ie)|0,S=S+Math.imul(ue,ct)|0,A=A+Math.imul(j,Re)|0,m=m+Math.imul(j,ht)|0,m=m+Math.imul(G,Re)|0,S=S+Math.imul(G,ht)|0,A=A+Math.imul(F,Oe)|0,m=m+Math.imul(F,tt)|0,m=m+Math.imul(Y,Oe)|0,S=S+Math.imul(Y,tt)|0;var Xn=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,A=Math.imul(ve,Ae),m=Math.imul(ve,We),m=m+Math.imul(xe,Ae)|0,S=Math.imul(xe,We),A=A+Math.imul(ae,_e)|0,m=m+Math.imul(ae,Ge)|0,m=m+Math.imul(pe,_e)|0,S=S+Math.imul(pe,Ge)|0,A=A+Math.imul(Q,Se)|0,m=m+Math.imul(Q,it)|0,m=m+Math.imul(le,Se)|0,S=S+Math.imul(le,it)|0,A=A+Math.imul(ne,Te)|0,m=m+Math.imul(ne,Je)|0,m=m+Math.imul(oe,Te)|0,S=S+Math.imul(oe,Je)|0,A=A+Math.imul(X,Me)|0,m=m+Math.imul(X,Qe)|0,m=m+Math.imul(te,Me)|0,S=S+Math.imul(te,Qe)|0,A=A+Math.imul(L,Ie)|0,m=m+Math.imul(L,ct)|0,m=m+Math.imul(z,Ie)|0,S=S+Math.imul(z,ct)|0,A=A+Math.imul(ee,Re)|0,m=m+Math.imul(ee,ht)|0,m=m+Math.imul(ue,Re)|0,S=S+Math.imul(ue,ht)|0,A=A+Math.imul(j,Oe)|0,m=m+Math.imul(j,tt)|0,m=m+Math.imul(G,Oe)|0,S=S+Math.imul(G,tt)|0,A=A+Math.imul(F,Ne)|0,m=m+Math.imul(F,dt)|0,m=m+Math.imul(Y,Ne)|0,S=S+Math.imul(Y,dt)|0;var Yn=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,A=Math.imul(be,Ae),m=Math.imul(be,We),m=m+Math.imul(ke,Ae)|0,S=Math.imul(ke,We),A=A+Math.imul(ve,_e)|0,m=m+Math.imul(ve,Ge)|0,m=m+Math.imul(xe,_e)|0,S=S+Math.imul(xe,Ge)|0,A=A+Math.imul(ae,Se)|0,m=m+Math.imul(ae,it)|0,m=m+Math.imul(pe,Se)|0,S=S+Math.imul(pe,it)|0,A=A+Math.imul(Q,Te)|0,m=m+Math.imul(Q,Je)|0,m=m+Math.imul(le,Te)|0,S=S+Math.imul(le,Je)|0,A=A+Math.imul(ne,Me)|0,m=m+Math.imul(ne,Qe)|0,m=m+Math.imul(oe,Me)|0,S=S+Math.imul(oe,Qe)|0,A=A+Math.imul(X,Ie)|0,m=m+Math.imul(X,ct)|0,m=m+Math.imul(te,Ie)|0,S=S+Math.imul(te,ct)|0,A=A+Math.imul(L,Re)|0,m=m+Math.imul(L,ht)|0,m=m+Math.imul(z,Re)|0,S=S+Math.imul(z,ht)|0,A=A+Math.imul(ee,Oe)|0,m=m+Math.imul(ee,tt)|0,m=m+Math.imul(ue,Oe)|0,S=S+Math.imul(ue,tt)|0,A=A+Math.imul(j,Ne)|0,m=m+Math.imul(j,dt)|0,m=m+Math.imul(G,Ne)|0,S=S+Math.imul(G,dt)|0,A=A+Math.imul(F,Pe)|0,m=m+Math.imul(F,vt)|0,m=m+Math.imul(Y,Pe)|0,S=S+Math.imul(Y,vt)|0;var Zn=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,A=Math.imul(be,_e),m=Math.imul(be,Ge),m=m+Math.imul(ke,_e)|0,S=Math.imul(ke,Ge),A=A+Math.imul(ve,Se)|0,m=m+Math.imul(ve,it)|0,m=m+Math.imul(xe,Se)|0,S=S+Math.imul(xe,it)|0,A=A+Math.imul(ae,Te)|0,m=m+Math.imul(ae,Je)|0,m=m+Math.imul(pe,Te)|0,S=S+Math.imul(pe,Je)|0,A=A+Math.imul(Q,Me)|0,m=m+Math.imul(Q,Qe)|0,m=m+Math.imul(le,Me)|0,S=S+Math.imul(le,Qe)|0,A=A+Math.imul(ne,Ie)|0,m=m+Math.imul(ne,ct)|0,m=m+Math.imul(oe,Ie)|0,S=S+Math.imul(oe,ct)|0,A=A+Math.imul(X,Re)|0,m=m+Math.imul(X,ht)|0,m=m+Math.imul(te,Re)|0,S=S+Math.imul(te,ht)|0,A=A+Math.imul(L,Oe)|0,m=m+Math.imul(L,tt)|0,m=m+Math.imul(z,Oe)|0,S=S+Math.imul(z,tt)|0,A=A+Math.imul(ee,Ne)|0,m=m+Math.imul(ee,dt)|0,m=m+Math.imul(ue,Ne)|0,S=S+Math.imul(ue,dt)|0,A=A+Math.imul(j,Pe)|0,m=m+Math.imul(j,vt)|0,m=m+Math.imul(G,Pe)|0,S=S+Math.imul(G,vt)|0;var Jn=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,A=Math.imul(be,Se),m=Math.imul(be,it),m=m+Math.imul(ke,Se)|0,S=Math.imul(ke,it),A=A+Math.imul(ve,Te)|0,m=m+Math.imul(ve,Je)|0,m=m+Math.imul(xe,Te)|0,S=S+Math.imul(xe,Je)|0,A=A+Math.imul(ae,Me)|0,m=m+Math.imul(ae,Qe)|0,m=m+Math.imul(pe,Me)|0,S=S+Math.imul(pe,Qe)|0,A=A+Math.imul(Q,Ie)|0,m=m+Math.imul(Q,ct)|0,m=m+Math.imul(le,Ie)|0,S=S+Math.imul(le,ct)|0,A=A+Math.imul(ne,Re)|0,m=m+Math.imul(ne,ht)|0,m=m+Math.imul(oe,Re)|0,S=S+Math.imul(oe,ht)|0,A=A+Math.imul(X,Oe)|0,m=m+Math.imul(X,tt)|0,m=m+Math.imul(te,Oe)|0,S=S+Math.imul(te,tt)|0,A=A+Math.imul(L,Ne)|0,m=m+Math.imul(L,dt)|0,m=m+Math.imul(z,Ne)|0,S=S+Math.imul(z,dt)|0,A=A+Math.imul(ee,Pe)|0,m=m+Math.imul(ee,vt)|0,m=m+Math.imul(ue,Pe)|0,S=S+Math.imul(ue,vt)|0;var Qn=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,A=Math.imul(be,Te),m=Math.imul(be,Je),m=m+Math.imul(ke,Te)|0,S=Math.imul(ke,Je),A=A+Math.imul(ve,Me)|0,m=m+Math.imul(ve,Qe)|0,m=m+Math.imul(xe,Me)|0,S=S+Math.imul(xe,Qe)|0,A=A+Math.imul(ae,Ie)|0,m=m+Math.imul(ae,ct)|0,m=m+Math.imul(pe,Ie)|0,S=S+Math.imul(pe,ct)|0,A=A+Math.imul(Q,Re)|0,m=m+Math.imul(Q,ht)|0,m=m+Math.imul(le,Re)|0,S=S+Math.imul(le,ht)|0,A=A+Math.imul(ne,Oe)|0,m=m+Math.imul(ne,tt)|0,m=m+Math.imul(oe,Oe)|0,S=S+Math.imul(oe,tt)|0,A=A+Math.imul(X,Ne)|0,m=m+Math.imul(X,dt)|0,m=m+Math.imul(te,Ne)|0,S=S+Math.imul(te,dt)|0,A=A+Math.imul(L,Pe)|0,m=m+Math.imul(L,vt)|0,m=m+Math.imul(z,Pe)|0,S=S+Math.imul(z,vt)|0;var tn=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(tn>>>26)|0,tn&=67108863,A=Math.imul(be,Me),m=Math.imul(be,Qe),m=m+Math.imul(ke,Me)|0,S=Math.imul(ke,Qe),A=A+Math.imul(ve,Ie)|0,m=m+Math.imul(ve,ct)|0,m=m+Math.imul(xe,Ie)|0,S=S+Math.imul(xe,ct)|0,A=A+Math.imul(ae,Re)|0,m=m+Math.imul(ae,ht)|0,m=m+Math.imul(pe,Re)|0,S=S+Math.imul(pe,ht)|0,A=A+Math.imul(Q,Oe)|0,m=m+Math.imul(Q,tt)|0,m=m+Math.imul(le,Oe)|0,S=S+Math.imul(le,tt)|0,A=A+Math.imul(ne,Ne)|0,m=m+Math.imul(ne,dt)|0,m=m+Math.imul(oe,Ne)|0,S=S+Math.imul(oe,dt)|0,A=A+Math.imul(X,Pe)|0,m=m+Math.imul(X,vt)|0,m=m+Math.imul(te,Pe)|0,S=S+Math.imul(te,vt)|0;var ei=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(ei>>>26)|0,ei&=67108863,A=Math.imul(be,Ie),m=Math.imul(be,ct),m=m+Math.imul(ke,Ie)|0,S=Math.imul(ke,ct),A=A+Math.imul(ve,Re)|0,m=m+Math.imul(ve,ht)|0,m=m+Math.imul(xe,Re)|0,S=S+Math.imul(xe,ht)|0,A=A+Math.imul(ae,Oe)|0,m=m+Math.imul(ae,tt)|0,m=m+Math.imul(pe,Oe)|0,S=S+Math.imul(pe,tt)|0,A=A+Math.imul(Q,Ne)|0,m=m+Math.imul(Q,dt)|0,m=m+Math.imul(le,Ne)|0,S=S+Math.imul(le,dt)|0,A=A+Math.imul(ne,Pe)|0,m=m+Math.imul(ne,vt)|0,m=m+Math.imul(oe,Pe)|0,S=S+Math.imul(oe,vt)|0;var ti=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(ti>>>26)|0,ti&=67108863,A=Math.imul(be,Re),m=Math.imul(be,ht),m=m+Math.imul(ke,Re)|0,S=Math.imul(ke,ht),A=A+Math.imul(ve,Oe)|0,m=m+Math.imul(ve,tt)|0,m=m+Math.imul(xe,Oe)|0,S=S+Math.imul(xe,tt)|0,A=A+Math.imul(ae,Ne)|0,m=m+Math.imul(ae,dt)|0,m=m+Math.imul(pe,Ne)|0,S=S+Math.imul(pe,dt)|0,A=A+Math.imul(Q,Pe)|0,m=m+Math.imul(Q,vt)|0,m=m+Math.imul(le,Pe)|0,S=S+Math.imul(le,vt)|0;var gr=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(gr>>>26)|0,gr&=67108863,A=Math.imul(be,Oe),m=Math.imul(be,tt),m=m+Math.imul(ke,Oe)|0,S=Math.imul(ke,tt),A=A+Math.imul(ve,Ne)|0,m=m+Math.imul(ve,dt)|0,m=m+Math.imul(xe,Ne)|0,S=S+Math.imul(xe,dt)|0,A=A+Math.imul(ae,Pe)|0,m=m+Math.imul(ae,vt)|0,m=m+Math.imul(pe,Pe)|0,S=S+Math.imul(pe,vt)|0;var ri=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(ri>>>26)|0,ri&=67108863,A=Math.imul(be,Ne),m=Math.imul(be,dt),m=m+Math.imul(ke,Ne)|0,S=Math.imul(ke,dt),A=A+Math.imul(ve,Pe)|0,m=m+Math.imul(ve,vt)|0,m=m+Math.imul(xe,Pe)|0,S=S+Math.imul(xe,vt)|0;var ni=(I+A|0)+((m&8191)<<13)|0;I=(S+(m>>>13)|0)+(ni>>>26)|0,ni&=67108863,A=Math.imul(be,Pe),m=Math.imul(be,vt),m=m+Math.imul(ke,Pe)|0,S=Math.imul(ke,vt);var ii=(I+A|0)+((m&8191)<<13)|0;return I=(S+(m>>>13)|0)+(ii>>>26)|0,ii&=67108863,E[0]=je,E[1]=st,E[2]=Rr,E[3]=Nr,E[4]=Pr,E[5]=Fr,E[6]=Vt,E[7]=Xn,E[8]=Yn,E[9]=Zn,E[10]=Jn,E[11]=Qn,E[12]=tn,E[13]=ei,E[14]=ti,E[15]=gr,E[16]=ri,E[17]=ni,E[18]=ii,I!==0&&(E[19]=I,l.length++),l};Math.imul||(x=v);function C(B,y,b){b.negative=y.negative^B.negative,b.length=B.length+y.length;for(var l=0,g=0,w=0;w<b.length-1;w++){var E=g;g=0;for(var I=l&67108863,A=Math.min(w,y.length-1),m=Math.max(0,w-B.length+1);m<=A;m++){var S=w-m,_=B.words[S]|0,F=y.words[m]|0,Y=_*F,D=Y&67108863;E=E+(Y/67108864|0)|0,D=D+I|0,I=D&67108863,E=E+(D>>>26)|0,g+=E>>>26,E&=67108863}b.words[w]=I,l=E,E=g}return l!==0?b.words[w]=l:b.length--,b.strip()}function O(B,y,b){var l=new M;return l.mulp(B,y,b)}s.prototype.mulTo=function(y,b){var l,g=this.length+y.length;return this.length===10&&y.length===10?l=x(this,y,b):g<63?l=v(this,y,b):g<1024?l=C(this,y,b):l=O(this,y,b),l};function M(B,y){this.x=B,this.y=y}M.prototype.makeRBT=function(y){for(var b=new Array(y),l=s.prototype._countBits(y)-1,g=0;g<y;g++)b[g]=this.revBin(g,l,y);return b},M.prototype.revBin=function(y,b,l){if(y===0||y===l-1)return y;for(var g=0,w=0;w<b;w++)g|=(y&1)<<b-w-1,y>>=1;return g},M.prototype.permute=function(y,b,l,g,w,E){for(var I=0;I<E;I++)g[I]=b[y[I]],w[I]=l[y[I]]},M.prototype.transform=function(y,b,l,g,w,E){this.permute(E,y,b,l,g,w);for(var I=1;I<w;I<<=1)for(var A=I<<1,m=Math.cos(2*Math.PI/A),S=Math.sin(2*Math.PI/A),_=0;_<w;_+=A)for(var F=m,Y=S,D=0;D<I;D++){var j=l[_+D],G=g[_+D],Z=l[_+D+I],ee=g[_+D+I],ue=F*Z-Y*ee;ee=F*ee+Y*Z,Z=ue,l[_+D]=j+Z,g[_+D]=G+ee,l[_+D+I]=j-Z,g[_+D+I]=G-ee,D!==A&&(ue=m*F-S*Y,Y=m*Y+S*F,F=ue)}},M.prototype.guessLen13b=function(y,b){var l=Math.max(b,y)|1,g=l&1,w=0;for(l=l/2|0;l;l=l>>>1)w++;return 1<<w+1+g},M.prototype.conjugate=function(y,b,l){if(!(l<=1))for(var g=0;g<l/2;g++){var w=y[g];y[g]=y[l-g-1],y[l-g-1]=w,w=b[g],b[g]=-b[l-g-1],b[l-g-1]=-w}},M.prototype.normalize13b=function(y,b){for(var l=0,g=0;g<b/2;g++){var w=Math.round(y[2*g+1]/b)*8192+Math.round(y[2*g]/b)+l;y[g]=w&67108863,w<67108864?l=0:l=w/67108864|0}return y},M.prototype.convert13b=function(y,b,l,g){for(var w=0,E=0;E<b;E++)w=w+(y[E]|0),l[2*E]=w&8191,w=w>>>13,l[2*E+1]=w&8191,w=w>>>13;for(E=2*b;E<g;++E)l[E]=0;n(w===0),n((w&-8192)===0)},M.prototype.stub=function(y){for(var b=new Array(y),l=0;l<y;l++)b[l]=0;return b},M.prototype.mulp=function(y,b,l){var g=2*this.guessLen13b(y.length,b.length),w=this.makeRBT(g),E=this.stub(g),I=new Array(g),A=new Array(g),m=new Array(g),S=new Array(g),_=new Array(g),F=new Array(g),Y=l.words;Y.length=g,this.convert13b(y.words,y.length,I,g),this.convert13b(b.words,b.length,S,g),this.transform(I,E,A,m,g,w),this.transform(S,E,_,F,g,w);for(var D=0;D<g;D++){var j=A[D]*_[D]-m[D]*F[D];m[D]=A[D]*F[D]+m[D]*_[D],A[D]=j}return this.conjugate(A,m,g),this.transform(A,m,Y,E,g,w),this.conjugate(Y,E,g),this.normalize13b(Y,g),l.negative=y.negative^b.negative,l.length=y.length+b.length,l.strip()},s.prototype.mul=function(y){var b=new s(null);return b.words=new Array(this.length+y.length),this.mulTo(y,b)},s.prototype.mulf=function(y){var b=new s(null);return b.words=new Array(this.length+y.length),O(this,y,b)},s.prototype.imul=function(y){return this.clone().mulTo(y,this)},s.prototype.imuln=function(y){n(typeof y=="number"),n(y<67108864);for(var b=0,l=0;l<this.length;l++){var g=(this.words[l]|0)*y,w=(g&67108863)+(b&67108863);b>>=26,b+=g/67108864|0,b+=w>>>26,this.words[l]=w&67108863}return b!==0&&(this.words[l]=b,this.length++),this},s.prototype.muln=function(y){return this.clone().imuln(y)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(y){var b=p(y);if(b.length===0)return new s(1);for(var l=this,g=0;g<b.length&&b[g]===0;g++,l=l.sqr());if(++g<b.length)for(var w=l.sqr();g<b.length;g++,w=w.sqr())b[g]!==0&&(l=l.mul(w));return l},s.prototype.iushln=function(y){n(typeof y=="number"&&y>=0);var b=y%26,l=(y-b)/26,g=67108863>>>26-b<<26-b,w;if(b!==0){var E=0;for(w=0;w<this.length;w++){var I=this.words[w]&g,A=(this.words[w]|0)-I<<b;this.words[w]=A|E,E=I>>>26-b}E&&(this.words[w]=E,this.length++)}if(l!==0){for(w=this.length-1;w>=0;w--)this.words[w+l]=this.words[w];for(w=0;w<l;w++)this.words[w]=0;this.length+=l}return this.strip()},s.prototype.ishln=function(y){return n(this.negative===0),this.iushln(y)},s.prototype.iushrn=function(y,b,l){n(typeof y=="number"&&y>=0);var g;b?g=(b-b%26)/26:g=0;var w=y%26,E=Math.min((y-w)/26,this.length),I=67108863^67108863>>>w<<w,A=l;if(g-=E,g=Math.max(0,g),A){for(var m=0;m<E;m++)A.words[m]=this.words[m];A.length=E}if(E!==0)if(this.length>E)for(this.length-=E,m=0;m<this.length;m++)this.words[m]=this.words[m+E];else this.words[0]=0,this.length=1;var S=0;for(m=this.length-1;m>=0&&(S!==0||m>=g);m--){var _=this.words[m]|0;this.words[m]=S<<26-w|_>>>w,S=_&I}return A&&S!==0&&(A.words[A.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(y,b,l){return n(this.negative===0),this.iushrn(y,b,l)},s.prototype.shln=function(y){return this.clone().ishln(y)},s.prototype.ushln=function(y){return this.clone().iushln(y)},s.prototype.shrn=function(y){return this.clone().ishrn(y)},s.prototype.ushrn=function(y){return this.clone().iushrn(y)},s.prototype.testn=function(y){n(typeof y=="number"&&y>=0);var b=y%26,l=(y-b)/26,g=1<<b;if(this.length<=l)return!1;var w=this.words[l];return!!(w&g)},s.prototype.imaskn=function(y){n(typeof y=="number"&&y>=0);var b=y%26,l=(y-b)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(b!==0&&l++,this.length=Math.min(l,this.length),b!==0){var g=67108863^67108863>>>b<<b;this.words[this.length-1]&=g}return this.strip()},s.prototype.maskn=function(y){return this.clone().imaskn(y)},s.prototype.iaddn=function(y){return n(typeof y=="number"),n(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},s.prototype._iaddn=function(y){this.words[0]+=y;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(y){if(n(typeof y=="number"),n(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},s.prototype.addn=function(y){return this.clone().iaddn(y)},s.prototype.subn=function(y){return this.clone().isubn(y)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(y,b,l){var g=y.length+l,w;this._expand(g);var E,I=0;for(w=0;w<y.length;w++){E=(this.words[w+l]|0)+I;var A=(y.words[w]|0)*b;E-=A&67108863,I=(E>>26)-(A/67108864|0),this.words[w+l]=E&67108863}for(;w<this.length-l;w++)E=(this.words[w+l]|0)+I,I=E>>26,this.words[w+l]=E&67108863;if(I===0)return this.strip();for(n(I===-1),I=0,w=0;w<this.length;w++)E=-(this.words[w]|0)+I,I=E>>26,this.words[w]=E&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(y,b){var l=this.length-y.length,g=this.clone(),w=y,E=w.words[w.length-1]|0,I=this._countBits(E);l=26-I,l!==0&&(w=w.ushln(l),g.iushln(l),E=w.words[w.length-1]|0);var A=g.length-w.length,m;if(b!=="mod"){m=new s(null),m.length=A+1,m.words=new Array(m.length);for(var S=0;S<m.length;S++)m.words[S]=0}var _=g.clone()._ishlnsubmul(w,1,A);_.negative===0&&(g=_,m&&(m.words[A]=1));for(var F=A-1;F>=0;F--){var Y=(g.words[w.length+F]|0)*67108864+(g.words[w.length+F-1]|0);for(Y=Math.min(Y/E|0,67108863),g._ishlnsubmul(w,Y,F);g.negative!==0;)Y--,g.negative=0,g._ishlnsubmul(w,1,F),g.isZero()||(g.negative^=1);m&&(m.words[F]=Y)}return m&&m.strip(),g.strip(),b!=="div"&&l!==0&&g.iushrn(l),{div:m||null,mod:g}},s.prototype.divmod=function(y,b,l){if(n(!y.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,w,E;return this.negative!==0&&y.negative===0?(E=this.neg().divmod(y,b),b!=="mod"&&(g=E.div.neg()),b!=="div"&&(w=E.mod.neg(),l&&w.negative!==0&&w.iadd(y)),{div:g,mod:w}):this.negative===0&&y.negative!==0?(E=this.divmod(y.neg(),b),b!=="mod"&&(g=E.div.neg()),{div:g,mod:E.mod}):this.negative&y.negative?(E=this.neg().divmod(y.neg(),b),b!=="div"&&(w=E.mod.neg(),l&&w.negative!==0&&w.isub(y)),{div:E.div,mod:w}):y.length>this.length||this.cmp(y)<0?{div:new s(0),mod:this}:y.length===1?b==="div"?{div:this.divn(y.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new s(this.modn(y.words[0]))}:this._wordDiv(y,b)},s.prototype.div=function(y){return this.divmod(y,"div",!1).div},s.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},s.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},s.prototype.divRound=function(y){var b=this.divmod(y);if(b.mod.isZero())return b.div;var l=b.div.negative!==0?b.mod.isub(y):b.mod,g=y.ushrn(1),w=y.andln(1),E=l.cmp(g);return E<0||w===1&&E===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modn=function(y){n(y<=67108863);for(var b=(1<<26)%y,l=0,g=this.length-1;g>=0;g--)l=(b*l+(this.words[g]|0))%y;return l},s.prototype.idivn=function(y){n(y<=67108863);for(var b=0,l=this.length-1;l>=0;l--){var g=(this.words[l]|0)+b*67108864;this.words[l]=g/y|0,b=g%y}return this.strip()},s.prototype.divn=function(y){return this.clone().idivn(y)},s.prototype.egcd=function(y){n(y.negative===0),n(!y.isZero());var b=this,l=y.clone();b.negative!==0?b=b.umod(y):b=b.clone();for(var g=new s(1),w=new s(0),E=new s(0),I=new s(1),A=0;b.isEven()&&l.isEven();)b.iushrn(1),l.iushrn(1),++A;for(var m=l.clone(),S=b.clone();!b.isZero();){for(var _=0,F=1;!(b.words[0]&F)&&_<26;++_,F<<=1);if(_>0)for(b.iushrn(_);_-- >0;)(g.isOdd()||w.isOdd())&&(g.iadd(m),w.isub(S)),g.iushrn(1),w.iushrn(1);for(var Y=0,D=1;!(l.words[0]&D)&&Y<26;++Y,D<<=1);if(Y>0)for(l.iushrn(Y);Y-- >0;)(E.isOdd()||I.isOdd())&&(E.iadd(m),I.isub(S)),E.iushrn(1),I.iushrn(1);b.cmp(l)>=0?(b.isub(l),g.isub(E),w.isub(I)):(l.isub(b),E.isub(g),I.isub(w))}return{a:E,b:I,gcd:l.iushln(A)}},s.prototype._invmp=function(y){n(y.negative===0),n(!y.isZero());var b=this,l=y.clone();b.negative!==0?b=b.umod(y):b=b.clone();for(var g=new s(1),w=new s(0),E=l.clone();b.cmpn(1)>0&&l.cmpn(1)>0;){for(var I=0,A=1;!(b.words[0]&A)&&I<26;++I,A<<=1);if(I>0)for(b.iushrn(I);I-- >0;)g.isOdd()&&g.iadd(E),g.iushrn(1);for(var m=0,S=1;!(l.words[0]&S)&&m<26;++m,S<<=1);if(m>0)for(l.iushrn(m);m-- >0;)w.isOdd()&&w.iadd(E),w.iushrn(1);b.cmp(l)>=0?(b.isub(l),g.isub(w)):(l.isub(b),w.isub(g))}var _;return b.cmpn(1)===0?_=g:_=w,_.cmpn(0)<0&&_.iadd(y),_},s.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var b=this.clone(),l=y.clone();b.negative=0,l.negative=0;for(var g=0;b.isEven()&&l.isEven();g++)b.iushrn(1),l.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;l.isEven();)l.iushrn(1);var w=b.cmp(l);if(w<0){var E=b;b=l,l=E}else if(w===0||l.cmpn(1)===0)break;b.isub(l)}while(!0);return l.iushln(g)},s.prototype.invm=function(y){return this.egcd(y).a.umod(y)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(y){return this.words[0]&y},s.prototype.bincn=function(y){n(typeof y=="number");var b=y%26,l=(y-b)/26,g=1<<b;if(this.length<=l)return this._expand(l+1),this.words[l]|=g,this;for(var w=g,E=l;w!==0&&E<this.length;E++){var I=this.words[E]|0;I+=w,w=I>>>26,I&=67108863,this.words[E]=I}return w!==0&&(this.words[E]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(y){var b=y<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var l;if(this.length>1)l=1;else{b&&(y=-y),n(y<=67108863,"Number is too big");var g=this.words[0]|0;l=g===y?0:g<y?-1:1}return this.negative!==0?-l|0:l},s.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var b=this.ucmp(y);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var b=0,l=this.length-1;l>=0;l--){var g=this.words[l]|0,w=y.words[l]|0;if(g!==w){g<w?b=-1:g>w&&(b=1);break}}return b},s.prototype.gtn=function(y){return this.cmpn(y)===1},s.prototype.gt=function(y){return this.cmp(y)===1},s.prototype.gten=function(y){return this.cmpn(y)>=0},s.prototype.gte=function(y){return this.cmp(y)>=0},s.prototype.ltn=function(y){return this.cmpn(y)===-1},s.prototype.lt=function(y){return this.cmp(y)===-1},s.prototype.lten=function(y){return this.cmpn(y)<=0},s.prototype.lte=function(y){return this.cmp(y)<=0},s.prototype.eqn=function(y){return this.cmpn(y)===0},s.prototype.eq=function(y){return this.cmp(y)===0},s.red=function(y){return new V(y)},s.prototype.toRed=function(y){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(y){return this.red=y,this},s.prototype.forceRed=function(y){return n(!this.red,"Already a number in reduction context"),this._forceRed(y)},s.prototype.redAdd=function(y){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},s.prototype.redIAdd=function(y){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},s.prototype.redSub=function(y){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},s.prototype.redISub=function(y){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},s.prototype.redShl=function(y){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},s.prototype.redMul=function(y){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},s.prototype.redIMul=function(y){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(y){return n(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var R={k256:null,p224:null,p192:null,p25519:null};function T(B,y){this.name=B,this.p=new s(y,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var y=new s(null);return y.words=new Array(Math.ceil(this.n/13)),y},T.prototype.ireduce=function(y){var b=y,l;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),l=b.bitLength();while(l>this.n);var g=l<this.n?-1:b.ucmp(this.p);return g===0?(b.words[0]=0,b.length=1):g>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},T.prototype.split=function(y,b){y.iushrn(this.n,0,b)},T.prototype.imulK=function(y){return y.imul(this.k)};function P(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(P,T),P.prototype.split=function(y,b){for(var l=4194303,g=Math.min(y.length,9),w=0;w<g;w++)b.words[w]=y.words[w];if(b.length=g,y.length<=9){y.words[0]=0,y.length=1;return}var E=y.words[9];for(b.words[b.length++]=E&l,w=10;w<y.length;w++){var I=y.words[w]|0;y.words[w-10]=(I&l)<<4|E>>>22,E=I}E>>>=22,y.words[w-10]=E,E===0&&y.length>10?y.length-=10:y.length-=9},P.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var b=0,l=0;l<y.length;l++){var g=y.words[l]|0;b+=g*977,y.words[l]=b&67108863,b=g*64+(b/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function N(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(N,T);function $(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i($,T);function U(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,T),U.prototype.imulK=function(y){for(var b=0,l=0;l<y.length;l++){var g=(y.words[l]|0)*19+b,w=g&67108863;g>>>=26,y.words[l]=w,b=g}return b!==0&&(y.words[y.length++]=b),y},s._prime=function(y){if(R[y])return R[y];var b;if(y==="k256")b=new P;else if(y==="p224")b=new N;else if(y==="p192")b=new $;else if(y==="p25519")b=new U;else throw new Error("Unknown prime "+y);return R[y]=b,b};function V(B){if(typeof B=="string"){var y=s._prime(B);this.m=y.p,this.prime=y}else n(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}V.prototype._verify1=function(y){n(y.negative===0,"red works only with positives"),n(y.red,"red works only with red numbers")},V.prototype._verify2=function(y,b){n((y.negative|b.negative)===0,"red works only with positives"),n(y.red&&y.red===b.red,"red works only with red numbers")},V.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):y.umod(this.m)._forceRed(this)},V.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},V.prototype.add=function(y,b){this._verify2(y,b);var l=y.add(b);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},V.prototype.iadd=function(y,b){this._verify2(y,b);var l=y.iadd(b);return l.cmp(this.m)>=0&&l.isub(this.m),l},V.prototype.sub=function(y,b){this._verify2(y,b);var l=y.sub(b);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},V.prototype.isub=function(y,b){this._verify2(y,b);var l=y.isub(b);return l.cmpn(0)<0&&l.iadd(this.m),l},V.prototype.shl=function(y,b){return this._verify1(y),this.imod(y.ushln(b))},V.prototype.imul=function(y,b){return this._verify2(y,b),this.imod(y.imul(b))},V.prototype.mul=function(y,b){return this._verify2(y,b),this.imod(y.mul(b))},V.prototype.isqr=function(y){return this.imul(y,y.clone())},V.prototype.sqr=function(y){return this.mul(y,y)},V.prototype.sqrt=function(y){if(y.isZero())return y.clone();var b=this.m.andln(3);if(n(b%2===1),b===3){var l=this.m.add(new s(1)).iushrn(2);return this.pow(y,l)}for(var g=this.m.subn(1),w=0;!g.isZero()&&g.andln(1)===0;)w++,g.iushrn(1);n(!g.isZero());var E=new s(1).toRed(this),I=E.redNeg(),A=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new s(2*m*m).toRed(this);this.pow(m,A).cmp(I)!==0;)m.redIAdd(I);for(var S=this.pow(m,g),_=this.pow(y,g.addn(1).iushrn(1)),F=this.pow(y,g),Y=w;F.cmp(E)!==0;){for(var D=F,j=0;D.cmp(E)!==0;j++)D=D.redSqr();n(j<Y);var G=this.pow(S,new s(1).iushln(Y-j-1));_=_.redMul(G),S=G.redSqr(),F=F.redMul(S),Y=j}return _},V.prototype.invm=function(y){var b=y._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},V.prototype.pow=function(y,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return y.clone();var l=4,g=new Array(1<<l);g[0]=new s(1).toRed(this),g[1]=y;for(var w=2;w<g.length;w++)g[w]=this.mul(g[w-1],y);var E=g[0],I=0,A=0,m=b.bitLength()%26;for(m===0&&(m=26),w=b.length-1;w>=0;w--){for(var S=b.words[w],_=m-1;_>=0;_--){var F=S>>_&1;if(E!==g[0]&&(E=this.sqr(E)),F===0&&I===0){A=0;continue}I<<=1,I|=F,A++,!(A!==l&&(w!==0||_!==0))&&(E=this.mul(E,g[I]),A=0,I=0)}m=26}return E},V.prototype.convertTo=function(y){var b=y.umod(this.m);return b===y?b.clone():b},V.prototype.convertFrom=function(y){var b=y.clone();return b.red=null,b},s.mont=function(y){return new H(y)};function H(B){V.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(H,V),H.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},H.prototype.convertFrom=function(y){var b=this.imod(y.mul(this.rinv));return b.red=null,b},H.prototype.imul=function(y,b){if(y.isZero()||b.isZero())return y.words[0]=0,y.length=1,y;var l=y.imul(b),g=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=l.isub(g).iushrn(this.shift),E=w;return w.cmp(this.m)>=0?E=w.isub(this.m):w.cmpn(0)<0&&(E=w.iadd(this.m)),E._forceRed(this)},H.prototype.mul=function(y,b){if(y.isZero()||b.isZero())return new s(0)._forceRed(this);var l=y.mul(b),g=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=l.isub(g).iushrn(this.shift),E=w;return w.cmp(this.m)>=0?E=w.isub(this.m):w.cmpn(0)<0&&(E=w.iadd(this.m)),E._forceRed(this)},H.prototype.invm=function(y){var b=this.imod(y._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,v5)}(af)),af.exports}var cu={},Kd;function y2(){return Kd||(Kd=1,function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var f=0;f<s.length;f++)a[f]=s[f]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var f=0;f<s.length;f+=2)a.push(parseInt(s[f]+s[f+1],16))}else for(var f=0;f<s.length;f++){var c=s.charCodeAt(f),u=c>>8,h=c&255;u?a.push(u,h):a.push(h)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}}(cu)),cu}var Wd;function vn(){return Wd||(Wd=1,function(t){var e=t,r=_i(),n=Ss(),i=y2();e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(u,h,d){var p=new Array(Math.max(u.bitLength(),d)+1),v;for(v=0;v<p.length;v+=1)p[v]=0;var x=1<<h+1,C=u.clone();for(v=0;v<p.length;v++){var O,M=C.andln(x-1);C.isOdd()?(M>(x>>1)-1?O=(x>>1)-M:O=M,C.isubn(O)):O=0,p[v]=O,C.iushrn(1)}return p}e.getNAF=s;function o(u,h){var d=[[],[]];u=u.clone(),h=h.clone();for(var p=0,v=0,x;u.cmpn(-p)>0||h.cmpn(-v)>0;){var C=u.andln(3)+p&3,O=h.andln(3)+v&3;C===3&&(C=-1),O===3&&(O=-1);var M;C&1?(x=u.andln(7)+p&7,(x===3||x===5)&&O===2?M=-C:M=C):M=0,d[0].push(M);var R;O&1?(x=h.andln(7)+v&7,(x===3||x===5)&&C===2?R=-O:R=O):R=0,d[1].push(R),2*p===M+1&&(p=1-p),2*v===R+1&&(v=1-v),u.iushrn(1),h.iushrn(1)}return d}e.getJSF=o;function a(u,h,d){var p="_"+h;u.prototype[h]=function(){return this[p]!==void 0?this[p]:this[p]=d.call(this)}}e.cachedProperty=a;function f(u){return typeof u=="string"?e.toArray(u,"hex"):u}e.parseBytes=f;function c(u){return new r(u,"hex","le")}e.intFromLE=c}(fu)),fu}var La={exports:{}},Gd;function b2(){if(Gd)return La.exports;Gd=1;var t;La.exports=function(i){return t||(t=new e(null)),t.generate(i)};function e(n){this.rand=n}if(La.exports.Rand=e,e.prototype.generate=function(i){return this._rand(i)},e.prototype._rand=function(i){if(this.rand.getBytes)return this.rand.getBytes(i);for(var s=new Uint8Array(i),o=0;o<s.length;o++)s[o]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(i){var s=new Uint8Array(i);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(i){var s=new Uint8Array(i);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=dl;if(typeof r.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(i){return r.randomBytes(i)}}catch{}return La.exports}var uu={},hu,Xd;function rc(){if(Xd)return hu;Xd=1;var t=_i(),e=vn(),r=e.getNAF,n=e.getJSF,i=e.assert;function s(a,f){this.type=a,this.p=new t(f.p,16),this.red=f.prime?t.red(f.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=f.n&&new t(f.n,16),this.g=f.g&&this.pointFromJSON(f.g,f.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var c=this.n&&this.p.div(this.n);!c||c.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}hu=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(f,c){i(f.precomputed);var u=f._getDoubles(),h=r(c,1,this._bitLength),d=(1<<u.step+1)-(u.step%2===0?2:1);d/=3;var p=[],v,x;for(v=0;v<h.length;v+=u.step){x=0;for(var C=v+u.step-1;C>=v;C--)x=(x<<1)+h[C];p.push(x)}for(var O=this.jpoint(null,null,null),M=this.jpoint(null,null,null),R=d;R>0;R--){for(v=0;v<p.length;v++)x=p[v],x===R?M=M.mixedAdd(u.points[v]):x===-R&&(M=M.mixedAdd(u.points[v].neg()));O=O.add(M)}return O.toP()},s.prototype._wnafMul=function(f,c){var u=4,h=f._getNAFPoints(u);u=h.wnd;for(var d=h.points,p=r(c,u,this._bitLength),v=this.jpoint(null,null,null),x=p.length-1;x>=0;x--){for(var C=0;x>=0&&p[x]===0;x--)C++;if(x>=0&&C++,v=v.dblp(C),x<0)break;var O=p[x];i(O!==0),f.type==="affine"?O>0?v=v.mixedAdd(d[O-1>>1]):v=v.mixedAdd(d[-O-1>>1].neg()):O>0?v=v.add(d[O-1>>1]):v=v.add(d[-O-1>>1].neg())}return f.type==="affine"?v.toP():v},s.prototype._wnafMulAdd=function(f,c,u,h,d){var p=this._wnafT1,v=this._wnafT2,x=this._wnafT3,C=0,O,M,R;for(O=0;O<h;O++){R=c[O];var T=R._getNAFPoints(f);p[O]=T.wnd,v[O]=T.points}for(O=h-1;O>=1;O-=2){var P=O-1,N=O;if(p[P]!==1||p[N]!==1){x[P]=r(u[P],p[P],this._bitLength),x[N]=r(u[N],p[N],this._bitLength),C=Math.max(x[P].length,C),C=Math.max(x[N].length,C);continue}var $=[c[P],null,null,c[N]];c[P].y.cmp(c[N].y)===0?($[1]=c[P].add(c[N]),$[2]=c[P].toJ().mixedAdd(c[N].neg())):c[P].y.cmp(c[N].y.redNeg())===0?($[1]=c[P].toJ().mixedAdd(c[N]),$[2]=c[P].add(c[N].neg())):($[1]=c[P].toJ().mixedAdd(c[N]),$[2]=c[P].toJ().mixedAdd(c[N].neg()));var U=[-3,-1,-5,-7,0,7,5,1,3],V=n(u[P],u[N]);for(C=Math.max(V[0].length,C),x[P]=new Array(C),x[N]=new Array(C),M=0;M<C;M++){var H=V[0][M]|0,B=V[1][M]|0;x[P][M]=U[(H+1)*3+(B+1)],x[N][M]=0,v[P]=$}}var y=this.jpoint(null,null,null),b=this._wnafT4;for(O=C;O>=0;O--){for(var l=0;O>=0;){var g=!0;for(M=0;M<h;M++)b[M]=x[M][O]|0,b[M]!==0&&(g=!1);if(!g)break;l++,O--}if(O>=0&&l++,y=y.dblp(l),O<0)break;for(M=0;M<h;M++){var w=b[M];w!==0&&(w>0?R=v[M][w-1>>1]:w<0&&(R=v[M][-w-1>>1].neg()),R.type==="affine"?y=y.mixedAdd(R):y=y.add(R))}}for(O=0;O<h;O++)v[O]=null;return d?y:y.toP()};function o(a,f){this.curve=a,this.type=f,this.precomputed=null}return s.BasePoint=o,o.prototype.eq=function(){throw new Error("Not implemented")},o.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(f,c){f=e.toArray(f,c);var u=this.p.byteLength();if((f[0]===4||f[0]===6||f[0]===7)&&f.length-1===2*u){f[0]===6?i(f[f.length-1]%2===0):f[0]===7&&i(f[f.length-1]%2===1);var h=this.point(f.slice(1,1+u),f.slice(1+u,1+2*u));return h}else if((f[0]===2||f[0]===3)&&f.length-1===u)return this.pointFromX(f.slice(1,1+u),f[0]===3);throw new Error("Unknown point format")},o.prototype.encodeCompressed=function(f){return this.encode(f,!0)},o.prototype._encode=function(f){var c=this.curve.p.byteLength(),u=this.getX().toArray("be",c);return f?[this.getY().isEven()?2:3].concat(u):[4].concat(u,this.getY().toArray("be",c))},o.prototype.encode=function(f,c){return e.encode(this._encode(c),f)},o.prototype.precompute=function(f){if(this.precomputed)return this;var c={doubles:null,naf:null,beta:null};return c.naf=this._getNAFPoints(8),c.doubles=this._getDoubles(4,f),c.beta=this._getBeta(),this.precomputed=c,this},o.prototype._hasDoubles=function(f){if(!this.precomputed)return!1;var c=this.precomputed.doubles;return c?c.points.length>=Math.ceil((f.bitLength()+1)/c.step):!1},o.prototype._getDoubles=function(f,c){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var u=[this],h=this,d=0;d<c;d+=f){for(var p=0;p<f;p++)h=h.dbl();u.push(h)}return{step:f,points:u}},o.prototype._getNAFPoints=function(f){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var c=[this],u=(1<<f)-1,h=u===1?null:this.dbl(),d=1;d<u;d++)c[d]=c[d-1].add(h);return{wnd:f,points:c}},o.prototype._getBeta=function(){return null},o.prototype.dblp=function(f){for(var c=this,u=0;u<f;u++)c=c.dbl();return c},hu}var lu,Yd;function g5(){if(Yd)return lu;Yd=1;var t=vn(),e=_i(),r=Zf(),n=rc(),i=t.assert;function s(f){n.call(this,"short",f),this.a=new e(f.a,16).toRed(this.red),this.b=new e(f.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(f),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}r(s,n),lu=s,s.prototype._getEndomorphism=function(c){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var u,h;if(c.beta)u=new e(c.beta,16).toRed(this.red);else{var d=this._getEndoRoots(this.p);u=d[0].cmp(d[1])<0?d[0]:d[1],u=u.toRed(this.red)}if(c.lambda)h=new e(c.lambda,16);else{var p=this._getEndoRoots(this.n);this.g.mul(p[0]).x.cmp(this.g.x.redMul(u))===0?h=p[0]:(h=p[1],i(this.g.mul(h).x.cmp(this.g.x.redMul(u))===0))}var v;return c.basis?v=c.basis.map(function(x){return{a:new e(x.a,16),b:new e(x.b,16)}}):v=this._getEndoBasis(h),{beta:u,lambda:h,basis:v}}},s.prototype._getEndoRoots=function(c){var u=c===this.p?this.red:e.mont(c),h=new e(2).toRed(u).redInvm(),d=h.redNeg(),p=new e(3).toRed(u).redNeg().redSqrt().redMul(h),v=d.redAdd(p).fromRed(),x=d.redSub(p).fromRed();return[v,x]},s.prototype._getEndoBasis=function(c){for(var u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=c,d=this.n.clone(),p=new e(1),v=new e(0),x=new e(0),C=new e(1),O,M,R,T,P,N,$,U=0,V,H;h.cmpn(0)!==0;){var B=d.div(h);V=d.sub(B.mul(h)),H=x.sub(B.mul(p));var y=C.sub(B.mul(v));if(!R&&V.cmp(u)<0)O=$.neg(),M=p,R=V.neg(),T=H;else if(R&&++U===2)break;$=V,d=h,h=V,x=p,p=H,C=v,v=y}P=V.neg(),N=H;var b=R.sqr().add(T.sqr()),l=P.sqr().add(N.sqr());return l.cmp(b)>=0&&(P=O,N=M),R.negative&&(R=R.neg(),T=T.neg()),P.negative&&(P=P.neg(),N=N.neg()),[{a:R,b:T},{a:P,b:N}]},s.prototype._endoSplit=function(c){var u=this.endo.basis,h=u[0],d=u[1],p=d.b.mul(c).divRound(this.n),v=h.b.neg().mul(c).divRound(this.n),x=p.mul(h.a),C=v.mul(d.a),O=p.mul(h.b),M=v.mul(d.b),R=c.sub(x).sub(C),T=O.add(M).neg();return{k1:R,k2:T}},s.prototype.pointFromX=function(c,u){c=new e(c,16),c.red||(c=c.toRed(this.red));var h=c.redSqr().redMul(c).redIAdd(c.redMul(this.a)).redIAdd(this.b),d=h.redSqrt();if(d.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");var p=d.fromRed().isOdd();return(u&&!p||!u&&p)&&(d=d.redNeg()),this.point(c,d)},s.prototype.validate=function(c){if(c.inf)return!0;var u=c.x,h=c.y,d=this.a.redMul(u),p=u.redSqr().redMul(u).redIAdd(d).redIAdd(this.b);return h.redSqr().redISub(p).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(c,u,h){for(var d=this._endoWnafT1,p=this._endoWnafT2,v=0;v<c.length;v++){var x=this._endoSplit(u[v]),C=c[v],O=C._getBeta();x.k1.negative&&(x.k1.ineg(),C=C.neg(!0)),x.k2.negative&&(x.k2.ineg(),O=O.neg(!0)),d[v*2]=C,d[v*2+1]=O,p[v*2]=x.k1,p[v*2+1]=x.k2}for(var M=this._wnafMulAdd(1,d,p,v*2,h),R=0;R<v*2;R++)d[R]=null,p[R]=null;return M};function o(f,c,u,h){n.BasePoint.call(this,f,"affine"),c===null&&u===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(c,16),this.y=new e(u,16),h&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}r(o,n.BasePoint),s.prototype.point=function(c,u,h){return new o(this,c,u,h)},s.prototype.pointFromJSON=function(c,u){return o.fromJSON(this,c,u)},o.prototype._getBeta=function(){if(this.curve.endo){var c=this.precomputed;if(c&&c.beta)return c.beta;var u=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(c){var h=this.curve,d=function(p){return h.point(p.x.redMul(h.endo.beta),p.y)};c.beta=u,u.precomputed={beta:null,naf:c.naf&&{wnd:c.naf.wnd,points:c.naf.points.map(d)},doubles:c.doubles&&{step:c.doubles.step,points:c.doubles.points.map(d)}}}return u}},o.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},o.fromJSON=function(c,u,h){typeof u=="string"&&(u=JSON.parse(u));var d=c.point(u[0],u[1],h);if(!u[2])return d;function p(x){return c.point(x[0],x[1],h)}var v=u[2];return d.precomputed={beta:null,doubles:v.doubles&&{step:v.doubles.step,points:[d].concat(v.doubles.points.map(p))},naf:v.naf&&{wnd:v.naf.wnd,points:[d].concat(v.naf.points.map(p))}},d},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.inf},o.prototype.add=function(c){if(this.inf)return c;if(c.inf)return this;if(this.eq(c))return this.dbl();if(this.neg().eq(c))return this.curve.point(null,null);if(this.x.cmp(c.x)===0)return this.curve.point(null,null);var u=this.y.redSub(c.y);u.cmpn(0)!==0&&(u=u.redMul(this.x.redSub(c.x).redInvm()));var h=u.redSqr().redISub(this.x).redISub(c.x),d=u.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,d)},o.prototype.dbl=function(){if(this.inf)return this;var c=this.y.redAdd(this.y);if(c.cmpn(0)===0)return this.curve.point(null,null);var u=this.curve.a,h=this.x.redSqr(),d=c.redInvm(),p=h.redAdd(h).redIAdd(h).redIAdd(u).redMul(d),v=p.redSqr().redISub(this.x.redAdd(this.x)),x=p.redMul(this.x.redSub(v)).redISub(this.y);return this.curve.point(v,x)},o.prototype.getX=function(){return this.x.fromRed()},o.prototype.getY=function(){return this.y.fromRed()},o.prototype.mul=function(c){return c=new e(c,16),this.isInfinity()?this:this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve.endo?this.curve._endoWnafMulAdd([this],[c]):this.curve._wnafMul(this,c)},o.prototype.mulAdd=function(c,u,h){var d=[this,u],p=[c,h];return this.curve.endo?this.curve._endoWnafMulAdd(d,p):this.curve._wnafMulAdd(1,d,p,2)},o.prototype.jmulAdd=function(c,u,h){var d=[this,u],p=[c,h];return this.curve.endo?this.curve._endoWnafMulAdd(d,p,!0):this.curve._wnafMulAdd(1,d,p,2,!0)},o.prototype.eq=function(c){return this===c||this.inf===c.inf&&(this.inf||this.x.cmp(c.x)===0&&this.y.cmp(c.y)===0)},o.prototype.neg=function(c){if(this.inf)return this;var u=this.curve.point(this.x,this.y.redNeg());if(c&&this.precomputed){var h=this.precomputed,d=function(p){return p.neg()};u.precomputed={naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(d)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(d)}}}return u},o.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var c=this.curve.jpoint(this.x,this.y,this.curve.one);return c};function a(f,c,u,h){n.BasePoint.call(this,f,"jacobian"),c===null&&u===null&&h===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(c,16),this.y=new e(u,16),this.z=new e(h,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(a,n.BasePoint),s.prototype.jpoint=function(c,u,h){return new a(this,c,u,h)},a.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var c=this.z.redInvm(),u=c.redSqr(),h=this.x.redMul(u),d=this.y.redMul(u).redMul(c);return this.curve.point(h,d)},a.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},a.prototype.add=function(c){if(this.isInfinity())return c;if(c.isInfinity())return this;var u=c.z.redSqr(),h=this.z.redSqr(),d=this.x.redMul(u),p=c.x.redMul(h),v=this.y.redMul(u.redMul(c.z)),x=c.y.redMul(h.redMul(this.z)),C=d.redSub(p),O=v.redSub(x);if(C.cmpn(0)===0)return O.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=C.redSqr(),R=M.redMul(C),T=d.redMul(M),P=O.redSqr().redIAdd(R).redISub(T).redISub(T),N=O.redMul(T.redISub(P)).redISub(v.redMul(R)),$=this.z.redMul(c.z).redMul(C);return this.curve.jpoint(P,N,$)},a.prototype.mixedAdd=function(c){if(this.isInfinity())return c.toJ();if(c.isInfinity())return this;var u=this.z.redSqr(),h=this.x,d=c.x.redMul(u),p=this.y,v=c.y.redMul(u).redMul(this.z),x=h.redSub(d),C=p.redSub(v);if(x.cmpn(0)===0)return C.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var O=x.redSqr(),M=O.redMul(x),R=h.redMul(O),T=C.redSqr().redIAdd(M).redISub(R).redISub(R),P=C.redMul(R.redISub(T)).redISub(p.redMul(M)),N=this.z.redMul(x);return this.curve.jpoint(T,P,N)},a.prototype.dblp=function(c){if(c===0)return this;if(this.isInfinity())return this;if(!c)return this.dbl();var u;if(this.curve.zeroA||this.curve.threeA){var h=this;for(u=0;u<c;u++)h=h.dbl();return h}var d=this.curve.a,p=this.curve.tinv,v=this.x,x=this.y,C=this.z,O=C.redSqr().redSqr(),M=x.redAdd(x);for(u=0;u<c;u++){var R=v.redSqr(),T=M.redSqr(),P=T.redSqr(),N=R.redAdd(R).redIAdd(R).redIAdd(d.redMul(O)),$=v.redMul(T),U=N.redSqr().redISub($.redAdd($)),V=$.redISub(U),H=N.redMul(V);H=H.redIAdd(H).redISub(P);var B=M.redMul(C);u+1<c&&(O=O.redMul(P)),v=U,C=B,M=H}return this.curve.jpoint(v,M.redMul(p),C)},a.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},a.prototype._zeroDbl=function(){var c,u,h;if(this.zOne){var d=this.x.redSqr(),p=this.y.redSqr(),v=p.redSqr(),x=this.x.redAdd(p).redSqr().redISub(d).redISub(v);x=x.redIAdd(x);var C=d.redAdd(d).redIAdd(d),O=C.redSqr().redISub(x).redISub(x),M=v.redIAdd(v);M=M.redIAdd(M),M=M.redIAdd(M),c=O,u=C.redMul(x.redISub(O)).redISub(M),h=this.y.redAdd(this.y)}else{var R=this.x.redSqr(),T=this.y.redSqr(),P=T.redSqr(),N=this.x.redAdd(T).redSqr().redISub(R).redISub(P);N=N.redIAdd(N);var $=R.redAdd(R).redIAdd(R),U=$.redSqr(),V=P.redIAdd(P);V=V.redIAdd(V),V=V.redIAdd(V),c=U.redISub(N).redISub(N),u=$.redMul(N.redISub(c)).redISub(V),h=this.y.redMul(this.z),h=h.redIAdd(h)}return this.curve.jpoint(c,u,h)},a.prototype._threeDbl=function(){var c,u,h;if(this.zOne){var d=this.x.redSqr(),p=this.y.redSqr(),v=p.redSqr(),x=this.x.redAdd(p).redSqr().redISub(d).redISub(v);x=x.redIAdd(x);var C=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a),O=C.redSqr().redISub(x).redISub(x);c=O;var M=v.redIAdd(v);M=M.redIAdd(M),M=M.redIAdd(M),u=C.redMul(x.redISub(O)).redISub(M),h=this.y.redAdd(this.y)}else{var R=this.z.redSqr(),T=this.y.redSqr(),P=this.x.redMul(T),N=this.x.redSub(R).redMul(this.x.redAdd(R));N=N.redAdd(N).redIAdd(N);var $=P.redIAdd(P);$=$.redIAdd($);var U=$.redAdd($);c=N.redSqr().redISub(U),h=this.y.redAdd(this.z).redSqr().redISub(T).redISub(R);var V=T.redSqr();V=V.redIAdd(V),V=V.redIAdd(V),V=V.redIAdd(V),u=N.redMul($.redISub(c)).redISub(V)}return this.curve.jpoint(c,u,h)},a.prototype._dbl=function(){var c=this.curve.a,u=this.x,h=this.y,d=this.z,p=d.redSqr().redSqr(),v=u.redSqr(),x=h.redSqr(),C=v.redAdd(v).redIAdd(v).redIAdd(c.redMul(p)),O=u.redAdd(u);O=O.redIAdd(O);var M=O.redMul(x),R=C.redSqr().redISub(M.redAdd(M)),T=M.redISub(R),P=x.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var N=C.redMul(T).redISub(P),$=h.redAdd(h).redMul(d);return this.curve.jpoint(R,N,$)},a.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var c=this.x.redSqr(),u=this.y.redSqr(),h=this.z.redSqr(),d=u.redSqr(),p=c.redAdd(c).redIAdd(c),v=p.redSqr(),x=this.x.redAdd(u).redSqr().redISub(c).redISub(d);x=x.redIAdd(x),x=x.redAdd(x).redIAdd(x),x=x.redISub(v);var C=x.redSqr(),O=d.redIAdd(d);O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var M=p.redIAdd(x).redSqr().redISub(v).redISub(C).redISub(O),R=u.redMul(M);R=R.redIAdd(R),R=R.redIAdd(R);var T=this.x.redMul(C).redISub(R);T=T.redIAdd(T),T=T.redIAdd(T);var P=this.y.redMul(M.redMul(O.redISub(M)).redISub(x.redMul(C)));P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var N=this.z.redAdd(x).redSqr().redISub(h).redISub(C);return this.curve.jpoint(T,P,N)},a.prototype.mul=function(c,u){return c=new e(c,u),this.curve._wnafMul(this,c)},a.prototype.eq=function(c){if(c.type==="affine")return this.eq(c.toJ());if(this===c)return!0;var u=this.z.redSqr(),h=c.z.redSqr();if(this.x.redMul(h).redISub(c.x.redMul(u)).cmpn(0)!==0)return!1;var d=u.redMul(this.z),p=h.redMul(c.z);return this.y.redMul(p).redISub(c.y.redMul(d)).cmpn(0)===0},a.prototype.eqXToP=function(c){var u=this.z.redSqr(),h=c.toRed(this.curve.red).redMul(u);if(this.x.cmp(h)===0)return!0;for(var d=c.clone(),p=this.curve.redN.redMul(u);;){if(d.iadd(this.curve.n),d.cmp(this.curve.p)>=0)return!1;if(h.redIAdd(p),this.x.cmp(h)===0)return!0}},a.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},a.prototype.isInfinity=function(){return this.z.cmpn(0)===0},lu}var du,Zd;function y5(){if(Zd)return du;Zd=1;var t=_i(),e=Zf(),r=rc(),n=vn();function i(o){r.call(this,"mont",o),this.a=new t(o.a,16).toRed(this.red),this.b=new t(o.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(i,r),du=i,i.prototype.validate=function(a){var f=a.normalize().x,c=f.redSqr(),u=c.redMul(f).redAdd(c.redMul(this.a)).redAdd(f),h=u.redSqrt();return h.redSqr().cmp(u)===0};function s(o,a,f){r.BasePoint.call(this,o,"projective"),a===null&&f===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(a,16),this.z=new t(f,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(s,r.BasePoint),i.prototype.decodePoint=function(a,f){return this.point(n.toArray(a,f),1)},i.prototype.point=function(a,f){return new s(this,a,f)},i.prototype.pointFromJSON=function(a){return s.fromJSON(this,a)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(a,f){return new s(a,f[0],f[1]||a.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var a=this.x.redAdd(this.z),f=a.redSqr(),c=this.x.redSub(this.z),u=c.redSqr(),h=f.redSub(u),d=f.redMul(u),p=h.redMul(u.redAdd(this.curve.a24.redMul(h)));return this.curve.point(d,p)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(a,f){var c=this.x.redAdd(this.z),u=this.x.redSub(this.z),h=a.x.redAdd(a.z),d=a.x.redSub(a.z),p=d.redMul(c),v=h.redMul(u),x=f.z.redMul(p.redAdd(v).redSqr()),C=f.x.redMul(p.redISub(v).redSqr());return this.curve.point(x,C)},s.prototype.mul=function(a){for(var f=a.clone(),c=this,u=this.curve.point(null,null),h=this,d=[];f.cmpn(0)!==0;f.iushrn(1))d.push(f.andln(1));for(var p=d.length-1;p>=0;p--)d[p]===0?(c=c.diffAdd(u,h),u=u.dbl()):(u=c.diffAdd(u,h),c=c.dbl());return u},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(a){return this.getX().cmp(a.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},du}var pu,Jd;function b5(){if(Jd)return pu;Jd=1;var t=vn(),e=_i(),r=Zf(),n=rc(),i=t.assert;function s(a){this.twisted=(a.a|0)!==1,this.mOneA=this.twisted&&(a.a|0)===-1,this.extended=this.mOneA,n.call(this,"edwards",a),this.a=new e(a.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(a.c|0)===1}r(s,n),pu=s,s.prototype._mulA=function(f){return this.mOneA?f.redNeg():this.a.redMul(f)},s.prototype._mulC=function(f){return this.oneC?f:this.c.redMul(f)},s.prototype.jpoint=function(f,c,u,h){return this.point(f,c,u,h)},s.prototype.pointFromX=function(f,c){f=new e(f,16),f.red||(f=f.toRed(this.red));var u=f.redSqr(),h=this.c2.redSub(this.a.redMul(u)),d=this.one.redSub(this.c2.redMul(this.d).redMul(u)),p=h.redMul(d.redInvm()),v=p.redSqrt();if(v.redSqr().redSub(p).cmp(this.zero)!==0)throw new Error("invalid point");var x=v.fromRed().isOdd();return(c&&!x||!c&&x)&&(v=v.redNeg()),this.point(f,v)},s.prototype.pointFromY=function(f,c){f=new e(f,16),f.red||(f=f.toRed(this.red));var u=f.redSqr(),h=u.redSub(this.c2),d=u.redMul(this.d).redMul(this.c2).redSub(this.a),p=h.redMul(d.redInvm());if(p.cmp(this.zero)===0){if(c)throw new Error("invalid point");return this.point(this.zero,f)}var v=p.redSqrt();if(v.redSqr().redSub(p).cmp(this.zero)!==0)throw new Error("invalid point");return v.fromRed().isOdd()!==c&&(v=v.redNeg()),this.point(v,f)},s.prototype.validate=function(f){if(f.isInfinity())return!0;f.normalize();var c=f.x.redSqr(),u=f.y.redSqr(),h=c.redMul(this.a).redAdd(u),d=this.c2.redMul(this.one.redAdd(this.d.redMul(c).redMul(u)));return h.cmp(d)===0};function o(a,f,c,u,h){n.BasePoint.call(this,a,"projective"),f===null&&c===null&&u===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(f,16),this.y=new e(c,16),this.z=u?new e(u,16):this.curve.one,this.t=h&&new e(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(o,n.BasePoint),s.prototype.pointFromJSON=function(f){return o.fromJSON(this,f)},s.prototype.point=function(f,c,u,h){return new o(this,f,c,u,h)},o.fromJSON=function(f,c){return new o(f,c[0],c[1],c[2])},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},o.prototype._extDbl=function(){var f=this.x.redSqr(),c=this.y.redSqr(),u=this.z.redSqr();u=u.redIAdd(u);var h=this.curve._mulA(f),d=this.x.redAdd(this.y).redSqr().redISub(f).redISub(c),p=h.redAdd(c),v=p.redSub(u),x=h.redSub(c),C=d.redMul(v),O=p.redMul(x),M=d.redMul(x),R=v.redMul(p);return this.curve.point(C,O,R,M)},o.prototype._projDbl=function(){var f=this.x.redAdd(this.y).redSqr(),c=this.x.redSqr(),u=this.y.redSqr(),h,d,p,v,x,C;if(this.curve.twisted){v=this.curve._mulA(c);var O=v.redAdd(u);this.zOne?(h=f.redSub(c).redSub(u).redMul(O.redSub(this.curve.two)),d=O.redMul(v.redSub(u)),p=O.redSqr().redSub(O).redSub(O)):(x=this.z.redSqr(),C=O.redSub(x).redISub(x),h=f.redSub(c).redISub(u).redMul(C),d=O.redMul(v.redSub(u)),p=O.redMul(C))}else v=c.redAdd(u),x=this.curve._mulC(this.z).redSqr(),C=v.redSub(x).redSub(x),h=this.curve._mulC(f.redISub(v)).redMul(C),d=this.curve._mulC(v).redMul(c.redISub(u)),p=v.redMul(C);return this.curve.point(h,d,p)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},o.prototype._extAdd=function(f){var c=this.y.redSub(this.x).redMul(f.y.redSub(f.x)),u=this.y.redAdd(this.x).redMul(f.y.redAdd(f.x)),h=this.t.redMul(this.curve.dd).redMul(f.t),d=this.z.redMul(f.z.redAdd(f.z)),p=u.redSub(c),v=d.redSub(h),x=d.redAdd(h),C=u.redAdd(c),O=p.redMul(v),M=x.redMul(C),R=p.redMul(C),T=v.redMul(x);return this.curve.point(O,M,T,R)},o.prototype._projAdd=function(f){var c=this.z.redMul(f.z),u=c.redSqr(),h=this.x.redMul(f.x),d=this.y.redMul(f.y),p=this.curve.d.redMul(h).redMul(d),v=u.redSub(p),x=u.redAdd(p),C=this.x.redAdd(this.y).redMul(f.x.redAdd(f.y)).redISub(h).redISub(d),O=c.redMul(v).redMul(C),M,R;return this.curve.twisted?(M=c.redMul(x).redMul(d.redSub(this.curve._mulA(h))),R=v.redMul(x)):(M=c.redMul(x).redMul(d.redSub(h)),R=this.curve._mulC(v).redMul(x)),this.curve.point(O,M,R)},o.prototype.add=function(f){return this.isInfinity()?f:f.isInfinity()?this:this.curve.extended?this._extAdd(f):this._projAdd(f)},o.prototype.mul=function(f){return this._hasDoubles(f)?this.curve._fixedNafMul(this,f):this.curve._wnafMul(this,f)},o.prototype.mulAdd=function(f,c,u){return this.curve._wnafMulAdd(1,[this,c],[f,u],2,!1)},o.prototype.jmulAdd=function(f,c,u){return this.curve._wnafMulAdd(1,[this,c],[f,u],2,!0)},o.prototype.normalize=function(){if(this.zOne)return this;var f=this.z.redInvm();return this.x=this.x.redMul(f),this.y=this.y.redMul(f),this.t&&(this.t=this.t.redMul(f)),this.z=this.curve.one,this.zOne=!0,this},o.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()},o.prototype.getY=function(){return this.normalize(),this.y.fromRed()},o.prototype.eq=function(f){return this===f||this.getX().cmp(f.getX())===0&&this.getY().cmp(f.getY())===0},o.prototype.eqXToP=function(f){var c=f.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(c)===0)return!0;for(var u=f.clone(),h=this.curve.redN.redMul(this.z);;){if(u.iadd(this.curve.n),u.cmp(this.curve.p)>=0)return!1;if(c.redIAdd(h),this.x.cmp(c)===0)return!0}},o.prototype.toP=o.prototype.normalize,o.prototype.mixedAdd=o.prototype.add,pu}var Qd;function m2(){return Qd||(Qd=1,function(t){var e=t;e.base=rc(),e.short=g5(),e.mont=y5(),e.edwards=b5()}(uu)),uu}var vu={},gu,e1;function m5(){return e1||(e1=1,gu={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),gu}var t1;function bl(){return t1||(t1=1,function(t){var e=t,r=Jf(),n=m2(),i=vn(),s=i.assert;function o(c){c.type==="short"?this.curve=new n.short(c):c.type==="edwards"?this.curve=new n.edwards(c):this.curve=new n.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(c,u){Object.defineProperty(e,c,{configurable:!0,enumerable:!0,get:function(){var h=new o(u);return Object.defineProperty(e,c,{configurable:!0,enumerable:!0,value:h}),h}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var f;try{f=m5()}catch{f=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})}(vu)),vu}var yu,r1;function w5(){if(r1)return yu;r1=1;var t=Jf(),e=y2(),r=Ss();function n(i){if(!(this instanceof n))return new n(i);this.hash=i.hash,this.predResist=!!i.predResist,this.outLen=this.hash.outSize,this.minEntropy=i.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=e.toArray(i.entropy,i.entropyEnc||"hex"),o=e.toArray(i.nonce,i.nonceEnc||"hex"),a=e.toArray(i.pers,i.persEnc||"hex");r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,o,a)}return yu=n,n.prototype._init=function(s,o,a){var f=s.concat(o).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var c=0;c<this.V.length;c++)this.K[c]=0,this.V[c]=1;this._update(f),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},n.prototype._update=function(s){var o=this._hmac().update(this.V).update([0]);s&&(o=o.update(s)),this.K=o.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(s,o,a,f){typeof o!="string"&&(f=a,a=o,o=null),s=e.toArray(s,o),a=e.toArray(a,f),r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(a||[])),this._reseed=1},n.prototype.generate=function(s,o,a,f){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof o!="string"&&(f=a,a=o,o=null),a&&(a=e.toArray(a,f||"hex"),this._update(a));for(var c=[];c.length<s;)this.V=this._hmac().update(this.V).digest(),c=c.concat(this.V);var u=c.slice(0,s);return this._update(a),this._reseed++,e.encode(u,o)},yu}var bu,n1;function x5(){if(n1)return bu;n1=1;var t=_i(),e=vn(),r=e.assert;function n(i,s){this.ec=i,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}return bu=n,n.fromPublic=function(s,o,a){return o instanceof n?o:new n(s,{pub:o,pubEnc:a})},n.fromPrivate=function(s,o,a){return o instanceof n?o:new n(s,{priv:o,privEnc:a})},n.prototype.validate=function(){var s=this.getPublic();return s.isInfinity()?{result:!1,reason:"Invalid public key"}:s.validate()?s.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(s,o){return typeof s=="string"&&(o=s,s=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),o?this.pub.encode(o,s):this.pub},n.prototype.getPrivate=function(s){return s==="hex"?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(s,o){this.priv=new t(s,o||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(s,o){if(s.x||s.y){this.ec.curve.type==="mont"?r(s.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&r(s.x&&s.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(s.x,s.y);return}this.pub=this.ec.curve.decodePoint(s,o)},n.prototype.derive=function(s){return s.validate()||r(s.validate(),"public point not validated"),s.mul(this.priv).getX()},n.prototype.sign=function(s,o,a){return this.ec.sign(s,this,o,a)},n.prototype.verify=function(s,o,a){return this.ec.verify(s,o,this,void 0,a)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},bu}var mu,i1;function _5(){if(i1)return mu;i1=1;var t=_i(),e=vn(),r=e.assert;function n(f,c){if(f instanceof n)return f;this._importDER(f,c)||(r(f.r&&f.s,"Signature without r or s"),this.r=new t(f.r,16),this.s=new t(f.s,16),f.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=f.recoveryParam)}mu=n;function i(){this.place=0}function s(f,c){var u=f[c.place++];if(!(u&128))return u;var h=u&15;if(h===0||h>4||f[c.place]===0)return!1;for(var d=0,p=0,v=c.place;p<h;p++,v++)d<<=8,d|=f[v],d>>>=0;return d<=127?!1:(c.place=v,d)}function o(f){for(var c=0,u=f.length-1;!f[c]&&!(f[c+1]&128)&&c<u;)c++;return c===0?f:f.slice(c)}n.prototype._importDER=function(c,u){c=e.toArray(c,u);var h=new i;if(c[h.place++]!==48)return!1;var d=s(c,h);if(d===!1||d+h.place!==c.length||c[h.place++]!==2)return!1;var p=s(c,h);if(p===!1||c[h.place]&128)return!1;var v=c.slice(h.place,p+h.place);if(h.place+=p,c[h.place++]!==2)return!1;var x=s(c,h);if(x===!1||c.length!==x+h.place||c[h.place]&128)return!1;var C=c.slice(h.place,x+h.place);if(v[0]===0)if(v[1]&128)v=v.slice(1);else return!1;if(C[0]===0)if(C[1]&128)C=C.slice(1);else return!1;return this.r=new t(v),this.s=new t(C),this.recoveryParam=null,!0};function a(f,c){if(c<128){f.push(c);return}var u=1+(Math.log(c)/Math.LN2>>>3);for(f.push(u|128);--u;)f.push(c>>>(u<<3)&255);f.push(c)}return n.prototype.toDER=function(c){var u=this.r.toArray(),h=this.s.toArray();for(u[0]&128&&(u=[0].concat(u)),h[0]&128&&(h=[0].concat(h)),u=o(u),h=o(h);!h[0]&&!(h[1]&128);)h=h.slice(1);var d=[2];a(d,u.length),d=d.concat(u),d.push(2),a(d,h.length);var p=d.concat(h),v=[48];return a(v,p.length),v=v.concat(p),e.encode(v,c)},mu}var wu,s1;function E5(){if(s1)return wu;s1=1;var t=_i(),e=w5(),r=vn(),n=bl(),i=b2(),s=r.assert,o=x5(),a=_5();function f(c){if(!(this instanceof f))return new f(c);typeof c=="string"&&(s(Object.prototype.hasOwnProperty.call(n,c),"Unknown curve "+c),c=n[c]),c instanceof n.PresetCurve&&(c={curve:c}),this.curve=c.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=c.curve.g,this.g.precompute(c.curve.n.bitLength()+1),this.hash=c.hash||c.curve.hash}return wu=f,f.prototype.keyPair=function(u){return new o(this,u)},f.prototype.keyFromPrivate=function(u,h){return o.fromPrivate(this,u,h)},f.prototype.keyFromPublic=function(u,h){return o.fromPublic(this,u,h)},f.prototype.genKeyPair=function(u){u||(u={});for(var h=new e({hash:this.hash,pers:u.pers,persEnc:u.persEnc||"utf8",entropy:u.entropy||i(this.hash.hmacStrength),entropyEnc:u.entropy&&u.entropyEnc||"utf8",nonce:this.n.toArray()}),d=this.n.byteLength(),p=this.n.sub(new t(2));;){var v=new t(h.generate(d));if(!(v.cmp(p)>0))return v.iaddn(1),this.keyFromPrivate(v)}},f.prototype._truncateToN=function(u,h,d){var p;if(t.isBN(u)||typeof u=="number")u=new t(u,16),p=u.byteLength();else if(typeof u=="object")p=u.length,u=new t(u,16);else{var v=u.toString();p=v.length+1>>>1,u=new t(v,16)}typeof d!="number"&&(d=p*8);var x=d-this.n.bitLength();return x>0&&(u=u.ushrn(x)),!h&&u.cmp(this.n)>=0?u.sub(this.n):u},f.prototype.sign=function(u,h,d,p){if(typeof d=="object"&&(p=d,d=null),p||(p={}),typeof u!="string"&&typeof u!="number"&&!t.isBN(u)){s(typeof u=="object"&&u&&typeof u.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),s(u.length>>>0===u.length);for(var v=0;v<u.length;v++)s((u[v]&255)===u[v])}h=this.keyFromPrivate(h,d),u=this._truncateToN(u,!1,p.msgBitLength),s(!u.isNeg(),"Can not sign a negative message");var x=this.n.byteLength(),C=h.getPrivate().toArray("be",x),O=u.toArray("be",x);s(new t(O).eq(u),"Can not sign message");for(var M=new e({hash:this.hash,entropy:C,nonce:O,pers:p.pers,persEnc:p.persEnc||"utf8"}),R=this.n.sub(new t(1)),T=0;;T++){var P=p.k?p.k(T):new t(M.generate(this.n.byteLength()));if(P=this._truncateToN(P,!0),!(P.cmpn(1)<=0||P.cmp(R)>=0)){var N=this.g.mul(P);if(!N.isInfinity()){var $=N.getX(),U=$.umod(this.n);if(U.cmpn(0)!==0){var V=P.invm(this.n).mul(U.mul(h.getPrivate()).iadd(u));if(V=V.umod(this.n),V.cmpn(0)!==0){var H=(N.getY().isOdd()?1:0)|($.cmp(U)!==0?2:0);return p.canonical&&V.cmp(this.nh)>0&&(V=this.n.sub(V),H^=1),new a({r:U,s:V,recoveryParam:H})}}}}}},f.prototype.verify=function(u,h,d,p,v){v||(v={}),u=this._truncateToN(u,!1,v.msgBitLength),d=this.keyFromPublic(d,p),h=new a(h,"hex");var x=h.r,C=h.s;if(x.cmpn(1)<0||x.cmp(this.n)>=0||C.cmpn(1)<0||C.cmp(this.n)>=0)return!1;var O=C.invm(this.n),M=O.mul(u).umod(this.n),R=O.mul(x).umod(this.n),T;return this.curve._maxwellTrick?(T=this.g.jmulAdd(M,d.getPublic(),R),T.isInfinity()?!1:T.eqXToP(x)):(T=this.g.mulAdd(M,d.getPublic(),R),T.isInfinity()?!1:T.getX().umod(this.n).cmp(x)===0)},f.prototype.recoverPubKey=function(c,u,h,d){s((3&h)===h,"The recovery param is more than two bits"),u=new a(u,d);var p=this.n,v=new t(c),x=u.r,C=u.s,O=h&1,M=h>>1;if(x.cmp(this.curve.p.umod(this.curve.n))>=0&&M)throw new Error("Unable to find sencond key candinate");M?x=this.curve.pointFromX(x.add(this.curve.n),O):x=this.curve.pointFromX(x,O);var R=u.r.invm(p),T=p.sub(v).mul(R).umod(p),P=C.mul(R).umod(p);return this.g.mulAdd(T,x,P)},f.prototype.getKeyRecoveryParam=function(c,u,h,d){if(u=new a(u,d),u.recoveryParam!==null)return u.recoveryParam;for(var p=0;p<4;p++){var v;try{v=this.recoverPubKey(c,u,p)}catch{continue}if(v.eq(h))return p}throw new Error("Unable to find valid recovery factor")},wu}var xu,o1;function A5(){if(o1)return xu;o1=1;var t=vn(),e=t.assert,r=t.parseBytes,n=t.cachedProperty;function i(s,o){this.eddsa=s,this._secret=r(o.secret),s.isPoint(o.pub)?this._pub=o.pub:this._pubBytes=r(o.pub)}return i.fromPublic=function(o,a){return a instanceof i?a:new i(o,{pub:a})},i.fromSecret=function(o,a){return a instanceof i?a:new i(o,{secret:a})},i.prototype.secret=function(){return this._secret},n(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),n(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),n(i,"privBytes",function(){var o=this.eddsa,a=this.hash(),f=o.encodingLength-1,c=a.slice(0,o.encodingLength);return c[0]&=248,c[f]&=127,c[f]|=64,c}),n(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),n(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),n(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),i.prototype.sign=function(o){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(o,this)},i.prototype.verify=function(o,a){return this.eddsa.verify(o,a,this)},i.prototype.getSecret=function(o){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),o)},i.prototype.getPublic=function(o){return t.encode(this.pubBytes(),o)},xu=i,xu}var _u,a1;function S5(){if(a1)return _u;a1=1;var t=_i(),e=vn(),r=e.assert,n=e.cachedProperty,i=e.parseBytes;function s(o,a){this.eddsa=o,typeof a!="object"&&(a=i(a)),Array.isArray(a)&&(r(a.length===o.encodingLength*2,"Signature has invalid size"),a={R:a.slice(0,o.encodingLength),S:a.slice(o.encodingLength)}),r(a.R&&a.S,"Signature without R or S"),o.isPoint(a.R)&&(this._R=a.R),a.S instanceof t&&(this._S=a.S),this._Rencoded=Array.isArray(a.R)?a.R:a.Rencoded,this._Sencoded=Array.isArray(a.S)?a.S:a.Sencoded}return n(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),n(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),n(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),n(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},_u=s,_u}var Eu,f1;function I5(){if(f1)return Eu;f1=1;var t=Jf(),e=bl(),r=vn(),n=r.assert,i=r.parseBytes,s=A5(),o=S5();function a(f){if(n(f==="ed25519","only tested with ed25519 so far"),!(this instanceof a))return new a(f);f=e[f].curve,this.curve=f,this.g=f.g,this.g.precompute(f.n.bitLength()+1),this.pointClass=f.point().constructor,this.encodingLength=Math.ceil(f.n.bitLength()/8),this.hash=t.sha512}return Eu=a,a.prototype.sign=function(c,u){c=i(c);var h=this.keyFromSecret(u),d=this.hashInt(h.messagePrefix(),c),p=this.g.mul(d),v=this.encodePoint(p),x=this.hashInt(v,h.pubBytes(),c).mul(h.priv()),C=d.add(x).umod(this.curve.n);return this.makeSignature({R:p,S:C,Rencoded:v})},a.prototype.verify=function(c,u,h){if(c=i(c),u=this.makeSignature(u),u.S().gte(u.eddsa.curve.n)||u.S().isNeg())return!1;var d=this.keyFromPublic(h),p=this.hashInt(u.Rencoded(),d.pubBytes(),c),v=this.g.mul(u.S()),x=u.R().add(d.pub().mul(p));return x.eq(v)},a.prototype.hashInt=function(){for(var c=this.hash(),u=0;u<arguments.length;u++)c.update(arguments[u]);return r.intFromLE(c.digest()).umod(this.curve.n)},a.prototype.keyFromPublic=function(c){return s.fromPublic(this,c)},a.prototype.keyFromSecret=function(c){return s.fromSecret(this,c)},a.prototype.makeSignature=function(c){return c instanceof o?c:new o(this,c)},a.prototype.encodePoint=function(c){var u=c.getY().toArray("le",this.encodingLength);return u[this.encodingLength-1]|=c.getX().isOdd()?128:0,u},a.prototype.decodePoint=function(c){c=r.parseBytes(c);var u=c.length-1,h=c.slice(0,u).concat(c[u]&-129),d=(c[u]&128)!==0,p=r.intFromLE(h);return this.curve.pointFromY(p,d)},a.prototype.encodeInt=function(c){return c.toArray("le",this.encodingLength)},a.prototype.decodeInt=function(c){return r.intFromLE(c)},a.prototype.isPoint=function(c){return c instanceof this.pointClass},Eu}var c1;function C5(){return c1||(c1=1,function(t){var e=t;e.version=p5.version,e.utils=vn(),e.rand=b2(),e.curve=m2(),e.curves=bl(),e.ec=E5(),e.eddsa=I5()}(au)),au}var M5=C5();const O5={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var D5={};const T5=":";function ff(t){const[e,r]=t.split(T5);return{namespace:e,reference:r}}function w2(t,e){return t.includes(":")?[t]:e.chains||[]}const R5="ReactNative",Qr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},N5="js";function Df(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Wi(){return!ms.getDocument()&&!!ms.getNavigator()&&navigator.product===R5}function P5(){return Wi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function F5(){return Wi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function va(){return!Df()&&!!ms.getNavigator()&&!!ms.getDocument()}function ga(){return Wi()?Qr.reactNative:Df()?Qr.node:va()?Qr.browser:Qr.unknown}function u1(){var t;try{return Wi()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function B5(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function x2(){return C6.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function L5(){if(ga()===Qr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=w6();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function $5(){var t;const e=ga();return e===Qr.browser?[e,((t=ms.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function _2(t,e,r){const n=L5(),i=$5();return[[t,e].join("-"),[N5,r].join("-"),n,i].join("/")}function k5({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:f}){const c=r.split("?"),u=_2(t,e,n),h={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:f||void 0,bundleId:a||void 0},d=B5(c[1]||"",h);return c[0]+"?"+d}function us(t,e){return t.filter(r=>e.includes(r)).length===t.length}function E2(t){return Object.fromEntries(t.entries())}function A2(t){return new Map(Object.entries(t))}function os(t=de.FIVE_MINUTES,e){const r=de.toMiliseconds(t||de.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,f)=>{if(o)return a(o);s=setTimeout(()=>{const c=new Error(e);o=Promise.reject(c),f(c)},r),n=a,i=f})}}function Bi(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function S2(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function U5(t){return S2("topic",t)}function q5(t){return S2("id",t)}function I2(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Kt(t,e){return de.fromMiliseconds(Date.now()+de.toMiliseconds(t))}function Pi(t){return Date.now()>=de.toMiliseconds(t)}function He(t,e){return`${t}${e?`:${e}`:""}`}function Li(t=[],e=[]){return[...new Set([...t,...e])]}async function z5({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=V5(s,t,e),a=ga();if(a===Qr.browser){if(!((n=ms.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}j5(o)}else a===Qr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function V5(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${G5(n,!0)}`}else i=`${i}/wc?${n}`;return i}function j5(t){let e="_self";W5()?e="_top":(K5()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function H5(t,e){let r="";try{if(va()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function h1(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function l1(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ml(){return typeof process<"u"&&D5.IS_VITEST==="true"}function K5(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function W5(){try{return window.self!==window.top}catch{return!1}}function G5(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function C2(t){return Buffer.from(t,"base64").toString("utf-8")}function X5(t){return new Promise(e=>setTimeout(e,t))}function na(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Y5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function nc(t,...e){if(!Y5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wl(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");na(t.outputLen),na(t.blockLen)}function Js(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function M2(t,e){nc(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const $a=BigInt(2**32-1),d1=BigInt(32);function Z5(t,e=!1){return e?{h:Number(t&$a),l:Number(t>>d1&$a)}:{h:Number(t>>d1&$a)|0,l:Number(t&$a)|0}}function J5(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Z5(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Q5=(t,e,r)=>t<<r|e>>>32-r,e7=(t,e,r)=>e<<r|t>>>32-r,t7=(t,e,r)=>e<<r-32|t>>>64-r,r7=(t,e,r)=>t<<r-32|e>>>64-r,Rs=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function n7(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Au(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Nn(t,e){return t<<32-e|t>>>e}const p1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function i7(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function v1(t){for(let e=0;e<t.length;e++)t[e]=i7(t[e])}function s7(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Qs(t){return typeof t=="string"&&(t=s7(t)),nc(t),t}let xl=class{clone(){return this._cloneInto()}};function O2(t){const e=n=>t().update(Qs(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function ya(t=32){if(Rs&&typeof Rs.getRandomValues=="function")return Rs.getRandomValues(new Uint8Array(t));if(Rs&&typeof Rs.randomBytes=="function")return Rs.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const D2=[],T2=[],R2=[],o7=BigInt(0),xo=BigInt(1),a7=BigInt(2),f7=BigInt(7),c7=BigInt(256),u7=BigInt(113);for(let t=0,e=xo,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],D2.push(2*(5*n+r)),T2.push((t+1)*(t+2)/2%64);let i=o7;for(let s=0;s<7;s++)e=(e<<xo^(e>>f7)*u7)%c7,e&a7&&(i^=xo<<(xo<<BigInt(s))-xo);R2.push(i)}const[h7,l7]=J5(R2,!0),g1=(t,e,r)=>r>32?t7(t,e,r):Q5(t,e,r),y1=(t,e,r)=>r>32?r7(t,e,r):e7(t,e,r);function d7(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,f=(o+2)%10,c=r[f],u=r[f+1],h=g1(c,u,1)^r[a],d=y1(c,u,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=h,t[o+p+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=T2[o],f=g1(i,s,a),c=y1(i,s,a),u=D2[o];i=t[u],s=t[u+1],t[u]=f,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=h7[n],t[1]^=l7[n]}r.fill(0)}let p7=class N2 extends xl{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,na(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=n7(this.state)}keccak(){p1||v1(this.state32),d7(this.state32,this.rounds),p1||v1(this.state32),this.posOut=0,this.pos=0}update(e){Js(this);const{blockLen:r,state:n}=this;e=Qs(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Js(this,!1),nc(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return na(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(M2(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new N2(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const v7=(t,e,r)=>O2(()=>new p7(e,t,r)),g7=v7(1,136,256/8),y7="https://rpc.walletconnect.org/v1";function P2(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(g7(r)).toString("hex")}async function b7(t,e,r,n,i,s){switch(r.t){case"eip191":return m7(t,e,r.s);case"eip1271":return await w7(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function m7(t,e,r){return g_(P2(e),r).toLowerCase()===t.toLowerCase()}async function w7(t,e,r,n,i,s){const o=ff(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),h=P2(e).substring(2),d=a+h+f+c+u,p=await fetch(`${s||y7}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:x7(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:v}=await p.json();return v?v.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function x7(){return Date.now()+Math.floor(Math.random()*1e3)}var _7=Object.defineProperty,E7=Object.defineProperties,A7=Object.getOwnPropertyDescriptors,b1=Object.getOwnPropertySymbols,S7=Object.prototype.hasOwnProperty,I7=Object.prototype.propertyIsEnumerable,m1=(t,e,r)=>e in t?_7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,C7=(t,e)=>{for(var r in e||(e={}))S7.call(e,r)&&m1(t,r,e[r]);if(b1)for(var r of b1(e))I7.call(e,r)&&m1(t,r,e[r]);return t},M7=(t,e)=>E7(t,A7(e));const O7="did:pkh:",_l=t=>t==null?void 0:t.split(":"),D7=t=>{const e=t&&_l(t);if(e)return t.includes(O7)?e[3]:e[1]},dh=t=>{const e=t&&_l(t);if(e)return e[2]+":"+e[3]},Tf=t=>{const e=t&&_l(t);if(e)return e.pop()};async function w1(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=F2(i,i.iss),o=Tf(i.iss);return await b7(o,s,n,dh(i.iss),r)}const F2=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=Tf(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${D7(e)}`,f=`Nonce: ${t.nonce}`,c=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(x=>`
- ${x}`).join("")}`:void 0,v=cf(t.resources);if(v){const x=ia(v);i=k7(i,x)}return[r,n,"",i,"",s,o,a,f,c,u,h,d,p].filter(x=>x!=null).join(`
`)};function T7(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function R7(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function ws(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function N7(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:P7(e,r,n)}}}function P7(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function B2(t){return ws(t),`urn:recap:${T7(t).replace(/=/g,"")}`}function ia(t){const e=R7(t.replace("urn:recap:",""));return ws(e),e}function F7(t,e,r){const n=N7(t,e,r);return B2(n)}function B7(t){return t&&t.includes("urn:recap:")}function L7(t,e){const r=ia(t),n=ia(e),i=$7(r,n);return B2(i)}function $7(t,e){ws(t),ws(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,f)=>a.localeCompare(f)).forEach(a=>{var f,c;n.att[i]=M7(C7({},n.att[i]),{[a]:((f=t.att[i])==null?void 0:f[a])||((c=e.att[i])==null?void 0:c[a])})})}),n}function k7(t="",e){ws(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const f=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));f.sort((h,d)=>h.action.localeCompare(d.action));const c={};f.forEach(h=>{c[h.ability]||(c[h.ability]=[]),c[h.ability].push(h.action)});const u=Object.keys(c).map(h=>(i++,`(${i}) '${h}': '${c[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function x1(t){var e;const r=ia(t);ws(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function _1(t){const e=ia(t);ws(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function cf(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return B7(e)?e:void 0}function Su(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function L2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xr(t,...e){if(!L2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function E1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function U7(t,e){Xr(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function A1(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const ki=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),q7=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),z7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!z7)throw new Error("Non little-endian hardware is not supported");function V7(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ph(t){if(typeof t=="string")t=V7(t);else if(L2(t))t=vh(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function j7(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function H7(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const K7=(t,e)=>{function r(n,...i){if(Xr(n),t.nonceLength!==void 0){const c=i[0];if(!c)throw new Error("nonce / iv required");t.varSizeNonce?Xr(c):Xr(c,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&Xr(i[1]);const o=e(n,...i),a=(c,u)=>{if(u!==void 0){if(c!==2)throw new Error("cipher output not supported");Xr(u)}};let f=!1;return{encrypt(c,u){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,Xr(c),a(o.encrypt.length,u),o.encrypt(c,u)},decrypt(c,u){if(Xr(c),s&&c.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(c,u)}}}return Object.assign(r,t),r};function S1(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!W7(e))throw new Error("invalid output, must be aligned");return e}function I1(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function W7(t){return t.byteOffset%4===0}function vh(t){return Uint8Array.from(t)}function eo(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const $2=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),G7=$2("expand 16-byte k"),X7=$2("expand 32-byte k"),Y7=ki(G7),Z7=ki(X7);function rt(t,e){return t<<e|t>>>32-e}function gh(t){return t.byteOffset%4===0}const ka=64,J7=16,k2=2**32-1,C1=new Uint32Array;function Q7(t,e,r,n,i,s,o,a){const f=i.length,c=new Uint8Array(ka),u=ki(c),h=gh(i)&&gh(s),d=h?ki(i):C1,p=h?ki(s):C1;for(let v=0;v<f;o++){if(t(e,r,n,u,o,a),o>=k2)throw new Error("arx: counter overflow");const x=Math.min(ka,f-v);if(h&&x===ka){const C=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let O=0,M;O<J7;O++)M=C+O,p[M]=d[M]^u[O];v+=ka;continue}for(let C=0,O;C<x;C++)O=v+C,s[O]=i[O]^c[C];v+=x}}function e9(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=j7({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Su(i),Su(o),A1(s),A1(r),(a,f,c,u,h=0)=>{Xr(a),Xr(f),Xr(c);const d=c.length;if(u===void 0&&(u=new Uint8Array(d)),Xr(u),Su(h),h<0||h>=k2)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const p=[];let v=a.length,x,C;if(v===32)p.push(x=vh(a)),C=Z7;else if(v===16&&r)x=new Uint8Array(32),x.set(a),x.set(a,16),C=Y7,p.push(x);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);gh(f)||p.push(f=vh(f));const O=ki(x);if(n){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(C,O,ki(f.subarray(0,16)),O),f=f.subarray(16)}const M=16-i;if(M!==f.length)throw new Error(`arx: nonce must be ${M} or 16 bytes`);if(M!==12){const T=new Uint8Array(12);T.set(f,s?0:12-f.length),f=T,p.push(f)}const R=ki(f);return Q7(t,C,O,R,c,u,h,o),eo(...p),u}}const ar=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let t9=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=ph(e),Xr(e,32);const r=ar(e,0),n=ar(e,2),i=ar(e,4),s=ar(e,6),o=ar(e,8),a=ar(e,10),f=ar(e,12),c=ar(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|f<<5)&8065,this.r[8]=(f>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ar(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],f=o[1],c=o[2],u=o[3],h=o[4],d=o[5],p=o[6],v=o[7],x=o[8],C=o[9],O=ar(e,r+0),M=ar(e,r+2),R=ar(e,r+4),T=ar(e,r+6),P=ar(e,r+8),N=ar(e,r+10),$=ar(e,r+12),U=ar(e,r+14);let V=s[0]+(O&8191),H=s[1]+((O>>>13|M<<3)&8191),B=s[2]+((M>>>10|R<<6)&8191),y=s[3]+((R>>>7|T<<9)&8191),b=s[4]+((T>>>4|P<<12)&8191),l=s[5]+(P>>>1&8191),g=s[6]+((P>>>14|N<<2)&8191),w=s[7]+((N>>>11|$<<5)&8191),E=s[8]+(($>>>8|U<<8)&8191),I=s[9]+(U>>>5|i),A=0,m=A+V*a+H*(5*C)+B*(5*x)+y*(5*v)+b*(5*p);A=m>>>13,m&=8191,m+=l*(5*d)+g*(5*h)+w*(5*u)+E*(5*c)+I*(5*f),A+=m>>>13,m&=8191;let S=A+V*f+H*a+B*(5*C)+y*(5*x)+b*(5*v);A=S>>>13,S&=8191,S+=l*(5*p)+g*(5*d)+w*(5*h)+E*(5*u)+I*(5*c),A+=S>>>13,S&=8191;let _=A+V*c+H*f+B*a+y*(5*C)+b*(5*x);A=_>>>13,_&=8191,_+=l*(5*v)+g*(5*p)+w*(5*d)+E*(5*h)+I*(5*u),A+=_>>>13,_&=8191;let F=A+V*u+H*c+B*f+y*a+b*(5*C);A=F>>>13,F&=8191,F+=l*(5*x)+g*(5*v)+w*(5*p)+E*(5*d)+I*(5*h),A+=F>>>13,F&=8191;let Y=A+V*h+H*u+B*c+y*f+b*a;A=Y>>>13,Y&=8191,Y+=l*(5*C)+g*(5*x)+w*(5*v)+E*(5*p)+I*(5*d),A+=Y>>>13,Y&=8191;let D=A+V*d+H*h+B*u+y*c+b*f;A=D>>>13,D&=8191,D+=l*a+g*(5*C)+w*(5*x)+E*(5*v)+I*(5*p),A+=D>>>13,D&=8191;let j=A+V*p+H*d+B*h+y*u+b*c;A=j>>>13,j&=8191,j+=l*f+g*a+w*(5*C)+E*(5*x)+I*(5*v),A+=j>>>13,j&=8191;let G=A+V*v+H*p+B*d+y*h+b*u;A=G>>>13,G&=8191,G+=l*c+g*f+w*a+E*(5*C)+I*(5*x),A+=G>>>13,G&=8191;let Z=A+V*x+H*v+B*p+y*d+b*h;A=Z>>>13,Z&=8191,Z+=l*u+g*c+w*f+E*a+I*(5*C),A+=Z>>>13,Z&=8191;let ee=A+V*C+H*x+B*v+y*p+b*d;A=ee>>>13,ee&=8191,ee+=l*h+g*u+w*c+E*f+I*a,A+=ee>>>13,ee&=8191,A=(A<<2)+A|0,A=A+m|0,m=A&8191,A=A>>>13,S+=A,s[0]=m,s[1]=S,s[2]=_,s[3]=F,s[4]=Y,s[5]=D,s[6]=j,s[7]=G,s[8]=Z,s[9]=ee}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;eo(n)}update(e){E1(this);const{buffer:r,blockLen:n}=this;e=ph(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){eo(this.h,this.r,this.buffer,this.pad)}digestInto(e){E1(this),U7(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function r9(t){const e=(n,i)=>t(i).update(ph(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const n9=r9(t=>new t9(t));function i9(t,e,r,n,i,s=20){let o=t[0],a=t[1],f=t[2],c=t[3],u=e[0],h=e[1],d=e[2],p=e[3],v=e[4],x=e[5],C=e[6],O=e[7],M=i,R=r[0],T=r[1],P=r[2],N=o,$=a,U=f,V=c,H=u,B=h,y=d,b=p,l=v,g=x,w=C,E=O,I=M,A=R,m=T,S=P;for(let F=0;F<s;F+=2)N=N+H|0,I=rt(I^N,16),l=l+I|0,H=rt(H^l,12),N=N+H|0,I=rt(I^N,8),l=l+I|0,H=rt(H^l,7),$=$+B|0,A=rt(A^$,16),g=g+A|0,B=rt(B^g,12),$=$+B|0,A=rt(A^$,8),g=g+A|0,B=rt(B^g,7),U=U+y|0,m=rt(m^U,16),w=w+m|0,y=rt(y^w,12),U=U+y|0,m=rt(m^U,8),w=w+m|0,y=rt(y^w,7),V=V+b|0,S=rt(S^V,16),E=E+S|0,b=rt(b^E,12),V=V+b|0,S=rt(S^V,8),E=E+S|0,b=rt(b^E,7),N=N+B|0,S=rt(S^N,16),w=w+S|0,B=rt(B^w,12),N=N+B|0,S=rt(S^N,8),w=w+S|0,B=rt(B^w,7),$=$+y|0,I=rt(I^$,16),E=E+I|0,y=rt(y^E,12),$=$+y|0,I=rt(I^$,8),E=E+I|0,y=rt(y^E,7),U=U+b|0,A=rt(A^U,16),l=l+A|0,b=rt(b^l,12),U=U+b|0,A=rt(A^U,8),l=l+A|0,b=rt(b^l,7),V=V+H|0,m=rt(m^V,16),g=g+m|0,H=rt(H^g,12),V=V+H|0,m=rt(m^V,8),g=g+m|0,H=rt(H^g,7);let _=0;n[_++]=o+N|0,n[_++]=a+$|0,n[_++]=f+U|0,n[_++]=c+V|0,n[_++]=u+H|0,n[_++]=h+B|0,n[_++]=d+y|0,n[_++]=p+b|0,n[_++]=v+l|0,n[_++]=x+g|0,n[_++]=C+w|0,n[_++]=O+E|0,n[_++]=M+I|0,n[_++]=R+A|0,n[_++]=T+m|0,n[_++]=P+S|0}const s9=e9(i9,{counterRight:!1,counterLength:4,allowShortKeys:!1}),o9=new Uint8Array(16),M1=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(o9.subarray(r))},a9=new Uint8Array(32);function O1(t,e,r,n,i){const s=t(e,r,a9),o=n9.create(s);i&&M1(o,i),M1(o,n);const a=new Uint8Array(16),f=q7(a);I1(f,0,BigInt(i?i.length:0),!0),I1(f,8,BigInt(n.length),!0),o.update(a);const c=o.digest();return eo(s,a),c}const f9=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=S1(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const f=O1(t,e,r,a,n);return s.set(f,o),eo(f),s},decrypt(i,s){s=S1(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),f=O1(t,e,r,o,n);if(!H7(a,f))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),eo(f),s}}),U2=K7({blockSize:64,nonceLength:12,tagLength:16},f9(s9));class q2 extends xl{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,wl(e);const n=Qs(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Js(this),this.iHash.update(e),this}digestInto(e){Js(this),nc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const El=(t,e,r)=>new q2(t,e).update(r).digest();El.create=(t,e)=>new q2(t,e);function c9(t,e,r){return wl(t),r===void 0&&(r=new Uint8Array(t.outputLen)),El(t,Qs(r),Qs(e))}const Iu=new Uint8Array([0]),D1=new Uint8Array;function u9(t,e,r,n=32){if(wl(t),na(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=D1);const s=new Uint8Array(i*t.outputLen),o=El.create(t,e),a=o._cloneInto(),f=new Uint8Array(o.outputLen);for(let c=0;c<i;c++)Iu[0]=c+1,a.update(c===0?D1:f).update(r).update(Iu).digestInto(f),s.set(f,t.outputLen*c),o._cloneInto(a);return o.destroy(),a.destroy(),f.fill(0),Iu.fill(0),s.slice(0,n)}const h9=(t,e,r,n,i)=>u9(t,c9(t,e,r),n,i);function l9(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),f=n?4:0,c=n?0:4;t.setUint32(e+f,o,n),t.setUint32(e+c,a,n)}function d9(t,e,r){return t&e^~t&r}function p9(t,e,r){return t&e^t&r^e&r}let v9=class extends xl{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Au(this.buffer)}update(e){Js(this);const{view:r,buffer:n,blockLen:i}=this;e=Qs(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const f=Au(e);for(;i<=s-o;o+=i)this.process(f,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Js(this),M2(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;l9(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Au(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=f/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const g9=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ci=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mi=new Uint32Array(64);let y9=class extends v9{constructor(){super(64,32,8,!1),this.A=Ci[0]|0,this.B=Ci[1]|0,this.C=Ci[2]|0,this.D=Ci[3]|0,this.E=Ci[4]|0,this.F=Ci[5]|0,this.G=Ci[6]|0,this.H=Ci[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:f}=this;return[e,r,n,i,s,o,a,f]}set(e,r,n,i,s,o,a,f){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=f|0}process(e,r){for(let h=0;h<16;h++,r+=4)Mi[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=Mi[h-15],p=Mi[h-2],v=Nn(d,7)^Nn(d,18)^d>>>3,x=Nn(p,17)^Nn(p,19)^p>>>10;Mi[h]=x+Mi[h-7]+v+Mi[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:f,G:c,H:u}=this;for(let h=0;h<64;h++){const d=Nn(a,6)^Nn(a,11)^Nn(a,25),p=u+d+d9(a,f,c)+g9[h]+Mi[h]|0,v=(Nn(n,2)^Nn(n,13)^Nn(n,22))+p9(n,i,s)|0;u=c,c=f,f=a,a=o+p|0,o=s,s=i,i=n,n=p+v|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,f,c,u)}roundClean(){Mi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const ic=O2(()=>new y9);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const z2=BigInt(0);function Al(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function V2(t){if(!Al(t))throw new Error("Uint8Array expected")}const b9=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function m9(t){V2(t);let e="";for(let r=0;r<t.length;r++)e+=b9[t[r]];return e}function w9(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?z2:BigInt("0x"+t)}const ci={_0:48,_9:57,A:65,F:70,a:97,f:102};function T1(t){if(t>=ci._0&&t<=ci._9)return t-ci._0;if(t>=ci.A&&t<=ci.F)return t-(ci.A-10);if(t>=ci.a&&t<=ci.f)return t-(ci.a-10)}function j2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=T1(t.charCodeAt(s)),a=T1(t.charCodeAt(s+1));if(o===void 0||a===void 0){const f=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+s)}n[i]=o*16+a}return n}function R1(t){return V2(t),w9(m9(Uint8Array.from(t).reverse()))}function x9(t,e){return j2(t.toString(16).padStart(e*2,"0"))}function _9(t,e){return x9(t,e).reverse()}function N1(t,e,r){let n;if(typeof e=="string")try{n=j2(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Al(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const Cu=t=>typeof t=="bigint"&&z2<=t;function E9(t,e,r){return Cu(t)&&Cu(e)&&Cu(r)&&e<=t&&t<r}function P1(t,e,r,n){if(!E9(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}const A9={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Al(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function S9(t,e,r={}){const n=(i,s,o)=>{const a=A9[s];if(typeof a!="function")throw new Error("invalid validator function");const f=t[i];if(!(o&&f===void 0)&&!a(f,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+f)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Us=BigInt(0),Ua=BigInt(1);function H2(t,e){const r=t%e;return r>=Us?r:e+r}function I9(t,e,r){if(e<Us)throw new Error("invalid exponent, negatives unsupported");if(r<=Us)throw new Error("invalid modulus");if(r===Ua)return Us;let n=Ua;for(;e>Us;)e&Ua&&(n=n*t%r),t=t*t%r,e>>=Ua;return n}function _n(t,e,r){let n=t;for(;e-- >Us;)n*=n,n%=r;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Ns=BigInt(0),Mu=BigInt(1);function C9(t){return S9(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function M9(t){const e=C9(t),{P:r}=e,n=M=>H2(M,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(M=>M),f=e.powPminus2||(M=>I9(M,r-BigInt(2),r));function c(M,R,T){const P=n(M*(R-T));return R=n(R-P),T=n(T+P),[R,T]}const u=(e.a-BigInt(2))/BigInt(4);function h(M,R){P1("u",M,Ns,r),P1("scalar",R,Ns,r);const T=R,P=M;let N=Mu,$=Ns,U=M,V=Mu,H=Ns,B;for(let b=BigInt(i-1);b>=Ns;b--){const l=T>>b&Mu;H^=l,B=c(H,N,U),N=B[0],U=B[1],B=c(H,$,V),$=B[0],V=B[1],H=l;const g=N+$,w=n(g*g),E=N-$,I=n(E*E),A=w-I,m=U+V,S=U-V,_=n(S*g),F=n(m*E),Y=_+F,D=_-F;U=n(Y*Y),V=n(P*n(D*D)),N=n(w*I),$=n(A*(w+n(u*A)))}B=c(H,N,U),N=B[0],U=B[1],B=c(H,$,V),$=B[0],V=B[1];const y=f($);return n(N*y)}function d(M){return _9(n(M),s)}function p(M){const R=N1("u coordinate",M,s);return o===32&&(R[31]&=127),R1(R)}function v(M){const R=N1("scalar",M),T=R.length;if(T!==s&&T!==o){let P=""+s+" or "+o;throw new Error("invalid scalar, expected "+P+" bytes, got "+T)}return R1(a(R))}function x(M,R){const T=p(R),P=v(M),N=h(T,P);if(N===Ns)throw new Error("invalid private or public key received");return d(N)}const C=d(e.Gu);function O(M){return x(M,C)}return{scalarMult:x,scalarMultBase:O,getSharedSecret:(M,R)=>x(M,R),getPublicKey:M=>O(M),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:C}}const yh=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const O9=BigInt(1),F1=BigInt(2),D9=BigInt(3),T9=BigInt(5);BigInt(8);function R9(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=yh,o=t*t%s*t%s,a=_n(o,F1,s)*o%s,f=_n(a,O9,s)*t%s,c=_n(f,T9,s)*f%s,u=_n(c,e,s)*c%s,h=_n(u,r,s)*u%s,d=_n(h,n,s)*h%s,p=_n(d,i,s)*d%s,v=_n(p,i,s)*d%s,x=_n(v,e,s)*c%s;return{pow_p_5_8:_n(x,F1,s)*t%s,b2:o}}function N9(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const bh=M9({P:yh,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=yh,{pow_p_5_8:r,b2:n}=R9(t);return H2(_n(r,D9,e)*n,e)},adjustScalarBytes:N9,randomBytes:ya}),K2="base10",xr="base16",$i="base64pad",_o="base64url",ba="utf8",W2=0,wi=1,ma=2,P9=0,B1=1,Go=12,Sl=32;function F9(){const t=bh.utils.randomPrivateKey(),e=bh.getPublicKey(t);return{privateKey:Mr(t,xr),publicKey:Mr(e,xr)}}function mh(){const t=ya(Sl);return Mr(t,xr)}function B9(t,e){const r=bh.getSharedSecret(cn(t,xr),cn(e,xr)),n=h9(ic,r,void 0,void 0,Sl);return Mr(n,xr)}function uf(t){const e=ic(cn(t,xr));return Mr(e,xr)}function yi(t){const e=ic(cn(t,ba));return Mr(e,xr)}function G2(t){return cn(`${t}`,K2)}function xs(t){return Number(Mr(t,K2))}function L9(t){const e=G2(typeof t.type<"u"?t.type:W2);if(xs(e)===wi&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?cn(t.senderPublicKey,xr):void 0,n=typeof t.iv<"u"?cn(t.iv,xr):ya(Go),i=cn(t.symKey,xr),s=U2(i,n).encrypt(cn(t.message,ba));return X2({type:e,sealed:s,iv:n,senderPublicKey:r,encoding:t.encoding})}function $9(t){const e=cn(t.symKey,xr),{sealed:r,iv:n}=sa(t),i=U2(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return Mr(i,ba)}function k9(t,e){const r=G2(ma),n=ya(Go),i=cn(t,ba);return X2({type:r,sealed:i,iv:n,encoding:e})}function U9(t,e){const{sealed:r}=sa({encoded:t,encoding:e});return Mr(r,ba)}function X2(t){const{encoding:e=$i}=t;if(xs(t.type)===ma)return Mr(su([t.type,t.sealed]),e);if(xs(t.type)===wi){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Mr(su([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Mr(su([t.type,t.iv,t.sealed]),e)}function sa(t){const{encoded:e,encoding:r=$i}=t,n=cn(e,r),i=n.slice(P9,B1),s=B1;if(xs(i)===wi){const c=s+Sl,u=c+Go,h=n.slice(s,c),d=n.slice(c,u),p=n.slice(u);return{type:i,sealed:p,iv:d,senderPublicKey:h}}if(xs(i)===ma){const c=n.slice(s),u=ya(Go);return{type:i,sealed:c,iv:u}}const o=s+Go,a=n.slice(s,o),f=n.slice(o);return{type:i,sealed:f,iv:a}}function q9(t,e){const r=sa({encoded:t,encoding:e==null?void 0:e.encoding});return Y2({type:xs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Mr(r.senderPublicKey,xr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Y2(t){const e=(t==null?void 0:t.type)||W2;if(e===wi){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function L1(t){return t.type===wi&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function $1(t){return t.type===ma}function z9(t){return new M5.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function V9(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function j9(t){return Buffer.from(V9(t),"base64")}function H9(t,e){const[r,n,i]=t.split("."),s=j9(i);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),f=`${r}.${n}`,c=ic(f),u=z9(e),h=Mr(c,xr);if(!u.verify(h,{r:o,s:a}))throw new Error("Invalid signature");return ch(t).payload}const K9="irn";function Rf(t){return(t==null?void 0:t.relay)||{protocol:K9}}function Po(t){const e=O5[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function W9(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function k1(t){if(!t.includes("wc:")){const c=C2(t);c!=null&&c.includes("wc:")&&(t=c)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((c,u)=>{a[u]=c});const f=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:G9(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:W9(a),methods:f,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function G9(t){return t.startsWith("//")?t.substring(2):t}function X9(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function U1(t){const e=new URLSearchParams,r=X9(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function qa(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var Y9=Object.defineProperty,Z9=Object.defineProperties,J9=Object.getOwnPropertyDescriptors,q1=Object.getOwnPropertySymbols,Q9=Object.prototype.hasOwnProperty,eE=Object.prototype.propertyIsEnumerable,z1=(t,e,r)=>e in t?Y9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tE=(t,e)=>{for(var r in e||(e={}))Q9.call(e,r)&&z1(t,r,e[r]);if(q1)for(var r of q1(e))eE.call(e,r)&&z1(t,r,e[r]);return t},rE=(t,e)=>Z9(t,J9(e));function oo(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function nE(t){const e=[];return Object.values(t).forEach(r=>{e.push(...oo(r.accounts))}),e}function iE(t,e){const r=[];return Object.values(t).forEach(n=>{oo(n.accounts).includes(e)&&r.push(...n.methods)}),r}function sE(t,e){const r=[];return Object.values(t).forEach(n=>{oo(n.accounts).includes(e)&&r.push(...n.events)}),r}function oE(t){const{proposal:{requiredNamespaces:e,optionalNamespaces:r={}},supportedNamespaces:n}=t,i=V1(e),s=V1(r),o={};Object.keys(n).forEach(c=>{const u=n[c].chains,h=n[c].methods,d=n[c].events,p=n[c].accounts;u.forEach(v=>{if(!p.some(x=>x.includes(v)))throw new Error(`No accounts provided for chain ${v} in namespace ${c}`)}),o[c]={chains:u,methods:h,events:d,accounts:p}});const a=wh(e,o,"approve()");if(a)throw new Error(a.message);const f={};return!Object.keys(e).length&&!Object.keys(r).length?o:(Object.keys(i).forEach(c=>{const u=n[c].chains.filter(v=>{var x,C;return(C=(x=i[c])==null?void 0:x.chains)==null?void 0:C.includes(v)}),h=n[c].methods.filter(v=>{var x,C;return(C=(x=i[c])==null?void 0:x.methods)==null?void 0:C.includes(v)}),d=n[c].events.filter(v=>{var x,C;return(C=(x=i[c])==null?void 0:x.events)==null?void 0:C.includes(v)}),p=u.map(v=>n[c].accounts.filter(x=>x.includes(`${v}:`))).flat();f[c]={chains:u,methods:h,events:d,accounts:p}}),Object.keys(s).forEach(c=>{var u,h,d,p,v,x;if(!n[c])return;const C=(h=(u=s[c])==null?void 0:u.chains)==null?void 0:h.filter(T=>n[c].chains.includes(T)),O=n[c].methods.filter(T=>{var P,N;return(N=(P=s[c])==null?void 0:P.methods)==null?void 0:N.includes(T)}),M=n[c].events.filter(T=>{var P,N;return(N=(P=s[c])==null?void 0:P.events)==null?void 0:N.includes(T)}),R=C==null?void 0:C.map(T=>n[c].accounts.filter(P=>P.includes(`${T}:`))).flat();f[c]={chains:Li((d=f[c])==null?void 0:d.chains,C),methods:Li((p=f[c])==null?void 0:p.methods,O),events:Li((v=f[c])==null?void 0:v.events,M),accounts:Li((x=f[c])==null?void 0:x.accounts,R)}}),f)}function Z2(t){return t.includes(":")}function aE(t){return Z2(t)?t.split(":")[0]:t}function V1(t){var e,r,n;const i={};if(!oa(t))return i;for(const[s,o]of Object.entries(t)){const a=Z2(s)?[s]:o.chains,f=o.methods||[],c=o.events||[],u=aE(s);i[u]=rE(tE({},i[u]),{chains:Li(a,(e=i[u])==null?void 0:e.chains),methods:Li(f,(r=i[u])==null?void 0:r.methods),events:Li(c,(n=i[u])==null?void 0:n.events)})}return i}function fE(t){const e={};return t==null||t.forEach(r=>{const[n,i]=r.split(":");e[n]||(e[n]={accounts:[],chains:[],events:[]}),e[n].accounts.push(r),e[n].chains.push(`${n}:${i}`)}),e}function j1(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=fE(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=Li(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const cE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},uE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ge(t,e){const{message:r,code:n}=uE[t];return{message:e?`${r} ${e}`:r,code:n}}function St(t,e){const{message:r,code:n}=cE[t];return{message:e?`${r} ${e}`:r,code:n}}function sc(t,e){return!!Array.isArray(t)}function oa(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ir(t){return typeof t>"u"}function qt(t,e){return e&&Ir(t)?!0:typeof t=="string"&&!!t.trim().length}function Il(t,e){return e&&Ir(t)?!0:typeof t=="number"&&!isNaN(t)}function hE(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return us(i,n)?(n.forEach(o=>{const{accounts:a,methods:f,events:c}=t.namespaces[o],u=oo(a),h=r[o];(!us(w2(o,h),u)||!us(h.methods,f)||!us(h.events,c))&&(s=!1)}),s):!1}function Nf(t){return qt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function lE(t){if(qt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Nf(r)}}return!1}function dE(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(qt(t,!1)){if(e(t))return!0;const r=C2(t);return e(r)}}catch{}return!1}function pE(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function vE(t){return t==null?void 0:t.topic}function gE(t,e){let r=null;return qt(t==null?void 0:t.publicKey,!1)||(r=ge("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function H1(t){let e=!0;return sc(t)?t.length&&(e=t.every(r=>qt(r,!1))):e=!1,e}function yE(t,e,r){let n=null;return sc(e)&&e.length?e.forEach(i=>{n||Nf(i)||(n=St("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Nf(t)||(n=St("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function bE(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=yE(i,w2(i,s),`${e} ${r}`);o&&(n=o)}),n}function mE(t,e){let r=null;return sc(t)?t.forEach(n=>{r||lE(n)||(r=St("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=St("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function wE(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=mE(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function xE(t,e){let r=null;return H1(t==null?void 0:t.methods)?H1(t==null?void 0:t.events)||(r=St("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=St("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function J2(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=xE(n,`${e}, namespace`);i&&(r=i)}),r}function _E(t,e,r){let n=null;if(t&&oa(t)){const i=J2(t,e);i&&(n=i);const s=bE(t,e,r);s&&(n=s)}else n=ge("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Ou(t,e){let r=null;if(t&&oa(t)){const n=J2(t,e);n&&(r=n);const i=wE(t,e);i&&(r=i)}else r=ge("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Q2(t){return qt(t.protocol,!0)}function EE(t,e){let r=!1;return t?t&&sc(t)&&t.length&&t.forEach(n=>{r=Q2(n)}):r=!0,r}function AE(t){return typeof t=="number"}function kr(t){return typeof t<"u"&&typeof t!==null}function SE(t){return!(!t||typeof t!="object"||!t.code||!Il(t.code,!1)||!t.message||!qt(t.message,!1))}function IE(t){return!(Ir(t)||!qt(t.method,!1))}function CE(t){return!(Ir(t)||Ir(t.result)&&Ir(t.error)||!Il(t.id,!1)||!qt(t.jsonrpc,!1))}function ME(t){return!(Ir(t)||!qt(t.name,!1))}function K1(t,e){return!(!Nf(e)||!nE(t).includes(e))}function OE(t,e,r){return qt(r,!1)?iE(t,e).includes(r):!1}function DE(t,e,r){return qt(r,!1)?sE(t,e).includes(r):!1}function wh(t,e,r){let n=null;const i=TE(t),s=RE(e),o=Object.keys(i),a=Object.keys(s),f=W1(Object.keys(t)),c=W1(Object.keys(e)),u=f.filter(h=>!c.includes(h));return u.length&&(n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),us(o,a)||(n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=oo(e[h].accounts);d.includes(h)||(n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(us(i[h].methods,s[h].methods)?us(i[h].events,s[h].events)||(n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function TE(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function W1(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function RE(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=oo(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function NE(t,e){return Il(t,!1)&&t<=e.max&&t>=e.min}function G1(){const t=ga();return new Promise(e=>{switch(t){case Qr.browser:e(PE());break;case Qr.reactNative:e(FE());break;case Qr.node:e(BE());break;default:e(!0)}})}function PE(){return va()&&(navigator==null?void 0:navigator.onLine)}async function FE(){if(Wi()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function BE(){return!0}function LE(t){switch(ga()){case Qr.browser:$E(t);break;case Qr.reactNative:kE(t);break}}function $E(t){!Wi()&&va()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function kE(t){Wi()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Du={};class Eo{static get(e){return Du[e]}static set(e,r){Du[e]=r}static delete(e){delete Du[e]}}const UE="PARSE_ERROR",qE="INVALID_REQUEST",zE="METHOD_NOT_FOUND",VE="INVALID_PARAMS",ey="INTERNAL_ERROR",Cl="SERVER_ERROR",jE=[-32700,-32600,-32601,-32602,-32603],Xo={[UE]:{code:-32700,message:"Parse error"},[qE]:{code:-32600,message:"Invalid Request"},[zE]:{code:-32601,message:"Method not found"},[VE]:{code:-32602,message:"Invalid params"},[ey]:{code:-32603,message:"Internal error"},[Cl]:{code:-32e3,message:"Server error"}},ty=Cl;function HE(t){return jE.includes(t)}function X1(t){return Object.keys(Xo).includes(t)?Xo[t]:Xo[ty]}function KE(t){const e=Object.values(Xo).find(r=>r.code===t);return e||Xo[ty]}function WE(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Tu={},ui={},Y1;function GE(){if(Y1)return ui;Y1=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.isBrowserCryptoAvailable=ui.getSubtleCrypto=ui.getBrowerCrypto=void 0;function t(){return(Sn==null?void 0:Sn.crypto)||(Sn==null?void 0:Sn.msCrypto)||{}}ui.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}ui.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return ui.isBrowserCryptoAvailable=r,ui}var hi={},Z1;function XE(){if(Z1)return hi;Z1=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.isBrowser=hi.isNode=hi.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}hi.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}hi.isNode=e;function r(){return!t()&&!e()}return hi.isBrowser=r,hi}var J1;function YE(){return J1||(J1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ca;e.__exportStar(GE(),t),e.__exportStar(XE(),t)}(Tu)),Tu}var ZE=YE();function vi(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function hs(t=6){return BigInt(vi(t))}function ls(t,e,r){return{id:r||vi(),jsonrpc:"2.0",method:t,params:e}}function Ml(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Ol(t,e,r){return{id:t,jsonrpc:"2.0",error:JE(e)}}function JE(t,e){return typeof t>"u"?X1(ey):(typeof t=="string"&&(t=Object.assign(Object.assign({},X1(Cl)),{message:t})),HE(t.code)&&(t=KE(t.code)),t)}class QE{}class eA extends QE{constructor(){super()}}class tA extends eA{constructor(e){super()}}const rA="^wss?:";function nA(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function iA(t,e){const r=nA(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Q1(t){return iA(t,rA)}function sA(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ry(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Dl(t){return ry(t)&&"method"in t}function oc(t){return ry(t)&&(Ln(t)||fn(t))}function Ln(t){return"result"in t}function fn(t){return"error"in t}let oA=class extends tA{constructor(e){super(e),this.events=new On.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(ls(e.method,e.params||[],e.id||hs().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{fn(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),oc(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const aA=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),fA=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",ep=t=>t.split("?")[0],tp=10,cA=aA();let uA=class{constructor(e){if(this.url=e,this.events=new On.EventEmitter,this.registering=!1,!Q1(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(bs(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!Q1(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=ZE.isReactNative()?void 0:{rejectUnauthorized:!sA(e)},s=new cA(e,[],i);fA()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Zs(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Ol(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return WE(e,ep(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>tp&&this.events.setMaxListeners(tp)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${ep(this.url)}`));return this.events.emit("register_error",r),r}};var Fo={exports:{}};Fo.exports;var rp;function hA(){return rp||(rp=1,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",f="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Function]",v="[object GeneratorFunction]",x="[object Map]",C="[object Number]",O="[object Null]",M="[object Object]",R="[object Promise]",T="[object Proxy]",P="[object RegExp]",N="[object Set]",$="[object String]",U="[object Symbol]",V="[object Undefined]",H="[object WeakMap]",B="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",l="[object Float64Array]",g="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",A="[object Uint8ClampedArray]",m="[object Uint16Array]",S="[object Uint32Array]",_=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,D={};D[b]=D[l]=D[g]=D[w]=D[E]=D[I]=D[A]=D[m]=D[S]=!0,D[a]=D[f]=D[B]=D[u]=D[y]=D[h]=D[d]=D[p]=D[x]=D[C]=D[M]=D[P]=D[N]=D[$]=D[H]=!1;var j=typeof Sn=="object"&&Sn&&Sn.Object===Object&&Sn,G=typeof self=="object"&&self&&self.Object===Object&&self,Z=j||G||Function("return this")(),ee=e&&!e.nodeType&&e,ue=ee&&!0&&t&&!t.nodeType&&t,he=ue&&ue.exports===ee,L=he&&j.process,z=function(){try{return L&&L.binding&&L.binding("util")}catch{}}(),K=z&&z.isTypedArray;function X(q,W){for(var ce=-1,we=q==null?0:q.length,Tt=0,ze=[];++ce<we;){var Lt=q[ce];W(Lt,ce,q)&&(ze[Tt++]=Lt)}return ze}function te(q,W){for(var ce=-1,we=W.length,Tt=q.length;++ce<we;)q[Tt+ce]=W[ce];return q}function re(q,W){for(var ce=-1,we=q==null?0:q.length;++ce<we;)if(W(q[ce],ce,q))return!0;return!1}function ne(q,W){for(var ce=-1,we=Array(q);++ce<q;)we[ce]=W(ce);return we}function oe(q){return function(W){return q(W)}}function se(q,W){return q.has(W)}function Q(q,W){return q==null?void 0:q[W]}function le(q){var W=-1,ce=Array(q.size);return q.forEach(function(we,Tt){ce[++W]=[Tt,we]}),ce}function fe(q,W){return function(ce){return q(W(ce))}}function ae(q){var W=-1,ce=Array(q.size);return q.forEach(function(we){ce[++W]=we}),ce}var pe=Array.prototype,me=Function.prototype,ve=Object.prototype,xe=Z["__core-js_shared__"],Fe=me.toString,be=ve.hasOwnProperty,ke=function(){var q=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return q?"Symbol(src)_1."+q:""}(),Ue=ve.toString,Ae=RegExp("^"+Fe.call(be).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=he?Z.Buffer:void 0,Be=Z.Symbol,_e=Z.Uint8Array,Ge=ve.propertyIsEnumerable,at=pe.splice,Se=Be?Be.toStringTag:void 0,it=Object.getOwnPropertySymbols,ft=We?We.isBuffer:void 0,Te=fe(Object.keys,Object),Je=Ms(Z,"DataView"),Xe=Ms(Z,"Map"),Me=Ms(Z,"Promise"),Qe=Ms(Z,"Set"),et=Ms(Z,"WeakMap"),Ie=Ms(Object,"create"),ct=Gi(Je),ut=Gi(Xe),Re=Gi(Me),ht=Gi(Qe),lt=Gi(et),Oe=Be?Be.prototype:void 0,tt=Oe?Oe.valueOf:void 0;function Ke(q){var W=-1,ce=q==null?0:q.length;for(this.clear();++W<ce;){var we=q[W];this.set(we[0],we[1])}}function Ne(){this.__data__=Ie?Ie(null):{},this.size=0}function dt(q){var W=this.has(q)&&delete this.__data__[q];return this.size-=W?1:0,W}function pt(q){var W=this.__data__;if(Ie){var ce=W[q];return ce===n?void 0:ce}return be.call(W,q)?W[q]:void 0}function Pe(q){var W=this.__data__;return Ie?W[q]!==void 0:be.call(W,q)}function vt(q,W){var ce=this.__data__;return this.size+=this.has(q)?0:1,ce[q]=Ie&&W===void 0?n:W,this}Ke.prototype.clear=Ne,Ke.prototype.delete=dt,Ke.prototype.get=pt,Ke.prototype.has=Pe,Ke.prototype.set=vt;function je(q){var W=-1,ce=q==null?0:q.length;for(this.clear();++W<ce;){var we=q[W];this.set(we[0],we[1])}}function st(){this.__data__=[],this.size=0}function Rr(q){var W=this.__data__,ce=_a(W,q);if(ce<0)return!1;var we=W.length-1;return ce==we?W.pop():at.call(W,ce,1),--this.size,!0}function Nr(q){var W=this.__data__,ce=_a(W,q);return ce<0?void 0:W[ce][1]}function Pr(q){return _a(this.__data__,q)>-1}function Fr(q,W){var ce=this.__data__,we=_a(ce,q);return we<0?(++this.size,ce.push([q,W])):ce[we][1]=W,this}je.prototype.clear=st,je.prototype.delete=Rr,je.prototype.get=Nr,je.prototype.has=Pr,je.prototype.set=Fr;function Vt(q){var W=-1,ce=q==null?0:q.length;for(this.clear();++W<ce;){var we=q[W];this.set(we[0],we[1])}}function Xn(){this.size=0,this.__data__={hash:new Ke,map:new(Xe||je),string:new Ke}}function Yn(q){var W=Ea(this,q).delete(q);return this.size-=W?1:0,W}function Zn(q){return Ea(this,q).get(q)}function Jn(q){return Ea(this,q).has(q)}function Qn(q,W){var ce=Ea(this,q),we=ce.size;return ce.set(q,W),this.size+=ce.size==we?0:1,this}Vt.prototype.clear=Xn,Vt.prototype.delete=Yn,Vt.prototype.get=Zn,Vt.prototype.has=Jn,Vt.prototype.set=Qn;function tn(q){var W=-1,ce=q==null?0:q.length;for(this.__data__=new Vt;++W<ce;)this.add(q[W])}function ei(q){return this.__data__.set(q,n),this}function ti(q){return this.__data__.has(q)}tn.prototype.add=tn.prototype.push=ei,tn.prototype.has=ti;function gr(q){var W=this.__data__=new je(q);this.size=W.size}function ri(){this.__data__=new je,this.size=0}function ni(q){var W=this.__data__,ce=W.delete(q);return this.size=W.size,ce}function ii(q){return this.__data__.get(q)}function fo(q){return this.__data__.has(q)}function co(q,W){var ce=this.__data__;if(ce instanceof je){var we=ce.__data__;if(!Xe||we.length<r-1)return we.push([q,W]),this.size=++ce.size,this;ce=this.__data__=new Vt(we)}return ce.set(q,W),this.size=ce.size,this}gr.prototype.clear=ri,gr.prototype.delete=ni,gr.prototype.get=ii,gr.prototype.has=fo,gr.prototype.set=co;function zy(q,W){var ce=Aa(q),we=!ce&&n3(q),Tt=!ce&&!we&&lc(q),ze=!ce&&!we&&!Tt&&Gl(q),Lt=ce||we||Tt||ze,Zt=Lt?ne(q.length,String):[],or=Zt.length;for(var Ft in q)be.call(q,Ft)&&!(Lt&&(Ft=="length"||Tt&&(Ft=="offset"||Ft=="parent")||ze&&(Ft=="buffer"||Ft=="byteLength"||Ft=="byteOffset")||Jy(Ft,or)))&&Zt.push(Ft);return Zt}function _a(q,W){for(var ce=q.length;ce--;)if(jl(q[ce][0],W))return ce;return-1}function Vy(q,W,ce){var we=W(q);return Aa(q)?we:te(we,ce(q))}function uo(q){return q==null?q===void 0?V:O:Se&&Se in Object(q)?Yy(q):r3(q)}function Ul(q){return ho(q)&&uo(q)==a}function ql(q,W,ce,we,Tt){return q===W?!0:q==null||W==null||!ho(q)&&!ho(W)?q!==q&&W!==W:jy(q,W,ce,we,ql,Tt)}function jy(q,W,ce,we,Tt,ze){var Lt=Aa(q),Zt=Aa(W),or=Lt?f:Ei(q),Ft=Zt?f:Ei(W);or=or==a?M:or,Ft=Ft==a?M:Ft;var jr=or==M,gn=Ft==M,yr=or==Ft;if(yr&&lc(q)){if(!lc(W))return!1;Lt=!0,jr=!1}if(yr&&!jr)return ze||(ze=new gr),Lt||Gl(q)?zl(q,W,ce,we,Tt,ze):Gy(q,W,or,ce,we,Tt,ze);if(!(ce&i)){var rn=jr&&be.call(q,"__wrapped__"),nn=gn&&be.call(W,"__wrapped__");if(rn||nn){var Ai=rn?q.value():q,si=nn?W.value():W;return ze||(ze=new gr),Tt(Ai,si,ce,we,ze)}}return yr?(ze||(ze=new gr),Xy(q,W,ce,we,Tt,ze)):!1}function Hy(q){if(!Wl(q)||e3(q))return!1;var W=Hl(q)?Ae:F;return W.test(Gi(q))}function Ky(q){return ho(q)&&Kl(q.length)&&!!D[uo(q)]}function Wy(q){if(!t3(q))return Te(q);var W=[];for(var ce in Object(q))be.call(q,ce)&&ce!="constructor"&&W.push(ce);return W}function zl(q,W,ce,we,Tt,ze){var Lt=ce&i,Zt=q.length,or=W.length;if(Zt!=or&&!(Lt&&or>Zt))return!1;var Ft=ze.get(q);if(Ft&&ze.get(W))return Ft==W;var jr=-1,gn=!0,yr=ce&s?new tn:void 0;for(ze.set(q,W),ze.set(W,q);++jr<Zt;){var rn=q[jr],nn=W[jr];if(we)var Ai=Lt?we(nn,rn,jr,W,q,ze):we(rn,nn,jr,q,W,ze);if(Ai!==void 0){if(Ai)continue;gn=!1;break}if(yr){if(!re(W,function(si,Xi){if(!se(yr,Xi)&&(rn===si||Tt(rn,si,ce,we,ze)))return yr.push(Xi)})){gn=!1;break}}else if(!(rn===nn||Tt(rn,nn,ce,we,ze))){gn=!1;break}}return ze.delete(q),ze.delete(W),gn}function Gy(q,W,ce,we,Tt,ze,Lt){switch(ce){case y:if(q.byteLength!=W.byteLength||q.byteOffset!=W.byteOffset)return!1;q=q.buffer,W=W.buffer;case B:return!(q.byteLength!=W.byteLength||!ze(new _e(q),new _e(W)));case u:case h:case C:return jl(+q,+W);case d:return q.name==W.name&&q.message==W.message;case P:case $:return q==W+"";case x:var Zt=le;case N:var or=we&i;if(Zt||(Zt=ae),q.size!=W.size&&!or)return!1;var Ft=Lt.get(q);if(Ft)return Ft==W;we|=s,Lt.set(q,W);var jr=zl(Zt(q),Zt(W),we,Tt,ze,Lt);return Lt.delete(q),jr;case U:if(tt)return tt.call(q)==tt.call(W)}return!1}function Xy(q,W,ce,we,Tt,ze){var Lt=ce&i,Zt=Vl(q),or=Zt.length,Ft=Vl(W),jr=Ft.length;if(or!=jr&&!Lt)return!1;for(var gn=or;gn--;){var yr=Zt[gn];if(!(Lt?yr in W:be.call(W,yr)))return!1}var rn=ze.get(q);if(rn&&ze.get(W))return rn==W;var nn=!0;ze.set(q,W),ze.set(W,q);for(var Ai=Lt;++gn<or;){yr=Zt[gn];var si=q[yr],Xi=W[yr];if(we)var Xl=Lt?we(Xi,si,yr,W,q,ze):we(si,Xi,yr,q,W,ze);if(!(Xl===void 0?si===Xi||Tt(si,Xi,ce,we,ze):Xl)){nn=!1;break}Ai||(Ai=yr=="constructor")}if(nn&&!Ai){var Sa=q.constructor,Ia=W.constructor;Sa!=Ia&&"constructor"in q&&"constructor"in W&&!(typeof Sa=="function"&&Sa instanceof Sa&&typeof Ia=="function"&&Ia instanceof Ia)&&(nn=!1)}return ze.delete(q),ze.delete(W),nn}function Vl(q){return Vy(q,o3,Zy)}function Ea(q,W){var ce=q.__data__;return Qy(W)?ce[typeof W=="string"?"string":"hash"]:ce.map}function Ms(q,W){var ce=Q(q,W);return Hy(ce)?ce:void 0}function Yy(q){var W=be.call(q,Se),ce=q[Se];try{q[Se]=void 0;var we=!0}catch{}var Tt=Ue.call(q);return we&&(W?q[Se]=ce:delete q[Se]),Tt}var Zy=it?function(q){return q==null?[]:(q=Object(q),X(it(q),function(W){return Ge.call(q,W)}))}:a3,Ei=uo;(Je&&Ei(new Je(new ArrayBuffer(1)))!=y||Xe&&Ei(new Xe)!=x||Me&&Ei(Me.resolve())!=R||Qe&&Ei(new Qe)!=N||et&&Ei(new et)!=H)&&(Ei=function(q){var W=uo(q),ce=W==M?q.constructor:void 0,we=ce?Gi(ce):"";if(we)switch(we){case ct:return y;case ut:return x;case Re:return R;case ht:return N;case lt:return H}return W});function Jy(q,W){return W=W??o,!!W&&(typeof q=="number"||Y.test(q))&&q>-1&&q%1==0&&q<W}function Qy(q){var W=typeof q;return W=="string"||W=="number"||W=="symbol"||W=="boolean"?q!=="__proto__":q===null}function e3(q){return!!ke&&ke in q}function t3(q){var W=q&&q.constructor,ce=typeof W=="function"&&W.prototype||ve;return q===ce}function r3(q){return Ue.call(q)}function Gi(q){if(q!=null){try{return Fe.call(q)}catch{}try{return q+""}catch{}}return""}function jl(q,W){return q===W||q!==q&&W!==W}var n3=Ul(function(){return arguments}())?Ul:function(q){return ho(q)&&be.call(q,"callee")&&!Ge.call(q,"callee")},Aa=Array.isArray;function i3(q){return q!=null&&Kl(q.length)&&!Hl(q)}var lc=ft||f3;function s3(q,W){return ql(q,W)}function Hl(q){if(!Wl(q))return!1;var W=uo(q);return W==p||W==v||W==c||W==T}function Kl(q){return typeof q=="number"&&q>-1&&q%1==0&&q<=o}function Wl(q){var W=typeof q;return q!=null&&(W=="object"||W=="function")}function ho(q){return q!=null&&typeof q=="object"}var Gl=K?oe(K):Ky;function o3(q){return i3(q)?zy(q):Wy(q)}function a3(){return[]}function f3(){return!1}t.exports=s3}(Fo,Fo.exports)),Fo.exports}var lA=hA();const dA=ro(lA),ny="wc",iy=2,xh="core",Kn=`${ny}@2:${xh}:`,pA={logger:"error"},vA={database:":memory:"},gA="crypto",np="client_ed25519_seed",yA=de.ONE_DAY,bA="keychain",mA="0.3",wA="messages",xA="0.3",ip=de.SIX_HOURS,_A="publisher",sy="irn",EA="error",oy="wss://relay.walletconnect.org",AA="relayer",rr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},SA="_subscription",sn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},IA=.1,_h="2.18.0",Ct={link_mode:"link_mode",relay:"relay"},CA="0.3",MA="WALLETCONNECT_CLIENT_ID",sp="WALLETCONNECT_LINK_MODE_APPS",Kr={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},OA="subscription",DA="0.3",TA=de.FIVE_SECONDS*1e3,RA="pairing",NA="0.3",Ao={wc_pairingDelete:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:de.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:de.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:de.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:de.ONE_DAY,prompt:!1,tag:0},res:{ttl:de.ONE_DAY,prompt:!1,tag:0}}},cs={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},bn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},PA="history",FA="0.3",BA="expirer",on={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},LA="0.3",$A="verify-api",kA="https://verify.walletconnect.com",ay="https://verify.walletconnect.org",Yo=ay,UA=`${Yo}/v3`,qA=[kA,ay],zA="echo",VA="https://echo.walletconnect.com",Fn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},di={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},mn={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ts={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},rs={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},So={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},jA=.1,HA="event-client",KA=86400,WA="https://pulse.walletconnect.org/batch";function GA(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,f=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,C=0,O=0,M=v.length;O!==M&&v[O]===0;)O++,x++;for(var R=(M-O)*u+1>>>0,T=new Uint8Array(R);O!==M;){for(var P=v[O],N=0,$=R-1;(P!==0||N<C)&&$!==-1;$--,N++)P+=256*T[$]>>>0,T[$]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");C=N,O++}for(var U=R-C;U!==R&&T[U]===0;)U++;for(var V=f.repeat(x);U<R;++U)V+=t.charAt(T[U]);return V}function d(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var x=0;if(v[x]!==" "){for(var C=0,O=0;v[x]===f;)C++,x++;for(var M=(v.length-x)*c+1>>>0,R=new Uint8Array(M);v[x];){var T=r[v.charCodeAt(x)];if(T===255)return;for(var P=0,N=M-1;(T!==0||P<O)&&N!==-1;N--,P++)T+=a*R[N]>>>0,R[N]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");O=P,x++}if(v[x]!==" "){for(var $=M-O;$!==M&&R[$]===0;)$++;for(var U=new Uint8Array(C+(M-$)),V=C;$!==M;)U[V++]=R[$++];return U}}}function p(v){var x=d(v);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var XA=GA,YA=XA;const fy=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ZA=t=>new TextEncoder().encode(t),JA=t=>new TextDecoder().decode(t);class QA{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class eS{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cy(this,e)}}class tS{constructor(e){this.decoders=e}or(e){return cy(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const cy=(t,e)=>new tS({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class rS{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new QA(e,r,n),this.decoder=new eS(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ac=({name:t,prefix:e,encode:r,decode:n})=>new rS(t,e,r,n),wa=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=YA(r,e);return ac({prefix:t,name:e,encode:n,decode:s=>fy(i(s))})},nS=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,f=0,c=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&f>>a)}if(a>=r||255&f<<8-a)throw new SyntaxError("Unexpected end of data");return o},iS=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let f=0;f<t.length;++f)for(a=a<<8|t[f],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},vr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>ac({prefix:e,name:t,encode(i){return iS(i,n,r)},decode(i){return nS(i,n,r,t)}}),sS=ac({prefix:"\0",name:"identity",encode:t=>JA(t),decode:t=>ZA(t)});var oS=Object.freeze({__proto__:null,identity:sS});const aS=vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fS=Object.freeze({__proto__:null,base2:aS});const cS=vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var uS=Object.freeze({__proto__:null,base8:cS});const hS=wa({prefix:"9",name:"base10",alphabet:"0123456789"});var lS=Object.freeze({__proto__:null,base10:hS});const dS=vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pS=vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var vS=Object.freeze({__proto__:null,base16:dS,base16upper:pS});const gS=vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yS=vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bS=vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mS=vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wS=vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xS=vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_S=vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ES=vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),AS=vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var SS=Object.freeze({__proto__:null,base32:gS,base32upper:yS,base32pad:bS,base32padupper:mS,base32hex:wS,base32hexupper:xS,base32hexpad:_S,base32hexpadupper:ES,base32z:AS});const IS=wa({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),CS=wa({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var MS=Object.freeze({__proto__:null,base36:IS,base36upper:CS});const OS=wa({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),DS=wa({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var TS=Object.freeze({__proto__:null,base58btc:OS,base58flickr:DS});const RS=vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),NS=vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),PS=vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),FS=vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var BS=Object.freeze({__proto__:null,base64:RS,base64pad:NS,base64url:PS,base64urlpad:FS});const uy=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),LS=uy.reduce((t,e,r)=>(t[r]=e,t),[]),$S=uy.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function kS(t){return t.reduce((e,r)=>(e+=LS[r],e),"")}function US(t){const e=[];for(const r of t){const n=$S[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const qS=ac({prefix:"🚀",name:"base256emoji",encode:kS,decode:US});var zS=Object.freeze({__proto__:null,base256emoji:qS}),VS=hy,op=128,jS=-128,HS=Math.pow(2,31);function hy(t,e,r){e=e||[],r=r||0;for(var n=r;t>=HS;)e[r++]=t&255|op,t/=128;for(;t&jS;)e[r++]=t&255|op,t>>>=7;return e[r]=t|0,hy.bytes=r-n+1,e}var KS=Eh,WS=128,ap=127;function Eh(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Eh.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&ap)<<i:(o&ap)*Math.pow(2,i),i+=7}while(o>=WS);return Eh.bytes=s-n,r}var GS=Math.pow(2,7),XS=Math.pow(2,14),YS=Math.pow(2,21),ZS=Math.pow(2,28),JS=Math.pow(2,35),QS=Math.pow(2,42),eI=Math.pow(2,49),tI=Math.pow(2,56),rI=Math.pow(2,63),nI=function(t){return t<GS?1:t<XS?2:t<YS?3:t<ZS?4:t<JS?5:t<QS?6:t<eI?7:t<tI?8:t<rI?9:10},iI={encode:VS,decode:KS,encodingLength:nI},ly=iI;const fp=(t,e,r=0)=>(ly.encode(t,e,r),e),cp=t=>ly.encodingLength(t),Ah=(t,e)=>{const r=e.byteLength,n=cp(t),i=n+cp(r),s=new Uint8Array(i+r);return fp(t,s,0),fp(r,s,n),s.set(e,i),new sI(t,r,e,s)};class sI{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const dy=({name:t,code:e,encode:r})=>new oI(t,e,r);class oI{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Ah(this.code,r):r.then(n=>Ah(this.code,n))}else throw Error("Unknown type, must be binary type")}}const py=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),aI=dy({name:"sha2-256",code:18,encode:py("SHA-256")}),fI=dy({name:"sha2-512",code:19,encode:py("SHA-512")});var cI=Object.freeze({__proto__:null,sha256:aI,sha512:fI});const vy=0,uI="identity",gy=fy,hI=t=>Ah(vy,gy(t)),lI={code:vy,name:uI,encode:gy,digest:hI};var dI=Object.freeze({__proto__:null,identity:lI});new TextEncoder,new TextDecoder;const up={...oS,...fS,...uS,...lS,...vS,...SS,...MS,...TS,...BS,...zS};({...cI,...dI});function pI(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function yy(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const hp=yy("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ru=yy("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=pI(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),vI={utf8:hp,"utf-8":hp,hex:up.base16,latin1:Ru,ascii:Ru,binary:Ru,...up};function gI(t,e="utf8"){const r=vI[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}class yI{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=bA,this.version=mA,this.initialized=!1,this.storagePrefix=Kn,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ge("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Dr(r,this.name)}get context(){return zr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,E2(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?A2(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class bI{constructor(e,r,n){this.core=e,this.logger=r,this.name=gA,this.randomSessionIdentifier=mh(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=ud(i);return e2(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=F9();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=ud(s),a=this.randomSessionIdentifier;return await h6(a,i,yA,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),f=B9(a,s);return this.setSymKey(f,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||uf(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=Y2(o),f=bs(s);if($1(a))return k9(f,o==null?void 0:o.encoding);if(L1(a)){const d=a.senderPublicKey,p=a.receiverPublicKey;i=await this.generateSharedKey(d,p)}const c=this.getSymKey(i),{type:u,senderPublicKey:h}=a;return L9({type:u,symKey:c,message:f,senderPublicKey:h,encoding:o==null?void 0:o.encoding})},this.decode=async(i,s,o)=>{this.isInitialized();const a=q9(s,o);if($1(a)){const f=U9(s,o==null?void 0:o.encoding);return Zs(f)}if(L1(a)){const f=a.receiverPublicKey,c=a.senderPublicKey;i=await this.generateSharedKey(f,c)}try{const f=this.getSymKey(i),c=$9({symKey:f,encoded:s,encoding:o==null?void 0:o.encoding});return Zs(c)}catch(f){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(f)}},this.getPayloadType=(i,s=$i)=>{const o=sa({encoded:i,encoding:s});return xs(o.type)},this.getPayloadSenderPublicKey=(i,s=$i)=>{const o=sa({encoded:i,encoding:s});return o.senderPublicKey?Mr(o.senderPublicKey,xr):void 0},this.core=e,this.logger=Dr(r,this.name),this.keychain=n||new yI(this.core,this.logger)}get context(){return zr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(np)}catch{e=mh(),await this.keychain.set(np,e)}return gI(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class mI extends hx{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=wA,this.version=xA,this.initialized=!1,this.storagePrefix=Kn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=yi(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=yi(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Dr(e,this.name),this.core=r}get context(){return zr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,E2(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?A2(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var wI=Object.defineProperty,xI=Object.defineProperties,_I=Object.getOwnPropertyDescriptors,lp=Object.getOwnPropertySymbols,EI=Object.prototype.hasOwnProperty,AI=Object.prototype.propertyIsEnumerable,dp=(t,e,r)=>e in t?wI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pp=(t,e)=>{for(var r in e||(e={}))EI.call(e,r)&&dp(t,r,e[r]);if(lp)for(var r of lp(e))AI.call(e,r)&&dp(t,r,e[r]);return t},vp=(t,e)=>xI(t,_I(e));class SI extends lx{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new On.EventEmitter,this.name=_A,this.queue=new Map,this.publishTimeout=de.toMiliseconds(de.ONE_MINUTE),this.initialPublishTimeout=de.toMiliseconds(de.ONE_SECOND*15),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||ip,f=Rf(s),c=(s==null?void 0:s.prompt)||!1,u=(s==null?void 0:s.tag)||0,h=(s==null?void 0:s.id)||hs().toString(),d={topic:n,message:i,opts:{ttl:a,relay:f,prompt:c,tag:u,id:h,attestation:s==null?void 0:s.attestation}},p=`Failed to publish payload, please try again. id:${h} tag:${u}`;try{const v=new Promise(async x=>{const C=({id:M})=>{d.opts.id===M&&(this.removeRequestFromQueue(M),this.relayer.events.removeListener(rr.publish,C),x(d))};this.relayer.events.on(rr.publish,C);const O=Bi(new Promise((M,R)=>{this.rpcPublish({topic:n,message:i,ttl:a,prompt:c,tag:u,id:h,attestation:s==null?void 0:s.attestation}).then(M).catch(T=>{this.logger.warn(T,T==null?void 0:T.message),R(T)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${u}`);try{await O,this.events.removeListener(rr.publish,C)}catch(M){this.queue.set(h,vp(pp({},d),{attempt:1})),this.logger.warn(M,M==null?void 0:M.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:i,opts:s}}),await Bi(v,this.publishTimeout,p)}catch(v){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(v),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw v}finally{this.queue.delete(h)}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Dr(r,this.name),this.registerEventListeners()}get context(){return zr(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:a,ttl:f=ip,prompt:c,tag:u,id:h,attestation:d}=e,p={method:Po(Rf().protocol).publish,params:{topic:o,message:a,ttl:f,prompt:c,tag:u,attestation:d},id:h};Ir((r=p.params)==null?void 0:r.prompt)&&((n=p.params)==null||delete n.prompt),Ir((i=p.params)==null?void 0:i.tag)&&((s=p.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const v=await this.relayer.request(p);return this.relayer.events.emit(rr.publish,e),this.logger.debug("Successfully Published Payload"),v}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,vp(pp({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish({topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a}),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(no.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(rr.connection_stalled);return}this.checkQueue()}),this.relayer.on(rr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class II{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var CI=Object.defineProperty,MI=Object.defineProperties,OI=Object.getOwnPropertyDescriptors,gp=Object.getOwnPropertySymbols,DI=Object.prototype.hasOwnProperty,TI=Object.prototype.propertyIsEnumerable,yp=(t,e,r)=>e in t?CI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Io=(t,e)=>{for(var r in e||(e={}))DI.call(e,r)&&yp(t,r,e[r]);if(gp)for(var r of gp(e))TI.call(e,r)&&yp(t,r,e[r]);return t},Nu=(t,e)=>MI(t,OI(e));class RI extends vx{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new II,this.events=new On.EventEmitter,this.name=OA,this.version=DA,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Kn,this.subscribeTimeout=de.toMiliseconds(de.ONE_MINUTE),this.initialSubscribeTimeout=de.toMiliseconds(de.ONE_SECOND*15),this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Rf(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,o)=>{const a=new de.Watch;a.start(i);const f=setInterval(()=>{(!this.pending.has(n)&&this.topics.includes(n)||this.cached.some(c=>c.topic===n))&&(clearInterval(f),a.stop(i),s(!0)),a.elapsed(i)>=TA&&(clearInterval(f),a.stop(i),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{await this.restore(),await this.onRestart()},this.checkPending=async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)},this.registerEventListeners=()=>{this.relayer.core.heartbeat.on(no.pulse,async()=>{await this.checkPending()}),this.events.on(Kr.created,async n=>{const i=Kr.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(Kr.deleted,async n=>{const i=Kr.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})},this.relayer=e,this.logger=Dr(r,this.name),this.clientId=""}get context(){return zr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Rf(n);await this.rpcUnsubscribe(e,r,i);const s=St("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(n==null?void 0:n.transportType)===Ct.relay&&await this.restartToComplete();const s={method:Po(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const a=this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Ct.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},de.toMiliseconds(de.ONE_SECOND)),a;const f=new Promise(async u=>{const h=d=>{d.topic===e&&(this.events.removeListener(Kr.created,h),u(d.id))};this.events.on(Kr.created,h);try{const d=await Bi(new Promise((p,v)=>{this.relayer.request(s).catch(x=>{this.logger.warn(x,x==null?void 0:x.message),v(x)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Kr.created,h),u(d)}catch{}}),c=await Bi(f,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!c&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return c?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(rr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Po(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Bi(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(rr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Po(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Bi(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(rr.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:Po(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Nu(Io({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Io({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Io({},r)),this.topicMap.set(r.topic,e),this.events.emit(Kr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Kr.deleted,Nu(Io({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Kr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Kr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(e.map(r=>Nu(Io({},r),{id:this.getSubscriptionId(r.topic)}))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await X5(de.toMiliseconds(de.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen()}getSubscriptionId(e){return yi(e+this.clientId)}}var NI=Object.defineProperty,bp=Object.getOwnPropertySymbols,PI=Object.prototype.hasOwnProperty,FI=Object.prototype.propertyIsEnumerable,mp=(t,e,r)=>e in t?NI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wp=(t,e)=>{for(var r in e||(e={}))PI.call(e,r)&&mp(t,r,e[r]);if(bp)for(var r of bp(e))FI.call(e,r)&&mp(t,r,e[r]);return t};class BI extends dx{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new On.EventEmitter,this.name=AA,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1,this.heartBeatTimeout=de.toMiliseconds(de.THIRTY_SECONDS+de.FIVE_SECONDS),this.requestsInFlight=[],this.connectTimeout=de.toMiliseconds(de.ONE_SECOND*15),this.request=async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||hs().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}},this.resetPingTimeout=()=>{if(Df())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null||i.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r,r==null?void 0:r.message)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(rr.connect)},this.onDisconnectHandler=()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.fatal(r,`Fatal socket error: ${r==null?void 0:r.message}`),this.events.emit(rr.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(sn.payload,this.onPayloadHandler),this.provider.on(sn.connect,this.onConnectHandler),this.provider.on(sn.disconnect,this.onDisconnectHandler),this.provider.on(sn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Dr(e.logger,this.name):Wf(il({level:e.logger||EA})),this.messages=new mI(this.logger,e.core),this.subscriber=new RI(this,this.logger),this.publisher=new SI(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||oy,this.projectId=e.projectId,P5()?this.packageName=u1():F5()&&(this.bundleId=u1()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return zr(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Ct.relay})}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",f;const c=u=>{u.topic===e&&(this.subscriber.off(Kr.created,c),f())};return await Promise.all([new Promise(u=>{f=u,this.subscriber.on(Kr.created,c)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,wp({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Bi(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await G1())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=Kt(de.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(rr.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(sn.disconnect,s),await Bi(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(sn.disconnect,s),clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),await new Promise(async(o,a)=>{const f=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(sn.disconnect,f),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(sn.disconnect,f)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,de.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(Df())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new oA(new uA(k5({sdkVersion:_h,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.warn(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Dl(e)){if(!e.method.endsWith(SA))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:Ct.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(wp({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else oc(e)&&this.events.emit(rr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(rr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Ml(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(sn.payload,this.onPayloadHandler),this.provider.off(sn.connect,this.onConnectHandler),this.provider.off(sn.disconnect,this.onDisconnectHandler),this.provider.off(sn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await G1();LE(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),clearTimeout(this.pingTimeout),this.events.emit(rr.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||this.connectPromise||(this.reconnectTimeout=setTimeout(async()=>{clearTimeout(this.reconnectTimeout),await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message))},de.toMiliseconds(IA))))}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.transportOpen()}}var LI=Object.defineProperty,xp=Object.getOwnPropertySymbols,$I=Object.prototype.hasOwnProperty,kI=Object.prototype.propertyIsEnumerable,_p=(t,e,r)=>e in t?LI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ep=(t,e)=>{for(var r in e||(e={}))$I.call(e,r)&&_p(t,r,e[r]);if(xp)for(var r of xp(e))kI.call(e,r)&&_p(t,r,e[r]);return t};class Cs extends px{constructor(e,r,n,i=Kn,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=CA,this.cached=[],this.initialized=!1,this.storagePrefix=Kn,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ir(o)?this.map.set(this.getKey(o),o):pE(o)?this.map.set(o.id,o):vE(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(f=>dA(a[f],o[f]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const f=Ep(Ep({},this.getData(o)),a);this.map.set(o,f),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())},this.logger=Dr(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return zr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class UI{constructor(e,r){this.core=e,this.logger=r,this.name=RA,this.version=NA,this.events=new wg,this.initialized=!1,this.storagePrefix=Kn,this.ignoredPayloadTypes=[wi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async n=>{this.isInitialized();const i=mh(),s=await this.core.crypto.setSymKey(i),o=Kt(de.FIVE_MINUTES),a={protocol:sy},f={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},c=U1({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(cs.create,f),this.core.expirer.set(s,o),await this.pairings.set(s,f),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:c}},this.pair=async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[Fn.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:f,methods:c}=k1(n.uri);i.props.properties.topic=s,i.addTrace(Fn.pairing_uri_validation_success),i.addTrace(Fn.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(Fn.existing_pairing),u.active)throw i.setError(di.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Fn.pairing_not_expired)}const h=f||Kt(de.FIVE_MINUTES),d={topic:s,relay:a,expiry:h,active:!1,methods:c};this.core.expirer.set(s,h),await this.pairings.set(s,d),i.addTrace(Fn.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(cs.create,d),i.addTrace(Fn.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Fn.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(di.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(p){throw i.setError(di.subscribe_pairing_topic_failure),p}return i.addTrace(Fn.subscribe_pairing_topic_success),d},this.activate=async({topic:n})=>{this.isInitialized();const i=Kt(de.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:f}=os();this.events.once(He("pairing_ping",s),({error:c})=>{c?f(c):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",St("USER_DISCONNECTED")),await this.deletePairing(i))},this.formatUriFromPairing=n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,f=this.core.crypto.keychain.get(i);return U1({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:f,relay:s,expiryTimestamp:o,methods:a})},this.sendRequest=async(n,i,s)=>{const o=ls(i,s),a=await this.core.crypto.encode(n,o),f=Ao[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,f),o.id},this.sendResult=async(n,i,s)=>{const o=Ml(n,s),a=await this.core.crypto.encode(i,o),f=await this.core.history.get(i,n),c=Ao[f.request.method].res;await this.core.relayer.publish(i,a,c),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=Ol(n,s),a=await this.core.crypto.encode(i,o),f=await this.core.history.get(i,n),c=Ao[f.request.method]?Ao[f.request.method].res:Ao.unregistered_method.res;await this.core.relayer.publish(i,a,c),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,St("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Pi(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(cs.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Ln(i)?this.events.emit(He("pairing_ping",s),{}):fn(i)&&this.events.emit(He("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(cs.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=St("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(St("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=(n,i)=>{var s;if(!kr(n)){const{message:a}=ge("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(di.malformed_pairing_uri),new Error(a)}if(!dE(n.uri)){const{message:a}=ge("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(di.malformed_pairing_uri),new Error(a)}const o=k1(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=ge("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(di.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ge("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(di.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&de.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(di.pairing_expired);const{message:a}=ge("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}},this.isValidPing=async n=>{if(!kr(n)){const{message:s}=ge("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!kr(n)){const{message:s}=ge("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!qt(n,!1)){const{message:i}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Pi(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ge("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Dr(r,this.name),this.pairings=new Cs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return zr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(rr.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(!this.pairings.keys.includes(r)||i===Ct.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(r,n);try{Dl(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):oc(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(on.expired,async e=>{const{topic:r}=I2(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(cs.expire,{topic:r}))})}}class qI extends ux{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new On.EventEmitter,this.name=PA,this.version=FA,this.cached=[],this.initialized=!1,this.storagePrefix=Kn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Kt(de.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(bn.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=fn(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(bn.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(bn.deleted,s)}}),this.persist()},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Dr(r,this.name)}get context(){return zr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:ls(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(bn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(bn.created,e=>{const r=bn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(bn.updated,e=>{const r=bn.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(bn.deleted,e=>{const r=bn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(no.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{de.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(bn.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class zI extends gx{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new On.EventEmitter,this.name=BA,this.version=LA,this.cached=[],this.initialized=!1,this.storagePrefix=Kn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(on.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(on.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Dr(r,this.name)}get context(){return zr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return U5(e);if(typeof e=="number")return q5(e);const{message:r}=ge("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(on.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;de.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(on.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(no.pulse,()=>this.checkExpirations()),this.events.on(on.created,e=>{const r=on.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(on.expired,e=>{const r=on.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(on.deleted,e=>{const r=on.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class VI extends yx{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,this.name=$A,this.verifyUrlV3=UA,this.storagePrefix=Kn,this.version=iy,this.init=async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&de.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async i=>{if(!va()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,f=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const c=ms.getDocument(),u=this.startAbortTimer(de.ONE_SECOND*5),h=await new Promise((d,p)=>{const v=()=>{window.removeEventListener("message",C),c.body.removeChild(x),p("attestation aborted")};this.abortController.signal.addEventListener("abort",v);const x=c.createElement("iframe");x.src=f,x.style.display="none",x.addEventListener("error",v,{signal:this.abortController.signal});const C=O=>{if(O.data&&typeof O.data=="string")try{const M=JSON.parse(O.data);if(M.type==="verify_attestation"){if(ch(M.attestation).payload.id!==o)return;clearInterval(u),c.body.removeChild(x),this.abortController.signal.removeEventListener("abort",v),window.removeEventListener("message",C),d(M.attestation===null?"":M.attestation)}}catch(M){this.logger.warn(M)}};c.body.appendChild(x),window.addEventListener("message",C,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(c){this.logger.warn(c)}return""},this.resolve=async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(ch(s).payload.id!==a)return;const c=await this.isValidJwtAttestation(s);if(c){if(!c.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return c}}if(!o)return;const f=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,f)},this.fetchAttestation=async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(de.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0},this.getVerifyUrl=i=>{let s=i||Yo;return qA.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Yo}`),s=Yo),s},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(de.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}},this.persistPublicKey=async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i},this.validateAttestation=(i,s)=>{const o=H9(i,s.publicKey),a={hasExpired:de.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}},this.logger=Dr(r,this.name),this.abortController=new AbortController,this.isDevEnv=ml(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return zr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),de.toMiliseconds(e))}}class jI extends bx{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=zA,this.registerDeviceToken=async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,f=`${VA}/${this.projectId}/clients`;await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})},this.logger=Dr(r,this.context)}}var HI=Object.defineProperty,Ap=Object.getOwnPropertySymbols,KI=Object.prototype.hasOwnProperty,WI=Object.prototype.propertyIsEnumerable,Sp=(t,e,r)=>e in t?HI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Co=(t,e)=>{for(var r in e||(e={}))KI.call(e,r)&&Sp(t,r,e[r]);if(Ap)for(var r of Ap(e))WI.call(e,r)&&Sp(t,r,e[r]);return t};class GI extends mx{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,this.context=HA,this.storagePrefix=Kn,this.storageVersion=jA,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!ml())try{const i={eventId:l1(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:_2(this.core.relayer.protocol,this.core.relayer.version,_h)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}},this.createEvent=i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:f}}=i,c=l1(),u=this.core.projectId||"",h=Date.now(),d=Co({eventId:c,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:f}},bundleId:u,domain:this.getAppDomain()},this.setMethods(c));return this.telemetryEnabled&&(this.events.set(c,d),this.shouldPersist=!0),d},this.getEvent=i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(f=>f.props.properties.topic===o);if(a)return Co(Co({},a),this.setMethods(a.eventId))},this.deleteEvent=i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(no.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{de.fromMiliseconds(Date.now())-de.fromMiliseconds(i.timestamp)>KA&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})},this.setMethods=i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)}),this.addTrace=(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)},this.setError=(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Co(Co({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}},this.sendEvent=async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${WA}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${_h}${s}`,{method:"POST",body:JSON.stringify(i)})},this.getAppDomain=()=>x2().url,this.logger=Dr(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var XI=Object.defineProperty,Ip=Object.getOwnPropertySymbols,YI=Object.prototype.hasOwnProperty,ZI=Object.prototype.propertyIsEnumerable,Cp=(t,e,r)=>e in t?XI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mp=(t,e)=>{for(var r in e||(e={}))YI.call(e,r)&&Cp(t,r,e[r]);if(Ip)for(var r of Ip(e))ZI.call(e,r)&&Cp(t,r,e[r]);return t};let JI=class by extends cx{constructor(e){var r;super(e),this.protocol=ny,this.version=iy,this.name=xh,this.events=new On.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.dispatchEnvelope=({topic:o,message:a,sessionExists:f})=>{if(!o||!a)return;const c={topic:o,message:a,publishedAt:Date.now(),transportType:Ct.link_mode};this.relayer.onLinkMessageEvent(c,{sessionExists:f})},this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||oy,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=il({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:pA.logger,name:xh}),{logger:i,chunkLoggerController:s}=fx({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Dr(i,this.name),this.heartbeat=new hw,this.crypto=new bI(this,this.logger,e==null?void 0:e.keychain),this.history=new qI(this,this.logger),this.expirer=new zI(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Hw(Mp(Mp({},vA),e==null?void 0:e.storageOptions)),this.relayer=new BI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new UI(this,this.logger),this.verify=new VI(this,this.logger,this.storage),this.echoClient=new jI(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new GI(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new by(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(MA,n),r}get context(){return zr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(sp,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(sp)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const Pf=JI,my="wc",wy=2,xy="client",Tl=`${my}@${wy}:${xy}:`,Pu={name:xy,logger:"error"},Op="WALLETCONNECT_DEEPLINK_CHOICE",QI="proposal",eC="Proposal expired",tC="session",Ps=de.SEVEN_DAYS,rC="engine",Jt={wc_sessionPropose:{req:{ttl:de.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1104},res:{ttl:de.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1106},res:{ttl:de.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:de.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:de.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1112},res:{ttl:de.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1114},res:{ttl:de.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:de.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:de.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1119}}},Fu={min:de.FIVE_MINUTES,max:de.SEVEN_DAYS},Pn={idle:"IDLE",active:"ACTIVE"},nC="request",iC=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],sC="wc",oC="auth",aC="authKeys",fC="pairingTopics",cC="requests",fc=`${sC}@${1.5}:${oC}:`,hf=`${fc}:PUB_KEY`;var uC=Object.defineProperty,hC=Object.defineProperties,lC=Object.getOwnPropertyDescriptors,Dp=Object.getOwnPropertySymbols,dC=Object.prototype.hasOwnProperty,pC=Object.prototype.propertyIsEnumerable,Tp=(t,e,r)=>e in t?uC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$t=(t,e)=>{for(var r in e||(e={}))dC.call(e,r)&&Tp(t,r,e[r]);if(Dp)for(var r of Dp(e))pC.call(e,r)&&Tp(t,r,e[r]);return t},wn=(t,e)=>hC(t,lC(e));class vC extends xx{constructor(e){super(e),this.name=rC,this.events=new wg,this.initialized=!1,this.requestQueue={state:Pn.idle,queue:[]},this.sessionRequestQueue={state:Pn.idle,queue:[]},this.requestQueueDelay=de.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Jt)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},de.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=wn($t({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:f}=n;let c=i,u,h=!1;try{if(c){const T=this.client.core.pairing.pairings.get(c);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),T}if(!c||!h){const{topic:T,uri:P}=await this.client.core.pairing.create();c=T,u=P}if(!c){const{message:T}=ge("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(T)}const d=await this.client.core.crypto.generateKeyPair(),p=Jt.wc_sessionPropose.req.ttl||de.FIVE_MINUTES,v=Kt(p),x=$t({requiredNamespaces:s,optionalNamespaces:o,relays:f??[{protocol:sy}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:v,pairingTopic:c},a&&{sessionProperties:a}),{reject:C,resolve:O,done:M}=os(p,eC);this.events.once(He("session_connect"),async({error:T,session:P})=>{if(T)C(T);else if(P){P.self.publicKey=d;const N=wn($t({},P),{pairingTopic:x.pairingTopic,requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces,transportType:Ct.relay});await this.client.session.set(P.topic,N),await this.setExpiry(P.topic,P.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:P.peer.metadata}),this.cleanupDuplicatePairings(N),O(N)}});const R=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:x,throwOnFailedPublish:!0});return await this.setProposal(R,$t({id:R},x)),{uri:u,approval:M}},this.pair=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}},this.approve=async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[mn.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(U){throw o.setError(ts.no_internet_connection),U}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(U){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(ts.proposal_not_found),U}try{await this.isValidApprove(r)}catch(U){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ts.session_approve_namespace_validation_failure),U}const{id:a,relayProtocol:f,namespaces:c,sessionProperties:u,sessionConfig:h}=r,d=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:v,requiredNamespaces:x,optionalNamespaces:C}=d;let O=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:p});O||(O=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:mn.session_approve_started,properties:{topic:p,trace:[mn.session_approve_started,mn.session_namespaces_validation_success]}}));const M=await this.client.core.crypto.generateKeyPair(),R=v.publicKey,T=await this.client.core.crypto.generateSharedKey(M,R),P=$t($t({relay:{protocol:f??"irn"},namespaces:c,controller:{publicKey:M,metadata:this.client.metadata},expiry:Kt(Ps)},u&&{sessionProperties:u}),h&&{sessionConfig:h}),N=Ct.relay;O.addTrace(mn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:N})}catch(U){throw O.setError(ts.subscribe_session_topic_failure),U}O.addTrace(mn.subscribe_session_topic_success);const $=wn($t({},P),{topic:T,requiredNamespaces:x,optionalNamespaces:C,pairingTopic:p,acknowledged:!1,self:P.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:M,transportType:Ct.relay});await this.client.session.set(T,$),O.addTrace(mn.store_session);try{O.addTrace(mn.publishing_session_settle),await this.sendRequest({topic:T,method:"wc_sessionSettle",params:P,throwOnFailedPublish:!0}).catch(U=>{throw O==null||O.setError(ts.session_settle_publish_failure),U}),O.addTrace(mn.session_settle_publish_success),O.addTrace(mn.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:f??"irn"},responderPublicKey:M},throwOnFailedPublish:!0}).catch(U=>{throw O==null||O.setError(ts.session_approve_publish_failure),U}),O.addTrace(mn.session_approve_publish_success)}catch(U){throw this.client.logger.error(U),this.client.session.delete(T,St("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),U}return this.client.core.eventClient.deleteEvent({eventId:O.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:v.metadata}),await this.client.proposal.delete(a,St("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(T,Kt(Ps)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}},this.reject=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:Jt.wc_sessionPropose.reject}),await this.client.proposal.delete(n,St("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=os(),f=vi(),c=hs().toString(),u=this.client.session.get(n).namespaces;return this.events.once(He("session_update",f),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:f,relayRpcId:c}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:s}},this.extend=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(f){throw this.client.logger.error("extend() -> isValidExtend() failed"),f}const{topic:n}=r,i=vi(),{done:s,resolve:o,reject:a}=os();return this.events.once(He("session_extend",i),({error:f})=>{f?a(f):o()}),await this.setExpiry(n,Kt(Ps)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(f=>{a(f)}),{acknowledged:s}},this.request=async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(v){throw this.client.logger.error("request() -> isValidRequest() failed"),v}const{chainId:n,request:i,topic:s,expiry:o=Jt.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Ct.relay&&await this.confirmOnlineStateOrThrow();const f=vi(),c=hs().toString(),{done:u,resolve:h,reject:d}=os(o,"Request expired. Please try again.");this.events.once(He("session_request",f),({error:v,result:x})=>{v?d(v):h(x)});const p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);return p?(await this.sendRequest({clientRpcId:f,relayRpcId:c,topic:s,method:"wc_sessionRequest",params:{request:wn($t({},i),{expiryTimestamp:Kt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(v=>d(v)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:f}),await u()):await Promise.all([new Promise(async v=>{await this.sendRequest({clientRpcId:f,relayRpcId:c,topic:s,method:"wc_sessionRequest",params:{request:wn($t({},i),{expiryTimestamp:Kt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(x=>d(x)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:f}),v()}),new Promise(async v=>{var x;if(!((x=a.sessionConfig)!=null&&x.disableDeepLink)){const C=await H5(this.client.core.storage,Op);await z5({id:f,topic:s,wcDeepLink:C})}v()}),u()]).then(v=>v[2])},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===Ct.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ln(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):fn(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=vi(),s=hs().toString(),{done:o,resolve:a,reject:f}=os();this.events.once(He("session_ping",i),({error:c})=>{c?f(c):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))},this.emit=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=hs().toString(),a=vi();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})},this.disconnect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:St("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=ge("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>hE(n,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Ct.link_mode:Ct.relay;o===Ct.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:f="",uri:c,domain:u,nonce:h,type:d,exp:p,nbf:v,methods:x=[],expiry:C}=r,O=[...r.resources||[]],{topic:M,uri:R}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:M,uri:R}});const T=await this.client.core.crypto.generateKeyPair(),P=uf(T);if(await Promise.all([this.client.auth.authKeys.set(hf,{responseTopic:P,publicKey:T}),this.client.auth.pairingTopics.set(P,{topic:P,pairingTopic:M})]),await this.client.core.relayer.subscribe(P,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${M}`),x.length>0){const{namespace:I}=ff(a[0]);let A=F7(I,"request",x);cf(O)&&(A=L7(A,O.pop())),O.push(A)}const N=C&&C>Jt.wc_sessionAuthenticate.req.ttl?C:Jt.wc_sessionAuthenticate.req.ttl,$={authPayload:{type:d??"caip122",chains:a,statement:f,aud:c,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:p,nbf:v,resources:O},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Kt(N)},U={eip155:{chains:a,methods:[...new Set(["personal_sign",...x])],events:["chainChanged","accountsChanged"]}},V={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:M,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Kt(Jt.wc_sessionPropose.req.ttl)},{done:H,resolve:B,reject:y}=os(N,"Request expired"),b=async({error:I,session:A})=>{if(this.events.off(He("session_request",g),l),I)y(I);else if(A){A.self.publicKey=T,await this.client.session.set(A.topic,A),await this.setExpiry(A.topic,A.expiry),M&&await this.client.core.pairing.updateMetadata({topic:M,metadata:A.peer.metadata});const m=this.client.session.get(A.topic);await this.deleteProposal(w),B({session:m})}},l=async I=>{var A,m,S;if(await this.deletePendingAuthRequest(g,{message:"fulfilled",code:0}),I.error){const Z=St("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return I.error.code===Z.code?void 0:(this.events.off(He("session_connect"),b),y(I.error.message))}await this.deleteProposal(w),this.events.off(He("session_connect"),b);const{cacaos:_,responder:F}=I.result,Y=[],D=[];for(const Z of _){await w1({cacao:Z,projectId:this.client.core.projectId})||(this.client.logger.error(Z,"Signature verification failed"),y(St("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ee}=Z,ue=cf(ee.resources),he=[dh(ee.iss)],L=Tf(ee.iss);if(ue){const z=x1(ue),K=_1(ue);Y.push(...z),he.push(...K)}for(const z of he)D.push(`${z}:${L}`)}const j=await this.client.core.crypto.generateSharedKey(T,F.publicKey);let G;Y.length>0&&(G={topic:j,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:F,controller:F.publicKey,expiry:Kt(Ps),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:M,namespaces:j1([...new Set(Y)],[...new Set(D)]),transportType:o},await this.client.core.relayer.subscribe(j,{transportType:o}),await this.client.session.set(j,G),M&&await this.client.core.pairing.updateMetadata({topic:M,metadata:F.metadata}),G=this.client.session.get(j)),(A=this.client.metadata.redirect)!=null&&A.linkMode&&(m=F.metadata.redirect)!=null&&m.linkMode&&(S=F.metadata.redirect)!=null&&S.universal&&n&&(this.client.core.addLinkModeSupportedApp(F.metadata.redirect.universal),this.client.session.update(j,{transportType:Ct.link_mode})),B({auths:_,session:G})},g=vi(),w=vi();this.events.once(He("session_connect"),b),this.events.once(He("session_request",g),l);let E;try{if(s){const I=ls("wc_sessionAuthenticate",$,g);this.client.core.history.set(M,I);const A=await this.client.core.crypto.encode("",I,{type:ma,encoding:_o});E=qa(n,M,A)}else await Promise.all([this.sendRequest({topic:M,method:"wc_sessionAuthenticate",params:$,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:g}),this.sendRequest({topic:M,method:"wc_sessionPropose",params:V,expiry:Jt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:w})])}catch(I){throw this.events.off(He("session_connect"),b),this.events.off(He("session_request",g),l),I}return await this.setProposal(w,$t({id:w},V)),await this.setAuthRequest(g,{request:wn($t({},$),{verifyContext:{}}),pairingTopic:M,transportType:o}),{uri:E??R,response:H}},this.approveSessionAuthenticate=async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[rs.authenticated_session_approve_started]}});try{this.isInitialized()}catch(C){throw s.setError(So.no_internet_connection),C}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(So.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Ct.relay;a===Ct.relay&&await this.confirmOnlineStateOrThrow();const f=o.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),u=uf(f),h={type:wi,receiverPublicKey:f,senderPublicKey:c},d=[],p=[];for(const C of i){if(!await w1({cacao:C,projectId:this.client.core.projectId})){s.setError(So.invalid_cacao);const P=St("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:P,encodeOpts:h}),new Error(P.message)}s.addTrace(rs.cacaos_verified);const{p:O}=C,M=cf(O.resources),R=[dh(O.iss)],T=Tf(O.iss);if(M){const P=x1(M),N=_1(M);d.push(...P),R.push(...N)}for(const P of R)p.push(`${P}:${T}`)}const v=await this.client.core.crypto.generateSharedKey(c,f);s.addTrace(rs.create_authenticated_session_topic);let x;if((d==null?void 0:d.length)>0){x={topic:v,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:f,metadata:o.requester.metadata},controller:f,expiry:Kt(Ps),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:j1([...new Set(d)],[...new Set(p)]),transportType:a},s.addTrace(rs.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:a})}catch(C){throw s.setError(So.subscribe_authenticated_session_topic_failure),C}s.addTrace(rs.subscribe_authenticated_session_topic_success),await this.client.session.set(v,x),s.addTrace(rs.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(rs.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(C){throw s.setError(So.authenticated_session_approve_publish_failure),C}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:x}},this.rejectSessionAuthenticate=async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===Ct.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),f=uf(o),c={type:wi,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:f,error:i,encodeOpts:c,rpcOpts:Jt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,St("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();const{request:n,iss:i}=r;return F2(n,i)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:f}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,St("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(Op).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===i&&this.deletePendingSessionRequest(c.id,St("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Pn.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})},this.deleteProposal=async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(ts.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,St("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Pn.idle,this.client.events.emit("session_request_expire",{id:r}))},this.deletePendingAuthRequest=async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))},this.setProposal=async(r,n)=>{this.client.core.expirer.set(r,Kt(Jt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)},this.setAuthRequest=async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=Ct.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})},this.setPendingSessionRequest=async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Kt(Jt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:f,throwOnFailedPublish:c,appLink:u}=r,h=ls(i,s,f);let d;const p=!!u;try{const C=p?_o:$i;d=await this.client.core.crypto.encode(n,h,{encoding:C})}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),C}let v;if(iC.includes(i)){const C=yi(JSON.stringify(h)),O=yi(d);v=await this.client.core.verify.register({id:O,decryptedId:C})}const x=Jt[i].req;if(x.attestation=v,o&&(x.ttl=o),a&&(x.id=a),this.client.core.history.set(n,h),p){const C=qa(u,n,d);await global.Linking.openURL(C,this.client.name)}else{const C=Jt[i].req;o&&(C.ttl=o),a&&(C.id=a),c?(C.internal=wn($t({},C.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,d,C)):this.client.core.relayer.publish(n,d,C).catch(O=>this.client.logger.error(O))}return h.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:f}=r,c=Ml(n,s);let u;const h=f&&typeof(global==null?void 0:global.Linking)<"u";try{const p=h?_o:$i;u=await this.client.core.crypto.encode(i,c,wn($t({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),p}let d;try{d=await this.client.core.history.get(i,n)}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),p}if(h){const p=qa(f,i,u);await global.Linking.openURL(p,this.client.name)}else{const p=Jt[d.request.method].res;o?(p.internal=wn($t({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,p)):this.client.core.relayer.publish(i,u,p).catch(v=>this.client.logger.error(v))}await this.client.core.history.resolve(c)},this.sendError=async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:f}=r,c=Ol(n,s);let u;const h=f&&typeof(global==null?void 0:global.Linking)<"u";try{const p=h?_o:$i;u=await this.client.core.crypto.encode(i,c,wn($t({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),p}let d;try{d=await this.client.core.history.get(i,n)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),p}if(h){const p=qa(f,i,u);await global.Linking.openURL(p,this.client.name)}else{const p=a||Jt[d.request.method].res;this.client.core.relayer.publish(i,u,p)}await this.client.core.history.resolve(c)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Pi(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Pi(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Pn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Pn.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Pn.idle},this.processRequest=async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,f=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:f}))switch(f){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=ge("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.shouldIgnorePairingRequest=r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:f}=i;try{const c=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),c==null||c.setError(di.proposal_listener_not_found)),this.isValidConnect($t({},i.params));const u=a.expiryTimestamp||Kt(Jt.wc_sessionPropose.req.ttl),h=$t({id:f,pairingTopic:n,expiryTimestamp:u},a);await this.setProposal(f,h);const d=await this.getVerifyContext({attestationId:s,hash:yi(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});c==null||c.addTrace(Fn.emit_session_proposal),this.client.events.emit("session_proposal",{id:f,params:h,verifyContext:d})}catch(c){await this.sendError({id:f,topic:n,error:c,rpcOpts:Jt.wc_sessionPropose.autoReject}),this.client.logger.error(c)}},this.onSessionProposeResponse=async(r,n,i)=>{const{id:s}=n;if(Ln(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const f=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const c=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(f,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const h=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(fn(n)){await this.client.proposal.delete(s,St("USER_DISCONNECTED"));const o=He("session_connect");if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(He("session_connect"),{error:n.error})}},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:f,namespaces:c,sessionProperties:u,sessionConfig:h}=n.params,d=wn($t($t({topic:r,relay:o,expiry:f,namespaces:c,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{sessionConfig:h}),{transportType:Ct.relay}),p=He("session_connect");if(this.events.listenerCount(p)===0)throw new Error(`emitting ${p} without any listeners 997`);this.events.emit(He("session_connect"),{session:d}),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Ln(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(He("session_approve",i),{})):fn(n)&&(await this.client.session.delete(r,St("USER_DISCONNECTED")),this.events.emit(He("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=Eo.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:St("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate($t({topic:r},i));try{Eo.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(f){throw Eo.delete(o),f}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n,s=He("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ln(n)?this.events.emit(He("session_update",i),{}):fn(n)&&this.events.emit(He("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Kt(Ps)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n,s=He("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ln(n)?this.events.emit(He("session_extend",i),{}):fn(n)&&this.events.emit(He("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n,s=He("session_ping",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{Ln(n)?this.events.emit(He("session_ping",i),{}):fn(n)&&this.events.emit(He("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(rr.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:St("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async r=>{var n,i,s;const{topic:o,payload:a,attestation:f,encryptedId:c,transportType:u}=r,{id:h,params:d}=a;try{await this.isValidRequest($t({topic:o},d));const p=this.client.session.get(o),v=await this.getVerifyContext({attestationId:f,hash:yi(JSON.stringify(ls("wc_sessionRequest",d,h))),encryptedId:c,metadata:p.peer.metadata,transportType:u}),x={id:h,topic:o,params:d,verifyContext:v};await this.setPendingSessionRequest(x),u===Ct.link_mode&&(n=p.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=p.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(x):(this.addSessionRequestToSessionRequestQueue(x),this.processSessionRequestQueue())}catch(p){await this.sendError({id:h,topic:o,error:p}),this.client.logger.error(p)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n,s=He("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ln(n)?this.events.emit(He("session_request",i),{result:n.result}):fn(n)&&this.events.emit(He("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=Eo.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit($t({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),Eo.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionAuthenticateResponse=(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Ln(n)?this.events.emit(He("session_request",i),{result:n.result}):fn(n)&&this.events.emit(He("session_request",i),{error:n.error})},this.onSessionAuthenticateRequest=async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:f}=r;try{const{requester:c,authPayload:u,expiryTimestamp:h}=s.params,d=await this.getVerifyContext({attestationId:o,hash:yi(JSON.stringify(s)),encryptedId:a,metadata:c.metadata,transportType:f}),p={requester:c,pairingTopic:i,id:s.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:p,pairingTopic:i,transportType:f}),f===Ct.link_mode&&(n=c.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(c){this.client.logger.error(c);const u=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,f),p={type:wi,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:s.id,topic:i,error:c,encodeOpts:p,rpcOpts:Jt.wc_sessionAuthenticate.autoReject,appLink:d})}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Pn.idle,this.processSessionRequestQueue()},de.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=He("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(He("session_request",s.request.id),{error:n})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Pn.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Pn.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}},this.emitSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:ls("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id)})},this.isValidConnect=async r=>{if(!kr(r)){const{message:f}=ge("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(f)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Ir(n)||await this.isValidPairingTopic(n),!EE(a)){const{message:f}=ge("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(f)}!Ir(i)&&oa(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Ir(s)&&oa(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Ir(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=_E(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!kr(r))throw new Error(ge("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const a=this.client.proposal.get(n),f=Ou(i,"approve()");if(f)throw new Error(f.message);const c=wh(a.requiredNamespaces,i,"approve()");if(c)throw new Error(c.message);if(!qt(s,!0)){const{message:u}=ge("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(u)}Ir(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!kr(r)){const{message:s}=ge("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!SE(i)){const{message:s}=ge("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!kr(r)){const{message:c}=ge("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(c)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!Q2(n)){const{message:c}=ge("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(c)}const a=gE(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const f=Ou(s,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(Pi(o)){const{message:c}=ge("EXPIRED","onSessionSettleRequest()");throw new Error(c)}},this.isValidUpdate=async r=>{if(!kr(r)){const{message:f}=ge("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(f)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Ou(i,"update()");if(o)throw new Error(o.message);const a=wh(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!kr(r)){const{message:i}=ge("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!kr(r)){const{message:f}=ge("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(f)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!K1(a,s)){const{message:f}=ge("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(f)}if(!IE(i)){const{message:f}=ge("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(f)}if(!OE(a,s,i.method)){const{message:f}=ge("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(f)}if(o&&!NE(o,Fu)){const{message:f}=ge("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Fu.min} and ${Fu.max}`);throw new Error(f)}},this.isValidRespond=async r=>{var n;if(!kr(r)){const{message:o}=ge("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!CE(s)){const{message:o}=ge("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!kr(r)){const{message:i}=ge("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!kr(r)){const{message:a}=ge("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!K1(o,s)){const{message:a}=ge("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!ME(i)){const{message:a}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!DE(o,s,i.name)){const{message:a}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!kr(r)){const{message:i}=ge("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidAuthenticate=r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!qt(i,!1))throw new Error("uri is required parameter");if(!qt(s,!1))throw new Error("domain is required parameter");if(!qt(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(f=>ff(f).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=ff(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,f={verified:{verifyUrl:o.verifyUrl||Yo,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Ct.link_mode){const u=this.getAppLinkIfEnabled(o,a);return f.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",f}const c=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});c&&(f.verified.origin=c.origin,f.verified.isScam=c.isScam,f.verified.validation=c.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.warn(c)}return this.client.logger.debug(`Verify context: ${JSON.stringify(f)}`),f},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!qt(i,!1)){const{message:s}=ge("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})},this.getPendingAuthRequest=r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0},this.addToRecentlyDeleted=(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}},this.checkRecentlyDeleted=r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}},this.isLinkModeEnabled=(r,n)=>{var i,s,o,a,f,c,u,h,d;return!r||n!==Ct.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((c=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:c.universal)!==""&&((u=r==null?void 0:r.redirect)==null?void 0:u.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0},this.handleLinkModeMessage=({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=h1(r,"topic")||"",i=decodeURIComponent(h1(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:Ct.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})},this.registerLinkModeListeners=async()=>{var r;if(ml()||Wi()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(rr.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(hf)?this.client.auth.authKeys.get(hf):{publicKey:void 0},a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===Ct.link_mode?_o:$i});try{Dl(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:yi(n)})):oc(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})}catch(f){this.client.logger.error(f)}}registerExpirerEvents(){this.client.core.expirer.on(on.expired,async e=>{const{topic:r,id:n}=I2(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ge("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ge("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(cs.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(cs.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!qt(e,!1)){const{message:r}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Pi(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ge("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!qt(e,!1)){const{message:r}=ge("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=ge("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Pi(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=ge("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=ge("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(qt(e,!1)){const{message:r}=ge("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ge("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!AE(e)){const{message:r}=ge("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ge("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Pi(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=ge("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class gC extends Cs{constructor(e,r){super(e,r,QI,Tl),this.core=e,this.logger=r}}class _y extends Cs{constructor(e,r){super(e,r,tC,Tl),this.core=e,this.logger=r}}class yC extends Cs{constructor(e,r){super(e,r,nC,Tl,n=>n.id),this.core=e,this.logger=r}}class bC extends Cs{constructor(e,r){super(e,r,aC,fc,()=>hf),this.core=e,this.logger=r}}class mC extends Cs{constructor(e,r){super(e,r,fC,fc),this.core=e,this.logger=r}}class wC extends Cs{constructor(e,r){super(e,r,cC,fc,n=>n.id),this.core=e,this.logger=r}}class xC{constructor(e,r){this.core=e,this.logger=r,this.authKeys=new bC(this.core,this.logger),this.pairingTopics=new mC(this.core,this.logger),this.requests=new wC(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class Rl extends wx{constructor(e){super(e),this.protocol=my,this.version=wy,this.name=Pu.name,this.events=new On.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.authenticate=async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}},this.approveSessionAuthenticate=async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.rejectSessionAuthenticate=async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.name=(e==null?void 0:e.name)||Pu.name,this.metadata=(e==null?void 0:e.metadata)||x2(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Wf(il({level:(e==null?void 0:e.logger)||Pu.logger}));this.core=(e==null?void 0:e.core)||new Pf(e),this.logger=Dr(r,this.name),this.session=new _y(this.core,this.logger),this.proposal=new gC(this.core,this.logger),this.pendingRequest=new yC(this.core,this.logger),this.engine=new vC(this),this.auth=new xC(this.core,this.logger)}static async init(e){const r=new Rl(e);return await r.initialize(),r}get context(){return zr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},de.toMiliseconds(de.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const _C=_y,EC=Rl;var Sh={exports:{}},Gs=typeof Reflect=="object"?Reflect:null,Rp=Gs&&typeof Gs.apply=="function"?Gs.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},lf;Gs&&typeof Gs.ownKeys=="function"?lf=Gs.ownKeys:Object.getOwnPropertySymbols?lf=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:lf=function(t){return Object.getOwnPropertyNames(t)};function AC(t){console&&console.warn&&console.warn(t)}var Np=Number.isNaN||function(t){return t!==t};function Et(){Et.init.call(this)}Sh.exports=Et,Sh.exports.once=MC,Et.EventEmitter=Et,Et.prototype._events=void 0,Et.prototype._eventsCount=0,Et.prototype._maxListeners=void 0;var Pp=10;function df(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Et,"defaultMaxListeners",{enumerable:!0,get:function(){return Pp},set:function(t){if(typeof t!="number"||t<0||Np(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Pp=t}}),Et.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Et.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Np(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ey(t){return t._maxListeners===void 0?Et.defaultMaxListeners:t._maxListeners}Et.prototype.getMaxListeners=function(){return Ey(this)},Et.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[t];if(a===void 0)return!1;if(typeof a=="function")Rp(a,this,e);else for(var f=a.length,c=Ay(a,f),r=0;r<f;++r)Rp(c[r],this,e);return!0};function Fp(t,e,r,n){var i,s,o;if(df(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Ey(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,AC(a)}return t}Et.prototype.addListener=function(t,e){return Fp(this,t,e,!1)},Et.prototype.on=Et.prototype.addListener,Et.prototype.prependListener=function(t,e){return Fp(this,t,e,!0)};function SC(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Bp(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=SC.bind(n);return i.listener=r,n.wrapFn=i,i}Et.prototype.once=function(t,e){return df(e),this.on(t,Bp(this,t,e)),this},Et.prototype.prependOnceListener=function(t,e){return df(e),this.prependListener(t,Bp(this,t,e)),this},Et.prototype.removeListener=function(t,e){var r,n,i,s,o;if(df(e),n=this._events,n===void 0)return this;if(r=n[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){o=r[s].listener,i=s;break}if(i<0)return this;i===0?r.shift():IC(r,i),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,o||e)}return this},Et.prototype.off=Et.prototype.removeListener,Et.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var i=Object.keys(r),s;for(n=0;n<i.length;++n)s=i[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function Lp(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?CC(i):Ay(i,i.length)}Et.prototype.listeners=function(t){return Lp(this,t,!0)},Et.prototype.rawListeners=function(t){return Lp(this,t,!1)},Et.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):$p.call(t,e)},Et.prototype.listenerCount=$p;function $p(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Et.prototype.eventNames=function(){return this._eventsCount>0?lf(this._events):[]};function Ay(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function IC(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function CC(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function MC(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Sy(t,e,s,{once:!0}),e!=="error"&&OC(t,i,{once:!0})})}function OC(t,e,r){typeof t.on=="function"&&Sy(t,"error",e,r)}function Sy(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}const DC="WalletKit";class TC{constructor(e){this.opts=e}}class RC{constructor(e){this.client=e}}var NC=Object.defineProperty,PC=Object.defineProperties,FC=Object.getOwnPropertyDescriptors,kp=Object.getOwnPropertySymbols,BC=Object.prototype.hasOwnProperty,LC=Object.prototype.propertyIsEnumerable,Up=(t,e,r)=>e in t?NC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$C=(t,e)=>{for(var r in e||(e={}))BC.call(e,r)&&Up(t,r,e[r]);if(kp)for(var r of kp(e))LC.call(e,r)&&Up(t,r,e[r]);return t},kC=(t,e)=>PC(t,FC(e));class UC extends RC{constructor(e){super(e),this.init=async()=>{this.signClient=await EC.init({core:this.client.core,metadata:this.client.metadata,signConfig:this.client.signConfig}),this.signClient.core.eventClient.init().catch(r=>{this.client.logger.warn(r)})},this.pair=async r=>{await this.client.core.pairing.pair(r)},this.approveSession=async r=>{const{topic:n,acknowledged:i}=await this.signClient.approve(kC($C({},r),{id:r.id,namespaces:r.namespaces,sessionProperties:r.sessionProperties,sessionConfig:r.sessionConfig}));return await i(),this.signClient.session.get(n)},this.rejectSession=async r=>await this.signClient.reject(r),this.updateSession=async r=>await this.signClient.update(r),this.extendSession=async r=>await this.signClient.extend(r),this.respondSessionRequest=async r=>await this.signClient.respond(r),this.disconnectSession=async r=>await this.signClient.disconnect(r),this.emitSessionEvent=async r=>await this.signClient.emit(r),this.getActiveSessions=()=>this.signClient.session.getAll().reduce((r,n)=>(r[n.topic]=n,r),{}),this.getPendingSessionProposals=()=>this.signClient.proposal.getAll(),this.getPendingSessionRequests=()=>this.signClient.getPendingSessionRequests(),this.approveSessionAuthenticate=async r=>await this.signClient.approveSessionAuthenticate(r),this.rejectSessionAuthenticate=async r=>await this.signClient.rejectSessionAuthenticate(r),this.formatAuthMessage=r=>this.signClient.formatAuthMessage(r),this.registerDeviceToken=r=>this.client.core.echoClient.registerDeviceToken(r),this.on=(r,n)=>(this.setEvent(r,"off"),this.setEvent(r,"on"),this.client.events.on(r,n)),this.once=(r,n)=>(this.setEvent(r,"off"),this.setEvent(r,"once"),this.client.events.once(r,n)),this.off=(r,n)=>(this.setEvent(r,"off"),this.client.events.off(r,n)),this.removeListener=(r,n)=>(this.setEvent(r,"removeListener"),this.client.events.removeListener(r,n)),this.onSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onSessionProposal=r=>{this.client.events.emit("session_proposal",r)},this.onSessionDelete=r=>{this.client.events.emit("session_delete",r)},this.onProposalExpire=r=>{this.client.events.emit("proposal_expire",r)},this.onSessionRequestExpire=r=>{this.client.events.emit("session_request_expire",r)},this.onSessionRequestAuthenticate=r=>{this.client.events.emit("session_authenticate",r)},this.setEvent=(r,n)=>{switch(r){case"session_request":this.signClient.events[n]("session_request",this.onSessionRequest);break;case"session_proposal":this.signClient.events[n]("session_proposal",this.onSessionProposal);break;case"session_delete":this.signClient.events[n]("session_delete",this.onSessionDelete);break;case"proposal_expire":this.signClient.events[n]("proposal_expire",this.onProposalExpire);break;case"session_request_expire":this.signClient.events[n]("session_request_expire",this.onSessionRequestExpire);break;case"session_authenticate":this.signClient.events[n]("session_authenticate",this.onSessionRequestAuthenticate);break}},this.signClient={}}}const qC={decryptMessage:async t=>{const e={core:new Pf({storageOptions:t.storageOptions,storage:t.storage})};await e.core.crypto.init();const r=e.core.crypto.decode(t.topic,t.encryptedMessage);return e.core=null,r},getMetadata:async t=>{const e={core:new Pf({storageOptions:t.storageOptions,storage:t.storage}),sessionStore:null};e.sessionStore=new _C(e.core,e.core.logger),await e.sessionStore.init();const r=e.sessionStore.get(t.topic),n=r==null?void 0:r.peer.metadata;return e.core=null,e.sessionStore=null,n}},Iy=class extends TC{constructor(t){super(t),this.events=new Sh.exports,this.on=(e,r)=>this.engine.on(e,r),this.once=(e,r)=>this.engine.once(e,r),this.off=(e,r)=>this.engine.off(e,r),this.removeListener=(e,r)=>this.engine.removeListener(e,r),this.pair=async e=>{try{return await this.engine.pair(e)}catch(r){throw this.logger.error(r.message),r}},this.approveSession=async e=>{try{return await this.engine.approveSession(e)}catch(r){throw this.logger.error(r.message),r}},this.rejectSession=async e=>{try{return await this.engine.rejectSession(e)}catch(r){throw this.logger.error(r.message),r}},this.updateSession=async e=>{try{return await this.engine.updateSession(e)}catch(r){throw this.logger.error(r.message),r}},this.extendSession=async e=>{try{return await this.engine.extendSession(e)}catch(r){throw this.logger.error(r.message),r}},this.respondSessionRequest=async e=>{try{return await this.engine.respondSessionRequest(e)}catch(r){throw this.logger.error(r.message),r}},this.disconnectSession=async e=>{try{return await this.engine.disconnectSession(e)}catch(r){throw this.logger.error(r.message),r}},this.emitSessionEvent=async e=>{try{return await this.engine.emitSessionEvent(e)}catch(r){throw this.logger.error(r.message),r}},this.getActiveSessions=()=>{try{return this.engine.getActiveSessions()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionProposals=()=>{try{return this.engine.getPendingSessionProposals()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.registerDeviceToken=e=>{try{return this.engine.registerDeviceToken(e)}catch(r){throw this.logger.error(r.message),r}},this.approveSessionAuthenticate=e=>{try{return this.engine.approveSessionAuthenticate(e)}catch(r){throw this.logger.error(r.message),r}},this.rejectSessionAuthenticate=e=>{try{return this.engine.rejectSessionAuthenticate(e)}catch(r){throw this.logger.error(r.message),r}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(r){throw this.logger.error(r.message),r}},this.metadata=t.metadata,this.name=t.name||DC,this.signConfig=t.signConfig,this.core=t.core,this.logger=this.core.logger,this.engine=new UC(this)}static async init(t){const e=new Iy(t);return await e.initialize(),e}async initialize(){this.logger.trace("Initialized");try{await this.engine.init(),this.logger.info("WalletKit Initialization Success")}catch(t){throw this.logger.info("WalletKit Initialization Failure"),this.logger.error(t.message),t}}};let Cy=Iy;Cy.notifications=qC;const zC=Cy;function VC(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function jC(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var HC=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KC=function(t){HC(e,t);function e(r,n){var i=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),VC(s,i.prototype),jC(s),s}return e}(Error),WC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tr=function(t){WC(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(KC),GC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),En=function(t){GC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Tr),XC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ce=function(t){XC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Tr),YC=function(){function t(e){if(this.binarizer=e,e===null)throw new Ce("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var s=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),ZC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cr=function(t){ZC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Tr),JC=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Dt=function(){function t(){}return t.arraycopy=function(e,r,n,i,s){for(;s--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),QC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nl=function(t){QC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Tr),eM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qp=function(t){eM(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(Nl),tM=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qr=function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new Ce("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new qp(r);if(n>e)throw new qp(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var s=tM(e),o=s.next();!o.done;o=s.next()){var a=o.value;i=31*i+a}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,s=new Int32Array(i);return Dt.arraycopy(e,r,s,0,i),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,s=e.length-1;i<=s;){var o=s+i>>1,a=n(r,e[o]);if(a>0)i=o+1;else if(a<0)s=o-1;else return o}return-i-1},t.numberComparator=function(e,r){return e-r},t}(),Ye=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),ir=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Dt.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),s=n[i];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++i===o)return r;s=n[i]}var a=i*32+Ye.numberOfTrailingZeros(s);return a>r?r:a},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),s=~n[i];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++i===o)return r;s=~n[i]}var a=i*32+Ye.numberOfTrailingZeros(s);return a>r?r:a},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Ce;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),s=this.bits,o=n;o<=i;o++){var a=o>n?0:e&31,f=o<i?31:r&31,c=(2<<f)-(1<<a);s[o]|=c}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Ce;if(r===e)return!0;r--;for(var i=Math.floor(e/32),s=Math.floor(r/32),o=this.bits,a=i;a<=s;a++){var f=a>i?0:e&31,c=a<s?31:r&31,u=(2<<c)-(1<<f)&4294967295;if((o[a]&u)!==(n?u:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Ce("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Ce("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var s=0;s<i;s++){for(var o=0,a=0;a<8;a++)this.get(e)&&(o|=1<<7-a),e++;r[n+s]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,s=0;s<n;s++){var o=i[s];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-s]=o}if(this.size!==n*32){for(var a=n*32-this.size,f=e[0]>>>a,s=1;s<n;s++){var c=e[s];f|=c<<32-a,e[s-1]=f,f=c>>>a}e[n-1]=f}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&qr.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+qr.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t}(),Ih;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ih||(Ih={}));const Bt=Ih;var rM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ye=function(t){rM(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Tr),nM=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bt;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(bt||(bt={}));var Xt=function(){function t(e,r,n){for(var i,s,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var f=this.values,c=0,u=f.length;c!==u;c++){var h=f[c];t.VALUES_TO_ECI.set(h,this)}try{for(var d=nM(o),p=d.next();!p.done;p=d.next()){var v=p.value;t.NAME_TO_ECI.set(v,this)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ye("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new ye("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new ye("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(bt.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(bt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(bt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(bt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(bt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(bt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(bt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(bt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(bt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(bt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(bt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(bt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(bt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(bt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(bt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(bt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(bt.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(bt.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(bt.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(bt.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(bt.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(bt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(bt.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(bt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(bt.Big5,28,"Big5"),t.GB18030=new t(bt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(bt.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),iM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pf=function(t){iM(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Tr),jn=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Xt?e:Xt.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",s=0,o=e.length;s<o;s++){var a=e[s].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(n.equals(Xt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new pf("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Xt.UTF8)||e.equals(Xt.ISO8859_1)||e.equals(Xt.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],s=0;s<n.length;s++)i.push(n[s].charCodeAt(0));return new Uint8Array(i)},t}(),Ot=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return jn.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Bt.CHARACTER_SET)!==void 0)return r.get(Bt.CHARACTER_SET).toString();for(var n=e.length,i=!0,s=!0,o=!0,a=0,f=0,c=0,u=0,h=0,d=0,p=0,v=0,x=0,C=0,O=0,M=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,R=0;R<n&&(i||s||o);R++){var T=e[R]&255;o&&(a>0?T&128?a--:o=!1:T&128&&(T&64?(a++,T&32?(a++,T&16?(a++,T&8?o=!1:u++):c++):f++):o=!1)),i&&(T>127&&T<160?i=!1:T>159&&(T<192||T===215||T===247)&&O++),s&&(h>0?T<64||T===127||T>252?s=!1:h--:T===128||T===160||T>239?s=!1:T>160&&T<224?(d++,v=0,p++,p>x&&(x=p)):T>127?(h++,p=0,v++,v>C&&(C=v)):(p=0,v=0))}return o&&a>0&&(o=!1),s&&h>0&&(s=!1),o&&(M||f+c+u>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||x>=3||C>=3)?t.SHIFT_JIS:i&&s?x===2&&d===2||O*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:s?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function s(a,f,c,u,h,d){if(a==="%%")return"%";if(r[++i]!==void 0){a=u?parseInt(u.substr(1)):void 0;var p=h?parseInt(h.substr(1)):void 0,v;switch(d){case"s":v=r[i];break;case"c":v=r[i][0];break;case"f":v=parseFloat(r[i]).toFixed(a);break;case"p":v=parseFloat(r[i]).toPrecision(a);break;case"e":v=parseFloat(r[i]).toExponential(a);break;case"x":v=parseInt(r[i]).toString(p||16);break;case"d":v=parseFloat(parseInt(r[i],p||10).toPrecision(a)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(p);for(var x=parseInt(c),C=c&&c[0]+""=="0"?"0":" ";v.length<x;)v=f!==void 0?v+C:C+v;return v}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)},t.getBytes=function(e,r){return jn.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Xt.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Xt.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Xt.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),_t=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ot.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+r.length)},t}(),Wn=function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new Ce("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),s=0;s<r;s++)for(var o=e[s],a=0;a<n;a++)o[a]&&i.set(a,s);return i},t.parseFromString=function(e,r,n){if(e===null)throw new Ce("stringRepresentation cannot be null");for(var i=new Array(e.length),s=0,o=0,a=-1,f=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(s>o){if(a===-1)a=s-o;else if(s-o!==a)throw new Ce("row lengths do not match");o=s,f++}c++}else if(e.substring(c,c+r.length)===r)c+=r.length,i[s]=!0,s++;else if(e.substring(c,c+n.length)===n)c+=n.length,i[s]=!1,s++;else throw new Ce("illegal character encountered: "+e.substring(c));if(s>o){if(a===-1)a=s-o;else if(s-o!==a)throw new Ce("row lengths do not match");f++}for(var u=new t(a,f),h=0;h<s;h++)i[h]&&u.set(Math.floor(h%a),Math.floor(h/a));return u},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ce("input matrix dimensions do not match");for(var r=new ir(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,s=0,o=this.height;s<o;s++)for(var a=s*n,f=e.getRow(s,r).getBitArray(),c=0;c<n;c++)i[a+c]^=f[c]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new Ce("Left and top must be nonnegative");if(i<1||n<1)throw new Ce("Height and width must be at least 1");var s=e+n,o=r+i;if(o>this.height||s>this.width)throw new Ce("The region must fit inside the matrix");for(var a=this.rowSize,f=this.bits,c=r;c<o;c++)for(var u=c*a,h=e;h<s;h++)f[u+Math.floor(h/32)]|=1<<(h&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new ir(this.width):r.clear();for(var n=this.rowSize,i=this.bits,s=e*n,o=0;o<n;o++)r.setBulk(o*32,i[s+o]);return r},t.prototype.setRow=function(e,r){Dt.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new ir(e),i=new ir(e),s=0,o=Math.floor((r+1)/2);s<o;s++)n=this.getRow(s,n),i=this.getRow(r-1-s,i),n.reverse(),i.reverse(),this.setRow(s,i),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,s=e,o=r,a=-1,f=-1,c=0;c<r;c++)for(var u=0;u<n;u++){var h=i[c*n+u];if(h!==0){if(c<o&&(o=c),c>f&&(f=c),u*32<s){for(var d=0;!(h<<31-d&4294967295);)d++;u*32+d<s&&(s=u*32+d)}if(u*32+31>a){for(var d=31;!(h>>>d);)d--;u*32+d>a&&(a=u*32+d)}}}return a<s||f<o?null:Int32Array.from([s,o,a-s+1,f-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,s=n%e*32,o=r[n],a=0;!(o<<31-a&4294967295);)a++;return s+=a,Int32Array.from([s,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),s=Math.floor(n%e)*32,o=r[n],a=31;!(o>>>a);)a--;return s+=a,Int32Array.from([s,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&qr.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+qr.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new _t,s=0,o=this.height;s<o;s++){for(var a=0,f=this.width;a<f;a++)i.append(this.get(a,s)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),sM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie=function(t){sM(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Tr),oM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aM=function(t){oM(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),s=i.getWidth();n==null||n.getSize()<s?n=new ir(s):n.clear(),this.initArrays(s);for(var o=i.getRow(r,this.luminances),a=this.buckets,f=0;f<s;f++)a[(o[f]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(a);if(s<3)for(var f=0;f<s;f++)(o[f]&255)<c&&n.set(f);else for(var u=o[0]&255,h=o[1]&255,f=1;f<s-1;f++){var d=o[f+1]&255;(h*4-u-d)/2<c&&n.set(f),u=h,h=d}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),s=new Wn(n,i);this.initArrays(n);for(var o=this.buckets,a=1;a<5;a++)for(var f=Math.floor(i*a/5),c=r.getRow(f,this.luminances),u=Math.floor(n*4/5),h=Math.floor(n/5);h<u;h++){var d=c[h]&255;o[d>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(o),v=r.getMatrix(),a=0;a<i;a++)for(var x=a*n,h=0;h<n;h++){var d=v[x+h]&255;d<p&&s.set(h,a)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,s=0,o=0,a=0;a<n;a++)r[a]>o&&(s=a,o=r[a]),r[a]>i&&(i=r[a]);for(var f=0,c=0,a=0;a<n;a++){var u=a-s,h=r[a]*u*u;h>c&&(f=a,c=h)}if(s>f){var d=s;s=f,f=d}if(f-s<=n/16)throw new ie;for(var p=f-1,v=-1,a=f-1;a>s;a--){var x=a-s,h=x*x*(f-a)*(i-r[a]);h>v&&(p=a,v=h)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(JC),fM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cM=function(t){fM(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var a=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&a++;var f=e.calculateBlackPoints(s,o,a,n,i),c=new Wn(n,i);e.calculateThresholdForBlock(s,o,a,n,i,f,c),this.matrix=c}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,s,o,a,f){for(var c=o-e.BLOCK_SIZE,u=s-e.BLOCK_SIZE,h=0;h<i;h++){var d=h<<e.BLOCK_SIZE_POWER;d>c&&(d=c);for(var p=e.cap(h,2,i-3),v=0;v<n;v++){var x=v<<e.BLOCK_SIZE_POWER;x>u&&(x=u);for(var C=e.cap(v,2,n-3),O=0,M=-2;M<=2;M++){var R=a[p+M];O+=R[C-2]+R[C-1]+R[C]+R[C+1]+R[C+2]}var T=O/25;e.thresholdBlock(r,x,d,T,s,f)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,s,o,a){for(var f=0,c=i*o+n;f<e.BLOCK_SIZE;f++,c+=o)for(var u=0;u<e.BLOCK_SIZE;u++)(r[c+u]&255)<=s&&a.set(n+u,i+f)},e.calculateBlackPoints=function(r,n,i,s,o){for(var a=o-e.BLOCK_SIZE,f=s-e.BLOCK_SIZE,c=new Array(i),u=0;u<i;u++){c[u]=new Int32Array(n);var h=u<<e.BLOCK_SIZE_POWER;h>a&&(h=a);for(var d=0;d<n;d++){var p=d<<e.BLOCK_SIZE_POWER;p>f&&(p=f);for(var v=0,x=255,C=0,O=0,M=h*s+p;O<e.BLOCK_SIZE;O++,M+=s){for(var R=0;R<e.BLOCK_SIZE;R++){var T=r[M+R]&255;v+=T,T<x&&(x=T),T>C&&(C=T)}if(C-x>e.MIN_DYNAMIC_RANGE)for(O++,M+=s;O<e.BLOCK_SIZE;O++,M+=s)for(var R=0;R<e.BLOCK_SIZE;R++)v+=r[M+R]&255}var P=v>>e.BLOCK_SIZE_POWER*2;if(C-x<=e.MIN_DYNAMIC_RANGE&&(P=x/2,u>0&&d>0)){var N=(c[u-1][d]+2*c[u][d-1]+c[u-1][d-1])/4;x<N&&(P=N)}c[u][d]=P}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(aM),cc=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new pf("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new pf("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new pf("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new _t,n=0;n<this.height;n++){for(var i=this.getRow(n,e),s=0;s<this.width;s++){var o=i[s]&255,a=void 0;o<64?a="#":o<128?a="+":o<192?a=".":a=" ",r.append(a)}r.append(`
`)}return r.toString()},t}(),uM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pl=function(t){uM(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),s=this.getWidth(),o=0;o<s;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),s=0;s<n;s++)i[s]=255-(r[s]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,s){return new e(this.delegate.crop(r,n,i,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(cc),hM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lM=function(t){hM(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(n.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,i){for(var s=new Uint8ClampedArray(n*i),o=0,a=0,f=r.length;o<f;o+=4,a++){var c=void 0,u=r[o+3];if(u===0)c=255;else{var h=r[o],d=r[o+1],p=r[o+2];c=306*h+601*d+117*p+512>>10}s[a]=c}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Ce("Requested row is outside the image: "+r);var i=this.getWidth(),s=r*i;return n===null?n=this.buffer.slice(s,s+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(s,s+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,s){return t.prototype.crop.call(this,r,n,i,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(s))*o+Math.abs(Math.sin(s))*a),c=Math.ceil(Math.abs(Math.sin(s))*o+Math.abs(Math.cos(s))*a);return n.width=f,n.height=c,i.translate(f/2,c/2),i.rotate(s),i.drawImage(this.canvas,o/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Pl(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e}(cc),dM=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),_r=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function f(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,f)}c((n=n.apply(t,e||[])).next())})},Er=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return f([c,u])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},pM=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ao=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return _r(this,void 0,void 0,function(){var e,r,n,i,s,o,a,f,c,u,h,d;return Er(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=pM(e),i=n.next();!i.done;i=n.next())s=i.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(a=s.deviceId||s.id,f=s.label||"Video device "+(r.length+1),c=s.groupId,u={deviceId:a,label:f,kind:o,groupId:c},r.push(u))}catch(v){h={error:v}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return _r(this,void 0,void 0,function(){var e;return Er(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new dM(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return _r(this,void 0,void 0,function(){var r;return Er(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return _r(this,void 0,void 0,function(){return Er(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return _r(this,void 0,void 0,function(){var n,i;return Er(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return _r(this,void 0,void 0,function(){var n;return Er(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return _r(this,void 0,void 0,function(){var n,i;return Er(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return i=s.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return _r(this,void 0,void 0,function(){return Er(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return _r(this,void 0,void 0,function(){var i,s;return Er(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},s={video:i},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return _r(this,void 0,void 0,function(){var i;return Er(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=s.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return _r(this,void 0,void 0,function(){var i;return Er(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=s.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return _r(this,void 0,void 0,function(){var n;return Er(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return _r(this,void 0,void 0,function(){return Er(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new En("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new En("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new En("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new En("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new En("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new En("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new En("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new En("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new En("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new En("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return _r(this,void 0,void 0,function(){return Er(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return _r(this,void 0,void 0,function(){return Er(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(o,a){if(i._stopAsyncDecode){a(new ie("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var f=i.decode(e);o(f)}catch(d){var c=r&&d instanceof ie,u=d instanceof cr||d instanceof ye,h=u&&n;if(c||h)return setTimeout(s,i._timeBetweenDecodingAttempts,o,a);a(d)}};return new Promise(function(o,a){return s(o,a)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(i,n.timeBetweenScansMillis)}catch(f){r(null,f);var o=f instanceof cr||f instanceof ye,a=f instanceof ie;(o||a)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype._isHTMLVideoElement=function(e){var r=e;return r.videoWidth!==0},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),n=new lM(r),i=new cM(n);return new YC(i)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Vr=function(){function t(e,r,n,i,s,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=Dt.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=s,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=s,this.resultMetadata=null,o==null?this.timestamp=Dt.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Dt.arraycopy(r,0,n,0,r.length),Dt.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Ch;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ch||(Ch={}));const De=Ch;var Mh;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Mh||(Mh={}));const ur=Mh;var uc=function(){function t(e,r,n,i,s,o){s===void 0&&(s=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Bo=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),Ui=function(){function t(e,r){if(r.length===0)throw new Ce;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),Dt.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,s=r.length;i!==s;i++){var o=r[i];n=Bo.addOrSubtract(n,o)}return n}n=r[0];for(var a=r.length,f=this.field,i=1;i<a;i++)n=Bo.addOrSubtract(f.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var s=new Int32Array(n.length),o=n.length-r.length;Dt.arraycopy(n,0,s,0,o);for(var a=o;a<n.length;a++)s[a]=Bo.addOrSubtract(r[a-o],n[a]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,s=i.length,o=new Int32Array(n+s-1),a=this.field,f=0;f<n;f++)for(var c=r[f],u=0;u<s;u++)o[f+u]=Bo.addOrSubtract(o[f+u],a.multiply(c,i[u]));return new t(a,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),s=this.coefficients,o=0;o<r;o++)i[o]=n.multiply(s[o],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Ce;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,s=new Int32Array(i+e),o=this.field,a=0;a<i;a++)s[a]=o.multiply(n[a],r);return new t(o,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ce("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,s=e.getCoefficient(e.getDegree()),o=r.inverse(s);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),f=r.multiply(i.getCoefficient(i.getDegree()),o),c=e.multiplyByMonomial(a,f),u=r.buildMonomial(a,f);n=n.addOrSubtract(u),i=i.addOrSubtract(c)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),vM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),My=function(t){vM(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Tr),gM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ur=function(t){gM(e,t);function e(r,n,i){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=i;for(var o=new Int32Array(n),a=1,f=0;f<n;f++)o[f]=a,a*=2,a>=n&&(a^=r,a&=n-1);s.expTable=o;for(var c=new Int32Array(n),f=0;f<n-1;f++)c[o[f]]=f;return s.logTable=c,s.zero=new Ui(s,Int32Array.from([0])),s.one=new Ui(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Ce;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Ui(this,i)},e.prototype.inverse=function(r){if(r===0)throw new My;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ye.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Bo),yM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),za=function(t){yM(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Tr),bM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xa=function(t){bM(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Tr),hc=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new Ui(n,e),s=new Int32Array(r),o=!0,a=0;a<r;a++){var f=i.evaluateAt(n.exp(a+n.getGeneratorBase()));s[s.length-1-a]=f,f!==0&&(o=!1)}if(!o)for(var c=new Ui(n,s),u=this.runEuclideanAlgorithm(n.buildMonomial(r,1),c,r),h=u[0],d=u[1],p=this.findErrorLocations(h),v=this.findErrorMagnitudes(d,p),a=0;a<p.length;a++){var x=e.length-1-n.log(p[a]);if(x<0)throw new za("Bad error location");e[x]=Ur.addOrSubtract(e[x],v[a])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var s=this.field,o=e,a=r,f=s.getZero(),c=s.getOne();a.getDegree()>=(n/2|0);){var u=o,h=f;if(o=a,f=c,o.isZero())throw new za("r_{i-1} was zero");a=u;for(var d=s.getZero(),p=o.getCoefficient(o.getDegree()),v=s.inverse(p);a.getDegree()>=o.getDegree()&&!a.isZero();){var x=a.getDegree()-o.getDegree(),C=s.multiply(a.getCoefficient(a.getDegree()),v);d=d.addOrSubtract(s.buildMonomial(x,C)),a=a.addOrSubtract(o.multiplyByMonomial(x,C))}if(c=d.multiply(f).addOrSubtract(h),a.getDegree()>=o.getDegree())throw new xa("Division algorithm failed to reduce polynomial?")}var O=c.getCoefficient(0);if(O===0)throw new za("sigmaTilde(0) was zero");var M=s.inverse(O),R=c.multiplyScalar(M),T=a.multiplyScalar(M);return[R,T]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,s=this.field,o=1;o<s.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=s.inverse(o),i++);if(i!==r)throw new za("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),s=this.field,o=0;o<n;o++){for(var a=s.inverse(r[o]),f=1,c=0;c<n;c++)if(o!==c){var u=s.multiply(r[c],a),h=u&1?u&-2:u|1;f=s.multiply(f,h)}i[o]=s.multiply(e.evaluateAt(a),s.inverse(f)),s.getGeneratorBase()!==0&&(i[o]=s.multiply(i[o],a))}return i},t}(),fr;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(fr||(fr={}));var zp=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),s=t.convertBoolArrayToByteArray(i),o=t.getEncodedData(i),a=new uc(s,o,null,null);return a.setNumBits(i.length),a},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=fr.UPPER,i=fr.UPPER,s="",o=0;o<r;)if(i===fr.BINARY){if(r-o<5)break;var a=t.readCode(e,o,5);if(o+=5,a===0){if(r-o<11)break;a=t.readCode(e,o,11)+31,o+=11}for(var f=0;f<a;f++){if(r-o<8){o=r;break}var c=t.readCode(e,o,8);s+=Ot.castAsNonUtf8Char(c),o+=8}i=n}else{var u=i===fr.DIGIT?4:5;if(r-o<u)break;var c=t.readCode(e,o,u);o+=u;var h=t.getCharacter(i,c);h.startsWith("CTRL_")?(n=i,i=t.getTable(h.charAt(5)),h.charAt(6)==="L"&&(n=i)):(s+=h,i=n)}return s},t.getTable=function(e){switch(e){case"L":return fr.LOWER;case"P":return fr.PUNCT;case"M":return fr.MIXED;case"D":return fr.DIGIT;case"B":return fr.BINARY;case"U":default:return fr.UPPER}},t.getCharacter=function(e,r){switch(e){case fr.UPPER:return t.UPPER_TABLE[r];case fr.LOWER:return t.LOWER_TABLE[r];case fr.MIXED:return t.MIXED_TABLE[r];case fr.PUNCT:return t.PUNCT_TABLE[r];case fr.DIGIT:return t.DIGIT_TABLE[r];default:throw new xa("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=Ur.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=Ur.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=Ur.AZTEC_DATA_10):(n=12,r=Ur.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),s=e.length/n;if(s<i)throw new ye;for(var o=e.length%n,a=new Int32Array(s),f=0;f<s;f++,o+=n)a[f]=t.readCode(e,o,n);try{var c=new hc(r);c.decode(a,s-i)}catch(C){throw new ye(C)}for(var u=(1<<n)-1,h=0,f=0;f<i;f++){var d=a[f];if(d===0||d===u)throw new ye;(d===1||d===u-1)&&h++}for(var p=new Array(i*n-h),v=0,f=0;f<i;f++){var d=a[f];if(d===1||d===u-1)p.fill(d>1,v,v+n-1),v+=n-1;else for(var x=n-1;x>=0;--x)p[v++]=(d&1<<x)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,s=new Int32Array(i),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var a=0;a<s.length;a++)s[a]=a;else for(var f=i+1+2*Ye.truncDivision(Ye.truncDivision(i,2)-1,15),c=i/2,u=Ye.truncDivision(f,2),a=0;a<c;a++){var h=a+Ye.truncDivision(a,15);s[c-a-1]=u-h-1,s[c+a]=u+h+1}for(var a=0,d=0;a<n;a++){for(var p=(n-a)*4+(r?9:12),v=a*2,x=i-1-v,C=0;C<p;C++)for(var O=C*2,M=0;M<2;M++)o[d+O+M]=e.get(s[v+M],s[v+C]),o[d+2*p+O+M]=e.get(s[v+C],s[x-M]),o[d+4*p+O+M]=e.get(s[x-M],s[x-C]),o[d+6*p+O+M]=e.get(s[x-C],s[v+M]);d+=p*8}return o},t.readCode=function(e,r,n){for(var i=0,s=r;s<r+n;s++)i<<=1,e[s]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),nt=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var s=e-n,o=r-i;return Math.sqrt(s*s+o*o)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var s=e[n];r+=s}return r},t}(),Oh=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Ee=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Oh.floatToIntBits(this.x)+Oh.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),s,o,a;if(n>=r&&n>=i?(o=e[0],s=e[1],a=e[2]):i>=n&&i>=r?(o=e[1],s=e[0],a=e[2]):(o=e[2],s=e[0],a=e[1]),this.crossProductZ(s,o,a)<0){var f=s;s=a,a=f}e[0]=s,e[1]=o,e[2]=a},t.distance=function(e,r){return nt.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,s=r.y;return(n.x-i)*(e.y-s)-(n.y-s)*(e.x-i)},t}(),Fl=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),mM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wM=function(t){mM(e,t);function e(r,n,i,s,o){var a=t.call(this,r,n)||this;return a.compact=i,a.nbDatablocks=s,a.nbLayers=o,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Fl),Dh=function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=i-s,this.downInit=i+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,s=!1,o=!0,a=!1,f=!1,c=!1,u=!1,h=!1,d=this.width,p=this.height;o;){o=!1;for(var v=!0;(v||!f)&&r<d;)v=this.containsBlackPoint(n,i,r,!1),v?(r++,o=!0,f=!0):f||r++;if(r>=d){s=!0;break}for(var x=!0;(x||!c)&&i<p;)x=this.containsBlackPoint(e,r,i,!0),x?(i++,o=!0,c=!0):c||i++;if(i>=p){s=!0;break}for(var C=!0;(C||!u)&&e>=0;)C=this.containsBlackPoint(n,i,e,!1),C?(e--,o=!0,u=!0):u||e--;if(e<0){s=!0;break}for(var O=!0;(O||!h)&&n>=0;)O=this.containsBlackPoint(e,r,n,!0),O?(n--,o=!0,h=!0):h||n--;if(n<0){s=!0;break}o&&(a=!0)}if(!s&&a){for(var M=r-e,R=null,T=1;R===null&&T<M;T++)R=this.getBlackPointOnSegment(e,i-T,e+T,i);if(R==null)throw new ie;for(var P=null,T=1;P===null&&T<M;T++)P=this.getBlackPointOnSegment(e,n+T,e+T,n);if(P==null)throw new ie;for(var N=null,T=1;N===null&&T<M;T++)N=this.getBlackPointOnSegment(r,n+T,r-T,n);if(N==null)throw new ie;for(var $=null,T=1;$===null&&T<M;T++)$=this.getBlackPointOnSegment(r,i-T,r-T,i);if($==null)throw new ie;return this.centerEdges($,R,N,P)}else throw new ie},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var s=nt.round(nt.distance(e,r,n,i)),o=(n-e)/s,a=(i-r)/s,f=this.image,c=0;c<s;c++){var u=nt.round(e+c*o),h=nt.round(r+c*a);if(f.get(u,h))return new Ee(u,h)}return null},t.prototype.centerEdges=function(e,r,n,i){var s=e.getX(),o=e.getY(),a=r.getX(),f=r.getY(),c=n.getX(),u=n.getY(),h=i.getX(),d=i.getY(),p=t.CORR;return s<this.width/2?[new Ee(h-p,d+p),new Ee(a+p,f+p),new Ee(c-p,u-p),new Ee(s+p,o-p)]:[new Ee(h+p,d+p),new Ee(a+p,f-p),new Ee(c-p,u+p),new Ee(s-p,o-p)]},t.prototype.containsBlackPoint=function(e,r,n,i){var s=this.image;if(i){for(var o=e;o<=r;o++)if(s.get(o,n))return!0}else for(var a=e;a<=r;a++)if(s.get(n,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),Vp=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),s=!0,o=0;o<r.length&&s;o+=2){var a=Math.floor(r[o]),f=Math.floor(r[o+1]);if(a<-1||a>n||f<-1||f>i)throw new ie;s=!1,a===-1?(r[o]=0,s=!0):a===n&&(r[o]=n-1,s=!0),f===-1?(r[o+1]=0,s=!0):f===i&&(r[o+1]=i-1,s=!0)}s=!0;for(var o=r.length-2;o>=0&&s;o-=2){var a=Math.floor(r[o]),f=Math.floor(r[o+1]);if(a<-1||a>n||f<-1||f>i)throw new ie;s=!1,a===-1?(r[o]=0,s=!0):a===n&&(r[o]=n-1,s=!0),f===-1?(r[o+1]=0,s=!0):f===i&&(r[o+1]=i-1,s=!0)}},t}(),Oy=function(){function t(e,r,n,i,s,o,a,f,c){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=s,this.a32=o,this.a13=a,this.a23=f,this.a33=c}return t.quadrilateralToQuadrilateral=function(e,r,n,i,s,o,a,f,c,u,h,d,p,v,x,C){var O=t.quadrilateralToSquare(e,r,n,i,s,o,a,f),M=t.squareToQuadrilateral(c,u,h,d,p,v,x,C);return M.times(O)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,s=this.a13,o=this.a21,a=this.a22,f=this.a23,c=this.a31,u=this.a32,h=this.a33,d=0;d<r;d+=2){var p=e[d],v=e[d+1],x=s*p+f*v+h;e[d]=(n*p+o*v+c)/x,e[d+1]=(i*p+a*v+u)/x}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,s=this.a13,o=this.a21,a=this.a22,f=this.a23,c=this.a31,u=this.a32,h=this.a33,d=e.length,p=0;p<d;p++){var v=e[p],x=r[p],C=s*v+f*x+h;e[p]=(n*v+o*x+c)/C,r[p]=(i*v+a*x+u)/C}},t.squareToQuadrilateral=function(e,r,n,i,s,o,a,f){var c=e-n+s-a,u=r-i+o-f;if(c===0&&u===0)return new t(n-e,s-n,e,i-r,o-i,r,0,0,1);var h=n-s,d=a-s,p=i-o,v=f-o,x=h*v-d*p,C=(c*v-d*u)/x,O=(h*u-c*p)/x;return new t(n-e+C*n,a-e+O*a,e,i-r+C*i,f-r+O*f,r,C,O,1)},t.quadrilateralToSquare=function(e,r,n,i,s,o,a,f){return t.squareToQuadrilateral(e,r,n,i,s,o,a,f).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),xM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_M=function(t){xM(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,s,o,a,f,c,u,h,d,p,v,x,C,O,M,R,T){var P=Oy.quadrilateralToQuadrilateral(s,o,a,f,c,u,h,d,p,v,x,C,O,M,R,T);return this.sampleGridWithTransform(r,n,i,P)},e.prototype.sampleGridWithTransform=function(r,n,i,s){if(n<=0||i<=0)throw new ie;for(var o=new Wn(n,i),a=new Float32Array(2*n),f=0;f<i;f++){for(var c=a.length,u=f+.5,h=0;h<c;h+=2)a[h]=h/2+.5,a[h+1]=u;s.transformPoints(a),Vp.checkAndNudgePoints(r,a);try{for(var h=0;h<c;h+=2)r.get(Math.floor(a[h]),Math.floor(a[h+1]))&&o.set(h/2,f)}catch{throw new ie}}return o},e}(Vp),Bl=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new _M,t}(),Lr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Ee(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),EM=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new wM(s,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ie;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,s=0;s<4;s++){var o=n[(this.shift+s)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,o,a){var f=(s>>r-2<<1)+(s&1);n=(n<<3)+f}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(Ye.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ie},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var s=n-i,o=new Int32Array(n),a=n-1;a>=0;--a)o[a]=e&15,e>>=4;try{var f=new hc(Ur.AZTEC_PARAM);f.decode(o,s)}catch{throw new ie}for(var c=0,a=0;a<i;a++)c=(c<<4)+o[a];return c},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,s=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(r,o,1,-1),f=this.getFirstDifferent(n,o,1,1),c=this.getFirstDifferent(i,o,-1,1),u=this.getFirstDifferent(s,o,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(u,a)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(a,f,c,u))break}r=a,n=f,i=c,s=u,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;var d=new Ee(r.getX()+.5,r.getY()-.5),p=new Ee(n.getX()+.5,n.getY()+.5),v=new Ee(i.getX()-.5,i.getY()+.5),x=new Ee(s.getX()-.5,s.getY()-.5);return this.expandSquare([d,p,v,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var s=new Dh(this.image).detect();e=s[0],r=s[1],n=s[2],i=s[3]}catch{var o=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new Lr(o+7,a-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Lr(o+7,a+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Lr(o-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Lr(o-7,a-7),!1,-1,-1).toResultPoint()}var f=nt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),c=nt.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var s=new Dh(this.image,15,f,c).detect();e=s[0],r=s[1],n=s[2],i=s[3]}catch{e=this.getFirstDifferent(new Lr(f+7,c-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Lr(f+7,c+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Lr(f-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Lr(f-7,c-7),!1,-1,-1).toResultPoint()}return f=nt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),c=nt.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new Lr(f,c)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,s){var o=Bl.getInstance(),a=this.getDimension(),f=a/2-this.nbCenterLayers,c=a/2+this.nbCenterLayers;return o.sampleGrid(e,a,a,f,f,c,f,c,c,f,c,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,s=this.distanceResultPoint(e,r),o=s/n,a=e.getX(),f=e.getY(),c=o*(r.getX()-e.getX())/s,u=o*(r.getY()-e.getY())/s,h=0;h<n;h++)this.image.get(nt.round(a+h*c),nt.round(f+h*u))&&(i|=1<<n-h-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var s=3;e=new Lr(e.getX()-s,e.getY()+s),r=new Lr(r.getX()-s,r.getY()-s),n=new Lr(n.getX()+s,n.getY()-s),i=new Lr(i.getX()+s,i.getY()+s);var o=this.getColor(i,e);if(o===0)return!1;var a=this.getColor(e,r);return a!==o||(a=this.getColor(r,n),a!==o)?!1:(a=this.getColor(n,i),a===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,o=0,a=e.getX(),f=e.getY(),c=this.image.get(e.getX(),e.getY()),u=Math.ceil(n),h=0;h<u;h++)a+=i,f+=s,this.image.get(nt.round(a),nt.round(f))!==c&&o++;var d=o/n;return d>.1&&d<.9?0:d<=.1===c?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var s=e.getX()+n,o=e.getY()+i;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n,o+=i;for(s-=n,o-=i;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n;for(s-=n;this.isValid(s,o)&&this.image.get(s,o)===r;)o+=i;return o-=i,new Lr(s,o)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),s=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,c=new Ee(a+i*s,f+i*o),u=new Ee(a-i*s,f-i*o);s=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;var h=new Ee(a+i*s,f+i*o),d=new Ee(a-i*s,f-i*o),p=[c,h,u,d];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=nt.round(e.getX()),n=nt.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return nt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return nt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ye.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Th=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new EM(e.getBlackMatrix()),s=null,o=null;try{var a=i.detectMirror(!1);s=a.getPoints(),this.reportFoundResultPoints(r,s),o=new zp().decode(a)}catch(h){n=h}if(o==null)try{var a=i.detectMirror(!0);s=a.getPoints(),this.reportFoundResultPoints(r,s),o=new zp().decode(a)}catch(h){throw n??h}var f=new Vr(o.getText(),o.getRawBytes(),o.getNumBits(),s,De.AZTEC,Dt.currentTimeMillis()),c=o.getByteSegments();c!=null&&f.putMetadata(ur.BYTE_SEGMENTS,c);var u=o.getECLevel();return u!=null&&f.putMetadata(ur.ERROR_CORRECTION_LEVEL,u),f},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Bt.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,s,o){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),AM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){AM(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Th,r)||this}return e})(ao);var hr=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Bt.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),s=this.doDecode(i,r),o=s.getResultMetadata(),a=270;o!==null&&o.get(ur.ORIENTATION)===!0&&(a=a+o.get(ur.ORIENTATION)%360),s.putMetadata(ur.ORIENTATION,a);var f=s.getResultPoints();if(f!==null)for(var c=i.getHeight(),u=0;u<f.length;u++)f[u]=new Ee(c-f[u].getY()-1,f[u].getX());return s}else throw new ie}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),s=new ir(n),o=r&&r.get(Bt.TRY_HARDER)===!0,a=Math.max(1,i>>(o?8:5)),f;o?f=i:f=15;for(var c=Math.trunc(i/2),u=0;u<f;u++){var h=Math.trunc((u+1)/2),d=(u&1)===0,p=c+a*(d?h:-h);if(p<0||p>=i)break;try{s=e.getBlackRow(p,s)}catch{continue}for(var v=function(M){if(M===1&&(s.reverse(),r&&r.get(Bt.NEED_RESULT_POINT_CALLBACK)===!0)){var R=new Map;r.forEach(function(N,$){return R.set($,N)}),R.delete(Bt.NEED_RESULT_POINT_CALLBACK),r=R}try{var T=x.decodeRow(p,s,r);if(M===1){T.putMetadata(ur.ORIENTATION,180);var P=T.getResultPoints();P!==null&&(P[0]=new Ee(n-P[0].getX()-1,P[0].getY()),P[1]=new Ee(n-P[1].getX()-1,P[1].getY()))}return{value:T}}catch{}},x=this,C=0;C<2;C++){var O=v(C);if(typeof O=="object")return O.value}}throw new ie},t.recordPattern=function(e,r,n){for(var i=n.length,s=0;s<i;s++)n[s]=0;var o=e.getSize();if(r>=o)throw new ie;for(var a=!e.get(r),f=0,c=r;c<o;){if(e.get(c)!==a)n[f]++;else{if(++f===i)break;n[f]=1,a=!a}c++}if(!(f===i||f===i-1&&c===o))throw new ie},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,s=e.get(r);r>0&&i>=0;)e.get(--r)!==s&&(i--,s=!s);if(i>=0)throw new ie;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,s=0,o=0,a=0;a<i;a++)s+=e[a],o+=r[a];if(s<o)return Number.POSITIVE_INFINITY;var f=s/o;n*=f;for(var c=0,u=0;u<i;u++){var h=e[u],d=r[u]*f,p=h>d?h-d:d-h;if(p>n)return Number.POSITIVE_INFINITY;c+=p}return c/s},t}(),SM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jp=function(t){SM(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),s=0,o=Int32Array.from([0,0,0,0,0,0]),a=i,f=!1,c=6,u=i;u<n;u++)if(r.get(u)!==f)o[s]++;else{if(s===c-1){for(var h=e.MAX_AVG_VARIANCE,d=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var v=hr.patternMatchVariance(o,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);v<h&&(h=v,d=p)}if(d>=0&&r.isRange(Math.max(0,a-(u-a)/2),a,!1))return Int32Array.from([a,u,d]);a+=o[0]+o[1],o=o.slice(2,o.length-1),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,f=!f}throw new ie},e.decodeCode=function(r,n,i){hr.recordPattern(r,i,n);for(var s=e.MAX_AVG_VARIANCE,o=-1,a=0;a<e.CODE_PATTERNS.length;a++){var f=e.CODE_PATTERNS[a],c=this.patternMatchVariance(n,f,e.MAX_INDIVIDUAL_VARIANCE);c<s&&(s=c,o=a)}if(o>=0)return o;throw new ie},e.prototype.decodeRow=function(r,n,i){var s=i&&i.get(Bt.ASSUME_GS1)===!0,o=e.findStartPattern(n),a=o[2],f=0,c=new Uint8Array(20);c[f++]=a;var u;switch(a){case e.CODE_START_A:u=e.CODE_CODE_A;break;case e.CODE_START_B:u=e.CODE_CODE_B;break;case e.CODE_START_C:u=e.CODE_CODE_C;break;default:throw new ye}for(var h=!1,d=!1,p="",v=o[0],x=o[1],C=Int32Array.from([0,0,0,0,0,0]),O=0,M=0,R=a,T=0,P=!0,N=!1,$=!1;!h;){var U=d;switch(d=!1,O=M,M=e.decodeCode(n,C,x),c[f++]=M,M!==e.CODE_STOP&&(P=!0),M!==e.CODE_STOP&&(T++,R+=T*M),v=x,x+=C.reduce(function(E,I){return E+I},0),M){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ye}switch(u){case e.CODE_CODE_A:if(M<64)$===N?p+=String.fromCharCode(32+M):p+=String.fromCharCode(32+M+128),$=!1;else if(M<96)$===N?p+=String.fromCharCode(M-64):p+=String.fromCharCode(M+64),$=!1;else switch(M!==e.CODE_STOP&&(P=!1),M){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!N&&$?(N=!0,$=!1):N&&$?(N=!1,$=!1):$=!0;break;case e.CODE_SHIFT:d=!0,u=e.CODE_CODE_B;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_B:if(M<96)$===N?p+=String.fromCharCode(32+M):p+=String.fromCharCode(32+M+128),$=!1;else switch(M!==e.CODE_STOP&&(P=!1),M){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!N&&$?(N=!0,$=!1):N&&$?(N=!1,$=!1):$=!0;break;case e.CODE_SHIFT:d=!0,u=e.CODE_CODE_A;break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_C:if(M<100)M<10&&(p+="0"),p+=M;else switch(M!==e.CODE_STOP&&(P=!1),M){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0;break}break}U&&(u=u===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var V=x-v;if(x=n.getNextUnset(x),!n.isRange(x,Math.min(n.getSize(),x+(x-v)/2),!1))throw new ie;if(R-=T*O,R%103!==O)throw new cr;var H=p.length;if(H===0)throw new ie;H>0&&P&&(u===e.CODE_CODE_C?p=p.substring(0,H-2):p=p.substring(0,H-1));for(var B=(o[1]+o[0])/2,y=v+V/2,b=c.length,l=new Uint8Array(b),g=0;g<b;g++)l[g]=c[g];var w=[new Ee(B,r),new Ee(y,r)];return new Vr(p,l,0,w,De.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(hr),IM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hp=function(t){IM(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var s,o,a,f,c=this.counters;c.fill(0),this.decodeRowResult="";var u=e.findAsteriskPattern(n,c),h=n.getNextSet(u[1]),d=n.getSize(),p,v;do{e.recordPattern(n,h,c);var x=e.toNarrowWidePattern(c);if(x<0)throw new ie;p=e.patternToChar(x),this.decodeRowResult+=p,v=h;try{for(var C=(s=void 0,Bu(c)),O=C.next();!O.done;O=C.next()){var M=O.value;h+=M}}catch(b){s={error:b}}finally{try{O&&!O.done&&(o=C.return)&&o.call(C)}finally{if(s)throw s.error}}h=n.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var T=Bu(c),P=T.next();!P.done;P=T.next()){var M=P.value;R+=M}}catch(b){a={error:b}}finally{try{P&&!P.done&&(f=T.return)&&f.call(T)}finally{if(a)throw a.error}}var N=h-v-R;if(h!==d&&N*2<R)throw new ie;if(this.usingCheckDigit){for(var $=this.decodeRowResult.length-1,U=0,V=0;V<$;V++)U+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(V));if(this.decodeRowResult.charAt($)!==e.ALPHABET_STRING.charAt(U%43))throw new cr;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new ie;var H;this.extendedMode?H=e.decodeExtended(this.decodeRowResult):H=this.decodeRowResult;var B=(u[1]+u[0])/2,y=v+R/2;return new Vr(H,null,0,[new Ee(B,r),new Ee(y,r)],De.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),s=r.getNextSet(0),o=0,a=s,f=!1,c=n.length,u=s;u<i;u++)if(r.get(u)!==f)n[o]++;else{if(o===c-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,a-Math.floor((u-a)/2)),a,!1))return[a,u];a+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,f=!f}throw new ie},e.toNarrowWidePattern=function(r){var n,i,s=r.length,o=0,a;do{var f=2147483647;try{for(var c=(n=void 0,Bu(r)),u=c.next();!u.done;u=c.next()){var h=u.value;h<f&&h>o&&(f=h)}}catch(x){n={error:x}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}o=f,a=0;for(var d=0,p=0,v=0;v<s;v++){var h=r[v];h>o&&(p|=1<<s-1-v,a++,d+=h)}if(a===3){for(var v=0;v<s&&a>0;v++){var h=r[v];if(h>o&&(a--,h*2>=d))return-1}return p}}while(a>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new ie},e.decodeExtended=function(r){for(var n=r.length,i="",s=0;s<n;s++){var o=r.charAt(s);if(o==="+"||o==="$"||o==="%"||o==="/"){var a=r.charAt(s+1),f="\0";switch(o){case"+":if(a>="A"&&a<="Z")f=String.fromCharCode(a.charCodeAt(0)+32);else throw new ye;break;case"$":if(a>="A"&&a<="Z")f=String.fromCharCode(a.charCodeAt(0)-64);else throw new ye;break;case"%":if(a>="A"&&a<="E")f=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")f=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")f=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")f=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")f="\0";else if(a==="V")f="@";else if(a==="W")f="`";else if(a==="X"||a==="Y"||a==="Z")f="";else throw new ye;break;case"/":if(a>="A"&&a<="O")f=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")f=":";else throw new ye;break}i+=f,s++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(hr),CM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MM=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kp=function(t){CM(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var s,o,a=this.decodeStart(n),f=this.decodeEnd(n),c=new _t;e.decodeMiddle(n,a[1],f[0],c);var u=c.toString(),h=null;i!=null&&(h=i.get(Bt.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var d=u.length,p=!1,v=0;try{for(var x=MM(h),C=x.next();!C.done;C=x.next()){var O=C.value;if(d===O){p=!0;break}O>v&&(v=O)}}catch(T){s={error:T}}finally{try{C&&!C.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}if(!p&&d>v&&(p=!0),!p)throw new ye;var M=[new Ee(a[1],r),new Ee(f[0],r)],R=new Vr(u,null,0,M,De.ITF,new Date().getTime());return R},e.decodeMiddle=function(r,n,i,s){var o=new Int32Array(10),a=new Int32Array(5),f=new Int32Array(5);for(o.fill(0),a.fill(0),f.fill(0);n<i;){hr.recordPattern(r,n,o);for(var c=0;c<5;c++){var u=2*c;a[c]=o[u],f[c]=o[u+1]}var h=e.decodeDigit(a);s.append(h.toString()),h=this.decodeDigit(f),s.append(h.toString()),o.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var s=n-1;i>0&&s>=0&&!r.get(s);s--)i--;if(i!==0)throw new ie},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new ie;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof ie&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var s=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-s,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var s=i.length,o=new Int32Array(s),a=r.getSize(),f=!1,c=0,u=n;o.fill(0);for(var h=n;h<a;h++)if(r.get(h)!==f)o[c]++;else{if(c===s-1){if(hr.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,h];u+=o[0]+o[1],Dt.arraycopy(o,2,o,0,c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,f=!f}throw new ie},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,s=e.PATTERNS.length,o=0;o<s;o++){var a=e.PATTERNS[o],f=hr.patternMatchVariance(r,a,e.MAX_INDIVIDUAL_VARIANCE);f<n?(n=f,i=o):f===n&&(i=-1)}if(i>=0)return i%10;throw new ie},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(hr),OM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),to=function(t){OM(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,s=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,o);var a=i[0];s=i[1];var f=a-(s-a);f>=0&&(n=r.isRange(f,a,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}i*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,s){return this.findGuardPattern(r,n,i,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,i,s,o){var a=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var f=0,c=n,u=s.length,h=i,d=n;d<a;d++)if(r.get(d)!==h)o[f]++;else{if(f===u-1){if(hr.patternMatchVariance(o,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,d]);c+=o[0]+o[1];for(var p=o.slice(2,o.length-1),v=0;v<f-1;v++)o[v]=p[v];o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,h=!h}throw new ie},e.decodeDigit=function(r,n,i,s){this.recordPattern(r,i,n);for(var o=this.MAX_AVG_VARIANCE,a=-1,f=s.length,c=0;c<f;c++){var u=s[c],h=hr.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);h<o&&(o=h,a=c)}if(a>=0)return a;throw new ie},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(hr),DM=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TM=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,i),o=i.toString(),a=t.parseExtensionString(o),f=[new Ee((n[0]+n[1])/2,e),new Ee(s,e)],c=new Vr(o,null,0,f,De.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&c.putAllMetadata(a),c},t.prototype.decodeMiddle=function(e,r,n){var i,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=e.getSize(),f=r[1],c=0,u=0;u<5&&f<a;u++){var h=to.decodeDigit(e,o,f,to.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var d=(i=void 0,DM(o)),p=d.next();!p.done;p=d.next()){var v=p.value;f+=v}}catch(C){i={error:C}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}h>=10&&(c|=1<<4-u),u!==4&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(n.length!==5)throw new ie;var x=this.determineCheckDigit(c);if(t.extensionChecksum(n.toString())!==x)throw new ie;return f},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new ie},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[ur.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),s=n%100,o=s<10?"0"+s:s.toString();return r+i+"."+o},t}(),RM=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NM=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,i),o=i.toString(),a=t.parseExtensionString(o),f=[new Ee((n[0]+n[1])/2,e),new Ee(s,e)],c=new Vr(o,null,0,f,De.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&c.putAllMetadata(a),c},t.prototype.decodeMiddle=function(e,r,n){var i,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=e.getSize(),f=r[1],c=0,u=0;u<2&&f<a;u++){var h=to.decodeDigit(e,o,f,to.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var d=(i=void 0,RM(o)),p=d.next();!p.done;p=d.next()){var v=p.value;f+=v}}catch(x){i={error:x}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}h>=10&&(c|=1<<1-u),u!==1&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(n.length!==2)throw new ie;if(parseInt(n.toString())%4!==c)throw new ie;return f},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[ur.ISSUE_NUMBER,parseInt(e)]])},t}(),PM=function(){function t(){}return t.decodeRow=function(e,r,n){var i=to.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new TM;return s.decodeRow(e,r,i)}catch{var o=new NM;return o.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),FM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gt=function(t){FM(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],s=new Int32Array(i.length),o=0;o<i.length;o++)s[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,i){var s=e.findStartGuardPattern(n),o=i==null?null:i.get(Bt.NEED_RESULT_POINT_CALLBACK);if(o!=null){var a=new Ee((s[0]+s[1])/2,r);o.foundPossibleResultPoint(a)}var f=this.decodeMiddle(n,s,this.decodeRowStringBuffer),c=f.rowOffset,u=f.resultString;if(o!=null){var h=new Ee(c,r);o.foundPossibleResultPoint(h)}var d=e.decodeEnd(n,c);if(o!=null){var p=new Ee((d[0]+d[1])/2,r);o.foundPossibleResultPoint(p)}var v=d[1],x=v+(v-d[0]);if(x>=n.getSize()||!n.isRange(v,x,!1))throw new ie;var C=u.toString();if(C.length<8)throw new ye;if(!e.checkChecksum(C))throw new cr;var O=(s[1]+s[0])/2,M=(d[1]+d[0])/2,R=this.getBarcodeFormat(),T=[new Ee(O,r),new Ee(M,r)],P=new Vr(C,null,0,T,R,new Date().getTime()),N=0;try{var $=PM.decodeRow(r,n,d[1]);P.putMetadata(ur.UPC_EAN_EXTENSION,$.getText()),P.putAllMetadata($.getResultMetadata()),P.addResultPoints($.getResultPoints()),N=$.getText().length}catch{}var U=i==null?null:i.get(Bt.ALLOWED_EAN_EXTENSIONS);if(U!=null){var V=!1;for(var H in U)if(N.toString()===H){V=!0;break}if(!V)throw new ie}return R===De.EAN_13||De.UPC_A,P},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}i*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(to),BM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rh=function(t){BM(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var s,o,a,f,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=r.getSize(),h=n[1],d=0,p=0;p<6&&h<u;p++){var v=Gt.decodeDigit(r,c,h,Gt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var x=(s=void 0,Wp(c)),C=x.next();!C.done;C=x.next()){var O=C.value;h+=O}}catch(P){s={error:P}}finally{try{C&&!C.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}v>=10&&(d|=1<<5-p)}i=e.determineFirstDigit(i,d);var M=Gt.findGuardPattern(r,h,!0,Gt.MIDDLE_PATTERN,new Int32Array(Gt.MIDDLE_PATTERN.length).fill(0));h=M[1];for(var p=0;p<6&&h<u;p++){var v=Gt.decodeDigit(r,c,h,Gt.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var R=(a=void 0,Wp(c)),T=R.next();!T.done;T=R.next()){var O=T.value;h+=O}}catch($){a={error:$}}finally{try{T&&!T.done&&(f=R.return)&&f.call(R)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return De.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode(48+i)+r,r;throw new ie},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Gt),LM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xp=function(t){LM(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var s,o,a,f,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=r.getSize(),h=n[1],d=0;d<4&&h<u;d++){var p=Gt.decodeDigit(r,c,h,Gt.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var v=(s=void 0,Gp(c)),x=v.next();!x.done;x=v.next()){var C=x.value;h+=C}}catch(T){s={error:T}}finally{try{x&&!x.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}}var O=Gt.findGuardPattern(r,h,!0,Gt.MIDDLE_PATTERN,new Int32Array(Gt.MIDDLE_PATTERN.length).fill(0));h=O[1];for(var d=0;d<4&&h<u;d++){var p=Gt.decodeDigit(r,c,h,Gt.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var M=(a=void 0,Gp(c)),R=M.next();!R.done;R=M.next()){var C=R.value;h+=C}}catch(N){a={error:N}}finally{try{R&&!R.done&&(f=M.return)&&f.call(M)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return De.EAN_8},e}(Gt),$M=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yp=function(t){$M(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Rh,r}return e.prototype.getBarcodeFormat=function(){return De.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new Vr(n.substring(1),null,null,r.getResultPoints(),De.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new ie},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Gt),kM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UM=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zp=function(t){kM(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var s,o,a=this.decodeMiddleCounters.map(function(C){return C});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var f=r.getSize(),c=n[1],u=0,h=0;h<6&&c<f;h++){var d=e.decodeDigit(r,a,c,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);try{for(var p=(s=void 0,UM(a)),v=p.next();!v.done;v=p.next()){var x=v.value;c+=x}}catch(C){s={error:C}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}d>=10&&(u|=1<<5-h)}return e.determineNumSysAndCheckDigit(new _t(i),u),c},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Gt.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){r.insert(0,"0"+i),r.append("0"+s);return}throw ie.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return De.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new _t;i.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(s),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(s);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Gt),qM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lu=function(t){qM(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(Bt.POSSIBLE_FORMATS),s=[];return i!=null&&(i.indexOf(De.EAN_13)>-1&&s.push(new Rh),i.indexOf(De.UPC_A)>-1&&s.push(new Yp),i.indexOf(De.EAN_8)>-1&&s.push(new Xp),i.indexOf(De.UPC_E)>-1&&s.push(new Zp)),s.length===0&&(s.push(new Rh),s.push(new Yp),s.push(new Xp),s.push(new Zp)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,i){var s,o;try{for(var a=Jp(this.readers),f=a.next();!f.done;f=a.next()){var c=f.value;try{var u=c.decodeRow(r,n,i),h=u.getBarcodeFormat()===De.EAN_13&&u.getText().charAt(0)==="0",d=i==null?null:i.get(Bt.POSSIBLE_FORMATS),p=d==null||d.includes(De.UPC_A);if(h&&p){var v=u.getRawBytes(),x=new Vr(u.getText().substring(1),v,v?v.length:null,u.getResultPoints(),De.UPC_A);return x.putAllMetadata(u.getResultMetadata()),x}return u}catch{}}}catch(C){s={error:C}}finally{try{f&&!f.done&&(o=a.return)&&o.call(a)}finally{if(s)throw s.error}}throw new ie},e.prototype.reset=function(){var r,n;try{for(var i=Jp(this.readers),s=i.next();!s.done;s=i.next()){var o=s.value;o.reset()}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e}(hr),zM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VM=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},as=function(t){zM(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(hr.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ie},e.count=function(r){return nt.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,s=n[0],o=1;o<r.length;o++)n[o]>s&&(s=n[o],i=o);r[i]++},e.decrement=function(r,n){for(var i=0,s=n[0],o=1;o<r.length;o++)n[o]<s&&(s=n[o],i=o);r[i]--},e.isFinderPattern=function(r){var n,i,s=r[0]+r[1],o=s+r[2]+r[3],a=s/o;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var f=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var u=VM(r),h=u.next();!h.done;h=u.next()){var d=h.value;d>c&&(c=d),d<f&&(f=d)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return c<10*f}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(hr),Ff=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Dy=function(){function t(e,r,n,i,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ee(n,s)),this.resultPoints.push(new Ee(i,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),jM=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qs=function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,s,o=0;try{for(var a=jM(e),f=a.next();!f.done;f=a.next()){var c=f.value;o+=c}}catch(M){i={error:M}}finally{try{f&&!f.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}for(var u=0,h=0,d=e.length,p=0;p<d-1;p++){var v=void 0;for(v=1,h|=1<<p;v<e[p];v++,h&=~(1<<p)){var x=t.combins(o-v-1,d-p-2);if(n&&h===0&&o-v-(d-p-1)>=d-p-1&&(x-=t.combins(o-v-(d-p),d-p-2)),d-p-1>1){for(var C=0,O=o-v-(d-p-2);O>r;O--)C+=t.combins(o-v-O-1,d-p-3);x-=C*(d-1-p)}else o-v>r&&x--;u+=x}o-=v}return u},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var s=1,o=1,a=e;a>n;a--)s*=a,o<=i&&(s/=o,o++);for(;o<=i;)s/=o,o++;return s},t}(),HM=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new ir(n),s=0,o=e[0],a=o.getRightChar().getValue(),f=11;f>=0;--f)a&1<<f&&i.set(s),s++;for(var f=1;f<e.length;++f){for(var c=e[f],u=c.getLeftChar().getValue(),h=11;h>=0;--h)u&1<<h&&i.set(s),s++;if(c.getRightChar()!=null)for(var d=c.getRightChar().getValue(),h=11;h>=0;--h)d&1<<h&&i.set(s),s++}return i},t}(),ns=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Ll=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),KM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xn=function(t){KM(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Ll),WM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),is=function(t){WM(e,t);function e(r,n,i){var s=t.call(this,r)||this;return i?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Ll),GM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fs=function(t){GM(e,t);function e(r,n,i){var s=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new ye;return s.firstDigit=n,s.secondDigit=i,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Ll),Va=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XM=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,s,o,a,f,c;if(!e)return null;if(e.length<2)throw new ie;var u=e.substring(0,2);try{for(var h=Va(t.TWO_DIGIT_DATA_LENGTH),d=h.next();!d.done;d=h.next()){var p=d.value;if(p[0]===u)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(N){r={error:N}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}if(e.length<3)throw new ie;var v=e.substring(0,3);try{for(var x=Va(t.THREE_DIGIT_DATA_LENGTH),C=x.next();!C.done;C=x.next()){var p=C.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(N){i={error:N}}finally{try{C&&!C.done&&(s=x.return)&&s.call(x)}finally{if(i)throw i.error}}try{for(var O=Va(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),M=O.next();!M.done;M=O.next()){var p=M.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(N){o={error:N}}finally{try{M&&!M.done&&(a=O.return)&&a.call(O)}finally{if(o)throw o.error}}if(e.length<4)throw new ie;var R=e.substring(0,4);try{for(var T=Va(t.FOUR_DIGIT_DATA_LENGTH),P=T.next();!P.done;P=T.next()){var p=P.value;if(p[0]===R)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(N){f={error:N}}finally{try{P&&!P.done&&(c=T.return)&&c.call(T)}finally{if(f)throw f.error}}throw new ie},t.processFixedAI=function(e,r,n){if(n.length<e)throw new ie;var i=n.substring(0,e);if(n.length<e+r)throw new ie;var s=n.substring(e,e+r),o=n.substring(e+r),a="("+i+")"+s,f=t.parseFieldsInGeneralPurpose(o);return f==null?a:a+f},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var o=n.substring(e,s),a=n.substring(s),f="("+i+")"+o,c=t.parseFieldsInGeneralPurpose(a);return c==null?f:f+c},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),vf=function(){function t(e){this.buffer=new _t,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var s=this.decodeGeneralPurposeField(n,i),o=XM.parseFieldsInGeneralPurpose(s.getNewString());if(o!=null&&e.append(o),s.isRemaining()?i=""+s.getRemainingValue():i=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Fs(this.information.getSize(),Fs.FNC1,Fs.FNC1):new Fs(this.information.getSize(),r-1,Fs.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,s=(n-8)%11;return new Fs(e+7,i,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,s=0;s<n;++s)e.get(r+s)&&(i|=1<<n-s-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new is(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new is(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new is(this.current.getPosition(),this.buffer.toString()):r=new is(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ns(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new is(this.current.getPosition(),this.buffer.toString());return new ns(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ns(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new is(this.current.getPosition(),this.buffer.toString());return new ns(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ns(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new is(this.current.getPosition(),this.buffer.toString());return new ns(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ns(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new xn(e+5,xn.FNC1);if(r>=5&&r<15)return new xn(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new xn(e+7,""+(n+1));if(n>=90&&n<116)return new xn(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),s;switch(i){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new ye}return new xn(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new xn(e+5,xn.FNC1);if(r>=5&&r<15)return new xn(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new xn(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new xa("Decoding invalid alphanumeric value: "+n)}return new xn(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Ty=function(){function t(e){this.information=e,this.generalDecoder=new vf(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),YM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),In=function(t){YM(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var s=0;s<4;++s){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,s=0;s<13;s++){var o=r.charAt(s+n).charCodeAt(0)-48;i+=s&1?o:3*o}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e}(Ty),ZM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JM=function(t){ZM(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new _t;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(In),QM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eO=function(t){QM(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new _t;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Ty),tO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gf=function(t){tO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,s);for(var o=this.checkWeight(s),a=1e5,f=0;f<5;++f)o/a===0&&r.append("0"),a/=10;r.append(o)},e}(In),rO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ry=function(t){rO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+gf.GTIN_SIZE+e.WEIGHT_SIZE)throw new ie;var r=new _t;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+gf.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(gf),nO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iO=function(t){nO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(Ry),sO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oO=function(t){sO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(Ry),aO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fO=function(t){aO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+In.GTIN_SIZE)throw new ie;var r=new _t;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+In.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+In.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(In),cO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uO=function(t){cO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+In.GTIN_SIZE)throw new ie;var r=new _t;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+In.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+In.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100==0&&r.append("0"),i/10==0&&r.append("0"),r.append(i);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+In.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(In),hO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oi=function(t){hO(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.dateCode=i,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ie;var r=new _t;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!=38400){r.append("("),r.append(this.dateCode),r.append(")");var s=i%32;i/=32;var o=i%12+1;i/=12;var a=i;a/10==0&&r.append("0"),r.append(a),o/10==0&&r.append("0"),r.append(o),s/10==0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(gf);function lO(t){try{if(t.get(1))return new JM(t);if(!t.get(2))return new eO(t);var e=vf.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new iO(t);case 5:return new oO(t)}var r=vf.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new fO(t);case 13:return new uO(t)}var n=vf.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Oi(t,"310","11");case 57:return new Oi(t,"320","11");case 58:return new Oi(t,"310","13");case 59:return new Oi(t,"320","13");case 60:return new Oi(t,"310","15");case 61:return new Oi(t,"320","15");case 62:return new Oi(t,"310","17");case 63:return new Oi(t,"320","17")}}catch(i){throw console.log(i),new xa("unknown decoder: "+t)}}var Qp=function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),dO=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,s){r.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),pO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Di=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vO=function(t){pO(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(a){if(a instanceof ie){if(!this.pairs.length)throw new ie;i=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new ie},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,s,o=n;o<this.rows.length;o++){var a=this.rows[o];this.pairs.length=0;try{for(var f=(i=void 0,Di(r)),c=f.next();!c.done;c=f.next()){var u=c.value;this.pairs.push(u.getPairs())}}catch(d){i={error:d}}finally{try{c&&!c.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(r);h.push(a);try{return this.checkRows(h,o+1)}catch(d){console.log(d)}}}throw new ie},e.isValidSequence=function(r){var n,i;try{for(var s=Di(e.FINDER_PATTERN_SEQUENCES),o=s.next();!o.done;o=s.next()){var a=o.value;if(!(r.length>a.length)){for(var f=!0,c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=a[c]){f=!1;break}if(f)return!0}}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,s=!1,o=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>r){o=a.isEquivalent(this.pairs);break}s=a.isEquivalent(this.pairs),i++}o||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new dO(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,s,o,a,f,c;try{for(var u=Di(n),h=u.next();!h.done;h=u.next()){var d=h.value;if(d.getPairs().length!==r.length){var p=!0;try{for(var v=(o=void 0,Di(d.getPairs())),x=v.next();!x.done;x=v.next()){var C=x.value,O=!1;try{for(var M=(f=void 0,Di(r)),R=M.next();!R.done;R=M.next()){var T=R.value;if(Qp.equals(C,T)){O=!0;break}}}catch(P){f={error:P}}finally{try{R&&!R.done&&(c=M.return)&&c.call(M)}finally{if(f)throw f.error}}O||(p=!1)}}catch(P){o={error:P}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}}}}catch(P){i={error:P}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,s,o,a,f,c;try{for(var u=Di(n),h=u.next();!h.done;h=u.next()){var d=h.value,p=!0;try{for(var v=(o=void 0,Di(r)),x=v.next();!x.done;x=v.next()){var C=x.value,O=!1;try{for(var M=(f=void 0,Di(d.getPairs())),R=M.next();!R.done;R=M.next()){var T=R.value;if(C.equals(T)){O=!0;break}}}catch(P){f={error:P}}finally{try{R&&!R.done&&(c=M.return)&&c.call(M)}finally{if(f)throw f.error}}if(!O){p=!1;break}}}catch(P){o={error:P}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}if(p)return!0}}catch(P){i={error:P}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=HM.buildBitArray(r),i=lO(n),s=i.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),a=r[r.length-1].getFinderPattern().getResultPoints(),f=[o[0],o[1],a[0],a[1]];return new Vr(s,null,null,f,De.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i==null)return!1;for(var s=i.getChecksumPortion(),o=2,a=1;a<this.pairs.size();++a){var f=this.pairs.get(a);s+=f.getLeftChar().getChecksumPortion(),o++;var c=f.getRightChar();c!=null&&(s+=c.getChecksumPortion(),o++)}s%=211;var u=211*(o-4)+s;return u==n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var s=n.length%2==0;this.startFromEven&&(s=!s);var o,a=!0,f=-1;do this.findNextPair(r,n,f),o=this.parseFoundFinderPattern(r,i,s),o==null?f=e.getNextSecondBar(r,this.startEnd[0]):a=!1;while(a);var c=this.decodeDataCharacter(r,o,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new ie;var u;try{u=this.decodeDataCharacter(r,o,s,!1)}catch(h){u=null,console.log(h)}return new Qp(c,u,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var o=r.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(n))a=0;else{var f=n[n.length-1];a=f.getFinderPattern().getStartEnd()[1]}var c=n.length%2!=0;this.startFromEven&&(c=!c);for(var u=!1;a<o&&(u=!r.get(a),!!u);)a++;for(var h=0,d=a,p=a;p<o;p++)if(r.get(p)!=u)s[h]++;else{if(h==3){if(c&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=d,this.startEnd[1]=p;return}c&&e.reverseCounters(s),d+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,h--}else h++;s[h]=1,u=!u}throw new ie},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var s=r[i];r[i]=r[n-i-1],r[n-i-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,i){var s,o,a;if(i){for(var f=this.startEnd[0]-1;f>=0&&!r.get(f);)f--;f++,s=this.startEnd[0]-f,o=f,a=this.startEnd[1]}else o=this.startEnd[0],a=r.getNextUnset(this.startEnd[1]+1),s=a-this.startEnd[1];var c=this.getDecodeFinderCounters();Dt.arraycopy(c,0,c,1,c.length-1),c[0]=s;var u;try{u=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new Dy(u,[o,a],o,a,n)},e.prototype.decodeDataCharacter=function(r,n,i,s){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var f=0,c=o.length-1;f<c;f++,c--){var u=o[f];o[f]=o[c],o[c]=u}}var h=17,d=nt.sum(new Int32Array(o))/h,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-p)/p>.3)throw new ie;for(var v=this.getOddCounts(),x=this.getEvenCounts(),C=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors(),f=0;f<o.length;f++){var M=1*o[f]/d,R=M+.5;if(R<1){if(M<.3)throw new ie;R=1}else if(R>8){if(M>8.7)throw new ie;R=8}var T=f/2;f&1?(x[T]=R,O[T]=M-R):(v[T]=R,C[T]=M-R)}this.adjustOddEvenCounts(h);for(var P=4*n.getValue()+(i?0:2)+(s?0:1)-1,N=0,$=0,f=v.length-1;f>=0;f--){if(e.isNotA1left(n,i,s)){var U=e.WEIGHTS[P][2*f];$+=v[f]*U}N+=v[f]}for(var V=0,f=x.length-1;f>=0;f--)if(e.isNotA1left(n,i,s)){var U=e.WEIGHTS[P][2*f+1];V+=x[f]*U}var H=$+V;if(N&1||N>13||N<4)throw new ie;var B=(13-N)/2,y=e.SYMBOL_WIDEST[B],b=9-y,l=qs.getRSSvalue(v,y,!0),g=qs.getRSSvalue(x,b,!1),w=e.EVEN_TOTAL_SUBSET[B],E=e.GSUM[B],I=l*w+g+E;return new Ff(I,H)},e.isNotA1left=function(r,n,i){return!(r.getValue()==0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=nt.sum(new Int32Array(this.getOddCounts())),i=nt.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);var a=!1,f=!1;i>13?f=!0:i<4&&(a=!0);var c=n+i-r,u=(n&1)==1,h=(i&1)==0;if(c==1)if(u){if(h)throw new ie;o=!0}else{if(!h)throw new ie;f=!0}else if(c==-1)if(u){if(h)throw new ie;s=!0}else{if(!h)throw new ie;a=!0}else if(c==0){if(u){if(!h)throw new ie;n<i?(s=!0,f=!0):(o=!0,a=!0)}else if(h)throw new ie}else throw new ie;if(s){if(o)throw new ie;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(f)throw new ie;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(as),gO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yO=function(t){gO(e,t);function e(r,n,i){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=i,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Ff),bO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$u=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ev=function(t){bO(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var s,o,a,f,c=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,c),n.reverse();var u=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,u),n.reverse();try{for(var h=$u(this.possibleLeftPairs),d=h.next();!d.done;d=h.next()){var p=d.value;if(p.getCount()>1)try{for(var v=(a=void 0,$u(this.possibleRightPairs)),x=v.next();!x.done;x=v.next()){var C=x.value;if(C.getCount()>1&&e.checkChecksum(p,C))return e.constructResult(p,C)}}catch(O){a={error:O}}finally{try{x&&!x.done&&(f=v.return)&&f.call(v)}finally{if(a)throw a.error}}}}catch(O){s={error:O}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(s)throw s.error}}throw new ie},e.addOrTally=function(r,n){var i,s;if(n!=null){var o=!1;try{for(var a=$u(r),f=a.next();!f.done;f=a.next()){var c=f.value;if(c.getValue()===n.getValue()){c.incrementCount(),o=!0;break}}}catch(u){i={error:u}}finally{try{f&&!f.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),s=new String(i).toString(),o=new _t,a=13-s.length;a>0;a--)o.append("0");o.append(s);for(var f=0,a=0;a<13;a++){var c=o.charAt(a).charCodeAt(0)-48;f+=a&1?c:3*c}f=10-f%10,f===10&&(f=0),o.append(f.toString());var u=r.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new Vr(o.toString(),null,0,[u[0],u[1],h[0],h[1]],De.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s},e.prototype.decodePair=function(r,n,i,s){try{var o=this.findFinderPattern(r,n),a=this.parseFoundFinderPattern(r,i,n,o),f=s==null?null:s.get(Bt.NEED_RESULT_POINT_CALLBACK);if(f!=null){var c=(o[0]+o[1])/2;n&&(c=r.getSize()-1-c),f.foundPossibleResultPoint(new Ee(c,i))}var u=this.decodeDataCharacter(r,a,!0),h=this.decodeDataCharacter(r,a,!1);return new yO(1597*u.getValue()+h.getValue(),u.getChecksumPortion()+4*h.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(i)hr.recordPatternInReverse(r,n.getStartEnd()[0],s);else{hr.recordPattern(r,n.getStartEnd()[1]+1,s);for(var a=0,f=s.length-1;a<f;a++,f--){var c=s[a];s[a]=s[f],s[f]=c}}for(var u=i?16:15,h=nt.sum(new Int32Array(s))/u,d=this.getOddCounts(),p=this.getEvenCounts(),v=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),a=0;a<s.length;a++){var C=s[a]/h,O=Math.floor(C+.5);O<1?O=1:O>8&&(O=8);var M=Math.floor(a/2);a&1?(p[M]=O,x[M]=C-O):(d[M]=O,v[M]=C-O)}this.adjustOddEvenCounts(i,u);for(var R=0,T=0,a=d.length-1;a>=0;a--)T*=9,T+=d[a],R+=d[a];for(var P=0,N=0,a=p.length-1;a>=0;a--)P*=9,P+=p[a],N+=p[a];var $=T+3*P;if(i){if(R&1||R>12||R<4)throw new ie;var U=(12-R)/2,V=e.OUTSIDE_ODD_WIDEST[U],H=9-V,B=qs.getRSSvalue(d,V,!1),y=qs.getRSSvalue(p,H,!0),b=e.OUTSIDE_EVEN_TOTAL_SUBSET[U],l=e.OUTSIDE_GSUM[U];return new Ff(B*b+y+l,$)}else{if(N&1||N>10||N<4)throw new ie;var U=(10-N)/2,V=e.INSIDE_ODD_WIDEST[U],H=9-V,B=qs.getRSSvalue(d,V,!0),y=qs.getRSSvalue(p,H,!1),g=e.INSIDE_ODD_TOTAL_SUBSET[U],l=e.INSIDE_GSUM[U];return new Ff(y*g+B+l,$)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=r.getSize(),o=!1,a=0;a<s&&(o=!r.get(a),n!==o);)a++;for(var f=0,c=a,u=a;u<s;u++)if(r.get(u)!==o)i[f]++;else{if(f===3){if(as.isFinderPattern(i))return[c,u];c+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,o=!o}throw new ie},e.prototype.parseFoundFinderPattern=function(r,n,i,s){for(var o=r.get(s[0]),a=s[0]-1;a>=0&&o!==r.get(a);)a--;a++;var f=s[0]-a,c=this.getDecodeFinderCounters(),u=new Int32Array(c.length);Dt.arraycopy(c,0,u,1,c.length-1),u[0]=f;var h=this.parseFinderValue(u,e.FINDER_PATTERNS),d=a,p=s[1];return i&&(d=r.getSize()-1-d,p=r.getSize()-1-p),new Dy(h,[a,s[1]],d,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=nt.sum(new Int32Array(this.getOddCounts())),s=nt.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1,f=!1,c=!1;r?(i>12?a=!0:i<4&&(o=!0),s>12?c=!0:s<4&&(f=!0)):(i>11?a=!0:i<5&&(o=!0),s>10?c=!0:s<4&&(f=!0));var u=i+s-n,h=(i&1)===(r?1:0),d=(s&1)===1;if(u===1)if(h){if(d)throw new ie;a=!0}else{if(!d)throw new ie;c=!0}else if(u===-1)if(h){if(d)throw new ie;o=!0}else{if(!d)throw new ie;f=!0}else if(u===0){if(h){if(!d)throw new ie;i<s?(o=!0,c=!0):(a=!0,f=!0)}else if(d)throw new ie}else throw new ie;if(o){if(a)throw new ie;as.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&as.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(c)throw new ie;as.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&as.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(as),mO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lo=function(t){mO(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(Bt.POSSIBLE_FORMATS):null,s=r&&r.get(Bt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(De.EAN_13)||i.includes(De.UPC_A)||i.includes(De.EAN_8)||i.includes(De.UPC_E))&&n.readers.push(new Lu(r)),i.includes(De.CODE_39)&&n.readers.push(new Hp(s)),i.includes(De.CODE_128)&&n.readers.push(new jp),i.includes(De.ITF)&&n.readers.push(new Kp),i.includes(De.RSS_14)&&n.readers.push(new ev),i.includes(De.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new vO))),n.readers.length===0&&(n.readers.push(new Lu(r)),n.readers.push(new Hp),n.readers.push(new Lu(r)),n.readers.push(new jp),n.readers.push(new Kp),n.readers.push(new ev)),n}return e.prototype.decodeRow=function(r,n,i){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,i)}catch{}throw new ie},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(hr),wO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){wO(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Lo(n),r,n)||this}return e})(ao);var tv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gt=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ot=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),xO=function(){function t(e,r,n,i,s,o){var a,f;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=s,this.ecBlocks=o;var c=0,u=o.getECCodewords(),h=o.getECBlocks();try{for(var d=tv(h),p=d.next();!p.done;p=d.next()){var v=p.value;c+=v.getCount()*(v.getDataCodewords()+u)}}catch(x){a={error:x}}finally{try{p&&!p.done&&(f=d.return)&&f.call(d)}finally{if(a)throw a.error}}this.totalCodewords=c}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if(e&1||r&1)throw new ye;try{for(var s=tv(t.VERSIONS),o=s.next();!o.done;o=s.next()){var a=o.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===r)return a}}catch(f){n={error:f}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}throw new ye},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new gt(5,new ot(1,3))),new t(2,12,12,10,10,new gt(7,new ot(1,5))),new t(3,14,14,12,12,new gt(10,new ot(1,8))),new t(4,16,16,14,14,new gt(12,new ot(1,12))),new t(5,18,18,16,16,new gt(14,new ot(1,18))),new t(6,20,20,18,18,new gt(18,new ot(1,22))),new t(7,22,22,20,20,new gt(20,new ot(1,30))),new t(8,24,24,22,22,new gt(24,new ot(1,36))),new t(9,26,26,24,24,new gt(28,new ot(1,44))),new t(10,32,32,14,14,new gt(36,new ot(1,62))),new t(11,36,36,16,16,new gt(42,new ot(1,86))),new t(12,40,40,18,18,new gt(48,new ot(1,114))),new t(13,44,44,20,20,new gt(56,new ot(1,144))),new t(14,48,48,22,22,new gt(68,new ot(1,174))),new t(15,52,52,24,24,new gt(42,new ot(2,102))),new t(16,64,64,14,14,new gt(56,new ot(2,140))),new t(17,72,72,16,16,new gt(36,new ot(4,92))),new t(18,80,80,18,18,new gt(48,new ot(4,114))),new t(19,88,88,20,20,new gt(56,new ot(4,144))),new t(20,96,96,22,22,new gt(68,new ot(4,174))),new t(21,104,104,24,24,new gt(56,new ot(6,136))),new t(22,120,120,18,18,new gt(68,new ot(6,175))),new t(23,132,132,20,20,new gt(62,new ot(8,163))),new t(24,144,144,22,22,new gt(62,new ot(8,156),new ot(2,155))),new t(25,8,18,6,16,new gt(7,new ot(1,5))),new t(26,8,32,6,14,new gt(11,new ot(1,10))),new t(27,12,26,10,24,new gt(14,new ot(1,16))),new t(28,12,36,10,16,new gt(18,new ot(1,22))),new t(29,16,36,14,16,new gt(24,new ot(1,32))),new t(30,16,48,14,22,new gt(28,new ot(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),_O=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new ye;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Wn(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return xO.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,s=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),a=!1,f=!1,c=!1,u=!1;do if(n===s&&i===0&&!a)e[r++]=this.readCorner1(s,o)&255,n-=2,i+=2,a=!0;else if(n===s-2&&i===0&&o&3&&!f)e[r++]=this.readCorner2(s,o)&255,n-=2,i+=2,f=!0;else if(n===s+4&&i===2&&!(o&7)&&!c)e[r++]=this.readCorner3(s,o)&255,n-=2,i+=2,c=!0;else if(n===s-2&&i===0&&(o&7)===4&&!u)e[r++]=this.readCorner4(s,o)&255,n-=2,i+=2,u=!0;else{do n<s&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,s,o)&255),n-=2,i+=2;while(n>=0&&i<o);n+=1,i+=3;do n>=0&&i<o&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,s,o)&255),n+=2,i-=2;while(n<s&&i>=0);n+=3,i+=1}while(n<s||i<o);if(r!==this.version.getTotalCodewords())throw new ye;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var s=0;return this.readModule(e-2,r-2,n,i)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,i)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,i)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,i)&&(s|=1),s<<=1,this.readModule(e-1,r,n,i)&&(s|=1),s<<=1,this.readModule(e,r-2,n,i)&&(s|=1),s<<=1,this.readModule(e,r-1,n,i)&&(s|=1),s<<=1,this.readModule(e,r,n,i)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Ce("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),o=r/i|0,a=n/s|0,f=o*i,c=a*s,u=new Wn(c,f),h=0;h<o;++h)for(var d=h*i,p=0;p<a;++p)for(var v=p*s,x=0;x<i;++x)for(var C=h*(i+2)+1+x,O=d+x,M=0;M<s;++M){var R=p*(s+2)+1+M;if(e.get(R,C)){var T=v+M;u.set(T,O)}}return u},t}(),rv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EO=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,s,o,a=r.getECBlocks(),f=0,c=a.getECBlocks();try{for(var u=rv(c),h=u.next();!h.done;h=u.next()){var d=h.value;f+=d.getCount()}}catch(l){n={error:l}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}var p=new Array(f),v=0;try{for(var x=rv(c),C=x.next();!C.done;C=x.next())for(var d=C.value,O=0;O<d.getCount();O++){var M=d.getDataCodewords(),R=a.getECCodewords()+M;p[v++]=new t(M,new Uint8Array(R))}}catch(l){s={error:l}}finally{try{C&&!C.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}for(var T=p[0].codewords.length,P=T-a.getECCodewords(),N=P-1,$=0,O=0;O<N;O++)for(var U=0;U<v;U++)p[U].codewords[O]=e[$++];for(var V=r.getVersionNumber()===24,H=V?8:v,U=0;U<H;U++)p[U].codewords[P-1]=e[$++];for(var B=p[0].codewords.length,O=P;O<B;O++)for(var U=0;U<v;U++){var y=V?(U+8)%v:U,b=V&&y>7?O-1:O;p[y].codewords[b]=e[$++]}if($!==e.length)throw new Ce;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Ny=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ce(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,s=this.bytes;if(n>0){var o=8-n,a=e<o?e:o,f=o-a,c=255>>8-a<<f;r=(s[i]&c)>>f,e-=a,n+=a,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|s[i]&255,i++,e-=8;if(e>0){var f=8-e,c=255>>f<<f;r=r<<e|(s[i]&c)>>f,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Ht;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ht||(Ht={}));var AO=function(){function t(){}return t.decode=function(e){var r=new Ny(e),n=new _t,i=new _t,s=new Array,o=Ht.ASCII_ENCODE;do if(o===Ht.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,i);else{switch(o){case Ht.C40_ENCODE:this.decodeC40Segment(r,n);break;case Ht.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Ht.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Ht.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Ht.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new ye}o=Ht.ASCII_ENCODE}while(o!==Ht.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new uc(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var s=e.readBits(8);if(s===0)throw new ye;if(s<=128)return i&&(s+=128),r.append(String.fromCharCode(s-1)),Ht.ASCII_ENCODE;if(s===129)return Ht.PAD_ENCODE;if(s<=229){var o=s-130;o<10&&r.append("0"),r.append(""+o)}else switch(s){case 230:return Ht.C40_ENCODE;case 231:return Ht.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Ht.ANSIX12_ENCODE;case 239:return Ht.TEXT_ENCODE;case 240:return Ht.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new ye;break}}while(e.available()>0);return Ht.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var a=0;a<3;a++){var f=i[a];switch(s){case 0:if(f<3)s=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[f];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c)}else throw new ye;break;case 1:n?(r.append(String.fromCharCode(f+128)),n=!1):r.append(String.fromCharCode(f)),s=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[f];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c)}else switch(f){case 27:r.append("");break;case 30:n=!0;break;default:throw new ye}s=0;break;case 3:n?(r.append(String.fromCharCode(f+224)),n=!1):r.append(String.fromCharCode(f+96)),s=0;break;default:throw new ye}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var a=0;a<3;a++){var f=i[a];switch(s){case 0:if(f<3)s=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[f];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c)}else throw new ye;break;case 1:n?(r.append(String.fromCharCode(f+128)),n=!1):r.append(String.fromCharCode(f)),s=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[f];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c)}else switch(f){case 27:r.append("");break;case 30:n=!0;break;default:throw new ye}s=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[f];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c),s=0}else throw new ye;break;default:throw new ye}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var s=0;s<3;s++){var o=n[s];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new ye;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,s=Math.floor(i/1600);n[0]=s,i-=s*1600,s=Math.floor(i/40),n[1]=s,n[2]=i-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}i&32||(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),i++),o;if(s===0?o=e.available()/8|0:s<250?o=s:o=250*(s-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new ye;for(var a=new Uint8Array(o),f=0;f<o;f++){if(e.available()<8)throw new ye;a[f]=this.unrandomize255State(e.readBits(8),i++)}n.push(a);try{r.append(jn.decode(a,Ot.ISO88591))}catch(c){throw new xa("Platform does not support required encoding: "+c.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),SO=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IO=function(){function t(){this.rsDecoder=new hc(Ur.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new _O(e),s=i.getVersion(),o=i.readCodewords(),a=EO.getDataBlocks(o,s),f=0;try{for(var c=SO(a),u=c.next();!u.done;u=c.next()){var h=u.value;f+=h.getNumDataCodewords()}}catch(R){r={error:R}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}for(var d=new Uint8Array(f),p=a.length,v=0;v<p;v++){var x=a[v],C=x.getCodewords(),O=x.getNumDataCodewords();this.correctErrors(C,O);for(var M=0;M<O;M++)d[M*p+v]=C[M]}return AO.decode(d)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new cr}for(var i=0;i<r;i++)e[i]=n[i]},t}(),CO=function(){function t(e){this.image=e,this.rectangleDetector=new Dh(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new ie;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],s=r[2],o=r[3],a=this.transitionsBetween(n,o)+1,f=this.transitionsBetween(s,o)+1;(a&1)===1&&(a+=1),(f&1)===1&&(f+=1),4*a<7*f&&4*f<7*a&&(a=f=Math.max(a,f));var c=t.sampleGrid(this.image,n,i,s,o,a,f);return new Fl(c,[n,i,s,o])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new Ee(e.getX()+i,e.getY()+s)},t.moveAway=function(e,r,n){var i=e.getX(),s=e.getY();return i<r?i-=1:i+=1,s<n?s-=1:s+=1,new Ee(i,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],s=e[2],o=this.transitionsBetween(r,n),a=this.transitionsBetween(n,i),f=this.transitionsBetween(i,s),c=this.transitionsBetween(s,r),u=o,h=[s,r,n,i];return u>a&&(u=a,h[0]=r,h[1]=n,h[2]=i,h[3]=s),u>f&&(u=f,h[0]=n,h[1]=i,h[2]=s,h[3]=r),u>c&&(h[0]=i,h[1]=s,h[2]=r,h[3]=n),h},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],s=e[3],o=this.transitionsBetween(r,s),a=t.shiftPoint(n,i,(o+1)*4),f=t.shiftPoint(i,n,(o+1)*4),c=this.transitionsBetween(a,r),u=this.transitionsBetween(f,s);return c<u?(e[0]=r,e[1]=n,e[2]=i,e[3]=s):(e[0]=n,e[1]=i,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],s=e[3],o=this.transitionsBetween(r,s),a=this.transitionsBetween(n,s),f=t.shiftPoint(r,n,(a+1)*4),c=t.shiftPoint(i,n,(o+1)*4);o=this.transitionsBetween(f,s),a=this.transitionsBetween(c,s);var u=new Ee(s.getX()+(i.getX()-n.getX())/(o+1),s.getY()+(i.getY()-n.getY())/(o+1)),h=new Ee(s.getX()+(r.getX()-n.getX())/(a+1),s.getY()+(r.getY()-n.getY())/(a+1));if(!this.isValid(u))return this.isValid(h)?h:null;if(!this.isValid(h))return u;var d=this.transitionsBetween(f,u)+this.transitionsBetween(c,u),p=this.transitionsBetween(f,h)+this.transitionsBetween(c,h);return d>p?u:h},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],s=e[3],o=this.transitionsBetween(r,s)+1,a=this.transitionsBetween(i,s)+1,f=t.shiftPoint(r,n,a*4),c=t.shiftPoint(i,n,o*4);o=this.transitionsBetween(f,s)+1,a=this.transitionsBetween(c,s)+1,(o&1)===1&&(o+=1),(a&1)===1&&(a+=1);var u=(r.getX()+n.getX()+i.getX()+s.getX())/4,h=(r.getY()+n.getY()+i.getY()+s.getY())/4;r=t.moveAway(r,u,h),n=t.moveAway(n,u,h),i=t.moveAway(i,u,h),s=t.moveAway(s,u,h);var d,p;return f=t.shiftPoint(r,n,a*4),f=t.shiftPoint(f,s,o*4),d=t.shiftPoint(n,r,a*4),d=t.shiftPoint(d,i,o*4),c=t.shiftPoint(i,s,a*4),c=t.shiftPoint(c,n,o*4),p=t.shiftPoint(s,i,a*4),p=t.shiftPoint(p,r,o*4),[f,d,c,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,s,o,a){var f=Bl.getInstance();return f.sampleGrid(e,o,a,.5,.5,o-.5,.5,o-.5,a-.5,.5,a-.5,r.getX(),r.getY(),s.getX(),s.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),s=Math.trunc(r.getX()),o=Math.trunc(r.getY()),a=Math.abs(o-i)>Math.abs(s-n);if(a){var f=n;n=i,i=f,f=s,s=o,o=f}for(var c=Math.abs(s-n),u=Math.abs(o-i),h=-c/2,d=i<o?1:-1,p=n<s?1:-1,v=0,x=this.image.get(a?i:n,a?n:i),C=n,O=i;C!==s;C+=p){var M=this.image.get(a?O:C,a?C:O);if(M!==x&&(v++,x=M),h+=u,h>0){if(O===o)break;O+=d,h-=c}}return v},t}(),Nh=function(){function t(){this.decoder=new IO}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(Bt.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),i=t.NO_POINTS}else{var o=new CO(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),i=o.getPoints()}var a=n.getRawBytes(),f=new Vr(n.getText(),a,8*a.length,i,De.DATA_MATRIX,Dt.currentTimeMillis()),c=n.getByteSegments();c!=null&&f.putMetadata(ur.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!=null&&f.putMetadata(ur.ERROR_CORRECTION_LEVEL,u),f},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new ie;var i=this.moduleSize(r,e),s=r[1],o=n[1],a=r[0],f=n[0],c=(f-a+1)/i,u=(o-s+1)/i;if(c<=0||u<=0)throw new ie;var h=i/2;s+=h,a+=h;for(var d=new Wn(c,u),p=0;p<u;p++)for(var v=s+p*i,x=0;x<c;x++)e.get(a+x*i,v)&&d.set(x,p);return d},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],s=e[1];i<n&&r.get(i,s);)i++;if(i===n)throw new ie;var o=i-e[0];if(o===0)throw new ie;return o},t.NO_POINTS=[],t}(),MO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){MO(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Nh,r)||this}return e})(ao);var zs;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(zs||(zs={}));var OO=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new En(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Ce;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(zs.L,"L",1),t.M=new t(zs.M,"M",0),t.Q=new t(zs.Q,"Q",3),t.H=new t(zs.H,"H",2),t}(),DO=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Py=function(){function t(e){this.errorCorrectionLevel=OO.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Ye.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,s=Number.MAX_SAFE_INTEGER,o=0;try{for(var a=DO(t.FORMAT_INFO_DECODE_LOOKUP),f=a.next();!f.done;f=a.next()){var c=f.value,u=c[0];if(u===e||u===r)return new t(c[1]);var h=t.numBitsDiffering(e,u);h<s&&(o=c[1],s=h),e!==r&&(h=t.numBitsDiffering(r,u),h<s&&(o=c[1],s=h))}}catch(d){n={error:d}}finally{try{f&&!f.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),TO=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var s=TO(i),o=s.next();!o.done;o=s.next()){var a=o.value;n+=a.getCount()}}catch(f){e={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),k=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),RO=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gs=function(){function t(e,r){for(var n,i,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var a=0,f=s[0].getECCodewordsPerBlock(),c=s[0].getECBlocks();try{for(var u=RO(c),h=u.next();!h.done;h=u.next()){var d=h.value;a+=d.getCount()*(d.getDataCodewords()+f)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ye;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ye}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Ce;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var s=t.VERSION_DECODE_INFO[i];if(s===e)return t.getVersionForNumber(i+7);var o=Py.numBitsDiffering(e,s);o<r&&(n=i+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Wn(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var s=this.alignmentPatternCenters[i]-2,o=0;o<n;o++)i===0&&(o===0||o===n-1)||i===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new J(7,new k(1,19)),new J(10,new k(1,16)),new J(13,new k(1,13)),new J(17,new k(1,9))),new t(2,Int32Array.from([6,18]),new J(10,new k(1,34)),new J(16,new k(1,28)),new J(22,new k(1,22)),new J(28,new k(1,16))),new t(3,Int32Array.from([6,22]),new J(15,new k(1,55)),new J(26,new k(1,44)),new J(18,new k(2,17)),new J(22,new k(2,13))),new t(4,Int32Array.from([6,26]),new J(20,new k(1,80)),new J(18,new k(2,32)),new J(26,new k(2,24)),new J(16,new k(4,9))),new t(5,Int32Array.from([6,30]),new J(26,new k(1,108)),new J(24,new k(2,43)),new J(18,new k(2,15),new k(2,16)),new J(22,new k(2,11),new k(2,12))),new t(6,Int32Array.from([6,34]),new J(18,new k(2,68)),new J(16,new k(4,27)),new J(24,new k(4,19)),new J(28,new k(4,15))),new t(7,Int32Array.from([6,22,38]),new J(20,new k(2,78)),new J(18,new k(4,31)),new J(18,new k(2,14),new k(4,15)),new J(26,new k(4,13),new k(1,14))),new t(8,Int32Array.from([6,24,42]),new J(24,new k(2,97)),new J(22,new k(2,38),new k(2,39)),new J(22,new k(4,18),new k(2,19)),new J(26,new k(4,14),new k(2,15))),new t(9,Int32Array.from([6,26,46]),new J(30,new k(2,116)),new J(22,new k(3,36),new k(2,37)),new J(20,new k(4,16),new k(4,17)),new J(24,new k(4,12),new k(4,13))),new t(10,Int32Array.from([6,28,50]),new J(18,new k(2,68),new k(2,69)),new J(26,new k(4,43),new k(1,44)),new J(24,new k(6,19),new k(2,20)),new J(28,new k(6,15),new k(2,16))),new t(11,Int32Array.from([6,30,54]),new J(20,new k(4,81)),new J(30,new k(1,50),new k(4,51)),new J(28,new k(4,22),new k(4,23)),new J(24,new k(3,12),new k(8,13))),new t(12,Int32Array.from([6,32,58]),new J(24,new k(2,92),new k(2,93)),new J(22,new k(6,36),new k(2,37)),new J(26,new k(4,20),new k(6,21)),new J(28,new k(7,14),new k(4,15))),new t(13,Int32Array.from([6,34,62]),new J(26,new k(4,107)),new J(22,new k(8,37),new k(1,38)),new J(24,new k(8,20),new k(4,21)),new J(22,new k(12,11),new k(4,12))),new t(14,Int32Array.from([6,26,46,66]),new J(30,new k(3,115),new k(1,116)),new J(24,new k(4,40),new k(5,41)),new J(20,new k(11,16),new k(5,17)),new J(24,new k(11,12),new k(5,13))),new t(15,Int32Array.from([6,26,48,70]),new J(22,new k(5,87),new k(1,88)),new J(24,new k(5,41),new k(5,42)),new J(30,new k(5,24),new k(7,25)),new J(24,new k(11,12),new k(7,13))),new t(16,Int32Array.from([6,26,50,74]),new J(24,new k(5,98),new k(1,99)),new J(28,new k(7,45),new k(3,46)),new J(24,new k(15,19),new k(2,20)),new J(30,new k(3,15),new k(13,16))),new t(17,Int32Array.from([6,30,54,78]),new J(28,new k(1,107),new k(5,108)),new J(28,new k(10,46),new k(1,47)),new J(28,new k(1,22),new k(15,23)),new J(28,new k(2,14),new k(17,15))),new t(18,Int32Array.from([6,30,56,82]),new J(30,new k(5,120),new k(1,121)),new J(26,new k(9,43),new k(4,44)),new J(28,new k(17,22),new k(1,23)),new J(28,new k(2,14),new k(19,15))),new t(19,Int32Array.from([6,30,58,86]),new J(28,new k(3,113),new k(4,114)),new J(26,new k(3,44),new k(11,45)),new J(26,new k(17,21),new k(4,22)),new J(26,new k(9,13),new k(16,14))),new t(20,Int32Array.from([6,34,62,90]),new J(28,new k(3,107),new k(5,108)),new J(26,new k(3,41),new k(13,42)),new J(30,new k(15,24),new k(5,25)),new J(28,new k(15,15),new k(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new J(28,new k(4,116),new k(4,117)),new J(26,new k(17,42)),new J(28,new k(17,22),new k(6,23)),new J(30,new k(19,16),new k(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new J(28,new k(2,111),new k(7,112)),new J(28,new k(17,46)),new J(30,new k(7,24),new k(16,25)),new J(24,new k(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new J(30,new k(4,121),new k(5,122)),new J(28,new k(4,47),new k(14,48)),new J(30,new k(11,24),new k(14,25)),new J(30,new k(16,15),new k(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new J(30,new k(6,117),new k(4,118)),new J(28,new k(6,45),new k(14,46)),new J(30,new k(11,24),new k(16,25)),new J(30,new k(30,16),new k(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new J(26,new k(8,106),new k(4,107)),new J(28,new k(8,47),new k(13,48)),new J(30,new k(7,24),new k(22,25)),new J(30,new k(22,15),new k(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new J(28,new k(10,114),new k(2,115)),new J(28,new k(19,46),new k(4,47)),new J(28,new k(28,22),new k(6,23)),new J(30,new k(33,16),new k(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new J(30,new k(8,122),new k(4,123)),new J(28,new k(22,45),new k(3,46)),new J(30,new k(8,23),new k(26,24)),new J(30,new k(12,15),new k(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new k(3,117),new k(10,118)),new J(28,new k(3,45),new k(23,46)),new J(30,new k(4,24),new k(31,25)),new J(30,new k(11,15),new k(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new k(7,116),new k(7,117)),new J(28,new k(21,45),new k(7,46)),new J(30,new k(1,23),new k(37,24)),new J(30,new k(19,15),new k(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new k(5,115),new k(10,116)),new J(28,new k(19,47),new k(10,48)),new J(30,new k(15,24),new k(25,25)),new J(30,new k(23,15),new k(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new k(13,115),new k(3,116)),new J(28,new k(2,46),new k(29,47)),new J(30,new k(42,24),new k(1,25)),new J(30,new k(23,15),new k(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new k(17,115)),new J(28,new k(10,46),new k(23,47)),new J(30,new k(10,24),new k(35,25)),new J(30,new k(19,15),new k(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new k(17,115),new k(1,116)),new J(28,new k(14,46),new k(21,47)),new J(30,new k(29,24),new k(19,25)),new J(30,new k(11,15),new k(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new k(13,115),new k(6,116)),new J(28,new k(14,46),new k(23,47)),new J(30,new k(44,24),new k(7,25)),new J(30,new k(59,16),new k(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new k(12,121),new k(7,122)),new J(28,new k(12,47),new k(26,48)),new J(30,new k(39,24),new k(14,25)),new J(30,new k(22,15),new k(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new k(6,121),new k(14,122)),new J(28,new k(6,47),new k(34,48)),new J(30,new k(46,24),new k(10,25)),new J(30,new k(2,15),new k(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new k(17,122),new k(4,123)),new J(28,new k(29,46),new k(14,47)),new J(30,new k(49,24),new k(10,25)),new J(30,new k(24,15),new k(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new k(4,122),new k(18,123)),new J(28,new k(13,46),new k(32,47)),new J(30,new k(48,24),new k(14,25)),new J(30,new k(42,15),new k(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new k(20,117),new k(4,118)),new J(28,new k(40,47),new k(7,48)),new J(30,new k(43,24),new k(22,25)),new J(30,new k(10,15),new k(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new k(19,118),new k(6,119)),new J(28,new k(18,47),new k(31,48)),new J(30,new k(34,24),new k(34,25)),new J(30,new k(20,15),new k(61,16)))],t}(),er;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(er||(er={}));var nv=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[er.DATA_MASK_000,new t(er.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[er.DATA_MASK_001,new t(er.DATA_MASK_001,function(e,r){return(e&1)===0})],[er.DATA_MASK_010,new t(er.DATA_MASK_010,function(e,r){return r%3===0})],[er.DATA_MASK_011,new t(er.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[er.DATA_MASK_100,new t(er.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[er.DATA_MASK_101,new t(er.DATA_MASK_101,function(e,r){return e*r%6===0})],[er.DATA_MASK_110,new t(er.DATA_MASK_110,function(e,r){return e*r%6<3})],[er.DATA_MASK_111,new t(er.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),NO=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new ye;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),s=0,o=i-7,n=i-1;n>=o;n--)s=this.copyBit(8,n,s);for(var r=i-8;r<i;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=Py.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ye},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return gs.getVersionForNumber(r);for(var n=0,i=e-11,s=5;s>=0;s--)for(var o=e-9;o>=i;o--)n=this.copyBit(o,s,n);var a=gs.decodeVersionInformation(n);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;n=0;for(var o=5;o>=0;o--)for(var s=e-9;s>=i;s--)n=this.copyBit(o,s,n);if(a=gs.decodeVersionInformation(n),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new ye},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=nv.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var s=r.buildFunctionPattern(),o=!0,a=new Uint8Array(r.getTotalCodewords()),f=0,c=0,u=0,h=i-1;h>0;h-=2){h===6&&h--;for(var d=0;d<i;d++)for(var p=o?i-1-d:d,v=0;v<2;v++)s.get(h-v,p)||(u++,c<<=1,this.bitMatrix.get(h-v,p)&&(c|=1),u===8&&(a[f++]=c,u=0,c=0));o=!o}if(f!==r.getTotalCodewords())throw new ye;return a},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=nv.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,s=e.getHeight();i<s;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t}(),iv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PO=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,s,o,a;if(e.length!==r.getTotalCodewords())throw new Ce;var f=r.getECBlocksForLevel(n),c=0,u=f.getECBlocks();try{for(var h=iv(u),d=h.next();!d.done;d=h.next()){var p=d.value;c+=p.getCount()}}catch(b){i={error:b}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}var v=new Array(c),x=0;try{for(var C=iv(u),O=C.next();!O.done;O=C.next())for(var p=O.value,M=0;M<p.getCount();M++){var R=p.getDataCodewords(),T=f.getECCodewordsPerBlock()+R;v[x++]=new t(R,new Uint8Array(T))}}catch(b){o={error:b}}finally{try{O&&!O.done&&(a=C.return)&&a.call(C)}finally{if(o)throw o.error}}for(var P=v[0].codewords.length,N=v.length-1;N>=0;){var $=v[N].codewords.length;if($===P)break;N--}N++;for(var U=P-f.getECCodewordsPerBlock(),V=0,M=0;M<U;M++)for(var H=0;H<x;H++)v[H].codewords[M]=e[V++];for(var H=N;H<x;H++)v[H].codewords[U]=e[V++];for(var B=v[0].codewords.length,M=U;M<B;M++)for(var H=0;H<x;H++){var y=H<N?M:M+1;v[H].codewords[y]=e[V++]}return v},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),an;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(an||(an={}));var Nt=function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Ce;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(an.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(an.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(an.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(an.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(an.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(an.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(an.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(an.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(an.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(an.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),FO=function(){function t(){}return t.decode=function(e,r,n,i){var s=new Ny(e),o=new _t,a=new Array,f=-1,c=-1;try{var u=null,h=!1,d=void 0;do{if(s.available()<4)d=Nt.TERMINATOR;else{var p=s.readBits(4);d=Nt.forBits(p)}switch(d){case Nt.TERMINATOR:break;case Nt.FNC1_FIRST_POSITION:case Nt.FNC1_SECOND_POSITION:h=!0;break;case Nt.STRUCTURED_APPEND:if(s.available()<16)throw new ye;f=s.readBits(8),c=s.readBits(8);break;case Nt.ECI:var v=t.parseECIValue(s);if(u=Xt.getCharacterSetECIByValue(v),u===null)throw new ye;break;case Nt.HANZI:var x=s.readBits(4),C=s.readBits(d.getCharacterCountBits(r));x===t.GB2312_SUBSET&&t.decodeHanziSegment(s,o,C);break;default:var O=s.readBits(d.getCharacterCountBits(r));switch(d){case Nt.NUMERIC:t.decodeNumericSegment(s,o,O);break;case Nt.ALPHANUMERIC:t.decodeAlphanumericSegment(s,o,O,h);break;case Nt.BYTE:t.decodeByteSegment(s,o,O,u,a,i);break;case Nt.KANJI:t.decodeKanjiSegment(s,o,O);break;default:throw new ye}break}}while(d!==Nt.TERMINATOR)}catch{throw new ye}return new uc(e,o.toString(),a.length===0?null:a,n===null?null:n.toString(),f,c)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new ye;for(var i=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),a=o/96<<8&4294967295|o%96;a<959?a+=41377:a+=42657,i[s]=a>>8&255,i[s+1]=a&255,s+=2,n--}try{r.append(jn.decode(i,Ot.GB2312))}catch(f){throw new ye(f)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new ye;for(var i=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),a=o/192<<8&4294967295|o%192;a<7936?a+=33088:a+=49472,i[s]=a>>8,i[s+1]=a,s+=2,n--}try{r.append(jn.decode(i,Ot.SHIFT_JIS))}catch(f){throw new ye(f)}},t.decodeByteSegment=function(e,r,n,i,s,o){if(8*n>e.available())throw new ye;for(var a=new Uint8Array(n),f=0;f<n;f++)a[f]=e.readBits(8);var c;i===null?c=Ot.guessEncoding(a,o):c=i.getName();try{r.append(jn.decode(a,c))}catch(u){throw new ye(u)}s.push(a)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new ye;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var s=r.length();n>1;){if(e.available()<11)throw new ye;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new ye;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=s;a<r.length();a++)r.charAt(a)==="%"&&(a<r.length()-1&&r.charAt(a+1)==="%"?r.deleteCharAt(a+1):r.setCharAt(a,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new ye;var i=e.readBits(10);if(i>=1e3)throw new ye;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new ye;var s=e.readBits(7);if(s>=100)throw new ye;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new ye;var o=e.readBits(4);if(o>=10)throw new ye;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new ye},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Fy=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),sv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BO=function(){function t(){this.rsDecoder=new hc(Ur.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Wn.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new NO(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){i=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new Fy(!0)),s}catch(o){throw i!==null?i:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,s,o,a=e.readVersion(),f=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=PO.getDataBlocks(c,a,f),h=0;try{for(var d=sv(u),p=d.next();!p.done;p=d.next()){var v=p.value;h+=v.getNumDataCodewords()}}catch(N){n={error:N}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var x=new Uint8Array(h),C=0;try{for(var O=sv(u),M=O.next();!M.done;M=O.next()){var v=M.value,R=v.getCodewords(),T=v.getNumDataCodewords();this.correctErrors(R,T);for(var P=0;P<T;P++)x[C++]=R[P]}}catch(N){s={error:N}}finally{try{M&&!M.done&&(o=O.return)&&o.call(O)}finally{if(s)throw s.error}}return FO.decode(x,a,f,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new cr}for(var i=0;i<r;i++)e[i]=n[i]},t}(),LO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$O=function(t){LO(e,t);function e(r,n,i){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=i,s}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var s=(this.getX()+n)/2,o=(this.getY()+r)/2,a=(this.estimatedModuleSize+i)/2;return new e(s,o,a)},e}(Ee),kO=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UO=function(){function t(e,r,n,i,s,o,a){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=s,this.moduleSize=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,s=this.startY+r/2,o=new Int32Array(3),a=this.image,f=0;f<r;f++){var c=s+(f&1?-Math.floor((f+1)/2):Math.floor((f+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=e;u<i&&!a.get(u,c);)u++;for(var h=0;u<i;){if(a.get(u,c))if(h===1)o[1]++;else if(h===2){if(this.foundPatternCross(o)){var d=this.handlePossibleCenter(o,c,u);if(d!==null)return d}o[0]=o[2],o[1]=1,o[2]=0,h=1}else o[++h]++;else h===1&&h++,o[h]++;u++}if(this.foundPatternCross(o)){var d=this.handlePossibleCenter(o,c,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var s=this.image,o=s.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var f=e;f>=0&&s.get(r,f)&&a[1]<=n;)a[1]++,f--;if(f<0||a[1]>n)return NaN;for(;f>=0&&!s.get(r,f)&&a[0]<=n;)a[0]++,f--;if(a[0]>n)return NaN;for(f=e+1;f<o&&s.get(r,f)&&a[1]<=n;)a[1]++,f++;if(f===o||a[1]>n)return NaN;for(;f<o&&!s.get(r,f)&&a[2]<=n;)a[2]++,f++;if(a[2]>n)return NaN;var c=a[0]+a[1]+a[2];return 5*Math.abs(c-i)>=2*i?NaN:this.foundPatternCross(a)?t.centerFromEnd(a,f):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,s,o=e[0]+e[1]+e[2],a=t.centerFromEnd(e,n),f=this.crossCheckVertical(r,a,2*e[1],o);if(!isNaN(f)){var c=(e[0]+e[1]+e[2])/3;try{for(var u=kO(this.possibleCenters),h=u.next();!h.done;h=u.next()){var d=h.value;if(d.aboutEquals(c,f,a))return d.combineEstimate(f,a,c)}}catch(v){i={error:v}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}var p=new $O(a,f,c);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),qO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zO=function(t){qO(e,t);function e(r,n,i,s){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o.count=s,s===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var s=this.count+1,o=(this.count*this.getX()+n)/s,a=(this.count*this.getY()+r)/s,f=(this.count*this.estimatedModuleSize+i)/s;return new e(o,a,f,s)},e}(Ee),VO=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Mo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jO=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Bt.TRY_HARDER)!==void 0,n=e!=null&&e.get(Bt.PURE_BARCODE)!==void 0,i=this.image,s=i.getHeight(),o=i.getWidth(),a=Math.floor(3*s/(4*t.MAX_MODULES));(a<t.MIN_SKIP||r)&&(a=t.MIN_SKIP);for(var f=!1,c=new Int32Array(5),u=a-1;u<s&&!f;u+=a){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var h=0,d=0;d<o;d++)if(i.get(d,u))(h&1)===1&&h++,c[h]++;else if(h&1)c[h]++;else if(h===4)if(t.foundPatternCross(c)){var p=this.handlePossibleCenter(c,u,d,n);if(p===!0)if(a=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>c[2]&&(u+=v-c[2]-a,d=o-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,h=3;continue}h=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,h=3;else c[++h]++;if(t.foundPatternCross(c)){var p=this.handlePossibleCenter(c,u,o,n);p===!0&&(a=c[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}}var x=this.selectBestPatterns();return Ee.orderBestPatterns(x),new VO(x)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var s=r/7,o=s/2;return Math.abs(s-e[0])<o&&Math.abs(s-e[1])<o&&Math.abs(3*s-e[2])<3*o&&Math.abs(s-e[3])<o&&Math.abs(s-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var s=this.getCrossCheckStateCount(),o=0,a=this.image;e>=o&&r>=o&&a.get(r-o,e-o);)s[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!a.get(r-o,e-o)&&s[1]<=n;)s[1]++,o++;if(e<o||r<o||s[1]>n)return!1;for(;e>=o&&r>=o&&a.get(r-o,e-o)&&s[0]<=n;)s[0]++,o++;if(s[0]>n)return!1;var f=a.getHeight(),c=a.getWidth();for(o=1;e+o<f&&r+o<c&&a.get(r+o,e+o);)s[2]++,o++;if(e+o>=f||r+o>=c)return!1;for(;e+o<f&&r+o<c&&!a.get(r+o,e+o)&&s[3]<n;)s[3]++,o++;if(e+o>=f||r+o>=c||s[3]>=n)return!1;for(;e+o<f&&r+o<c&&a.get(r+o,e+o)&&s[4]<n;)s[4]++,o++;if(s[4]>=n)return!1;var u=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(u-i)<2*i&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var s=this.image,o=s.getHeight(),a=this.getCrossCheckStateCount(),f=e;f>=0&&s.get(r,f);)a[2]++,f--;if(f<0)return NaN;for(;f>=0&&!s.get(r,f)&&a[1]<=n;)a[1]++,f--;if(f<0||a[1]>n)return NaN;for(;f>=0&&s.get(r,f)&&a[0]<=n;)a[0]++,f--;if(a[0]>n)return NaN;for(f=e+1;f<o&&s.get(r,f);)a[2]++,f++;if(f===o)return NaN;for(;f<o&&!s.get(r,f)&&a[3]<n;)a[3]++,f++;if(f===o||a[3]>=n)return NaN;for(;f<o&&s.get(r,f)&&a[4]<n;)a[4]++,f++;if(a[4]>=n)return NaN;var c=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(c-i)>=2*i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,f):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var s=this.image,o=s.getWidth(),a=this.getCrossCheckStateCount(),f=e;f>=0&&s.get(f,r);)a[2]++,f--;if(f<0)return NaN;for(;f>=0&&!s.get(f,r)&&a[1]<=n;)a[1]++,f--;if(f<0||a[1]>n)return NaN;for(;f>=0&&s.get(f,r)&&a[0]<=n;)a[0]++,f--;if(a[0]>n)return NaN;for(f=e+1;f<o&&s.get(f,r);)a[2]++,f++;if(f===o)return NaN;for(;f<o&&!s.get(f,r)&&a[3]<n;)a[3]++,f++;if(f===o||a[3]>=n)return NaN;for(;f<o&&s.get(f,r)&&a[4]<n;)a[4]++,f++;if(a[4]>=n)return NaN;var c=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(c-i)>=i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,f):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var s=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),a=this.crossCheckVertical(r,Math.floor(o),e[2],s);if(!isNaN(a)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(a),e[2],s),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(o),e[2],s)))){for(var f=s/7,c=!1,u=this.possibleCenters,h=0,d=u.length;h<d;h++){var p=u[h];if(p.aboutEquals(f,a,o)){u[h]=p.combineEstimate(a,o,f),c=!0;break}}if(!c){var v=new zO(o,a,f);u.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var s=Mo(this.possibleCenters),o=s.next();!o.done;o=s.next()){var a=o.value;if(a.getCount()>=t.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(f){e={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,s=0,o=0,a=this.possibleCenters.length;try{for(var f=Mo(this.possibleCenters),c=f.next();!c.done;c=f.next()){var u=c.value;u.getCount()>=t.CENTER_QUORUM&&(s++,o+=u.getEstimatedModuleSize())}}catch(x){e={error:x}}finally{try{c&&!c.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}if(s<3)return!1;var h=o/a,d=0;try{for(var p=Mo(this.possibleCenters),v=p.next();!v.done;v=p.next()){var u=v.value;d+=Math.abs(u.getEstimatedModuleSize()-h)}}catch(x){n={error:x}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return d<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,i,s=this.possibleCenters.length;if(s<3)throw new ie;var o=this.possibleCenters,a;if(s>3){var f=0,c=0;try{for(var u=Mo(this.possibleCenters),h=u.next();!h.done;h=u.next()){var d=h.value,p=d.getEstimatedModuleSize();f+=p,c+=p*p}}catch(P){e={error:P}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}a=f/s;var v=Math.sqrt(c/s-a*a);o.sort(function(P,N){var $=Math.abs(N.getEstimatedModuleSize()-a),U=Math.abs(P.getEstimatedModuleSize()-a);return $<U?-1:$>U?1:0});for(var x=Math.max(.2*a,v),C=0;C<o.length&&o.length>3;C++){var O=o[C];Math.abs(O.getEstimatedModuleSize()-a)>x&&(o.splice(C,1),C--)}}if(o.length>3){var f=0;try{for(var M=Mo(o),R=M.next();!R.done;R=M.next()){var T=R.value;f+=T.getEstimatedModuleSize()}}catch(N){n={error:N}}finally{try{R&&!R.done&&(i=M.return)&&i.call(M)}finally{if(n)throw n.error}}a=f/o.length,o.sort(function(N,$){if($.getCount()===N.getCount()){var U=Math.abs($.getEstimatedModuleSize()-a),V=Math.abs(N.getEstimatedModuleSize()-a);return U<V?1:U>V?-1:0}else return $.getCount()-N.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),HO=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Bt.NEED_RESULT_POINT_CALLBACK);var r=new jO(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),s=this.calculateModuleSize(r,n,i);if(s<1)throw new ie("No pattern found in proccess finder.");var o=t.computeDimension(r,n,i,s),a=gs.getProvisionalVersionForDimension(o),f=a.getDimensionForVersion()-7,c=null;if(a.getAlignmentPatternCenters().length>0)for(var u=n.getX()-r.getX()+i.getX(),h=n.getY()-r.getY()+i.getY(),d=1-3/f,p=Math.floor(r.getX()+d*(u-r.getX())),v=Math.floor(r.getY()+d*(h-r.getY())),x=4;x<=16;x<<=1)try{c=this.findAlignmentInRegion(s,p,v,x);break}catch(R){if(!(R instanceof ie))throw R}var C=t.createTransform(r,n,i,c,o),O=t.sampleGrid(this.image,C,o),M;return c===null?M=[i,r,n]:M=[i,r,n,c],new Fl(O,M)},t.createTransform=function(e,r,n,i,s){var o=s-3.5,a,f,c,u;return i!==null?(a=i.getX(),f=i.getY(),c=o-3,u=c):(a=r.getX()-e.getX()+n.getX(),f=r.getY()-e.getY()+n.getY(),c=o,u=o),Oy.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,u,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),a,f,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=Bl.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var s=nt.round(Ee.distance(e,r)/i),o=nt.round(Ee.distance(e,n)/i),a=Math.floor((s+o)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new ie("Dimensions could be not found.")}return a},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,i),o=1,a=e-(n-e);a<0?(o=e/(e-a),a=0):a>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var f=Math.floor(r-(i-r)*o);return o=1,f<0?(o=r/(r-f),f=0):f>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(f-r),f=this.image.getHeight()-1),a=Math.floor(e+(a-e)*o),s+=this.sizeOfBlackWhiteBlackRun(e,r,a,f),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var s=Math.abs(i-r)>Math.abs(n-e);if(s){var o=e;e=r,r=o,o=n,n=i,i=o}for(var a=Math.abs(n-e),f=Math.abs(i-r),c=-a/2,u=e<n?1:-1,h=r<i?1:-1,d=0,p=n+u,v=e,x=r;v!==p;v+=u){var C=s?x:v,O=s?v:x;if(d===1===this.image.get(C,O)){if(d===2)return nt.distance(v,x,e,r);d++}if(c+=f,c>0){if(x===i)break;x+=h,c-=a}}return d===2?nt.distance(n+u,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var s=Math.floor(i*e),o=Math.max(0,r-s),a=Math.min(this.image.getWidth()-1,r+s);if(a-o<e*3)throw new ie("Alignment top exceeds estimated module size.");var f=Math.max(0,n-s),c=Math.min(this.image.getHeight()-1,n+s);if(c-f<e*3)throw new ie("Alignment bottom exceeds estimated module size.");var u=new UO(this.image,o,f,a-o,c-f,e,this.resultPointCallback);return u.find()},t}(),Ph=function(){function t(){this.decoder=new BO}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(Bt.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),i=t.NO_POINTS}else{var o=new HO(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),i=o.getPoints()}n.getOther()instanceof Fy&&n.getOther().applyMirroredCorrection(i);var a=new Vr(n.getText(),n.getRawBytes(),void 0,i,De.QR_CODE,void 0),f=n.getByteSegments();f!==null&&a.putMetadata(ur.BYTE_SEGMENTS,f);var c=n.getECLevel();return c!==null&&a.putMetadata(ur.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(a.putMetadata(ur.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),a.putMetadata(ur.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),a},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new ie;var i=this.moduleSize(r,e),s=r[1],o=n[1],a=r[0],f=n[0];if(a>=f||s>=o)throw new ie;if(o-s!==f-a&&(f=a+(o-s),f>=e.getWidth()))throw new ie;var c=Math.round((f-a+1)/i),u=Math.round((o-s+1)/i);if(c<=0||u<=0)throw new ie;if(u!==c)throw new ie;var h=Math.floor(i/2);s+=h,a+=h;var d=a+Math.floor((c-1)*i)-f;if(d>0){if(d>h)throw new ie;a-=d}var p=s+Math.floor((u-1)*i)-o;if(p>0){if(p>h)throw new ie;s-=p}for(var v=new Wn(c,u),x=0;x<u;x++)for(var C=s+Math.floor(x*i),O=0;O<c;O++)e.get(a+Math.floor(O*i),C)&&v.set(O,x);return v},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),s=e[0],o=e[1],a=!0,f=0;s<i&&o<n;){if(a!==r.get(s,o)){if(++f===5)break;a=!a}s++,o++}if(s===i||o===n)throw new ie;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),KO=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ze=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return nt.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),s=0;try{for(var o=KO(e),a=o.next();!a.done;a=o.next()){var f=a.value;i[s++]=f}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=qr.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),WO=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),GO=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XO=function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),s=t.detect(n,i);return s.length||(i=i.clone(),i.rotate180(),s=t.detect(n,i)),new WO(i,s)},t.detect=function(e,r){for(var n,i,s=new Array,o=0,a=0,f=!1;o<r.getHeight();){var c=t.findVertices(r,o,a);if(c[0]==null&&c[3]==null){if(!f)break;f=!1,a=0;try{for(var u=(n=void 0,GO(s)),h=u.next();!h.done;h=u.next()){var d=h.value;d[1]!=null&&(o=Math.trunc(Math.max(o,d[1].getY()))),d[3]!=null&&(o=Math.max(o,Math.trunc(d[3].getY())))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(f=!0,s.push(c),!e)break;c[2]!=null?(a=Math.trunc(c[2].getX()),o=Math.trunc(c[2].getY())):(a=Math.trunc(c[4].getX()),o=Math.trunc(c[4].getY()))}return s},t.findVertices=function(e,r,n){var i=e.getHeight(),s=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,i,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,i,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,s,o){for(var a=new Array(4),f=!1,c=new Int32Array(o.length);i<r;i+=t.ROW_STEP){var u=t.findGuardPattern(e,s,i,n,!1,o,c);if(u!=null){for(;i>0;){var h=t.findGuardPattern(e,s,--i,n,!1,o,c);if(h!=null)u=h;else{i++;break}}a[0]=new Ee(u[0],i),a[1]=new Ee(u[1],i),f=!0;break}}var d=i+1;if(f){for(var p=0,h=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);d<r;d++){var u=t.findGuardPattern(e,h[0],d,n,!1,o,c);if(u!=null&&Math.abs(h[0]-u[0])<t.MAX_PATTERN_DRIFT&&Math.abs(h[1]-u[1])<t.MAX_PATTERN_DRIFT)h=u,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}d-=p+1,a[2]=new Ee(h[0],d),a[3]=new Ee(h[1],d)}return d-i<t.BARCODE_MIN_HEIGHT&&qr.fill(a,null),a},t.findGuardPattern=function(e,r,n,i,s,o,a){qr.fillWithin(a,0,a.length,0);for(var f=r,c=0;e.get(f,n)&&f>0&&c++<t.MAX_PIXEL_DRIFT;)f--;for(var u=f,h=0,d=o.length,p=s;u<i;u++){var v=e.get(u,n);if(v!==p)a[h]++;else{if(h===d-1){if(t.patternMatchVariance(a,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([f,u]);f+=a[0]+a[1],Dt.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,p=!p}}return h===d-1&&t.patternMatchVariance(a,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([f,u-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,s=0,o=0,a=0;a<i;a++)s+=e[a],o+=r[a];if(s<o)return 1/0;var f=s/o;n*=f;for(var c=0,u=0;u<i;u++){var h=e[u],d=r[u]*f,p=h>d?h-d:d-h;if(p>n)return 1/0;c+=p}return c/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),YO=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ds=function(){function t(e,r){if(r.length===0)throw new Ce;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),Dt.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var s=YO(this.coefficients),o=s.next();!o.done;o=s.next()){var a=o.value;i=this.field.add(i,a)}}catch(h){r={error:h}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}for(var f=this.coefficients[0],c=this.coefficients.length,u=1;u<c;u++)f=this.field.add(this.field.multiply(e,f),this.coefficients[u]);return f},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var s=new Int32Array(n.length),o=n.length-r.length;Dt.arraycopy(n,0,s,0,o);for(var a=o;a<n.length;a++)s[a]=this.field.add(r[a-o],n[a]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,s=i.length,o=new Int32Array(n+s-1),a=0;a<n;a++)for(var f=r[a],c=0;c<s;c++)o[a+c]=this.field.add(o[a+c],this.field.multiply(f,i[c]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Ce;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),s=0;s<n;s++)i[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new _t,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),ZO=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new My;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),JO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QO=function(t){JO(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var s=1,o=0;o<r;o++)i.expTable[o]=s,s=s*n%r;for(var o=0;o<r-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new ds(i,new Int32Array([0])),i.one=new ds(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Ce;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new ds(this,i)},e.PDF417_GF=new e(Ze.NUMBER_OF_CODEWORDS,3),e}(ZO),eD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tD=function(){function t(){this.field=QO.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,s,o=new ds(this.field,e),a=new Int32Array(r),f=!1,c=r;c>0;c--){var u=o.evaluateAt(this.field.exp(c));a[r-c]=u,u!==0&&(f=!0)}if(!f)return 0;var h=this.field.getOne();if(n!=null)try{for(var d=eD(n),p=d.next();!p.done;p=d.next()){var v=p.value,x=this.field.exp(e.length-1-v),C=new ds(this.field,new Int32Array([this.field.subtract(0,x),1]));h=h.multiply(C)}}catch(U){i={error:U}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}for(var O=new ds(this.field,a),M=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),O,r),R=M[0],T=M[1],P=this.findErrorLocations(R),N=this.findErrorMagnitudes(T,R,P),c=0;c<P.length;c++){var $=e.length-1-this.field.log(P[c]);if($<0)throw cr.getChecksumInstance();e[$]=this.field.subtract(e[$],N[c])}return P.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var s=e,o=r,a=this.field.getZero(),f=this.field.getOne();o.getDegree()>=Math.round(n/2);){var c=s,u=a;if(s=o,a=f,s.isZero())throw cr.getChecksumInstance();o=c;for(var h=this.field.getZero(),d=s.getCoefficient(s.getDegree()),p=this.field.inverse(d);o.getDegree()>=s.getDegree()&&!o.isZero();){var v=o.getDegree()-s.getDegree(),x=this.field.multiply(o.getCoefficient(o.getDegree()),p);h=h.add(this.field.buildMonomial(v,x)),o=o.subtract(s.multiplyByMonomial(v,x))}f=h.multiply(a).subtract(u).negative()}var C=f.getCoefficient(0);if(C===0)throw cr.getChecksumInstance();var O=this.field.inverse(C),M=f.multiply(O),R=o.multiply(O);return[M,R]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,s=1;s<this.field.getSize()&&i<r;s++)e.evaluateAt(s)===0&&(n[i]=this.field.inverse(s),i++);if(i!==r)throw cr.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),s=new Int32Array(i),o=1;o<=i;o++)s[i-o]=this.field.multiply(o,r.getCoefficient(o));for(var a=new ds(this.field,s),f=n.length,c=new Int32Array(f),o=0;o<f;o++){var u=this.field.inverse(n[o]),h=this.field.subtract(0,e.evaluateAt(u)),d=this.field.inverse(a.evaluateAt(u));c[o]=this.field.multiply(h,d)}return c},t}(),Fh=function(){function t(e,r,n,i,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,s)}return t.prototype.constructor_1=function(e,r,n,i,s){var o=r==null||n==null,a=i==null||s==null;if(o&&a)throw new ie;o?(r=new Ee(0,i.getY()),n=new Ee(0,s.getY())):a&&(i=new Ee(e.getWidth()-1,r.getY()),s=new Ee(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,s=this.bottomLeft,o=this.topRight,a=this.bottomRight;if(e>0){var f=n?this.topLeft:this.topRight,c=Math.trunc(f.getY()-e);c<0&&(c=0);var u=new Ee(f.getX(),c);n?i=u:o=u}if(r>0){var h=n?this.bottomLeft:this.bottomRight,d=Math.trunc(h.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var p=new Ee(h.getX(),d);n?s=p:a=p}return new t(this.image,i,s,o,a)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),rD=function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),$l=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(o,a,f,c,u,h){if(o==="%%")return"%";if(r[++n]!==void 0){o=c?parseInt(c.substr(1)):void 0;var d=u?parseInt(u.substr(1)):void 0,p;switch(h){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(o);break;case"p":p=parseFloat(r[n]).toPrecision(o);break;case"e":p=parseFloat(r[n]).toExponential(o);break;case"x":p=parseInt(r[n]).toString(d||16);break;case"d":p=parseFloat(parseInt(r[n],d||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(d);for(var v=parseInt(f),x=f&&f[0]+""=="0"?"0":" ";p.length<v;)p=a!==void 0?p+x:x+p;return p}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),nD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},By=function(){function t(e){this.boundingBox=new Fh(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new $l,i=0;try{for(var s=nD(this.codewords),o=s.next();!o.done;o=s.next()){var a=o.value;if(a==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(f){e={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),iD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sD=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},$o=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,s=function(h,d){var p={getKey:function(){return h},getValue:function(){return d}};p.getValue()>n?(n=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===n&&i.push(p.getKey())};try{for(var o=iD(this.values.entries()),a=o.next();!a.done;a=o.next()){var f=sD(a.value,2),c=f[0],u=f[1];s(c,u)}}catch(h){e={error:h}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return Ze.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),oD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ku=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ov=function(t){oD(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=ku(this.getCodewords()),s=i.next();!s.done;s=i.next()){var o=s.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=-1,u=1,h=0,d=a;d<f;d++)if(n[d]!=null){var p=n[d],v=p.getRowNumber()-c;if(v===0)h++;else if(v===1)u=Math.max(u,h),h=1,c=p.getRowNumber();else if(v<0||p.getRowNumber()>=r.getRowCount()||v>d)n[d]=null;else{var x=void 0;u>2?x=(u-2)*v:x=v;for(var C=x>=d,O=1;O<=x&&!C;O++)C=n[d-O]!=null;C?n[d]=null:(c=p.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var s=new Int32Array(i.getRowCount());try{for(var o=ku(this.getCodewords()),a=o.next();!a.done;a=o.next()){var f=a.value;if(f!=null){var c=f.getRowNumber();if(c>=s.length)continue;s[c]++}}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=this.getCodewords(),c=-1,u=o;u<a;u++)if(f[u]!=null){var h=f[u];h.setRowNumberAsRowIndicatorColumn();var d=h.getRowNumber()-c;d===0||(d===1?c=h.getRowNumber():h.getRowNumber()>=r.getRowCount()?f[u]=null:c=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),s=new $o,o=new $o,a=new $o,f=new $o;try{for(var c=ku(i),u=c.next();!u.done;u=c.next()){var h=u.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var d=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(d*3+1);break;case 1:f.setValue(d/3),a.setValue(d%3);break;case 2:s.setValue(d+1);break}}}}catch(x){r={error:x}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}if(s.getValue().length===0||o.getValue().length===0||a.getValue().length===0||f.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<Ze.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>Ze.MAX_ROWS_IN_BARCODE)return null;var v=new rD(s.getValue()[0],o.getValue()[0],a.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var s=r[i];if(r[i]!=null){var o=s.getValue()%30,a=s.getRowNumber();if(a>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:o+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(By),aD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fD=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ze.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var s=this.detectionResultColumns[i].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),s=0,o=this.barcodeColumnCount+1;o>0&&s<this.ADJUST_ROW_NUMBER_SKIP;o--){var a=this.detectionResultColumns[o].getCodewords()[n];a!=null&&(s=t.adjustRowNumberIfValid(i,s,a),a.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),s=0,o=1;o<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;o++){var a=this.detectionResultColumns[o].getCodewords()[n];a!=null&&(s=t.adjustRowNumberIfValid(i,s,a),a.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,s;if(this.detectionResultColumns[e-1]!=null){var o=n[r],a=this.detectionResultColumns[e-1].getCodewords(),f=a;this.detectionResultColumns[e+1]!=null&&(f=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=a[r],c[3]=f[r],r>0&&(c[0]=n[r-1],c[4]=a[r-1],c[5]=f[r-1]),r>1&&(c[8]=n[r-2],c[10]=a[r-2],c[11]=f[r-2]),r<n.length-1&&(c[1]=n[r+1],c[6]=a[r+1],c[7]=f[r+1]),r<n.length-2&&(c[9]=n[r+2],c[12]=a[r+2],c[13]=f[r+2]);try{for(var u=aD(c),h=u.next();!h.done;h=u.next()){var d=h.value;if(t.adjustRowNumber(o,d))return}}catch(p){i={error:p}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new $l,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[i].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),cD=function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),uD=function(){function t(){}return t.initialize=function(){for(var e=0;e<Ze.SYMBOL_TABLE.length;e++)for(var r=Ze.SYMBOL_TABLE[e],n=r&1,i=0;i<Ze.BARS_IN_MODULE;i++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Ze.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Ze.BARS_IN_MODULE-i-1]=Math.fround(s/Ze.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=nt.sum(e),n=new Int32Array(Ze.BARS_IN_MODULE),i=0,s=0,o=0;o<Ze.MODULES_IN_CODEWORD;o++){var a=r/(2*Ze.MODULES_IN_CODEWORD)+o*r/Ze.MODULES_IN_CODEWORD;s+e[i]<=a&&(s+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Ze.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=nt.sum(e),n=new Array(Ze.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var s=Oh.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var a=0;a<t.RATIOS_TABLE.length;a++){for(var f=0,c=t.RATIOS_TABLE[a],u=0;u<Ze.BARS_IN_MODULE;u++){var h=Math.fround(c[u]-n[u]);if(f+=Math.fround(h*h),f>=s)break}f<s&&(s=f,o=Ze.SYMBOL_TABLE[a])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Ze.SYMBOL_TABLE.length).map(function(e){return new Array(Ze.BARS_IN_MODULE)}),t}(),hD=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),av=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),lD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dD=function(t){lD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Tr),pD=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new dD;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new Nl;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),vD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gD=function(t){vD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Tr),yD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bD=function(t){yD(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Ce("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new gD;i=Ye.MAX_VALUE}this.buf=qr.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new Nl;this.ensureCapacity(this.count+i),Dt.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return qr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(pD),wt;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(wt||(wt={}));function Ly(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var ja;function Fi(t){if(typeof ja>"u"&&(ja=Ly()),ja===null)throw new Error("BigInt is not supported!");return ja(t)}function mD(){var t=[];t[0]=Fi(1);var e=Fi(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var wD=function(){function t(){}return t.decode=function(e,r){var n=new _t(""),i=Xt.ISO8859_1;n.enableDecoding(i);for(var s=1,o=e[s++],a=new hD;s<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(o,e,i,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:Xt.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,a);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new ye;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)o=e[s++];else throw ye.getFormatInstance()}if(n.length()===0)throw ye.getFormatInstance();var f=new uc(null,n.toString(),null,r);return f.setOther(a),f},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ye.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)i[s]=e[r];n.setSegmentIndex(Ye.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new _t;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var a=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var f=new _t;r=t.textCompaction(e,r+1,f),n.setFileName(f.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new _t;r=t.textCompaction(e,r+1,c),n.setSender(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new _t;r=t.textCompaction(e,r+1,u),n.setAddressee(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new _t;r=t.numericCompaction(e,r+1,h),n.setSegmentCount(Ye.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new _t;r=t.numericCompaction(e,r+1,d),n.setTimestamp(av.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new _t;r=t.numericCompaction(e,r+1,p),n.setChecksum(Ye.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new _t;r=t.numericCompaction(e,r+1,v),n.setFileSize(av.parseLong(v.toString()));break;default:throw ye.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw ye.getFormatInstance()}if(a!==-1){var x=r-a;n.isLastSegment()&&x--,n.setOptionalData(qr.copyOfRange(e,a,a+x))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),o=0,a=!1;r<e[0]&&!a;){var f=e[r++];if(f<t.TEXT_COMPACTION_MODE_LATCH)i[o]=f/30,i[o+1]=f%30,o+=2;else switch(f){case t.TEXT_COMPACTION_MODE_LATCH:i[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[r++],s[o]=f,o++;break}}return t.decodeTextCompaction(i,s,o,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var s=wt.ALPHA,o=wt.ALPHA,a=0;a<n;){var f=e[a],c="";switch(s){case wt.ALPHA:if(f<26)c=String.fromCharCode(65+f);else switch(f){case 26:c=" ";break;case t.LL:s=wt.LOWER;break;case t.ML:s=wt.MIXED;break;case t.PS:o=s,s=wt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=wt.ALPHA;break}break;case wt.LOWER:if(f<26)c=String.fromCharCode(97+f);else switch(f){case 26:c=" ";break;case t.AS:o=s,s=wt.ALPHA_SHIFT;break;case t.ML:s=wt.MIXED;break;case t.PS:o=s,s=wt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=wt.ALPHA;break}break;case wt.MIXED:if(f<t.PL)c=t.MIXED_CHARS[f];else switch(f){case t.PL:s=wt.PUNCT;break;case 26:c=" ";break;case t.LL:s=wt.LOWER;break;case t.AL:s=wt.ALPHA;break;case t.PS:o=s,s=wt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=wt.ALPHA;break}break;case wt.PUNCT:if(f<t.PAL)c=t.PUNCT_CHARS[f];else switch(f){case t.PAL:s=wt.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=wt.ALPHA;break}break;case wt.ALPHA_SHIFT:if(s=o,f<26)c=String.fromCharCode(65+f);else switch(f){case 26:c=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=wt.ALPHA;break}break;case wt.PUNCT_SHIFT:if(s=o,f<t.PAL)c=t.PUNCT_CHARS[f];else switch(f){case t.PAL:s=wt.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=wt.ALPHA;break}break}c!==""&&i.append(c),a++}},t.byteCompaction=function(e,r,n,i,s){var o=new bD,a=0,f=0,c=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),h=r[i++];i<r[0]&&!c;)switch(u[a++]=h,f=900*f+h,h=r[i++],h){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,c=!0;break;default:if(a%5===0&&a>0){for(var d=0;d<6;++d)o.write(Number(Fi(f)>>Fi(8*(5-d))));f=0,a=0}break}i===r[0]&&h<t.TEXT_COMPACTION_MODE_LATCH&&(u[a++]=h);for(var p=0;p<a;p++)o.write(u[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!c;){var v=r[i++];if(v<t.TEXT_COMPACTION_MODE_LATCH)a++,f=900*f+v;else switch(v){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,c=!0;break}if(a%5===0&&a>0){for(var d=0;d<6;++d)o.write(Number(Fi(f)>>Fi(8*(5-d))));f=0,a=0}}break}return s.append(jn.decode(o.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,s=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var a=e[r++];if(r===e[0]&&(s=!0),a<t.TEXT_COMPACTION_MODE_LATCH)o[i]=a,i++;else switch(a){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||a===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&i>0&&(n.append(t.decodeBase900toBase10(o,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Fi(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*Fi(e[i]);var s=n.toString();if(s.charAt(0)!=="1")throw new ye;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=Ly()?mD():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),Oo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xD=function(){function t(){}return t.decode=function(e,r,n,i,s,o,a){for(var f=new Fh(e,r,n,i,s),c=null,u=null,h,d=!0;;d=!1){if(r!=null&&(c=t.getRowIndicatorColumn(e,f,r,!0,o,a)),i!=null&&(u=t.getRowIndicatorColumn(e,f,i,!1,o,a)),h=t.merge(c,u),h==null)throw ie.getNotFoundInstance();var p=h.getBoundingBox();if(d&&p!=null&&(p.getMinY()<f.getMinY()||p.getMaxY()>f.getMaxY()))f=p;else break}h.setBoundingBox(f);var v=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,c),h.setDetectionResultColumn(v,u);for(var x=c!=null,C=1;C<=v;C++){var O=x?C:v-C;if(h.getDetectionResultColumn(O)===void 0){var M=void 0;O===0||O===v?M=new ov(f,O===0):M=new By(f),h.setDetectionResultColumn(O,M);for(var R=-1,T=R,P=f.getMinY();P<=f.getMaxY();P++){if(R=t.getStartColumn(h,O,P,x),R<0||R>f.getMaxX()){if(T===-1)continue;R=T}var N=t.detectCodeword(e,f.getMinX(),f.getMaxX(),x,R,P,o,a);N!=null&&(M.setCodeword(P,N),T=R,o=Math.min(o,N.getWidth()),a=Math.max(a,N.getWidth()))}}}return t.createDecoderResult(h)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=Fh.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new fD(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var s=t.getMax(i),o=0;try{for(var a=Oo(i),f=a.next();!f.done;f=a.next()){var c=f.value;if(o+=s-c,c>0)break}}catch(p){r={error:p}}finally{try{f&&!f.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}for(var u=e.getCodewords(),h=0;o>0&&u[h]==null;h++)o--;for(var d=0,h=i.length-1;h>=0&&(d+=s-i[h],!(i[h]>0));h--);for(var h=u.length-1;d>0&&u[h]==null;h--)d--;return e.getBoundingBox().addMissingRows(o,d,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var s=Oo(e),o=s.next();!o.done;o=s.next()){var a=o.value;i=Math.max(i,a)}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,s,o){for(var a=new ov(r,i),f=0;f<2;f++)for(var c=f===0?1:-1,u=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=r.getMaxY()&&h>=r.getMinY();h+=c){var d=t.detectCodeword(e,0,e.getWidth(),i,u,h,s,o);d!=null&&(a.setCodeword(h,d),i?u=d.getStartX():u=d.getEndX())}return a},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(s<1||s>Ze.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();n.setValue(s)}else i[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],o=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var f=0;f<e.getBarcodeColumnCount();f++){var c=r[a][f+1].getValue(),u=a*e.getBarcodeColumnCount()+f;c.length===0?n.push(u):c.length===1?i[u]=c[0]:(o.push(u),s.push(c))}for(var h=new Array(s.length),d=0;d<h.length;d++)h[d]=s[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ze.toIntArray(n),Ze.toIntArray(o),h)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,s){for(var o=new Int32Array(i.length),a=100;a-- >0;){for(var f=0;f<o.length;f++)r[i[f]]=s[f][o[f]];try{return t.decodeCodewords(r,e,n)}catch(u){var c=u instanceof cr;if(!c)throw u}if(o.length===0)throw cr.getChecksumInstance();for(var f=0;f<o.length;f++)if(o[f]<s[f].length-1){o[f]++;break}else if(o[f]=0,f===o.length-1)throw cr.getChecksumInstance()}throw cr.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,s,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<o.length;a++)for(var f=0;f<o[a].length;f++)o[a][f]=new $o;var c=0;try{for(var u=Oo(e.getDetectionResultColumns()),h=u.next();!h.done;h=u.next()){var d=h.value;if(d!=null)try{for(var p=(i=void 0,Oo(d.getCodewords())),v=p.next();!v.done;v=p.next()){var x=v.value;if(x!=null){var C=x.getRowNumber();if(C>=0){if(C>=o.length)continue;o[C][c].setValue(x.getValue())}}}}catch(O){i={error:O}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}c++}}catch(O){r={error:O}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var s,o,a=i?1:-1,f=null;if(t.isValidBarcodeColumn(e,r-a)&&(f=e.getDetectionResultColumn(r-a).getCodeword(n)),f!=null)return i?f.getEndX():f.getStartX();if(f=e.getDetectionResultColumn(r).getCodewordNearby(n),f!=null)return i?f.getStartX():f.getEndX();if(t.isValidBarcodeColumn(e,r-a)&&(f=e.getDetectionResultColumn(r-a).getCodewordNearby(n)),f!=null)return i?f.getEndX():f.getStartX();for(var c=0;t.isValidBarcodeColumn(e,r-a);){r-=a;try{for(var u=(s=void 0,Oo(e.getDetectionResultColumn(r).getCodewords())),h=u.next();!h.done;h=u.next()){var d=h.value;if(d!=null)return(i?d.getEndX():d.getStartX())+a*c*(d.getEndX()-d.getStartX())}}catch(p){s={error:p}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(s)throw s.error}}c++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,s,o,a,f){s=t.adjustCodewordStartColumn(e,r,n,i,s,o);var c=t.getModuleBitCount(e,r,n,i,s,o);if(c==null)return null;var u,h=nt.sum(c);if(i)u=s+h;else{for(var d=0;d<c.length/2;d++){var p=c[d];c[d]=c[c.length-1-d],c[c.length-1-d]=p}u=s,s=u-h}if(!t.checkCodewordSkew(h,a,f))return null;var v=uD.getDecodedValue(c),x=Ze.getCodeword(v);return x===-1?null:new cD(s,u,t.getCodewordBucketNumber(v),x)},t.getModuleBitCount=function(e,r,n,i,s,o){for(var a=s,f=new Int32Array(8),c=0,u=i?1:-1,h=i;(i?a<n:a>=r)&&c<f.length;)e.get(a,o)===h?(f[c]++,a+=u):(c++,h=!h);return c===f.length||a===(i?n:r)&&c===f.length-1?f:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,s,o){for(var a=s,f=i?-1:1,c=0;c<2;c++){for(;(i?a>=r:a<n)&&i===e.get(a,o);){if(Math.abs(s-a)>t.CODEWORD_SKEW_SIZE)return s;a+=f}f=-f,i=!i}return a},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw ye.getFormatInstance();var i=1<<r+1,s=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var o=wD.decode(e,""+r);return o.setErrorsCorrected(s),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw cr.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw ye.getFormatInstance();var n=e[0];if(n>e.length)throw ye.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw ye.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new $l,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var s=e[n][i];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new tD,t}(),_D=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bh=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw ie.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof ye||n instanceof cr?ie.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,s,o=new Array,a=XO.detectMultiple(e,r,n);try{for(var f=_D(a.getPoints()),c=f.next();!c.done;c=f.next()){var u=c.value,h=xD.decode(a.getBits(),u[4],u[5],u[6],u[7],t.getMinCodewordWidth(u),t.getMaxCodewordWidth(u)),d=new Vr(h.getText(),h.getRawBytes(),void 0,u,De.PDF_417);d.putMetadata(ur.ERROR_CORRECTION_LEVEL,h.getECLevel());var p=h.getOther();p!=null&&d.putMetadata(ur.PDF417_EXTRA_METADATA,p),o.push(d)}}catch(v){i={error:v}}finally{try{c&&!c.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}return o.map(function(v){return v})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Ye.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),ED=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fv=function(t){ED(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Tr),cv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AD=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Bt.TRY_HARDER)!==void 0,n=e==null?null:e.get(Bt.POSSIBLE_FORMATS),i=new Array;if(n!=null){var s=n.some(function(o){return o===De.UPC_A||o===De.UPC_E||o===De.EAN_13||o===De.EAN_8||o===De.CODABAR||o===De.CODE_39||o===De.CODE_93||o===De.CODE_128||o===De.ITF||o===De.RSS_14||o===De.RSS_EXPANDED});s&&!r&&i.push(new Lo(e)),n.includes(De.QR_CODE)&&i.push(new Ph),n.includes(De.DATA_MATRIX)&&i.push(new Nh),n.includes(De.AZTEC)&&i.push(new Th),n.includes(De.PDF_417)&&i.push(new Bh),s&&r&&i.push(new Lo(e))}i.length===0&&(r||i.push(new Lo(e)),i.push(new Ph),i.push(new Nh),i.push(new Th),i.push(new Bh),r&&i.push(new Lo(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=cv(this.readers),i=n.next();!i.done;i=n.next()){var s=i.value;s.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new fv("No readers where selected, nothing can be read.");try{for(var i=cv(this.readers),s=i.next();!s.done;s=i.next()){var o=s.value;try{return o.decode(e,this.hints)}catch(a){if(a instanceof fv)continue}}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new ie("No MultiFormat Readers were able to detect the code.")},t}(),SD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ID=function(t){SD(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,s=new AD;return s.setHints(r),i=t.call(this,s,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e}(ao),CD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){CD(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Bh,r)||this}return e})(ao);var MD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){MD(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Ph,r)||this}return e})(ao);var Lh;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.MIN_SIZE=3]="MIN_SIZE",t[t.MAX_SIZE=4]="MAX_SIZE",t[t.MARGIN=5]="MARGIN",t[t.PDF417_COMPACT=6]="PDF417_COMPACT",t[t.PDF417_COMPACTION=7]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=9]="AZTEC_LAYERS",t[t.QR_VERSION=10]="QR_VERSION"})(Lh||(Lh={}));const Ha=Lh;var $y=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ui(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,s=r.length;s<=e;s++){var o=n.multiply(new Ui(i,Int32Array.from([1,i.exp(s-1+i.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Ce("No error correction bytes");var n=e.length-r;if(n<=0)throw new Ce("No data bytes provided");var i=this.buildGenerator(r),s=new Int32Array(n);Dt.arraycopy(e,0,s,0,n);var o=new Ui(this.field,s);o=o.multiplyByMonomial(r,1);for(var a=o.divide(i)[1],f=a.getCoefficients(),c=r-f.length,u=0;u<c;u++)e[n+u]=0;Dt.arraycopy(f,0,e,n+c,f.length)},t}(),ko=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),s=e.getHeight(),o=0;o<s-1;o++)for(var a=n[o],f=0;f<i-1;f++){var c=a[f];c===a[f+1]&&c===n[o+1][f]&&c===n[o+1][f+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var a=0;a<i;a++){var f=n[o];a+6<i&&f[a]===1&&f[a+1]===0&&f[a+2]===1&&f[a+3]===1&&f[a+4]===1&&f[a+5]===0&&f[a+6]===1&&(t.isWhiteHorizontal(f,a-4,a)||t.isWhiteHorizontal(f,a+7,a+11))&&r++,o+6<s&&n[o][a]===1&&n[o+1][a]===0&&n[o+2][a]===1&&n[o+3][a]===1&&n[o+4][a]===1&&n[o+5][a]===0&&n[o+6][a]===1&&(t.isWhiteVertical(n,a,o-4,o)||t.isWhiteVertical(n,a,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var s=n;s<i;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var a=n[o],f=0;f<i;f++)a[f]===1&&r++;var c=e.getHeight()*e.getWidth(),u=Math.floor(Math.abs(r*2-c)*10/c);return u*t.N4},t.getDataMaskBit=function(e,r,n){var i,s;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,i=(s&1)+s%3;break;case 6:s=n*r,i=(s&1)+s%3&1;break;case 7:s=n*r,i=s%3+(n+r&1)&1;break;default:throw new Ce("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),o=e.getArray(),a=0;a<i;a++){for(var f=0,c=-1,u=0;u<s;u++){var h=r?o[a][u]:o[u][a];h===c?f++:(f>=5&&(n+=t.N1+(f-5)),f=1,c=h)}f>=5&&(n+=t.N1+(f-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),OD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DD=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=OD(this.bytes),s=i.next();!s.done;s=i.next()){var o=s.value;qr.fill(o,e)}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var s=this.bytes[n],o=r.bytes[n],a=0,f=this.width;a<f;++a)if(s[a]!==o[a])return!1;return!0},t.prototype.toString=function(){for(var e=new _t,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],s=0,o=this.width;s<o;++s)switch(i[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),$h=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new _t;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),TD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rt=function(t){TD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Tr),uv=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,i,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,i,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new ir;t.makeTypeInfoBits(e,r,i);for(var s=0,o=i.getSize();s<o;++s){var a=i.get(i.getSize()-1-s),f=t.TYPE_INFO_COORDINATES[s],c=f[0],u=f[1];if(n.setBoolean(c,u,a),s<8){var h=n.getWidth()-s-1,d=8;n.setBoolean(h,d,a)}else{var h=8,d=n.getHeight()-7+(s-8);n.setBoolean(h,d,a)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new ir;t.makeVersionInfoBits(e,n);for(var i=6*3-1,s=0;s<6;++s)for(var o=0;o<3;++o){var a=n.get(i);i--,r.setBoolean(s,r.getHeight()-11+o,a),r.setBoolean(r.getHeight()-11+o,s,a)}}},t.embedDataBits=function(e,r,n){for(var i=0,s=-1,o=n.getWidth()-1,a=n.getHeight()-1;o>0;){for(o===6&&(o-=1);a>=0&&a<n.getHeight();){for(var f=0;f<2;++f){var c=o-f;if(t.isEmpty(n.get(c,a))){var u=void 0;i<e.getSize()?(u=e.get(i),++i):u=!1,r!==255&&ko.getDataMaskBit(r,c,a)&&(u=!u),n.setBoolean(c,a,u)}}a+=s}s=-s,a+=s,o-=2}if(i!==e.getSize())throw new Rt("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Ye.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Ce("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!$h.isValidMaskPattern(r))throw new Rt("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var s=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(s,10);var o=new ir;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Rt("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Rt("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Rt;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new Rt;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new Rt;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var s=t.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)n.setNumber(e+o,r+i,s[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var s=t.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)n.setNumber(e+o,r+i,s[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,o=i.length;s!==o;s++){var a=i[s];if(a>=0)for(var f=0;f!==o;f++){var c=i[f];c>=0&&t.isEmpty(r.get(c,a))&&t.embedPositionAdjustmentPattern(c-2,a-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),RD=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),hv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return ko.applyMaskPenaltyRule1(e)+ko.applyMaskPenaltyRule2(e)+ko.applyMaskPenaltyRule3(e)+ko.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(Ha.CHARACTER_SET)!==void 0;s&&(i=n.get(Ha.CHARACTER_SET).toString());var o=this.chooseMode(e,i),a=new ir;if(o===Nt.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var f=Xt.getCharacterSetECIByName(i);f!==void 0&&this.appendECI(f,a)}this.appendModeInfo(o,a);var c=new ir;this.appendBytes(e,o,c,i);var u;if(n!==null&&n.get(Ha.QR_VERSION)!==void 0){var h=Number.parseInt(n.get(Ha.QR_VERSION).toString(),10);u=gs.getVersionForNumber(h);var d=this.calculateBitsNeeded(o,a,c,u);if(!this.willFit(d,u,r))throw new Rt("Data too big for requested version")}else u=this.recommendVersion(r,o,a,c);var p=new ir;p.appendBitArray(a);var v=o===Nt.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(v,u,o,p),p.appendBitArray(c);var x=u.getECBlocksForLevel(r),C=u.getTotalCodewords()-x.getTotalECCodewords();this.terminateBits(C,p);var O=this.interleaveWithECBytes(p,u.getTotalCodewords(),C,x.getNumBlocks()),M=new $h;M.setECLevel(r),M.setMode(o),M.setVersion(u);var R=u.getDimensionForVersion(),T=new DD(R,R),P=this.chooseMaskPattern(O,r,u,T);return M.setMaskPattern(P),uv.buildMatrix(O,r,u,P,T),M.setMatrix(T),M},t.recommendVersion=function(e,r,n,i){var s=this.calculateBitsNeeded(r,n,i,gs.getVersionForNumber(1)),o=this.chooseVersion(s,e),a=this.calculateBitsNeeded(r,n,i,o);return this.chooseVersion(a,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Xt.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Nt.KANJI;for(var n=!1,i=!1,s=0,o=e.length;s<o;++s){var a=e.charAt(s);if(t.isDigit(a))n=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return Nt.BYTE}return i?Nt.ALPHANUMERIC:n?Nt.NUMERIC:Nt.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=jn.encode(e,Xt.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var s=r[i]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var s=Number.MAX_SAFE_INTEGER,o=-1,a=0;a<$h.NUM_MASK_PATTERNS;a++){uv.buildMatrix(e,r,n,a,i);var f=this.calculateMaskPenalty(i);f<s&&(s=f,o=a)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=gs.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new Rt("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),o=s.getTotalECCodewords(),a=i-o,f=(e+7)/8;return a>=f},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Rt("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var i=s;i<8;i++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),i=0;i<o;++i)r.appendBits(i&1?17:236,8);if(r.getSize()!==n)throw new Rt("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,s,o){if(i>=n)throw new Rt("Block ID too large");var a=e%n,f=n-a,c=Math.floor(e/n),u=c+1,h=Math.floor(r/n),d=h+1,p=c-h,v=u-d;if(p!==v)throw new Rt("EC bytes mismatch");if(n!==f+a)throw new Rt("RS blocks mismatch");if(e!==(h+p)*f+(d+v)*a)throw new Rt("Total bytes mismatch");i<f?(s[0]=h,o[0]=p):(s[0]=d,o[0]=v)},t.interleaveWithECBytes=function(e,r,n,i){var s,o,a,f;if(e.getSizeInBytes()!==n)throw new Rt("Number of bits and data bytes does not match");for(var c=0,u=0,h=0,d=new Array,p=0;p<i;++p){var v=new Int32Array(1),x=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,p,v,x);var C=v[0],O=new Uint8Array(C);e.toBytes(8*c,O,0,C);var M=t.generateECBytes(O,x[0]);d.push(new RD(O,M)),u=Math.max(u,C),h=Math.max(h,M.length),c+=v[0]}if(n!==c)throw new Rt("Data bytes does not match offset");for(var R=new ir,p=0;p<u;++p)try{for(var T=(s=void 0,hv(d)),P=T.next();!P.done;P=T.next()){var N=P.value,O=N.getDataBytes();p<O.length&&R.appendBits(O[p],8)}}catch(H){s={error:H}}finally{try{P&&!P.done&&(o=T.return)&&o.call(T)}finally{if(s)throw s.error}}for(var p=0;p<h;++p)try{for(var $=(a=void 0,hv(d)),U=$.next();!U.done;U=$.next()){var N=U.value,M=N.getErrorCorrectionBytes();p<M.length&&R.appendBits(M[p],8)}}catch(H){a={error:H}}finally{try{U&&!U.done&&(f=$.return)&&f.call($)}finally{if(a)throw a.error}}if(r!==R.getSizeInBytes())throw new Rt("Interleaving error: "+r+" and "+R.getSizeInBytes()+" differ.");return R},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),s=0;s<n;s++)i[s]=e[s]&255;new $y(Ur.QR_CODE_FIELD_256).encode(i,r);for(var o=new Uint8Array(r),s=0;s<r;s++)o[s]=i[n+s];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new Rt(e+" is bigger than "+((1<<s)-1));i.appendBits(e,s)},t.appendBytes=function(e,r,n,i){switch(r){case Nt.NUMERIC:t.appendNumericBytes(e,n);break;case Nt.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Nt.BYTE:t.append8BitBytes(e,n,i);break;case Nt.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Rt("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var s=t.getDigit(e.charAt(i));if(i+2<n){var o=t.getDigit(e.charAt(i+1)),a=t.getDigit(e.charAt(i+2));r.appendBits(s*100+o*10+a,10),i+=3}else if(i+1<n){var o=t.getDigit(e.charAt(i+1));r.appendBits(s*10+o,7),i+=2}else r.appendBits(s,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var s=t.getAlphanumericCode(e.charCodeAt(i));if(s===-1)throw new Rt;if(i+1<n){var o=t.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Rt;r.appendBits(s*45+o,11),i+=2}else r.appendBits(s,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=jn.encode(e,n)}catch(f){throw new Rt(f)}for(var s=0,o=i.length;s!==o;s++){var a=i[s];r.appendBits(a,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=jn.encode(e,Xt.SJIS)}catch(h){throw new Rt(h)}for(var i=n.length,s=0;s<i;s+=2){var o=n[s]&255,a=n[s+1]&255,f=o<<8&4294967295|a,c=-1;if(f>=33088&&f<=40956?c=f-33088:f>=57408&&f<=60351&&(c=f-49472),c===-1)throw new Rt("Invalid byte sequence");var u=(c>>8)*192+(c&255);r.appendBits(u,13)}},t.appendECI=function(e,r){r.appendBits(Nt.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Xt.UTF8.getName(),t})();var ND=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){ND(e,t);function e(r,n,i,s,o,a,f,c){var u=t.call(this,a,f)||this;if(u.yuvData=r,u.dataWidth=n,u.dataHeight=i,u.left=s,u.top=o,s+a>n||o+f>i)throw new Ce("Crop rectangle does not fit within image data.");return c&&u.reverseHorizontal(a,f),u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Ce("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var s=(r+this.top)*this.dataWidth+this.left;return Dt.arraycopy(this.yuvData,s,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,s=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Dt.arraycopy(this.yuvData,o,s,0,i),s;for(var a=0;a<n;a++){var f=a*r;Dt.arraycopy(this.yuvData,o,s,f,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),s=this.yuvData,o=this.top*this.dataWidth+this.left,a=0;a<n;a++){for(var f=a*r,c=0;c<r;c++){var u=s[o+c*e.THUMBNAIL_SCALE_FACTOR]&255;i[f+c]=4278190080|u*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,s=0,o=this.top*this.dataWidth+this.left;s<n;s++,o+=this.dataWidth)for(var a=o+r/2,f=o,c=o+r-1;f<a;f++,c--){var u=i[f];i[f]=i[c],i[c]=u}},e.prototype.invert=function(){return new Pl(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(cc);var PD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){PD(e,t);function e(r,n,i,s,o,a,f){var c=t.call(this,n,i)||this;if(c.dataWidth=s,c.dataHeight=o,c.left=a,c.top=f,r.BYTES_PER_ELEMENT===4){for(var u=n*i,h=new Uint8ClampedArray(u),d=0;d<u;d++){var p=r[d],v=p>>16&255,x=p>>7&510,C=p&255;h[d]=(v+x+C)/4&255}c.luminances=h}else c.luminances=r;if(s===void 0&&(c.dataWidth=n),o===void 0&&(c.dataHeight=i),a===void 0&&(c.left=0),f===void 0&&(c.top=0),c.left+n>c.dataWidth||c.top+i>c.dataHeight)throw new Ce("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Ce("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var s=(r+this.top)*this.dataWidth+this.left;return Dt.arraycopy(this.luminances,s,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,s=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Dt.arraycopy(this.luminances,o,s,0,i),s;for(var a=0;a<n;a++){var f=a*r;Dt.arraycopy(this.luminances,o,s,f,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,s){return new e(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new Pl(this)},e})(cc);var FD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){FD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e})(Xt);(function(){function t(){}return t.ISO_8859_1=Xt.ISO8859_1,t})();var BD=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),lv=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),LD=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),$D=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kl=function(t){$D(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.value=n,s.bitCount=i,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Ye.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(LD),kD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UD=function(t){kD(e,t);function e(r,n,i){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=i,s}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(kl);function qD(t,e,r){return new UD(t,e,r)}function Do(t,e,r){return new kl(t,e,r)}var zD=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],qi=0,Bf=1,un=2,ky=3,kn=4,VD=new kl(null,0,0),Uu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],jD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function HD(t){var e,r;try{for(var n=jD(t),i=n.next();!i.done;i=n.next()){var s=i.value;qr.fill(s,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[qi][kn]=0,t[Bf][kn]=0,t[Bf][qi]=28,t[ky][kn]=0,t[un][kn]=0,t[un][qi]=15,t}var Uy=HD(qr.createInt32Array(6,6)),KD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WD=function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var s=Uu[this.mode][e];i=Do(i,s&65535,s>>16),n+=s>>16}var o=e===un?4:5;return i=Do(i,r,o),new t(i,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===un?4:5;return n=Do(n,Uy[this.mode][e],i),n=Do(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===kn||this.mode===un){var s=Uu[n][qi];r=Do(r,s&65535,s>>16),i+=s>>16,n=qi}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new t(r,n,this.binaryShiftByteCount+1,i+o);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=qD(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(Uu[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())i.unshift(s);var o=new ir;try{for(var a=KD(i),f=a.next();!f.done;f=a.next()){var c=f.value;c.appendTo(o,e)}}catch(u){r={error:u}}finally{try{f&&!f.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return Ot.format("%s bits=%d bytes=%d",zD[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(VD,qi,0,0),t}();function GD(t){var e=Ot.getCharCode(" "),r=Ot.getCharCode("."),n=Ot.getCharCode(",");t[qi][e]=1;for(var i=Ot.getCharCode("Z"),s=Ot.getCharCode("A"),o=s;o<=i;o++)t[qi][o]=o-s+2;t[Bf][e]=1;for(var a=Ot.getCharCode("z"),f=Ot.getCharCode("a"),o=f;o<=a;o++)t[Bf][o]=o-f+2;t[un][e]=1;for(var c=Ot.getCharCode("9"),u=Ot.getCharCode("0"),o=u;o<=c;o++)t[un][o]=o-u+2;t[un][n]=12,t[un][r]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<h.length;d++)t[ky][Ot.getCharCode(h[d])]=d;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<p.length;d++)Ot.getCharCode(p[d])>0&&(t[kn][Ot.getCharCode(p[d])]=d);return t}var qu=GD(qr.createInt32Array(5,256)),Ka=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XD=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Ot.getCharCode(" "),r=Ot.getCharCode(`
`),n=lv.singletonList(WD.INITIAL_STATE),i=0;i<this.text.length;i++){var s=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Ot.getCharCode("\r"):s=o===r?2:0;break;case Ot.getCharCode("."):s=o===e?3:0;break;case Ot.getCharCode(","):s=o===e?4:0;break;case Ot.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,i,s),i++):n=this.updateStateListForChar(n,i)}var a=lv.min(n,function(f,c){return f.getBitCount()-c.getBitCount()});return a.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,s=[];try{for(var o=Ka(e),a=o.next();!a.done;a=o.next()){var f=a.value;this.updateStateForChar(f,r,s)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,s=qu[e.getMode()][i]>0,o=null,a=0;a<=kn;a++){var f=qu[a][i];if(f>0){if(o==null&&(o=e.endBinaryShift(r)),!s||a===e.getMode()||a===un){var c=o.latchAndAppend(a,f);n.push(c)}if(!s&&Uy[e.getMode()][a]>=0){var u=o.shiftAndAppend(a,f);n.push(u)}}}if(e.getBinaryShiftByteCount()>0||qu[e.getMode()][i]===0){var h=e.addBinaryShiftChar(r);n.push(h)}},t.updateStateListForPair=function(e,r,n){var i,s,o=[];try{for(var a=Ka(e),f=a.next();!f.done;f=a.next()){var c=f.value;this.updateStateForPair(c,r,n,o)}}catch(u){i={error:u}}finally{try{f&&!f.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,i){var s=e.endBinaryShift(r);if(i.push(s.latchAndAppend(kn,n)),e.getMode()!==kn&&i.push(s.shiftAndAppend(kn,n)),n===3||n===4){var o=s.latchAndAppend(un,16-n).latchAndAppend(un,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(a)}},t.simplifyStates=function(e){var r,n,i,s,o=[];try{for(var a=Ka(e),f=a.next();!f.done;f=a.next()){var c=f.value,u=!0,h=function(C){if(C.isBetterThanOrEqualTo(c))return u=!1,"break";c.isBetterThanOrEqualTo(C)&&(o=o.filter(function(O){return O!==C}))};try{for(var d=(i=void 0,Ka(o)),p=d.next();!p.done;p=d.next()){var v=p.value,x=h(v);if(x==="break")break}}catch(C){i={error:C}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}u&&o.push(c)}}catch(C){r={error:C}}finally{try{f&&!f.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t}(),YD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new XD(e).encode(),s=Ye.truncDivision(i.getSize()*r,100)+11,o=i.getSize()+s,a,f,c,u,h;if(n!==t.DEFAULT_AZTEC_LAYERS){if(a=n<0,f=Math.abs(n),f>(a?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Ce(Ot.format("Illegal value %s for layers",n));c=t.totalBitsInLayer(f,a),u=t.WORD_SIZE[f];var d=c-c%u;if(h=t.stuffBits(i,u),h.getSize()+s>d)throw new Ce("Data to large for user specified layer");if(a&&h.getSize()>u*64)throw new Ce("Data to large for user specified layer")}else{u=0,h=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new Ce("Data too large for an Aztec code");if(a=p<=3,f=a?p+1:p,c=t.totalBitsInLayer(f,a),!(o>c)){(h==null||u!==t.WORD_SIZE[f])&&(u=t.WORD_SIZE[f],h=t.stuffBits(i,u));var d=c-c%u;if(!(a&&h.getSize()>u*64)&&h.getSize()+s<=d)break}}}var v=t.generateCheckWords(h,c,u),x=h.getSize()/u,C=t.generateModeMessage(a,f,x),O=(a?11:14)+f*4,M=new Int32Array(O),R;if(a){R=O;for(var p=0;p<M.length;p++)M[p]=p}else{R=O+1+2*Ye.truncDivision(Ye.truncDivision(O,2)-1,15);for(var T=Ye.truncDivision(O,2),P=Ye.truncDivision(R,2),p=0;p<T;p++){var N=p+Ye.truncDivision(p,15);M[T-p-1]=P-N-1,M[T+p]=P+N+1}}for(var $=new Wn(R),p=0,U=0;p<f;p++){for(var V=(f-p)*4+(a?9:12),H=0;H<V;H++)for(var B=H*2,y=0;y<2;y++)v.get(U+B+y)&&$.set(M[p*2+y],M[p*2+H]),v.get(U+V*2+B+y)&&$.set(M[p*2+H],M[O-1-p*2-y]),v.get(U+V*4+B+y)&&$.set(M[O-1-p*2-y],M[O-1-p*2-H]),v.get(U+V*6+B+y)&&$.set(M[O-1-p*2-H],M[p*2+y]);U+=V*8}if(t.drawModeMessage($,a,R,C),a)t.drawBullsEye($,Ye.truncDivision(R,2),5);else{t.drawBullsEye($,Ye.truncDivision(R,2),7);for(var p=0,H=0;p<Ye.truncDivision(O,2)-1;p+=15,H+=16)for(var y=Ye.truncDivision(R,2)&1;y<R;y+=2)$.set(Ye.truncDivision(R,2)-H,y),$.set(Ye.truncDivision(R,2)+H,y),$.set(y,Ye.truncDivision(R,2)-H),$.set(y,Ye.truncDivision(R,2)+H)}var b=new BD;return b.setCompact(a),b.setSize(R),b.setLayers(f),b.setCodeWords(x),b.setMatrix($),b},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var s=r-i;s<=r+i;s++)e.set(s,r-i),e.set(s,r+i),e.set(r-i,s),e.set(r+i,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new ir;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var s=Ye.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var a=s-3+o;i.get(o)&&e.set(a,s-5),i.get(o+7)&&e.set(s+5,a),i.get(20-o)&&e.set(a,s+5),i.get(27-o)&&e.set(s-5,a)}else for(var o=0;o<10;o++){var a=s-5+o+Ye.truncDivision(o,5);i.get(o)&&e.set(a,s-7),i.get(o+10)&&e.set(s+7,a),i.get(29-o)&&e.set(a,s+7),i.get(39-o)&&e.set(s-7,a)}},t.generateCheckWords=function(e,r,n){var i,s,o=e.getSize()/n,a=new $y(t.getGF(n)),f=Ye.truncDivision(r,n),c=t.bitsToWords(e,n,f);a.encode(c,f-o);var u=r%n,h=new ir;h.appendBits(0,u);try{for(var d=YD(Array.from(c)),p=d.next();!p.done;p=d.next()){var v=p.value;h.appendBits(v,n)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return h},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),s,o;for(s=0,o=e.getSize()/r;s<o;s++){for(var a=0,f=0;f<r;f++)a|=e.get(s*r+f)?1<<r-f-1:0;i[s]=a}return i},t.getGF=function(e){switch(e){case 4:return Ur.AZTEC_PARAM;case 6:return Ur.AZTEC_DATA_6;case 8:return Ur.AZTEC_DATA_8;case 10:return Ur.AZTEC_DATA_10;case 12:return Ur.AZTEC_DATA_12;default:throw new Ce("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new ir,i=e.getSize(),s=(1<<r)-2,o=0;o<i;o+=r){for(var a=0,f=0;f<r;f++)(o+f>=i||e.get(o+f))&&(a|=1<<r-1-f);(a&s)===s?(n.appendBits(a&s,r),o--):a&s?n.appendBits(a,r):(n.appendBits(a|1,r),o--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const qy=(t,e)=>{const r=t.__vccOpts||t;for(const[n,i]of e)r[n]=i;return r},ZD={name:"stream-barcode-reader",data(){return{isLoading:!0,codeReader:new ID,isMediaStreamAPISupported:navigator&&navigator.mediaDevices&&"enumerateDevices"in navigator.mediaDevices}},mounted(){if(!this.isMediaStreamAPISupported)throw new Tr("Media Stream API is not supported");this.start(),this.$refs.scanner.oncanplay=t=>{this.isLoading=!1,this.$emit("loaded")}},beforeUnmount(){this.codeReader.reset()},methods:{start(){this.codeReader.decodeFromVideoDevice(void 0,this.$refs.scanner,(t,e)=>{t&&(this.$emit("decode",t.text),this.$emit("result",t))})}}},JD={class:"scanner-container"},QD={poster:"data:image/gif,AAAA",ref:"scanner"};function eT(t,e,r,n,i,s){return ks(),Ro("div",JD,[Vv(jt("div",null,[jt("video",QD,null,512),e[0]||(e[0]=jt("div",{class:"overlay-element"},null,-1)),e[1]||(e[1]=jt("div",{class:"laser"},null,-1))],512),[[dm,!i.isLoading]])])}const tT=qy(ZD,[["render",eT],["__scopeId","data-v-e16c822a"]]),rT={components:{StreamBarcodeReader:tT},data(){return{walletKit:null,walletUri:"",walletConnected:!1,walletAddress:null,session:null,namespace:null,errorMessage:null}},computed:{sessionDetails(){return this.session?JSON.stringify(this.session,null,2):"No session details available"}},methods:{onDecode(t){console.log(`Decoded text from QR code: ${t}`)},onLoaded(){console.log("Ready to start scanning barcodes")},async onSessionProposal({id:t,params:e}){try{const r=oE({proposal:e,supportedNamespaces:{eip155:{chains:["eip155:1","eip155:137"],methods:["eth_sendTransaction","personal_sign"],events:["accountsChanged","chainChanged"],accounts:["eip155:1:0xab16a96d359ec26a11e2c2b3d8f8b8942d5bfcdb","eip155:137:0xab16a96d359ec26a11e2c2b3d8f8b8942d5bfcdb"]}}}),n=await this.walletKit.approveSession({id:t,namespaces:r});n&&(this.walletAddress=n.accounts?n.accounts[0]:null,this.namespace=n.namespaces,this.walletConnected=!0,this.session=n,this.errorMessage=null)}catch(r){console.error("Error during session proposal handling:",r.message),this.errorMessage="Session proposal rejected or error occurred.",await this.walletKit.rejectSession({id:e.id,reason:St("USER_REJECTED")})}},async connectWithUri(){try{if(!this.walletUri)return;const t=await this.walletKit.pair({uri:this.walletUri});t?(this.walletAddress=t.accounts?t.accounts[0]:null,this.namespace=t.namespaces,this.walletConnected=!0,this.session=t,this.errorMessage=null):this.errorMessage="Failed to establish session."}catch(t){console.error("Error connecting with URI:",t.message),this.errorMessage="Error while connecting with WalletConnect URI."}},async disconnectWallet(){try{const t=this.walletKit.getActiveSessions();if(t.length>0){const e=t[0];await this.walletKit.disconnect({topic:e.topic})}this.walletConnected=!1,this.walletAddress=null,this.session=null,this.namespace=null}catch(t){console.error("Error disconnecting:",t.message)}},async getActiveSessions(){try{const t=this.walletKit.getActiveSessions();console.log("Active sessions:",t)}catch(t){console.error("Error getting active sessions:",t.message)}}},async created(){const t=new Pf({projectId:"4f88dfdcec8f22c4e7ea1368c35eba3b"});this.walletKit=await zC.init({core:t,metadata:{name:"My Vue App",description:"A Vue.js app with manual WalletConnect URI",url:"https://my-vue-app.com",icons:[]}}),this.walletKit.on("session_proposal",this.onSessionProposal),this.getActiveSessions()}},nT={class:"container bg-green-900/20 w-screen max-w-lg mx-auto p-8"},iT={class:"mb-6"},sT={class:"flex justify-center space-x-4 mb-8"},oT=["disabled"],aT={key:0,class:"w-full max-w-lg mx-auto p-6 border rounded-lg shadow-lg bg-white"},fT={class:"text-blue-600"},cT={class:"text-gray-700"},uT={key:1,class:"mt-6 text-red-500 text-center"};function hT(t,e,r,n,i,s){const o=pb("StreamBarcodeReader");return ks(),Ro("div",nT,[e[9]||(e[9]=jt("h2",{class:"text-xl font-bold text-center mb-8 text-gray-200"},"Wallet Connect",-1)),jt("div",null,[zn(o,{onDecode:s.onDecode,onLoaded:s.onLoaded},null,8,["onDecode","onLoaded"])]),jt("div",iT,[Vv(jt("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>i.walletUri=a),placeholder:"Enter WalletConnect URI",class:"p-4 rounded-lg w-full bg-white opacity-50 focus:outline-none focus:ring focus:ring-blue-400 text-gray-800 backdrop-blur-sm"},null,512),[[Mm,i.walletUri]])]),jt("div",sT,[jt("button",{onClick:e[1]||(e[1]=(...a)=>s.connectWithUri&&s.connectWithUri(...a)),disabled:!i.walletUri,class:"bg-blue-500 w-full text-white p-3 whitespace-nowrap rounded-lg hover:bg-blue-600 focus:outline-none disabled:bg-gray-500"}," Connect Wallet ",8,oT),i.walletConnected?(ks(),Ro("button",{key:0,onClick:e[2]||(e[2]=(...a)=>s.disconnectWallet&&s.disconnectWallet(...a)),class:"bg-red-500 text-white p-3 rounded-lg w-32 hover:bg-red-600 focus:outline-none"}," Disconnect ")):_c("",!0)]),i.walletConnected?(ks(),Ro("div",aT,[e[7]||(e[7]=jt("h3",{class:"text-2xl font-semibold mb-4 text-blue-600"},"Wallet Details:",-1)),jt("p",null,[e[3]||(e[3]=jt("strong",null,"Wallet Address:",-1)),e[4]||(e[4]=Za()),jt("span",fT,Ga(i.walletAddress),1)]),jt("p",null,[e[5]||(e[5]=jt("strong",null,"Namespace:",-1)),e[6]||(e[6]=Za()),jt("span",cT,Ga(i.namespace),1)])])):_c("",!0),i.errorMessage?(ks(),Ro("div",uT,[e[8]||(e[8]=jt("strong",null,"Error:",-1)),Za(" "+Ga(i.errorMessage),1)])):_c("",!0)])}const lT=qy(rT,[["render",hT],["__scopeId","data-v-e73c3073"]]);Tm(lT).mount("#app");

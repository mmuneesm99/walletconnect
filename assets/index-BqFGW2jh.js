(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Vc(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const ht={},Un=[],Xr=()=>{},_b=()=>!1,ua=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Hc=t=>t.startsWith("onUpdate:"),Xt=Object.assign,Wc=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},xb=Object.prototype.hasOwnProperty,st=(t,e)=>xb.call(t,e),Re=Array.isArray,zn=t=>ha(t)==="[object Map]",U0=t=>ha(t)==="[object Set]",Fe=t=>typeof t=="function",St=t=>typeof t=="string",Wi=t=>typeof t=="symbol",vt=t=>t!==null&&typeof t=="object",z0=t=>(vt(t)||Fe(t))&&Fe(t.then)&&Fe(t.catch),k0=Object.prototype.toString,ha=t=>k0.call(t),Eb=t=>ha(t).slice(8,-1),j0=t=>ha(t)==="[object Object]",Gc=t=>St(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,As=Vc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),la=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Sb=/-(\w)/g,Vi=la(t=>t.replace(Sb,(e,r)=>r?r.toUpperCase():"")),Mb=/\B([A-Z])/g,xn=la(t=>t.replace(Mb,"-$1").toLowerCase()),K0=la(t=>t.charAt(0).toUpperCase()+t.slice(1)),La=la(t=>t?`on${K0(t)}`:""),gn=(t,e)=>!Object.is(t,e),Do=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},V0=(t,e,r,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:r})},oc=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Gu;const da=()=>Gu||(Gu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jc(t){if(Re(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],n=St(i)?Ob(i):Jc(i);if(n)for(const s in n)e[s]=n[s]}return e}else if(St(t)||vt(t))return t}const Ib=/;(?![^(]*\))/g,Ab=/:([^]+)/,Db=/\/\*[^]*?\*\//g;function Ob(t){const e={};return t.replace(Db,"").split(Ib).forEach(r=>{if(r){const i=r.split(Ab);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Yc(t){let e="";if(St(t))e=t;else if(Re(t))for(let r=0;r<t.length;r++){const i=Yc(t[r]);i&&(e+=i+" ")}else if(vt(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Rb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pb=Vc(Rb);function H0(t){return!!t||t===""}const W0=t=>!!(t&&t.__v_isRef===!0),Oo=t=>St(t)?t:t==null?"":Re(t)||vt(t)&&(t.toString===k0||!Fe(t.toString))?W0(t)?Oo(t.value):JSON.stringify(t,G0,2):String(t),G0=(t,e)=>W0(e)?G0(t,e.value):zn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,n],s)=>(r[qa(i,s)+" =>"]=n,r),{})}:U0(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>qa(r))}:Wi(e)?qa(e):vt(e)&&!Re(e)&&!j0(e)?String(e):e,qa=(t,e="")=>{var r;return Wi(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lr;class Nb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=lr,!e&&lr&&(this.index=(lr.scopes||(lr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=lr;try{return lr=this,e()}finally{lr=r}}}on(){lr=this}off(){lr=this.parent}stop(e){if(this._active){this._active=!1;let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(this.effects.length=0,r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Cb(){return lr}let dt;const Ba=new WeakSet;class J0{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,lr&&lr.active&&lr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ba.has(this)&&(Ba.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Z0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ju(this),X0(this);const e=dt,r=Br;dt=this,Br=!0;try{return this.fn()}finally{Q0(this),dt=e,Br=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Qc(e);this.deps=this.depsTail=void 0,Ju(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ba.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ac(this)&&this.run()}get dirty(){return ac(this)}}let Y0=0,Ds,Os;function Z0(t,e=!1){if(t.flags|=8,e){t.next=Os,Os=t;return}t.next=Ds,Ds=t}function Zc(){Y0++}function Xc(){if(--Y0>0)return;if(Os){let e=Os;for(Os=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Ds;){let e=Ds;for(Ds=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=r}}if(t)throw t}function X0(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Q0(t){let e,r=t.depsTail,i=r;for(;i;){const n=i.prevDep;i.version===-1?(i===r&&(r=n),Qc(i),Tb(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=r}function ac(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ep(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ep(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ls))return;t.globalVersion=Ls;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!ac(t)){t.flags&=-3;return}const r=dt,i=Br;dt=t,Br=!0;try{X0(t);const n=t.fn(t._value);(e.version===0||gn(n,t._value))&&(t._value=n,e.version++)}catch(n){throw e.version++,n}finally{dt=r,Br=i,Q0(t),t.flags&=-3}}function Qc(t,e=!1){const{dep:r,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),r.subs===t&&(r.subs=i,!i&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)Qc(s,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function Tb(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let Br=!0;const tp=[];function Gi(){tp.push(Br),Br=!1}function Ji(){const t=tp.pop();Br=t===void 0?!0:t}function Ju(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=dt;dt=void 0;try{e()}finally{dt=r}}}let Ls=0;class Fb{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class rp{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!dt||!Br||dt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==dt)r=this.activeLink=new Fb(dt,this),dt.deps?(r.prevDep=dt.depsTail,dt.depsTail.nextDep=r,dt.depsTail=r):dt.deps=dt.depsTail=r,ip(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=dt.depsTail,r.nextDep=void 0,dt.depsTail.nextDep=r,dt.depsTail=r,dt.deps===r&&(dt.deps=i)}return r}trigger(e){this.version++,Ls++,this.notify(e)}notify(e){Zc();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Xc()}}}function ip(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)ip(i)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const fc=new WeakMap,bn=Symbol(""),cc=Symbol(""),qs=Symbol("");function kt(t,e,r){if(Br&&dt){let i=fc.get(t);i||fc.set(t,i=new Map);let n=i.get(r);n||(i.set(r,n=new rp),n.map=i,n.key=r),n.track()}}function Mi(t,e,r,i,n,s){const o=fc.get(t);if(!o){Ls++;return}const a=c=>{c&&c.trigger()};if(Zc(),e==="clear")o.forEach(a);else{const c=Re(t),f=c&&Gc(r);if(c&&r==="length"){const h=Number(i);o.forEach((g,w)=>{(w==="length"||w===qs||!Wi(w)&&w>=h)&&a(g)})}else switch((r!==void 0||o.has(void 0))&&a(o.get(r)),f&&a(o.get(qs)),e){case"add":c?f&&a(o.get("length")):(a(o.get(bn)),zn(t)&&a(o.get(cc)));break;case"delete":c||(a(o.get(bn)),zn(t)&&a(o.get(cc)));break;case"set":zn(t)&&a(o.get(bn));break}}Xc()}function On(t){const e=at(t);return e===t?e:(kt(e,"iterate",qs),Ur(t)?e:e.map(ar))}function pa(t){return kt(t=at(t),"iterate",qs),t}const $b={__proto__:null,[Symbol.iterator](){return Ua(this,Symbol.iterator,ar)},concat(...t){return On(this).concat(...t.map(e=>Re(e)?On(e):e))},entries(){return Ua(this,"entries",t=>(t[1]=ar(t[1]),t))},every(t,e){return pi(this,"every",t,e,void 0,arguments)},filter(t,e){return pi(this,"filter",t,e,r=>r.map(ar),arguments)},find(t,e){return pi(this,"find",t,e,ar,arguments)},findIndex(t,e){return pi(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return pi(this,"findLast",t,e,ar,arguments)},findLastIndex(t,e){return pi(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return pi(this,"forEach",t,e,void 0,arguments)},includes(...t){return za(this,"includes",t)},indexOf(...t){return za(this,"indexOf",t)},join(t){return On(this).join(t)},lastIndexOf(...t){return za(this,"lastIndexOf",t)},map(t,e){return pi(this,"map",t,e,void 0,arguments)},pop(){return fs(this,"pop")},push(...t){return fs(this,"push",t)},reduce(t,...e){return Yu(this,"reduce",t,e)},reduceRight(t,...e){return Yu(this,"reduceRight",t,e)},shift(){return fs(this,"shift")},some(t,e){return pi(this,"some",t,e,void 0,arguments)},splice(...t){return fs(this,"splice",t)},toReversed(){return On(this).toReversed()},toSorted(t){return On(this).toSorted(t)},toSpliced(...t){return On(this).toSpliced(...t)},unshift(...t){return fs(this,"unshift",t)},values(){return Ua(this,"values",ar)}};function Ua(t,e,r){const i=pa(t),n=i[e]();return i!==t&&!Ur(t)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.value&&(s.value=r(s.value)),s}),n}const Lb=Array.prototype;function pi(t,e,r,i,n,s){const o=pa(t),a=o!==t&&!Ur(t),c=o[e];if(c!==Lb[e]){const g=c.apply(t,s);return a?ar(g):g}let f=r;o!==t&&(a?f=function(g,w){return r.call(this,ar(g),w,t)}:r.length>2&&(f=function(g,w){return r.call(this,g,w,t)}));const h=c.call(o,f,i);return a&&n?n(h):h}function Yu(t,e,r,i){const n=pa(t);let s=r;return n!==t&&(Ur(t)?r.length>3&&(s=function(o,a,c){return r.call(this,o,a,c,t)}):s=function(o,a,c){return r.call(this,o,ar(a),c,t)}),n[e](s,...i)}function za(t,e,r){const i=at(t);kt(i,"iterate",qs);const n=i[e](...r);return(n===-1||n===!1)&&iu(r[0])?(r[0]=at(r[0]),i[e](...r)):n}function fs(t,e,r=[]){Gi(),Zc();const i=at(t)[e].apply(t,r);return Xc(),Ji(),i}const qb=Vc("__proto__,__v_isRef,__isVue"),np=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Wi));function Bb(t){Wi(t)||(t=String(t));const e=at(this);return kt(e,"has",t),e.hasOwnProperty(t)}class sp{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,i){if(r==="__v_skip")return e.__v_skip;const n=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return s;if(r==="__v_raw")return i===(n?s?Jb:cp:s?fp:ap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Re(e);if(!n){let c;if(o&&(c=$b[r]))return c;if(r==="hasOwnProperty")return Bb}const a=Reflect.get(e,r,Yt(e)?e:i);return(Wi(r)?np.has(r):qb(r))||(n||kt(e,"get",r),s)?a:Yt(a)?o&&Gc(r)?a:a.value:vt(a)?n?up(a):tu(a):a}}class op extends sp{constructor(e=!1){super(!1,e)}set(e,r,i,n){let s=e[r];if(!this._isShallow){const c=Wn(s);if(!Ur(i)&&!Wn(i)&&(s=at(s),i=at(i)),!Re(e)&&Yt(s)&&!Yt(i))return c?!1:(s.value=i,!0)}const o=Re(e)&&Gc(r)?Number(r)<e.length:st(e,r),a=Reflect.set(e,r,i,Yt(e)?e:n);return e===at(n)&&(o?gn(i,s)&&Mi(e,"set",r,i):Mi(e,"add",r,i)),a}deleteProperty(e,r){const i=st(e,r);e[r];const n=Reflect.deleteProperty(e,r);return n&&i&&Mi(e,"delete",r,void 0),n}has(e,r){const i=Reflect.has(e,r);return(!Wi(r)||!np.has(r))&&kt(e,"has",r),i}ownKeys(e){return kt(e,"iterate",Re(e)?"length":bn),Reflect.ownKeys(e)}}class Ub extends sp{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const zb=new op,kb=new Ub,jb=new op(!0);const uc=t=>t,lo=t=>Reflect.getPrototypeOf(t);function Kb(t,e,r){return function(...i){const n=this.__v_raw,s=at(n),o=zn(s),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,f=n[t](...i),h=r?uc:e?hc:ar;return!e&&kt(s,"iterate",c?cc:bn),{next(){const{value:g,done:w}=f.next();return w?{value:g,done:w}:{value:a?[h(g[0]),h(g[1])]:h(g),done:w}},[Symbol.iterator](){return this}}}}function po(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Vb(t,e){const r={get(n){const s=this.__v_raw,o=at(s),a=at(n);t||(gn(n,a)&&kt(o,"get",n),kt(o,"get",a));const{has:c}=lo(o),f=e?uc:t?hc:ar;if(c.call(o,n))return f(s.get(n));if(c.call(o,a))return f(s.get(a));s!==o&&s.get(n)},get size(){const n=this.__v_raw;return!t&&kt(at(n),"iterate",bn),Reflect.get(n,"size",n)},has(n){const s=this.__v_raw,o=at(s),a=at(n);return t||(gn(n,a)&&kt(o,"has",n),kt(o,"has",a)),n===a?s.has(n):s.has(n)||s.has(a)},forEach(n,s){const o=this,a=o.__v_raw,c=at(a),f=e?uc:t?hc:ar;return!t&&kt(c,"iterate",bn),a.forEach((h,g)=>n.call(s,f(h),f(g),o))}};return Xt(r,t?{add:po("add"),set:po("set"),delete:po("delete"),clear:po("clear")}:{add(n){!e&&!Ur(n)&&!Wn(n)&&(n=at(n));const s=at(this);return lo(s).has.call(s,n)||(s.add(n),Mi(s,"add",n,n)),this},set(n,s){!e&&!Ur(s)&&!Wn(s)&&(s=at(s));const o=at(this),{has:a,get:c}=lo(o);let f=a.call(o,n);f||(n=at(n),f=a.call(o,n));const h=c.call(o,n);return o.set(n,s),f?gn(s,h)&&Mi(o,"set",n,s):Mi(o,"add",n,s),this},delete(n){const s=at(this),{has:o,get:a}=lo(s);let c=o.call(s,n);c||(n=at(n),c=o.call(s,n)),a&&a.call(s,n);const f=s.delete(n);return c&&Mi(s,"delete",n,void 0),f},clear(){const n=at(this),s=n.size!==0,o=n.clear();return s&&Mi(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=Kb(n,t,e)}),r}function eu(t,e){const r=Vb(t,e);return(i,n,s)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(st(r,n)&&n in i?r:i,n,s)}const Hb={get:eu(!1,!1)},Wb={get:eu(!1,!0)},Gb={get:eu(!0,!1)};const ap=new WeakMap,fp=new WeakMap,cp=new WeakMap,Jb=new WeakMap;function Yb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zb(t){return t.__v_skip||!Object.isExtensible(t)?0:Yb(Eb(t))}function tu(t){return Wn(t)?t:ru(t,!1,zb,Hb,ap)}function Xb(t){return ru(t,!1,jb,Wb,fp)}function up(t){return ru(t,!0,kb,Gb,cp)}function ru(t,e,r,i,n){if(!vt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=n.get(t);if(s)return s;const o=Zb(t);if(o===0)return t;const a=new Proxy(t,o===2?i:r);return n.set(t,a),a}function kn(t){return Wn(t)?kn(t.__v_raw):!!(t&&t.__v_isReactive)}function Wn(t){return!!(t&&t.__v_isReadonly)}function Ur(t){return!!(t&&t.__v_isShallow)}function iu(t){return t?!!t.__v_raw:!1}function at(t){const e=t&&t.__v_raw;return e?at(e):t}function Qb(t){return!st(t,"__v_skip")&&Object.isExtensible(t)&&V0(t,"__v_skip",!0),t}const ar=t=>vt(t)?tu(t):t,hc=t=>vt(t)?up(t):t;function Yt(t){return t?t.__v_isRef===!0:!1}function ev(t){return Yt(t)?t.value:t}const tv={get:(t,e,r)=>e==="__v_raw"?t:ev(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const n=t[e];return Yt(n)&&!Yt(r)?(n.value=r,!0):Reflect.set(t,e,r,i)}};function hp(t){return kn(t)?t:new Proxy(t,tv)}class rv{constructor(e,r,i){this.fn=e,this.setter=r,this._value=void 0,this.dep=new rp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ls-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&dt!==this)return Z0(this,!0),!0}get value(){const e=this.dep.track();return ep(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function iv(t,e,r=!1){let i,n;return Fe(t)?i=t:(i=t.get,n=t.set),new rv(i,n,r)}const go={},Wo=new WeakMap;let fn;function nv(t,e=!1,r=fn){if(r){let i=Wo.get(r);i||Wo.set(r,i=[]),i.push(t)}}function sv(t,e,r=ht){const{immediate:i,deep:n,once:s,scheduler:o,augmentJob:a,call:c}=r,f=R=>n?R:Ur(R)||n===!1||n===0?Ii(R,1):Ii(R);let h,g,w,S,E=!1,I=!1;if(Yt(t)?(g=()=>t.value,E=Ur(t)):kn(t)?(g=()=>f(t),E=!0):Re(t)?(I=!0,E=t.some(R=>kn(R)||Ur(R)),g=()=>t.map(R=>{if(Yt(R))return R.value;if(kn(R))return f(R);if(Fe(R))return c?c(R,2):R()})):Fe(t)?e?g=c?()=>c(t,2):t:g=()=>{if(w){Gi();try{w()}finally{Ji()}}const R=fn;fn=h;try{return c?c(t,3,[S]):t(S)}finally{fn=R}}:g=Xr,e&&n){const R=g,$=n===!0?1/0:n;g=()=>Ii(R(),$)}const N=Cb(),C=()=>{h.stop(),N&&N.active&&Wc(N.effects,h)};if(s&&e){const R=e;e=(...$)=>{R(...$),C()}}let T=I?new Array(t.length).fill(go):go;const L=R=>{if(!(!(h.flags&1)||!h.dirty&&!R))if(e){const $=h.run();if(n||E||(I?$.some((P,U)=>gn(P,T[U])):gn($,T))){w&&w();const P=fn;fn=h;try{const U=[$,T===go?void 0:I&&T[0]===go?[]:T,S];c?c(e,3,U):e(...U),T=$}finally{fn=P}}}else h.run()};return a&&a(L),h=new J0(g),h.scheduler=o?()=>o(L,!1):L,S=R=>nv(R,!1,h),w=h.onStop=()=>{const R=Wo.get(h);if(R){if(c)c(R,4);else for(const $ of R)$();Wo.delete(h)}},e?i?L(!0):T=h.run():o?o(L.bind(null,!0),!0):h.run(),C.pause=h.pause.bind(h),C.resume=h.resume.bind(h),C.stop=C,C}function Ii(t,e=1/0,r){if(e<=0||!vt(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Yt(t))Ii(t.value,e,r);else if(Re(t))for(let i=0;i<t.length;i++)Ii(t[i],e,r);else if(U0(t)||zn(t))t.forEach(i=>{Ii(i,e,r)});else if(j0(t)){for(const i in t)Ii(t[i],e,r);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Ii(t[i],e,r)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ws(t,e,r,i){try{return i?t(...i):t()}catch(n){ga(n,e,r)}}function ei(t,e,r,i){if(Fe(t)){const n=Ws(t,e,r,i);return n&&z0(n)&&n.catch(s=>{ga(s,e,r)}),n}if(Re(t)){const n=[];for(let s=0;s<t.length;s++)n.push(ei(t[s],e,r,i));return n}}function ga(t,e,r,i=!0){const n=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ht;if(e){let a=e.parent;const c=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const h=a.ec;if(h){for(let g=0;g<h.length;g++)if(h[g](t,c,f)===!1)return}a=a.parent}if(s){Gi(),Ws(s,null,10,[t,c,f]),Ji();return}}ov(t,r,n,i,o)}function ov(t,e,r,i=!0,n=!1){if(n)throw t;console.error(t)}const Wt=[];let Gr=-1;const jn=[];let Li=null,Fn=0;const lp=Promise.resolve();let Go=null;function av(t){const e=Go||lp;return t?e.then(this?t.bind(this):t):e}function fv(t){let e=Gr+1,r=Wt.length;for(;e<r;){const i=e+r>>>1,n=Wt[i],s=Bs(n);s<t||s===t&&n.flags&2?e=i+1:r=i}return e}function nu(t){if(!(t.flags&1)){const e=Bs(t),r=Wt[Wt.length-1];!r||!(t.flags&2)&&e>=Bs(r)?Wt.push(t):Wt.splice(fv(e),0,t),t.flags|=1,dp()}}function dp(){Go||(Go=lp.then(gp))}function cv(t){Re(t)?jn.push(...t):Li&&t.id===-1?Li.splice(Fn+1,0,t):t.flags&1||(jn.push(t),t.flags|=1),dp()}function Zu(t,e,r=Gr+1){for(;r<Wt.length;r++){const i=Wt[r];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;Wt.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function pp(t){if(jn.length){const e=[...new Set(jn)].sort((r,i)=>Bs(r)-Bs(i));if(jn.length=0,Li){Li.push(...e);return}for(Li=e,Fn=0;Fn<Li.length;Fn++){const r=Li[Fn];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Li=null,Fn=0}}const Bs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function gp(t){try{for(Gr=0;Gr<Wt.length;Gr++){const e=Wt[Gr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ws(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Gr<Wt.length;Gr++){const e=Wt[Gr];e&&(e.flags&=-2)}Gr=-1,Wt.length=0,pp(),Go=null,(Wt.length||jn.length)&&gp()}}let Sr=null,bp=null;function Jo(t){const e=Sr;return Sr=t,bp=t&&t.type.__scopeId||null,e}function uv(t,e=Sr,r){if(!e||t._n)return t;const i=(...n)=>{i._d&&oh(-1);const s=Jo(e);let o;try{o=t(...n)}finally{Jo(s),i._d&&oh(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function hv(t,e){if(Sr===null)return t;const r=ma(Sr),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[s,o,a,c=ht]=e[n];s&&(Fe(s)&&(s={mounted:s,updated:s}),s.deep&&Ii(o),i.push({dir:s,instance:r,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function en(t,e,r,i){const n=t.dirs,s=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let c=a.dir[i];c&&(Gi(),ei(c,r,8,[t.el,a,t,e]),Ji())}}const lv=Symbol("_vte"),dv=t=>t.__isTeleport;function su(t,e){t.shapeFlag&6&&t.component?(t.transition=e,su(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function vp(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Yo(t,e,r,i,n=!1){if(Re(t)){t.forEach((E,I)=>Yo(E,e&&(Re(e)?e[I]:e),r,i,n));return}if(Rs(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Yo(t,e,r,i.component.subTree);return}const s=i.shapeFlag&4?ma(i.component):i.el,o=n?null:s,{i:a,r:c}=t,f=e&&e.r,h=a.refs===ht?a.refs={}:a.refs,g=a.setupState,w=at(g),S=g===ht?()=>!1:E=>st(w,E);if(f!=null&&f!==c&&(St(f)?(h[f]=null,S(f)&&(g[f]=null)):Yt(f)&&(f.value=null)),Fe(c))Ws(c,a,12,[o,h]);else{const E=St(c),I=Yt(c);if(E||I){const N=()=>{if(t.f){const C=E?S(c)?g[c]:h[c]:c.value;n?Re(C)&&Wc(C,s):Re(C)?C.includes(s)||C.push(s):E?(h[c]=[s],S(c)&&(g[c]=h[c])):(c.value=[s],t.k&&(h[t.k]=c.value))}else E?(h[c]=o,S(c)&&(g[c]=o)):I&&(c.value=o,t.k&&(h[t.k]=o))};o?(N.id=-1,ur(N,r)):N()}}}da().requestIdleCallback;da().cancelIdleCallback;const Rs=t=>!!t.type.__asyncLoader,yp=t=>t.type.__isKeepAlive;function pv(t,e){mp(t,"a",e)}function gv(t,e){mp(t,"da",e)}function mp(t,e,r=Gt){const i=t.__wdc||(t.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(ba(e,i,r),r){let n=r.parent;for(;n&&n.parent;)yp(n.parent.vnode)&&bv(i,e,r,n),n=n.parent}}function bv(t,e,r,i){const n=ba(e,t,i,!0);wp(()=>{Wc(i[e],n)},r)}function ba(t,e,r=Gt,i=!1){if(r){const n=r[t]||(r[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Gi();const a=Gs(r),c=ei(e,r,t,o);return a(),Ji(),c});return i?n.unshift(s):n.push(s),s}}const Oi=t=>(e,r=Gt)=>{(!zs||t==="sp")&&ba(t,(...i)=>e(...i),r)},vv=Oi("bm"),yv=Oi("m"),mv=Oi("bu"),wv=Oi("u"),_v=Oi("bum"),wp=Oi("um"),xv=Oi("sp"),Ev=Oi("rtg"),Sv=Oi("rtc");function Mv(t,e=Gt){ba("ec",t,e)}const Iv=Symbol.for("v-ndc");function Av(t,e,r,i){let n;const s=r,o=Re(t);if(o||St(t)){const a=o&&kn(t);let c=!1;a&&(c=!Ur(t),t=pa(t)),n=new Array(t.length);for(let f=0,h=t.length;f<h;f++)n[f]=e(c?ar(t[f]):t[f],f,void 0,s)}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,s)}else if(vt(t))if(t[Symbol.iterator])n=Array.from(t,(a,c)=>e(a,c,void 0,s));else{const a=Object.keys(t);n=new Array(a.length);for(let c=0,f=a.length;c<f;c++){const h=a[c];n[c]=e(t[h],h,c,s)}}else n=[];return n}const lc=t=>t?kp(t)?ma(t):lc(t.parent):null,Ps=Xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>lc(t.parent),$root:t=>lc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>xp(t),$forceUpdate:t=>t.f||(t.f=()=>{nu(t.update)}),$nextTick:t=>t.n||(t.n=av.bind(t.proxy)),$watch:t=>Jv.bind(t)}),ka=(t,e)=>t!==ht&&!t.__isScriptSetup&&st(t,e),Dv={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:i,data:n,props:s,accessCache:o,type:a,appContext:c}=t;let f;if(e[0]!=="$"){const S=o[e];if(S!==void 0)switch(S){case 1:return i[e];case 2:return n[e];case 4:return r[e];case 3:return s[e]}else{if(ka(i,e))return o[e]=1,i[e];if(n!==ht&&st(n,e))return o[e]=2,n[e];if((f=t.propsOptions[0])&&st(f,e))return o[e]=3,s[e];if(r!==ht&&st(r,e))return o[e]=4,r[e];dc&&(o[e]=0)}}const h=Ps[e];let g,w;if(h)return e==="$attrs"&&kt(t.attrs,"get",""),h(t);if((g=a.__cssModules)&&(g=g[e]))return g;if(r!==ht&&st(r,e))return o[e]=4,r[e];if(w=c.config.globalProperties,st(w,e))return w[e]},set({_:t},e,r){const{data:i,setupState:n,ctx:s}=t;return ka(n,e)?(n[e]=r,!0):i!==ht&&st(i,e)?(i[e]=r,!0):st(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:n,propsOptions:s}},o){let a;return!!r[o]||t!==ht&&st(t,o)||ka(e,o)||(a=s[0])&&st(a,o)||st(i,o)||st(Ps,o)||st(n.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:st(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function Xu(t){return Re(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let dc=!0;function Ov(t){const e=xp(t),r=t.proxy,i=t.ctx;dc=!1,e.beforeCreate&&Qu(e.beforeCreate,t,"bc");const{data:n,computed:s,methods:o,watch:a,provide:c,inject:f,created:h,beforeMount:g,mounted:w,beforeUpdate:S,updated:E,activated:I,deactivated:N,beforeDestroy:C,beforeUnmount:T,destroyed:L,unmounted:R,render:$,renderTracked:P,renderTriggered:U,errorCaptured:k,serverPrefetch:j,expose:G,inheritAttrs:O,components:p,directives:d,filters:u}=e;if(f&&Rv(f,i,null),o)for(const m in o){const M=o[m];Fe(M)&&(i[m]=M.bind(r))}if(n){const m=n.call(r,r);vt(m)&&(t.data=tu(m))}if(dc=!0,s)for(const m in s){const M=s[m],_=Fe(M)?M.bind(r,r):Fe(M.get)?M.get.bind(r,r):Xr,b=!Fe(M)&&Fe(M.set)?M.set.bind(r):Xr,x=by({get:_,set:b});Object.defineProperty(i,m,{enumerable:!0,configurable:!0,get:()=>x.value,set:y=>x.value=y})}if(a)for(const m in a)_p(a[m],i,r,m);if(c){const m=Fe(c)?c.call(r):c;Reflect.ownKeys(m).forEach(M=>{$v(M,m[M])})}h&&Qu(h,t,"c");function v(m,M){Re(M)?M.forEach(_=>m(_.bind(r))):M&&m(M.bind(r))}if(v(vv,g),v(yv,w),v(mv,S),v(wv,E),v(pv,I),v(gv,N),v(Mv,k),v(Sv,P),v(Ev,U),v(_v,T),v(wp,R),v(xv,j),Re(G))if(G.length){const m=t.exposed||(t.exposed={});G.forEach(M=>{Object.defineProperty(m,M,{get:()=>r[M],set:_=>r[M]=_})})}else t.exposed||(t.exposed={});$&&t.render===Xr&&(t.render=$),O!=null&&(t.inheritAttrs=O),p&&(t.components=p),d&&(t.directives=d),j&&vp(t)}function Rv(t,e,r=Xr){Re(t)&&(t=pc(t));for(const i in t){const n=t[i];let s;vt(n)?"default"in n?s=Ro(n.from||i,n.default,!0):s=Ro(n.from||i):s=Ro(n),Yt(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function Qu(t,e,r){ei(Re(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function _p(t,e,r,i){let n=i.includes(".")?$p(r,i):()=>r[i];if(St(t)){const s=e[t];Fe(s)&&Ka(n,s)}else if(Fe(t))Ka(n,t.bind(r));else if(vt(t))if(Re(t))t.forEach(s=>_p(s,e,r,i));else{const s=Fe(t.handler)?t.handler.bind(r):e[t.handler];Fe(s)&&Ka(n,s,t)}}function xp(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let c;return a?c=a:!n.length&&!r&&!i?c=e:(c={},n.length&&n.forEach(f=>Zo(c,f,o,!0)),Zo(c,e,o)),vt(e)&&s.set(e,c),c}function Zo(t,e,r,i=!1){const{mixins:n,extends:s}=e;s&&Zo(t,s,r,!0),n&&n.forEach(o=>Zo(t,o,r,!0));for(const o in e)if(!(i&&o==="expose")){const a=Pv[o]||r&&r[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Pv={data:eh,props:th,emits:th,methods:Es,computed:Es,beforeCreate:Vt,created:Vt,beforeMount:Vt,mounted:Vt,beforeUpdate:Vt,updated:Vt,beforeDestroy:Vt,beforeUnmount:Vt,destroyed:Vt,unmounted:Vt,activated:Vt,deactivated:Vt,errorCaptured:Vt,serverPrefetch:Vt,components:Es,directives:Es,watch:Cv,provide:eh,inject:Nv};function eh(t,e){return e?t?function(){return Xt(Fe(t)?t.call(this,this):t,Fe(e)?e.call(this,this):e)}:e:t}function Nv(t,e){return Es(pc(t),pc(e))}function pc(t){if(Re(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Vt(t,e){return t?[...new Set([].concat(t,e))]:e}function Es(t,e){return t?Xt(Object.create(null),t,e):e}function th(t,e){return t?Re(t)&&Re(e)?[...new Set([...t,...e])]:Xt(Object.create(null),Xu(t),Xu(e??{})):e}function Cv(t,e){if(!t)return e;if(!e)return t;const r=Xt(Object.create(null),t);for(const i in e)r[i]=Vt(t[i],e[i]);return r}function Ep(){return{app:null,config:{isNativeTag:_b,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Tv=0;function Fv(t,e){return function(i,n=null){Fe(i)||(i=Xt({},i)),n!=null&&!vt(n)&&(n=null);const s=Ep(),o=new WeakSet,a=[];let c=!1;const f=s.app={_uid:Tv++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:vy,get config(){return s.config},set config(h){},use(h,...g){return o.has(h)||(h&&Fe(h.install)?(o.add(h),h.install(f,...g)):Fe(h)&&(o.add(h),h(f,...g))),f},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),f},component(h,g){return g?(s.components[h]=g,f):s.components[h]},directive(h,g){return g?(s.directives[h]=g,f):s.directives[h]},mount(h,g,w){if(!c){const S=f._ceVNode||Ai(i,n);return S.appContext=s,w===!0?w="svg":w===!1&&(w=void 0),t(S,h,w),c=!0,f._container=h,h.__vue_app__=f,ma(S.component)}},onUnmount(h){a.push(h)},unmount(){c&&(ei(a,f._instance,16),t(null,f._container),delete f._container.__vue_app__)},provide(h,g){return s.provides[h]=g,f},runWithContext(h){const g=Kn;Kn=f;try{return h()}finally{Kn=g}}};return f}}let Kn=null;function $v(t,e){if(Gt){let r=Gt.provides;const i=Gt.parent&&Gt.parent.provides;i===r&&(r=Gt.provides=Object.create(i)),r[t]=e}}function Ro(t,e,r=!1){const i=Gt||Sr;if(i||Kn){const n=Kn?Kn._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return r&&Fe(e)?e.call(i&&i.proxy):e}}const Sp={},Mp=()=>Object.create(Sp),Ip=t=>Object.getPrototypeOf(t)===Sp;function Lv(t,e,r,i=!1){const n={},s=Mp();t.propsDefaults=Object.create(null),Ap(t,e,n,s);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);r?t.props=i?n:Xb(n):t.type.props?t.props=n:t.props=s,t.attrs=s}function qv(t,e,r,i){const{props:n,attrs:s,vnode:{patchFlag:o}}=t,a=at(n),[c]=t.propsOptions;let f=!1;if((i||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let g=0;g<h.length;g++){let w=h[g];if(va(t.emitsOptions,w))continue;const S=e[w];if(c)if(st(s,w))S!==s[w]&&(s[w]=S,f=!0);else{const E=Vi(w);n[E]=gc(c,a,E,S,t,!1)}else S!==s[w]&&(s[w]=S,f=!0)}}}else{Ap(t,e,n,s)&&(f=!0);let h;for(const g in a)(!e||!st(e,g)&&((h=xn(g))===g||!st(e,h)))&&(c?r&&(r[g]!==void 0||r[h]!==void 0)&&(n[g]=gc(c,a,g,void 0,t,!0)):delete n[g]);if(s!==a)for(const g in s)(!e||!st(e,g))&&(delete s[g],f=!0)}f&&Mi(t.attrs,"set","")}function Ap(t,e,r,i){const[n,s]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(As(c))continue;const f=e[c];let h;n&&st(n,h=Vi(c))?!s||!s.includes(h)?r[h]=f:(a||(a={}))[h]=f:va(t.emitsOptions,c)||(!(c in i)||f!==i[c])&&(i[c]=f,o=!0)}if(s){const c=at(r),f=a||ht;for(let h=0;h<s.length;h++){const g=s[h];r[g]=gc(n,c,g,f[g],t,!st(f,g))}}return o}function gc(t,e,r,i,n,s){const o=t[r];if(o!=null){const a=st(o,"default");if(a&&i===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Fe(c)){const{propsDefaults:f}=n;if(r in f)i=f[r];else{const h=Gs(n);i=f[r]=c.call(null,e),h()}}else i=c;n.ce&&n.ce._setProp(r,i)}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===xn(r))&&(i=!0))}return i}const Bv=new WeakMap;function Dp(t,e,r=!1){const i=r?Bv:e.propsCache,n=i.get(t);if(n)return n;const s=t.props,o={},a=[];let c=!1;if(!Fe(t)){const h=g=>{c=!0;const[w,S]=Dp(g,e,!0);Xt(o,w),S&&a.push(...S)};!r&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!s&&!c)return vt(t)&&i.set(t,Un),Un;if(Re(s))for(let h=0;h<s.length;h++){const g=Vi(s[h]);rh(g)&&(o[g]=ht)}else if(s)for(const h in s){const g=Vi(h);if(rh(g)){const w=s[h],S=o[g]=Re(w)||Fe(w)?{type:w}:Xt({},w),E=S.type;let I=!1,N=!0;if(Re(E))for(let C=0;C<E.length;++C){const T=E[C],L=Fe(T)&&T.name;if(L==="Boolean"){I=!0;break}else L==="String"&&(N=!1)}else I=Fe(E)&&E.name==="Boolean";S[0]=I,S[1]=N,(I||st(S,"default"))&&a.push(g)}}const f=[o,a];return vt(t)&&i.set(t,f),f}function rh(t){return t[0]!=="$"&&!As(t)}const Op=t=>t[0]==="_"||t==="$stable",ou=t=>Re(t)?t.map(Zr):[Zr(t)],Uv=(t,e,r)=>{if(e._n)return e;const i=uv((...n)=>ou(e(...n)),r);return i._c=!1,i},Rp=(t,e,r)=>{const i=t._ctx;for(const n in t){if(Op(n))continue;const s=t[n];if(Fe(s))e[n]=Uv(n,s,i);else if(s!=null){const o=ou(s);e[n]=()=>o}}},Pp=(t,e)=>{const r=ou(e);t.slots.default=()=>r},Np=(t,e,r)=>{for(const i in e)(r||i!=="_")&&(t[i]=e[i])},zv=(t,e,r)=>{const i=t.slots=Mp();if(t.vnode.shapeFlag&32){const n=e._;n?(Np(i,e,r),r&&V0(i,"_",n,!0)):Rp(e,i)}else e&&Pp(t,e)},kv=(t,e,r)=>{const{vnode:i,slots:n}=t;let s=!0,o=ht;if(i.shapeFlag&32){const a=e._;a?r&&a===1?s=!1:Np(n,e,r):(s=!e.$stable,Rp(e,n)),o=e}else e&&(Pp(t,e),o={default:1});if(s)for(const a in n)!Op(a)&&o[a]==null&&delete n[a]},ur=ry;function jv(t){return Kv(t)}function Kv(t,e){const r=da();r.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:o,createText:a,createComment:c,setText:f,setElementText:h,parentNode:g,nextSibling:w,setScopeId:S=Xr,insertStaticContent:E}=t,I=(F,B,K,W=null,Q=null,ee=null,te=void 0,ie=null,re=!!B.dynamicChildren)=>{if(F===B)return;F&&!us(F,B)&&(W=H(F),y(F,Q,ee,!0),F=null),B.patchFlag===-2&&(re=!1,B.dynamicChildren=null);const{type:Z,ref:ce,shapeFlag:se}=B;switch(Z){case ya:N(F,B,K,W);break;case vn:C(F,B,K,W);break;case Va:F==null&&T(B,K,W,te);break;case Yr:p(F,B,K,W,Q,ee,te,ie,re);break;default:se&1?$(F,B,K,W,Q,ee,te,ie,re):se&6?d(F,B,K,W,Q,ee,te,ie,re):(se&64||se&128)&&Z.process(F,B,K,W,Q,ee,te,ie,re,ae)}ce!=null&&Q&&Yo(ce,F&&F.ref,ee,B||F,!B)},N=(F,B,K,W)=>{if(F==null)i(B.el=a(B.children),K,W);else{const Q=B.el=F.el;B.children!==F.children&&f(Q,B.children)}},C=(F,B,K,W)=>{F==null?i(B.el=c(B.children||""),K,W):B.el=F.el},T=(F,B,K,W)=>{[F.el,F.anchor]=E(F.children,B,K,W,F.el,F.anchor)},L=({el:F,anchor:B},K,W)=>{let Q;for(;F&&F!==B;)Q=w(F),i(F,K,W),F=Q;i(B,K,W)},R=({el:F,anchor:B})=>{let K;for(;F&&F!==B;)K=w(F),n(F),F=K;n(B)},$=(F,B,K,W,Q,ee,te,ie,re)=>{B.type==="svg"?te="svg":B.type==="math"&&(te="mathml"),F==null?P(B,K,W,Q,ee,te,ie,re):j(F,B,Q,ee,te,ie,re)},P=(F,B,K,W,Q,ee,te,ie)=>{let re,Z;const{props:ce,shapeFlag:se,transition:ne,dirs:he}=F;if(re=F.el=o(F.type,ee,ce&&ce.is,ce),se&8?h(re,F.children):se&16&&k(F.children,re,null,W,Q,ja(F,ee),te,ie),he&&en(F,null,W,"created"),U(re,F,F.scopeId,te,W),ce){for(const le in ce)le!=="value"&&!As(le)&&s(re,le,null,ce[le],ee,W);"value"in ce&&s(re,"value",null,ce.value,ee),(Z=ce.onVnodeBeforeMount)&&kr(Z,W,F)}he&&en(F,null,W,"beforeMount");const ge=Vv(Q,ne);ge&&ne.beforeEnter(re),i(re,B,K),((Z=ce&&ce.onVnodeMounted)||ge||he)&&ur(()=>{Z&&kr(Z,W,F),ge&&ne.enter(re),he&&en(F,null,W,"mounted")},Q)},U=(F,B,K,W,Q)=>{if(K&&S(F,K),W)for(let ee=0;ee<W.length;ee++)S(F,W[ee]);if(Q){let ee=Q.subTree;if(B===ee||qp(ee.type)&&(ee.ssContent===B||ee.ssFallback===B)){const te=Q.vnode;U(F,te,te.scopeId,te.slotScopeIds,Q.parent)}}},k=(F,B,K,W,Q,ee,te,ie,re=0)=>{for(let Z=re;Z<F.length;Z++){const ce=F[Z]=ie?qi(F[Z]):Zr(F[Z]);I(null,ce,B,K,W,Q,ee,te,ie)}},j=(F,B,K,W,Q,ee,te)=>{const ie=B.el=F.el;let{patchFlag:re,dynamicChildren:Z,dirs:ce}=B;re|=F.patchFlag&16;const se=F.props||ht,ne=B.props||ht;let he;if(K&&tn(K,!1),(he=ne.onVnodeBeforeUpdate)&&kr(he,K,B,F),ce&&en(B,F,K,"beforeUpdate"),K&&tn(K,!0),(se.innerHTML&&ne.innerHTML==null||se.textContent&&ne.textContent==null)&&h(ie,""),Z?G(F.dynamicChildren,Z,ie,K,W,ja(B,Q),ee):te||M(F,B,ie,null,K,W,ja(B,Q),ee,!1),re>0){if(re&16)O(ie,se,ne,K,Q);else if(re&2&&se.class!==ne.class&&s(ie,"class",null,ne.class,Q),re&4&&s(ie,"style",se.style,ne.style,Q),re&8){const ge=B.dynamicProps;for(let le=0;le<ge.length;le++){const ve=ge[le],De=se[ve],pe=ne[ve];(pe!==De||ve==="value")&&s(ie,ve,De,pe,Q,K)}}re&1&&F.children!==B.children&&h(ie,B.children)}else!te&&Z==null&&O(ie,se,ne,K,Q);((he=ne.onVnodeUpdated)||ce)&&ur(()=>{he&&kr(he,K,B,F),ce&&en(B,F,K,"updated")},W)},G=(F,B,K,W,Q,ee,te)=>{for(let ie=0;ie<B.length;ie++){const re=F[ie],Z=B[ie],ce=re.el&&(re.type===Yr||!us(re,Z)||re.shapeFlag&70)?g(re.el):K;I(re,Z,ce,null,W,Q,ee,te,!0)}},O=(F,B,K,W,Q)=>{if(B!==K){if(B!==ht)for(const ee in B)!As(ee)&&!(ee in K)&&s(F,ee,B[ee],null,Q,W);for(const ee in K){if(As(ee))continue;const te=K[ee],ie=B[ee];te!==ie&&ee!=="value"&&s(F,ee,ie,te,Q,W)}"value"in K&&s(F,"value",B.value,K.value,Q)}},p=(F,B,K,W,Q,ee,te,ie,re)=>{const Z=B.el=F?F.el:a(""),ce=B.anchor=F?F.anchor:a("");let{patchFlag:se,dynamicChildren:ne,slotScopeIds:he}=B;he&&(ie=ie?ie.concat(he):he),F==null?(i(Z,K,W),i(ce,K,W),k(B.children||[],K,ce,Q,ee,te,ie,re)):se>0&&se&64&&ne&&F.dynamicChildren?(G(F.dynamicChildren,ne,K,Q,ee,te,ie),(B.key!=null||Q&&B===Q.subTree)&&Cp(F,B,!0)):M(F,B,K,ce,Q,ee,te,ie,re)},d=(F,B,K,W,Q,ee,te,ie,re)=>{B.slotScopeIds=ie,F==null?B.shapeFlag&512?Q.ctx.activate(B,K,W,te,re):u(B,K,W,Q,ee,te,re):l(F,B,re)},u=(F,B,K,W,Q,ee,te)=>{const ie=F.component=uy(F,W,Q);if(yp(F)&&(ie.ctx.renderer=ae),hy(ie,!1,te),ie.asyncDep){if(Q&&Q.registerDep(ie,v,te),!F.el){const re=ie.subTree=Ai(vn);C(null,re,B,K)}}else v(ie,F,B,K,Q,ee,te)},l=(F,B,K)=>{const W=B.component=F.component;if(ey(F,B,K))if(W.asyncDep&&!W.asyncResolved){m(W,B,K);return}else W.next=B,W.update();else B.el=F.el,W.vnode=B},v=(F,B,K,W,Q,ee,te)=>{const ie=()=>{if(F.isMounted){let{next:se,bu:ne,u:he,parent:ge,vnode:le}=F;{const Ce=Tp(F);if(Ce){se&&(se.el=le.el,m(F,se,te)),Ce.asyncDep.then(()=>{F.isUnmounted||ie()});return}}let ve=se,De;tn(F,!1),se?(se.el=le.el,m(F,se,te)):se=le,ne&&Do(ne),(De=se.props&&se.props.onVnodeBeforeUpdate)&&kr(De,ge,se,le),tn(F,!0);const pe=nh(F),Ne=F.subTree;F.subTree=pe,I(Ne,pe,g(Ne.el),H(Ne),F,Q,ee),se.el=pe.el,ve===null&&ty(F,pe.el),he&&ur(he,Q),(De=se.props&&se.props.onVnodeUpdated)&&ur(()=>kr(De,ge,se,le),Q)}else{let se;const{el:ne,props:he}=B,{bm:ge,m:le,parent:ve,root:De,type:pe}=F,Ne=Rs(B);tn(F,!1),ge&&Do(ge),!Ne&&(se=he&&he.onVnodeBeforeMount)&&kr(se,ve,B),tn(F,!0);{De.ce&&De.ce._injectChildStyle(pe);const Ce=F.subTree=nh(F);I(null,Ce,K,W,F,Q,ee),B.el=Ce.el}if(le&&ur(le,Q),!Ne&&(se=he&&he.onVnodeMounted)){const Ce=B;ur(()=>kr(se,ve,Ce),Q)}(B.shapeFlag&256||ve&&Rs(ve.vnode)&&ve.vnode.shapeFlag&256)&&F.a&&ur(F.a,Q),F.isMounted=!0,B=K=W=null}};F.scope.on();const re=F.effect=new J0(ie);F.scope.off();const Z=F.update=re.run.bind(re),ce=F.job=re.runIfDirty.bind(re);ce.i=F,ce.id=F.uid,re.scheduler=()=>nu(ce),tn(F,!0),Z()},m=(F,B,K)=>{B.component=F;const W=F.vnode.props;F.vnode=B,F.next=null,qv(F,B.props,W,K),kv(F,B.children,K),Gi(),Zu(F),Ji()},M=(F,B,K,W,Q,ee,te,ie,re=!1)=>{const Z=F&&F.children,ce=F?F.shapeFlag:0,se=B.children,{patchFlag:ne,shapeFlag:he}=B;if(ne>0){if(ne&128){b(Z,se,K,W,Q,ee,te,ie,re);return}else if(ne&256){_(Z,se,K,W,Q,ee,te,ie,re);return}}he&8?(ce&16&&z(Z,Q,ee),se!==Z&&h(K,se)):ce&16?he&16?b(Z,se,K,W,Q,ee,te,ie,re):z(Z,Q,ee,!0):(ce&8&&h(K,""),he&16&&k(se,K,W,Q,ee,te,ie,re))},_=(F,B,K,W,Q,ee,te,ie,re)=>{F=F||Un,B=B||Un;const Z=F.length,ce=B.length,se=Math.min(Z,ce);let ne;for(ne=0;ne<se;ne++){const he=B[ne]=re?qi(B[ne]):Zr(B[ne]);I(F[ne],he,K,null,Q,ee,te,ie,re)}Z>ce?z(F,Q,ee,!0,!1,se):k(B,K,W,Q,ee,te,ie,re,se)},b=(F,B,K,W,Q,ee,te,ie,re)=>{let Z=0;const ce=B.length;let se=F.length-1,ne=ce-1;for(;Z<=se&&Z<=ne;){const he=F[Z],ge=B[Z]=re?qi(B[Z]):Zr(B[Z]);if(us(he,ge))I(he,ge,K,null,Q,ee,te,ie,re);else break;Z++}for(;Z<=se&&Z<=ne;){const he=F[se],ge=B[ne]=re?qi(B[ne]):Zr(B[ne]);if(us(he,ge))I(he,ge,K,null,Q,ee,te,ie,re);else break;se--,ne--}if(Z>se){if(Z<=ne){const he=ne+1,ge=he<ce?B[he].el:W;for(;Z<=ne;)I(null,B[Z]=re?qi(B[Z]):Zr(B[Z]),K,ge,Q,ee,te,ie,re),Z++}}else if(Z>ne)for(;Z<=se;)y(F[Z],Q,ee,!0),Z++;else{const he=Z,ge=Z,le=new Map;for(Z=ge;Z<=ne;Z++){const Oe=B[Z]=re?qi(B[Z]):Zr(B[Z]);Oe.key!=null&&le.set(Oe.key,Z)}let ve,De=0;const pe=ne-ge+1;let Ne=!1,Ce=0;const me=new Array(pe);for(Z=0;Z<pe;Z++)me[Z]=0;for(Z=he;Z<=se;Z++){const Oe=F[Z];if(De>=pe){y(Oe,Q,ee,!0);continue}let ye;if(Oe.key!=null)ye=le.get(Oe.key);else for(ve=ge;ve<=ne;ve++)if(me[ve-ge]===0&&us(Oe,B[ve])){ye=ve;break}ye===void 0?y(Oe,Q,ee,!0):(me[ye-ge]=Z+1,ye>=Ce?Ce=ye:Ne=!0,I(Oe,B[ye],K,null,Q,ee,te,ie,re),De++)}const Ue=Ne?Hv(me):Un;for(ve=Ue.length-1,Z=pe-1;Z>=0;Z--){const Oe=ge+Z,ye=B[Oe],ze=Oe+1<ce?B[Oe+1].el:W;me[Z]===0?I(null,ye,K,ze,Q,ee,te,ie,re):Ne&&(ve<0||Z!==Ue[ve]?x(ye,K,ze,2):ve--)}}},x=(F,B,K,W,Q=null)=>{const{el:ee,type:te,transition:ie,children:re,shapeFlag:Z}=F;if(Z&6){x(F.component.subTree,B,K,W);return}if(Z&128){F.suspense.move(B,K,W);return}if(Z&64){te.move(F,B,K,ae);return}if(te===Yr){i(ee,B,K);for(let se=0;se<re.length;se++)x(re[se],B,K,W);i(F.anchor,B,K);return}if(te===Va){L(F,B,K);return}if(W!==2&&Z&1&&ie)if(W===0)ie.beforeEnter(ee),i(ee,B,K),ur(()=>ie.enter(ee),Q);else{const{leave:se,delayLeave:ne,afterLeave:he}=ie,ge=()=>i(ee,B,K),le=()=>{se(ee,()=>{ge(),he&&he()})};ne?ne(ee,ge,le):le()}else i(ee,B,K)},y=(F,B,K,W=!1,Q=!1)=>{const{type:ee,props:te,ref:ie,children:re,dynamicChildren:Z,shapeFlag:ce,patchFlag:se,dirs:ne,cacheIndex:he}=F;if(se===-2&&(Q=!1),ie!=null&&Yo(ie,null,K,F,!0),he!=null&&(B.renderCache[he]=void 0),ce&256){B.ctx.deactivate(F);return}const ge=ce&1&&ne,le=!Rs(F);let ve;if(le&&(ve=te&&te.onVnodeBeforeUnmount)&&kr(ve,B,F),ce&6)A(F.component,K,W);else{if(ce&128){F.suspense.unmount(K,W);return}ge&&en(F,null,B,"beforeUnmount"),ce&64?F.type.remove(F,B,K,ae,W):Z&&!Z.hasOnce&&(ee!==Yr||se>0&&se&64)?z(Z,B,K,!1,!0):(ee===Yr&&se&384||!Q&&ce&16)&&z(re,B,K),W&&D(F)}(le&&(ve=te&&te.onVnodeUnmounted)||ge)&&ur(()=>{ve&&kr(ve,B,F),ge&&en(F,null,B,"unmounted")},K)},D=F=>{const{type:B,el:K,anchor:W,transition:Q}=F;if(B===Yr){J(K,W);return}if(B===Va){R(F);return}const ee=()=>{n(K),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(F.shapeFlag&1&&Q&&!Q.persisted){const{leave:te,delayLeave:ie}=Q,re=()=>te(K,ee);ie?ie(F.el,ee,re):re()}else ee()},J=(F,B)=>{let K;for(;F!==B;)K=w(F),n(F),F=K;n(B)},A=(F,B,K)=>{const{bum:W,scope:Q,job:ee,subTree:te,um:ie,m:re,a:Z}=F;ih(re),ih(Z),W&&Do(W),Q.stop(),ee&&(ee.flags|=8,y(te,F,B,K)),ie&&ur(ie,B),ur(()=>{F.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},z=(F,B,K,W=!1,Q=!1,ee=0)=>{for(let te=ee;te<F.length;te++)y(F[te],B,K,W,Q)},H=F=>{if(F.shapeFlag&6)return H(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const B=w(F.anchor||F.el),K=B&&B[lv];return K?w(K):B};let Y=!1;const X=(F,B,K)=>{F==null?B._vnode&&y(B._vnode,null,null,!0):I(B._vnode||null,F,B,null,null,null,K),B._vnode=F,Y||(Y=!0,Zu(),pp(),Y=!1)},ae={p:I,um:y,m:x,r:D,mt:u,mc:k,pc:M,pbc:G,n:H,o:t};return{render:X,hydrate:void 0,createApp:Fv(X)}}function ja({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function tn({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Vv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Cp(t,e,r=!1){const i=t.children,n=e.children;if(Re(i)&&Re(n))for(let s=0;s<i.length;s++){const o=i[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=qi(n[s]),a.el=o.el),!r&&a.patchFlag!==-2&&Cp(o,a)),a.type===ya&&(a.el=o.el)}}function Hv(t){const e=t.slice(),r=[0];let i,n,s,o,a;const c=t.length;for(i=0;i<c;i++){const f=t[i];if(f!==0){if(n=r[r.length-1],t[n]<f){e[i]=n,r.push(i);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,t[r[a]]<f?s=a+1:o=a;f<t[r[s]]&&(s>0&&(e[i]=r[s-1]),r[s]=i)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=e[o];return r}function Tp(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Tp(e)}function ih(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Wv=Symbol.for("v-scx"),Gv=()=>Ro(Wv);function Ka(t,e,r){return Fp(t,e,r)}function Fp(t,e,r=ht){const{immediate:i,deep:n,flush:s,once:o}=r,a=Xt({},r),c=e&&i||!e&&s!=="post";let f;if(zs){if(s==="sync"){const S=Gv();f=S.__watcherHandles||(S.__watcherHandles=[])}else if(!c){const S=()=>{};return S.stop=Xr,S.resume=Xr,S.pause=Xr,S}}const h=Gt;a.call=(S,E,I)=>ei(S,h,E,I);let g=!1;s==="post"?a.scheduler=S=>{ur(S,h&&h.suspense)}:s!=="sync"&&(g=!0,a.scheduler=(S,E)=>{E?S():nu(S)}),a.augmentJob=S=>{e&&(S.flags|=4),g&&(S.flags|=2,h&&(S.id=h.uid,S.i=h))};const w=sv(t,e,a);return zs&&(f?f.push(w):c&&w()),w}function Jv(t,e,r){const i=this.proxy,n=St(t)?t.includes(".")?$p(i,t):()=>i[t]:t.bind(i,i);let s;Fe(e)?s=e:(s=e.handler,r=e);const o=Gs(this),a=Fp(n,s.bind(i),r);return o(),a}function $p(t,e){const r=e.split(".");return()=>{let i=t;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}const Yv=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Vi(e)}Modifiers`]||t[`${xn(e)}Modifiers`];function Zv(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||ht;let n=r;const s=e.startsWith("update:"),o=s&&Yv(i,e.slice(7));o&&(o.trim&&(n=r.map(h=>St(h)?h.trim():h)),o.number&&(n=r.map(oc)));let a,c=i[a=La(e)]||i[a=La(Vi(e))];!c&&s&&(c=i[a=La(xn(e))]),c&&ei(c,t,6,n);const f=i[a+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ei(f,t,6,n)}}function Lp(t,e,r=!1){const i=e.emitsCache,n=i.get(t);if(n!==void 0)return n;const s=t.emits;let o={},a=!1;if(!Fe(t)){const c=f=>{const h=Lp(f,e,!0);h&&(a=!0,Xt(o,h))};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!a?(vt(t)&&i.set(t,null),null):(Re(s)?s.forEach(c=>o[c]=null):Xt(o,s),vt(t)&&i.set(t,o),o)}function va(t,e){return!t||!ua(e)?!1:(e=e.slice(2).replace(/Once$/,""),st(t,e[0].toLowerCase()+e.slice(1))||st(t,xn(e))||st(t,e))}function nh(t){const{type:e,vnode:r,proxy:i,withProxy:n,propsOptions:[s],slots:o,attrs:a,emit:c,render:f,renderCache:h,props:g,data:w,setupState:S,ctx:E,inheritAttrs:I}=t,N=Jo(t);let C,T;try{if(r.shapeFlag&4){const R=n||i,$=R;C=Zr(f.call($,R,h,g,S,w,E)),T=a}else{const R=e;C=Zr(R.length>1?R(g,{attrs:a,slots:o,emit:c}):R(g,null)),T=e.props?a:Xv(a)}}catch(R){Ns.length=0,ga(R,t,1),C=Ai(vn)}let L=C;if(T&&I!==!1){const R=Object.keys(T),{shapeFlag:$}=L;R.length&&$&7&&(s&&R.some(Hc)&&(T=Qv(T,s)),L=Gn(L,T,!1,!0))}return r.dirs&&(L=Gn(L,null,!1,!0),L.dirs=L.dirs?L.dirs.concat(r.dirs):r.dirs),r.transition&&su(L,r.transition),C=L,Jo(N),C}const Xv=t=>{let e;for(const r in t)(r==="class"||r==="style"||ua(r))&&((e||(e={}))[r]=t[r]);return e},Qv=(t,e)=>{const r={};for(const i in t)(!Hc(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function ey(t,e,r){const{props:i,children:n,component:s}=t,{props:o,children:a,patchFlag:c}=e,f=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return i?sh(i,o,f):!!o;if(c&8){const h=e.dynamicProps;for(let g=0;g<h.length;g++){const w=h[g];if(o[w]!==i[w]&&!va(f,w))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?sh(i,o,f):!0:!!o;return!1}function sh(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(e[s]!==t[s]&&!va(r,s))return!0}return!1}function ty({vnode:t,parent:e},r){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=r,e=e.parent;else break}}const qp=t=>t.__isSuspense;function ry(t,e){e&&e.pendingBranch?Re(t)?e.effects.push(...t):e.effects.push(t):cv(t)}const Yr=Symbol.for("v-fgt"),ya=Symbol.for("v-txt"),vn=Symbol.for("v-cmt"),Va=Symbol.for("v-stc"),Ns=[];let gr=null;function $n(t=!1){Ns.push(gr=t?null:[])}function iy(){Ns.pop(),gr=Ns[Ns.length-1]||null}let Us=1;function oh(t,e=!1){Us+=t,t<0&&gr&&e&&(gr.hasOnce=!0)}function Bp(t){return t.dynamicChildren=Us>0?gr||Un:null,iy(),Us>0&&gr&&gr.push(t),t}function cs(t,e,r,i,n,s){return Bp(Ht(t,e,r,i,n,s,!0))}function ny(t,e,r,i,n){return Bp(Ai(t,e,r,i,n,!0))}function Up(t){return t?t.__v_isVNode===!0:!1}function us(t,e){return t.type===e.type&&t.key===e.key}const zp=({key:t})=>t??null,Po=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?St(t)||Yt(t)||Fe(t)?{i:Sr,r:t,k:e,f:!!r}:t:null);function Ht(t,e=null,r=null,i=0,n=null,s=t===Yr?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&zp(e),ref:e&&Po(e),scopeId:bp,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Sr};return a?(au(c,r),s&128&&t.normalize(c)):r&&(c.shapeFlag|=St(r)?8:16),Us>0&&!o&&gr&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&gr.push(c),c}const Ai=sy;function sy(t,e=null,r=null,i=0,n=null,s=!1){if((!t||t===Iv)&&(t=vn),Up(t)){const a=Gn(t,e,!0);return r&&au(a,r),Us>0&&!s&&gr&&(a.shapeFlag&6?gr[gr.indexOf(t)]=a:gr.push(a)),a.patchFlag=-2,a}if(gy(t)&&(t=t.__vccOpts),e){e=oy(e);let{class:a,style:c}=e;a&&!St(a)&&(e.class=Yc(a)),vt(c)&&(iu(c)&&!Re(c)&&(c=Xt({},c)),e.style=Jc(c))}const o=St(t)?1:qp(t)?128:dv(t)?64:vt(t)?4:Fe(t)?2:0;return Ht(t,e,r,i,n,o,s,!0)}function oy(t){return t?iu(t)||Ip(t)?Xt({},t):t:null}function Gn(t,e,r=!1,i=!1){const{props:n,ref:s,patchFlag:o,children:a,transition:c}=t,f=e?ay(n||{},e):n,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&zp(f),ref:e&&e.ref?r&&s?Re(s)?s.concat(Po(e)):[s,Po(e)]:Po(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Yr?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Gn(t.ssContent),ssFallback:t.ssFallback&&Gn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&i&&su(h,c.clone(h)),h}function bc(t=" ",e=0){return Ai(ya,null,t,e)}function ah(t="",e=!1){return e?($n(),ny(vn,null,t)):Ai(vn,null,t)}function Zr(t){return t==null||typeof t=="boolean"?Ai(vn):Re(t)?Ai(Yr,null,t.slice()):Up(t)?qi(t):Ai(ya,null,String(t))}function qi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Gn(t)}function au(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Re(e))r=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),au(t,n()),n._c&&(n._d=!0));return}else{r=32;const n=e._;!n&&!Ip(e)?e._ctx=Sr:n===3&&Sr&&(Sr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Fe(e)?(e={default:e,_ctx:Sr},r=32):(e=String(e),i&64?(r=16,e=[bc(e)]):r=8);t.children=e,t.shapeFlag|=r}function ay(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Yc([e.class,i.class]));else if(n==="style")e.style=Jc([e.style,i.style]);else if(ua(n)){const s=e[n],o=i[n];o&&s!==o&&!(Re(s)&&s.includes(o))&&(e[n]=s?[].concat(s,o):o)}else n!==""&&(e[n]=i[n])}return e}function kr(t,e,r,i=null){ei(t,e,7,[r,i])}const fy=Ep();let cy=0;function uy(t,e,r){const i=t.type,n=(e?e.appContext:t.appContext)||fy,s={uid:cy++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Nb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dp(i,n),emitsOptions:Lp(i,n),emit:null,emitted:null,propsDefaults:ht,inheritAttrs:i.inheritAttrs,ctx:ht,data:ht,props:ht,attrs:ht,slots:ht,refs:ht,setupState:ht,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Zv.bind(null,s),t.ce&&t.ce(s),s}let Gt=null,Xo,vc;{const t=da(),e=(r,i)=>{let n;return(n=t[r])||(n=t[r]=[]),n.push(i),s=>{n.length>1?n.forEach(o=>o(s)):n[0](s)}};Xo=e("__VUE_INSTANCE_SETTERS__",r=>Gt=r),vc=e("__VUE_SSR_SETTERS__",r=>zs=r)}const Gs=t=>{const e=Gt;return Xo(t),t.scope.on(),()=>{t.scope.off(),Xo(e)}},fh=()=>{Gt&&Gt.scope.off(),Xo(null)};function kp(t){return t.vnode.shapeFlag&4}let zs=!1;function hy(t,e=!1,r=!1){e&&vc(e);const{props:i,children:n}=t.vnode,s=kp(t);Lv(t,i,s,e),zv(t,n,r);const o=s?ly(t,e):void 0;return e&&vc(!1),o}function ly(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Dv);const{setup:i}=r;if(i){Gi();const n=t.setupContext=i.length>1?py(t):null,s=Gs(t),o=Ws(i,t,0,[t.props,n]),a=z0(o);if(Ji(),s(),(a||t.sp)&&!Rs(t)&&vp(t),a){if(o.then(fh,fh),e)return o.then(c=>{ch(t,c)}).catch(c=>{ga(c,t,0)});t.asyncDep=o}else ch(t,o)}else jp(t)}function ch(t,e,r){Fe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:vt(e)&&(t.setupState=hp(e)),jp(t)}function jp(t,e,r){const i=t.type;t.render||(t.render=i.render||Xr);{const n=Gs(t);Gi();try{Ov(t)}finally{Ji(),n()}}}const dy={get(t,e){return kt(t,"get",""),t[e]}};function py(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,dy),slots:t.slots,emit:t.emit,expose:e}}function ma(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(hp(Qb(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ps)return Ps[r](t)},has(e,r){return r in e||r in Ps}})):t.proxy}function gy(t){return Fe(t)&&"__vccOpts"in t}const by=(t,e)=>iv(t,e,zs),vy="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let yc;const uh=typeof window<"u"&&window.trustedTypes;if(uh)try{yc=uh.createPolicy("vue",{createHTML:t=>t})}catch{}const Kp=yc?t=>yc.createHTML(t):t=>t,yy="http://www.w3.org/2000/svg",my="http://www.w3.org/1998/Math/MathML",xi=typeof document<"u"?document:null,hh=xi&&xi.createElement("template"),wy={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const n=e==="svg"?xi.createElementNS(yy,t):e==="mathml"?xi.createElementNS(my,t):r?xi.createElement(t,{is:r}):xi.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>xi.createTextNode(t),createComment:t=>xi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>xi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,n,s){const o=r?r.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{hh.innerHTML=Kp(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const a=hh.content;if(i==="svg"||i==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},_y=Symbol("_vtc");function xy(t,e,r){const i=t[_y];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const lh=Symbol("_vod"),Ey=Symbol("_vsh"),Sy=Symbol(""),My=/(^|;)\s*display\s*:/;function Iy(t,e,r){const i=t.style,n=St(r);let s=!1;if(r&&!n){if(e)if(St(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&No(i,a,"")}else for(const o in e)r[o]==null&&No(i,o,"");for(const o in r)o==="display"&&(s=!0),No(i,o,r[o])}else if(n){if(e!==r){const o=i[Sy];o&&(r+=";"+o),i.cssText=r,s=My.test(r)}}else e&&t.removeAttribute("style");lh in t&&(t[lh]=s?i.display:"",t[Ey]&&(i.display="none"))}const dh=/\s*!important$/;function No(t,e,r){if(Re(r))r.forEach(i=>No(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=Ay(t,e);dh.test(r)?t.setProperty(xn(i),r.replace(dh,""),"important"):t[i]=r}}const ph=["Webkit","Moz","ms"],Ha={};function Ay(t,e){const r=Ha[e];if(r)return r;let i=Vi(e);if(i!=="filter"&&i in t)return Ha[e]=i;i=K0(i);for(let n=0;n<ph.length;n++){const s=ph[n]+i;if(s in t)return Ha[e]=s}return e}const gh="http://www.w3.org/1999/xlink";function bh(t,e,r,i,n,s=Pb(e)){i&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(gh,e.slice(6,e.length)):t.setAttributeNS(gh,e,r):r==null||s&&!H0(r)?t.removeAttribute(e):t.setAttribute(e,s?"":Wi(r)?String(r):r)}function vh(t,e,r,i,n){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?Kp(r):r);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,c=r==null?t.type==="checkbox"?"on":"":String(r);(a!==c||!("_value"in t))&&(t.value=c),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const a=typeof t[e];a==="boolean"?r=H0(r):r==null&&a==="string"?(r="",o=!0):a==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(n||e)}function Ln(t,e,r,i){t.addEventListener(e,r,i)}function Dy(t,e,r,i){t.removeEventListener(e,r,i)}const yh=Symbol("_vei");function Oy(t,e,r,i,n=null){const s=t[yh]||(t[yh]={}),o=s[e];if(i&&o)o.value=i;else{const[a,c]=Ry(e);if(i){const f=s[e]=Cy(i,n);Ln(t,a,f,c)}else o&&(Dy(t,a,o,c),s[e]=void 0)}}const mh=/(?:Once|Passive|Capture)$/;function Ry(t){let e;if(mh.test(t)){e={};let i;for(;i=t.match(mh);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xn(t.slice(2)),e]}let Wa=0;const Py=Promise.resolve(),Ny=()=>Wa||(Py.then(()=>Wa=0),Wa=Date.now());function Cy(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;ei(Ty(i,r.value),e,5,[i])};return r.value=t,r.attached=Ny(),r}function Ty(t,e){if(Re(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const wh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Fy=(t,e,r,i,n,s)=>{const o=n==="svg";e==="class"?xy(t,i,o):e==="style"?Iy(t,r,i):ua(e)?Hc(e)||Oy(t,e,r,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$y(t,e,i,o))?(vh(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&bh(t,e,i,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!St(i))?vh(t,Vi(e),i,s,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),bh(t,e,i,o))};function $y(t,e,r,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&wh(e)&&Fe(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return wh(e)&&St(r)?!1:e in t}const _h=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Re(e)?r=>Do(e,r):e};function Ly(t){t.target.composing=!0}function xh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ga=Symbol("_assign"),qy={created(t,{modifiers:{lazy:e,trim:r,number:i}},n){t[Ga]=_h(n);const s=i||n.props&&n.props.type==="number";Ln(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;r&&(a=a.trim()),s&&(a=oc(a)),t[Ga](a)}),r&&Ln(t,"change",()=>{t.value=t.value.trim()}),e||(Ln(t,"compositionstart",Ly),Ln(t,"compositionend",xh),Ln(t,"change",xh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:i,trim:n,number:s}},o){if(t[Ga]=_h(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?oc(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(i&&e===r||n&&t.value.trim()===c)||(t.value=c))}},By=Xt({patchProp:Fy},wy);let Eh;function Uy(){return Eh||(Eh=jv(By))}const zy=(...t)=>{const e=Uy().createApp(...t),{mount:r}=e;return e.mount=i=>{const n=jy(i);if(!n)return;const s=e._component;!Fe(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=r(n,!1,ky(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function ky(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function jy(t){return St(t)?document.querySelector(t):t}var Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),r}var bo={exports:{}},Sh;function Ky(){if(Sh)return bo.exports;Sh=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function($,P,U){return Function.prototype.apply.call($,P,U)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:r=function($){return Object.getOwnPropertyNames($)};function i(R){console&&console.warn&&console.warn(R)}var n=Number.isNaN||function($){return $!==$};function s(){s.init.call(this)}bo.exports=s,bo.exports.once=C,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof R)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(R){if(typeof R!="number"||R<0||n(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");o=R}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function($){if(typeof $!="number"||$<0||n($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this};function c(R){return R._maxListeners===void 0?s.defaultMaxListeners:R._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function($){for(var P=[],U=1;U<arguments.length;U++)P.push(arguments[U]);var k=$==="error",j=this._events;if(j!==void 0)k=k&&j.error===void 0;else if(!k)return!1;if(k){var G;if(P.length>0&&(G=P[0]),G instanceof Error)throw G;var O=new Error("Unhandled error."+(G?" ("+G.message+")":""));throw O.context=G,O}var p=j[$];if(p===void 0)return!1;if(typeof p=="function")e(p,this,P);else for(var d=p.length,u=E(p,d),U=0;U<d;++U)e(u[U],this,P);return!0};function f(R,$,P,U){var k,j,G;if(a(P),j=R._events,j===void 0?(j=R._events=Object.create(null),R._eventsCount=0):(j.newListener!==void 0&&(R.emit("newListener",$,P.listener?P.listener:P),j=R._events),G=j[$]),G===void 0)G=j[$]=P,++R._eventsCount;else if(typeof G=="function"?G=j[$]=U?[P,G]:[G,P]:U?G.unshift(P):G.push(P),k=c(R),k>0&&G.length>k&&!G.warned){G.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=R,O.type=$,O.count=G.length,i(O)}return R}s.prototype.addListener=function($,P){return f(this,$,P,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function($,P){return f(this,$,P,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(R,$,P){var U={fired:!1,wrapFn:void 0,target:R,type:$,listener:P},k=h.bind(U);return k.listener=P,U.wrapFn=k,k}s.prototype.once=function($,P){return a(P),this.on($,g(this,$,P)),this},s.prototype.prependOnceListener=function($,P){return a(P),this.prependListener($,g(this,$,P)),this},s.prototype.removeListener=function($,P){var U,k,j,G,O;if(a(P),k=this._events,k===void 0)return this;if(U=k[$],U===void 0)return this;if(U===P||U.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete k[$],k.removeListener&&this.emit("removeListener",$,U.listener||P));else if(typeof U!="function"){for(j=-1,G=U.length-1;G>=0;G--)if(U[G]===P||U[G].listener===P){O=U[G].listener,j=G;break}if(j<0)return this;j===0?U.shift():I(U,j),U.length===1&&(k[$]=U[0]),k.removeListener!==void 0&&this.emit("removeListener",$,O||P)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function($){var P,U,k;if(U=this._events,U===void 0)return this;if(U.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):U[$]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete U[$]),this;if(arguments.length===0){var j=Object.keys(U),G;for(k=0;k<j.length;++k)G=j[k],G!=="removeListener"&&this.removeAllListeners(G);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=U[$],typeof P=="function")this.removeListener($,P);else if(P!==void 0)for(k=P.length-1;k>=0;k--)this.removeListener($,P[k]);return this};function w(R,$,P){var U=R._events;if(U===void 0)return[];var k=U[$];return k===void 0?[]:typeof k=="function"?P?[k.listener||k]:[k]:P?N(k):E(k,k.length)}s.prototype.listeners=function($){return w(this,$,!0)},s.prototype.rawListeners=function($){return w(this,$,!1)},s.listenerCount=function(R,$){return typeof R.listenerCount=="function"?R.listenerCount($):S.call(R,$)},s.prototype.listenerCount=S;function S(R){var $=this._events;if($!==void 0){var P=$[R];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function E(R,$){for(var P=new Array($),U=0;U<$;++U)P[U]=R[U];return P}function I(R,$){for(;$+1<R.length;$++)R[$]=R[$+1];R.pop()}function N(R){for(var $=new Array(R.length),P=0;P<$.length;++P)$[P]=R[P].listener||R[P];return $}function C(R,$){return new Promise(function(P,U){function k(G){R.removeListener($,j),U(G)}function j(){typeof R.removeListener=="function"&&R.removeListener("error",k),P([].slice.call(arguments))}L(R,$,j,{once:!0}),$!=="error"&&T(R,k,{once:!0})})}function T(R,$,P){typeof R.on=="function"&&L(R,"error",$,P)}function L(R,$,P,U){if(typeof R.on=="function")U.once?R.once($,P):R.on($,P);else if(typeof R.addEventListener=="function")R.addEventListener($,function k(j){U.once&&R.removeEventListener($,k),P(j)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof R)}return bo.exports}var zr=Ky();const Hp=Qn(zr);var Ja={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mc=function(t,e){return mc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},mc(t,e)};function Vy(t,e){mc(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var wc=function(){return wc=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},wc.apply(this,arguments)};function Hy(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function Wy(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function Gy(t,e){return function(r,i){e(r,i,t)}}function Jy(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Yy(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{f(i.next(h))}catch(g){o(g)}}function c(h){try{f(i.throw(h))}catch(g){o(g)}}function f(h){h.done?s(h.value):n(h.value).then(a,c)}f((i=i.apply(t,e||[])).next())})}function Zy(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(f){return function(h){return c([f,h])}}function c(f){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=f[0]&2?n.return:f[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,f[1])).done)return s;switch(n=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,n=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){r.label=f[1];break}if(f[0]===6&&r.label<s[1]){r.label=s[1],s=f;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(f);break}s[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(h){f=[6,h],n=0}finally{i=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Xy(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function Qy(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function _c(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wp(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function em(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Wp(arguments[e]));return t}function tm(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function ks(t){return this instanceof ks?(this.v=t,this):new ks(t)}function rm(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(w){i[w]&&(n[w]=function(S){return new Promise(function(E,I){s.push([w,S,E,I])>1||a(w,S)})})}function a(w,S){try{c(i[w](S))}catch(E){g(s[0][3],E)}}function c(w){w.value instanceof ks?Promise.resolve(w.value.v).then(f,h):g(s[0][2],w)}function f(w){a("next",w)}function h(w){a("throw",w)}function g(w,S){w(S),s.shift(),s.length&&a(s[0][0],s[0][1])}}function im(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(o){return(r=!r)?{value:ks(t[n](o)),done:n==="return"}:s?s(o):o}:s}}function nm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof _c=="function"?_c(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),n(a,c,o.done,o.value)})}}function n(s,o,a,c){Promise.resolve(c).then(function(f){s({value:f,done:a})},o)}}function sm(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function om(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function am(t){return t&&t.__esModule?t:{default:t}}function fm(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function cm(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const um=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return wc},__asyncDelegator:im,__asyncGenerator:rm,__asyncValues:nm,__await:ks,__awaiter:Yy,__classPrivateFieldGet:fm,__classPrivateFieldSet:cm,__createBinding:Xy,__decorate:Wy,__exportStar:Qy,__extends:Vy,__generator:Zy,__importDefault:am,__importStar:om,__makeTemplateObject:sm,__metadata:Jy,__param:Gy,__read:Wp,__rest:Hy,__spread:em,__spreadArrays:tm,__values:_c},Symbol.toStringTag,{value:"Module"})),Js=Vp(um);var Ya={},hs={},Mh;function hm(){if(Mh)return hs;Mh=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return hs.delay=t,hs}var rn={},Za={},nn={},Ih;function lm(){return Ih||(Ih=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ONE_THOUSAND=nn.ONE_HUNDRED=void 0,nn.ONE_HUNDRED=100,nn.ONE_THOUSAND=1e3),nn}var Xa={},Ah;function dm(){return Ah||(Ah=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Xa)),Xa}var Dh;function Gp(){return Dh||(Dh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Js;e.__exportStar(lm(),t),e.__exportStar(dm(),t)}(Za)),Za}var Oh;function pm(){if(Oh)return rn;Oh=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.fromMiliseconds=rn.toMiliseconds=void 0;const t=Gp();function e(i){return i*t.ONE_THOUSAND}rn.toMiliseconds=e;function r(i){return Math.floor(i/t.ONE_THOUSAND)}return rn.fromMiliseconds=r,rn}var Rh;function gm(){return Rh||(Rh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Js;e.__exportStar(hm(),t),e.__exportStar(pm(),t)}(Ya)),Ya}var Rn={},Ph;function bm(){if(Ph)return Rn;Ph=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const n=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:n})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return Rn.Watch=t,Rn.default=t,Rn}var Qa={},ls={},Nh;function vm(){if(Nh)return ls;Nh=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.IWatch=void 0;class t{}return ls.IWatch=t,ls}var Ch;function ym(){return Ch||(Ch=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Js.__exportStar(vm(),t)}(Qa)),Qa}var Th;function mm(){return Th||(Th=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Js;e.__exportStar(gm(),t),e.__exportStar(bm(),t),e.__exportStar(ym(),t),e.__exportStar(Gp(),t)}(Ja)),Ja}var ue=mm();class En{}let wm=class extends En{constructor(e){super()}};const Fh=ue.FIVE_SECONDS,es={pulse:"heartbeat_pulse"};let _m=class Jp extends wm{constructor(e){super(e),this.events=new zr.EventEmitter,this.interval=Fh,this.interval=(e==null?void 0:e.interval)||Fh}static async init(e){const r=new Jp(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ue.toMiliseconds(this.interval))}pulse(){this.events.emit(es.pulse)}};const xm=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Em=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Sm=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Mm(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Im(t);return}return e}function Im(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function vo(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!Sm.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(xm.test(t)||Em.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Mm)}return JSON.parse(t)}catch(i){if(e.strict)throw i;return t}}function Am(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Ot(t,...e){try{return Am(t(...e))}catch(r){return Promise.reject(r)}}function Dm(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Om(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Co(t){if(Dm(t))return String(t);if(Om(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Co(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const xc="base64:";function Rm(t){return typeof t=="string"?t:xc+Cm(t)}function Pm(t){return typeof t!="string"||!t.startsWith(xc)?t:Nm(t.slice(xc.length))}function Nm(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Cm(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function sr(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Tm(...t){return sr(t.join(":"))}function yo(t){return t=sr(t),t?t+":":""}const Fm="memory",$m=()=>{const t=new Map;return{name:Fm,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Lm(t={}){const e={mounts:{"":t.driver||$m()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=f=>{for(const h of e.mountpoints)if(f.startsWith(h))return{base:h,relativeKey:f.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:f,driver:e.mounts[""]}},i=(f,h)=>e.mountpoints.filter(g=>g.startsWith(f)||h&&f.startsWith(g)).map(g=>({relativeBase:f.length>g.length?f.slice(g.length):void 0,mountpoint:g,driver:e.mounts[g]})),n=(f,h)=>{if(e.watching){h=sr(h);for(const g of e.watchListeners)g(f,h)}},s=async()=>{if(!e.watching){e.watching=!0;for(const f in e.mounts)e.unwatch[f]=await $h(e.mounts[f],n,f)}},o=async()=>{if(e.watching){for(const f in e.unwatch)await e.unwatch[f]();e.unwatch={},e.watching=!1}},a=(f,h,g)=>{const w=new Map,S=E=>{let I=w.get(E.base);return I||(I={driver:E.driver,base:E.base,items:[]},w.set(E.base,I)),I};for(const E of f){const I=typeof E=="string",N=sr(I?E:E.key),C=I?void 0:E.value,T=I||!E.options?h:{...h,...E.options},L=r(N);S(L).items.push({key:N,value:C,relativeKey:L.relativeKey,options:T})}return Promise.all([...w.values()].map(E=>g(E))).then(E=>E.flat())},c={hasItem(f,h={}){f=sr(f);const{relativeKey:g,driver:w}=r(f);return Ot(w.hasItem,g,h)},getItem(f,h={}){f=sr(f);const{relativeKey:g,driver:w}=r(f);return Ot(w.getItem,g,h).then(S=>vo(S))},getItems(f,h={}){return a(f,h,g=>g.driver.getItems?Ot(g.driver.getItems,g.items.map(w=>({key:w.relativeKey,options:w.options})),h).then(w=>w.map(S=>({key:Tm(g.base,S.key),value:vo(S.value)}))):Promise.all(g.items.map(w=>Ot(g.driver.getItem,w.relativeKey,w.options).then(S=>({key:w.key,value:vo(S)})))))},getItemRaw(f,h={}){f=sr(f);const{relativeKey:g,driver:w}=r(f);return w.getItemRaw?Ot(w.getItemRaw,g,h):Ot(w.getItem,g,h).then(S=>Pm(S))},async setItem(f,h,g={}){if(h===void 0)return c.removeItem(f);f=sr(f);const{relativeKey:w,driver:S}=r(f);S.setItem&&(await Ot(S.setItem,w,Co(h),g),S.watch||n("update",f))},async setItems(f,h){await a(f,h,async g=>{if(g.driver.setItems)return Ot(g.driver.setItems,g.items.map(w=>({key:w.relativeKey,value:Co(w.value),options:w.options})),h);g.driver.setItem&&await Promise.all(g.items.map(w=>Ot(g.driver.setItem,w.relativeKey,Co(w.value),w.options)))})},async setItemRaw(f,h,g={}){if(h===void 0)return c.removeItem(f,g);f=sr(f);const{relativeKey:w,driver:S}=r(f);if(S.setItemRaw)await Ot(S.setItemRaw,w,h,g);else if(S.setItem)await Ot(S.setItem,w,Rm(h),g);else return;S.watch||n("update",f)},async removeItem(f,h={}){typeof h=="boolean"&&(h={removeMeta:h}),f=sr(f);const{relativeKey:g,driver:w}=r(f);w.removeItem&&(await Ot(w.removeItem,g,h),(h.removeMeta||h.removeMata)&&await Ot(w.removeItem,g+"$",h),w.watch||n("remove",f))},async getMeta(f,h={}){typeof h=="boolean"&&(h={nativeOnly:h}),f=sr(f);const{relativeKey:g,driver:w}=r(f),S=Object.create(null);if(w.getMeta&&Object.assign(S,await Ot(w.getMeta,g,h)),!h.nativeOnly){const E=await Ot(w.getItem,g+"$",h).then(I=>vo(I));E&&typeof E=="object"&&(typeof E.atime=="string"&&(E.atime=new Date(E.atime)),typeof E.mtime=="string"&&(E.mtime=new Date(E.mtime)),Object.assign(S,E))}return S},setMeta(f,h,g={}){return this.setItem(f+"$",h,g)},removeMeta(f,h={}){return this.removeItem(f+"$",h)},async getKeys(f,h={}){f=yo(f);const g=i(f,!0);let w=[];const S=[];for(const E of g){const I=await Ot(E.driver.getKeys,E.relativeBase,h);for(const N of I){const C=E.mountpoint+sr(N);w.some(T=>C.startsWith(T))||S.push(C)}w=[E.mountpoint,...w.filter(N=>!N.startsWith(E.mountpoint))]}return f?S.filter(E=>E.startsWith(f)&&E[E.length-1]!=="$"):S.filter(E=>E[E.length-1]!=="$")},async clear(f,h={}){f=yo(f),await Promise.all(i(f,!1).map(async g=>{if(g.driver.clear)return Ot(g.driver.clear,g.relativeBase,h);if(g.driver.removeItem){const w=await g.driver.getKeys(g.relativeBase||"",h);return Promise.all(w.map(S=>g.driver.removeItem(S,h)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(f=>Lh(f)))},async watch(f){return await s(),e.watchListeners.push(f),async()=>{e.watchListeners=e.watchListeners.filter(h=>h!==f),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(f,h){if(f=yo(f),f&&e.mounts[f])throw new Error(`already mounted at ${f}`);return f&&(e.mountpoints.push(f),e.mountpoints.sort((g,w)=>w.length-g.length)),e.mounts[f]=h,e.watching&&Promise.resolve($h(h,n,f)).then(g=>{e.unwatch[f]=g}).catch(console.error),c},async unmount(f,h=!0){var g,w;f=yo(f),!(!f||!e.mounts[f])&&(e.watching&&f in e.unwatch&&((w=(g=e.unwatch)[f])==null||w.call(g),delete e.unwatch[f]),h&&await Lh(e.mounts[f]),e.mountpoints=e.mountpoints.filter(S=>S!==f),delete e.mounts[f])},getMount(f=""){f=sr(f)+":";const h=r(f);return{driver:h.driver,base:h.base}},getMounts(f="",h={}){return f=sr(f),i(f,h.parents).map(w=>({driver:w.driver,base:w.mountpoint}))},keys:(f,h={})=>c.getKeys(f,h),get:(f,h={})=>c.getItem(f,h),set:(f,h,g={})=>c.setItem(f,h,g),has:(f,h={})=>c.hasItem(f,h),del:(f,h={})=>c.removeItem(f,h),remove:(f,h={})=>c.removeItem(f,h)};return c}function $h(t,e,r){return t.watch?t.watch((i,n)=>e(i,r+n)):()=>{}}async function Lh(t){typeof t.dispose=="function"&&await Ot(t.dispose)}function Sn(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function Yp(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const i=Sn(r);return(n,s)=>i.then(o=>s(o.transaction(e,n).objectStore(e)))}let ef;function Ys(){return ef||(ef=Yp("keyval-store","keyval")),ef}function qh(t,e=Ys()){return e("readonly",r=>Sn(r.get(t)))}function qm(t,e,r=Ys()){return r("readwrite",i=>(i.put(e,t),Sn(i.transaction)))}function Bm(t,e=Ys()){return e("readwrite",r=>(r.delete(t),Sn(r.transaction)))}function Um(t=Ys()){return t("readwrite",e=>(e.clear(),Sn(e.transaction)))}function zm(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Sn(t.transaction)}function km(t=Ys()){return t("readonly",e=>{if(e.getAllKeys)return Sn(e.getAllKeys());const r=[];return zm(e,i=>r.push(i.key)).then(()=>r)})}const jm=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Km=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function Jn(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Km(t)}catch{return t}}function yn(t){return typeof t=="string"?t:jm(t)||""}const Vm="idb-keyval";var Hm=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=n=>e+n;let i;return t.dbName&&t.storeName&&(i=Yp(t.dbName,t.storeName)),{name:Vm,options:t,async hasItem(n){return!(typeof await qh(r(n),i)>"u")},async getItem(n){return await qh(r(n),i)??null},setItem(n,s){return qm(r(n),s,i)},removeItem(n){return Bm(r(n),i)},getKeys(){return km(i)},clear(){return Um(i)}}};const Wm="WALLET_CONNECT_V2_INDEXED_DB",Gm="keyvaluestorage";let Jm=class{constructor(){this.indexedDb=Lm({driver:Hm({dbName:Wm,storeName:Gm})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,yn(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},To={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,i){this[r]=String(i)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof tf<"u"&&tf.localStorage?To.exports=tf.localStorage:typeof window<"u"&&window.localStorage?To.exports=window.localStorage:To.exports=new e})();function Ym(t){var e;return[t[0],Jn((e=t[1])!=null?e:"")]}let Zm=class{constructor(){this.localStorage=To.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Ym)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Jn(r)}async setItem(e,r){this.localStorage.setItem(e,yn(r))}async removeItem(e){this.localStorage.removeItem(e)}};const Xm="wc_storage_version",Bh=1,Qm=async(t,e,r)=>{const i=Xm,n=await e.getItem(i);if(n&&n>=Bh){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const f=await t.getItem(a);await e.setItem(a,f),o.push(a)}}await e.setItem(i,Bh),r(e),e2(t,o)},e2=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let t2=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new Zm;this.storage=e;try{const r=new Jm;Qm(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var rf,Uh;function r2(){if(Uh)return rf;Uh=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}rf=e;function e(r,i,n){var s=n&&n.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=i.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var f=1;f<a;f++)c[f]=s(i[f]);return c.join(" ")}if(typeof r!="string")return r;var h=i.length;if(h===0)return r;for(var g="",w=1-o,S=-1,E=r&&r.length||0,I=0;I<E;){if(r.charCodeAt(I)===37&&I+1<E){switch(S=S>-1?S:0,r.charCodeAt(I+1)){case 100:case 102:if(w>=h||i[w]==null)break;S<I&&(g+=r.slice(S,I)),g+=Number(i[w]),S=I+2,I++;break;case 105:if(w>=h||i[w]==null)break;S<I&&(g+=r.slice(S,I)),g+=Math.floor(Number(i[w])),S=I+2,I++;break;case 79:case 111:case 106:if(w>=h||i[w]===void 0)break;S<I&&(g+=r.slice(S,I));var N=typeof i[w];if(N==="string"){g+="'"+i[w]+"'",S=I+2,I++;break}if(N==="function"){g+=i[w].name||"<anonymous>",S=I+2,I++;break}g+=s(i[w]),S=I+2,I++;break;case 115:if(w>=h)break;S<I&&(g+=r.slice(S,I)),g+=String(i[w]),S=I+2,I++;break;case 37:S<I&&(g+=r.slice(S,I)),g+="%",S=I+2,I++,w--;break}++w}++I}return S===-1?r:(S<E&&(g+=r.slice(S)),g)}return rf}var nf,zh;function i2(){if(zh)return nf;zh=1;const t=r2();nf=n;const e=$().console||{},r={mapHttpRequest:E,mapHttpResponse:E,wrapRequestSerializer:I,wrapResponseSerializer:I,wrapErrorSerializer:I,req:E,res:E,err:w};function i(P,U){return Array.isArray(P)?P.filter(function(j){return j!=="!stdSerializers.err"}):P===!0?Object.keys(U):!1}function n(P){P=P||{},P.browser=P.browser||{};const U=P.browser.transmit;if(U&&typeof U.send!="function")throw Error("pino: transmit option must have a send function");const k=P.browser.write||e;P.browser.write&&(P.browser.asObject=!0);const j=P.serializers||{},G=i(P.browser.serialize,j);let O=P.browser.serialize;Array.isArray(P.browser.serialize)&&P.browser.serialize.indexOf("!stdSerializers.err")>-1&&(O=!1);const p=["error","fatal","warn","info","debug","trace"];typeof k=="function"&&(k.error=k.fatal=k.warn=k.info=k.debug=k.trace=k),P.enabled===!1&&(P.level="silent");const d=P.level||"info",u=Object.create(k);u.log||(u.log=N),Object.defineProperty(u,"levelVal",{get:v}),Object.defineProperty(u,"level",{get:m,set:M});const l={transmit:U,serialize:G,asObject:P.browser.asObject,levels:p,timestamp:S(P)};u.levels=n.levels,u.level=d,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=N,u.serializers=j,u._serialize=G,u._stdErrSerialize=O,u.child=_,U&&(u._logEvent=g());function v(){return this.level==="silent"?1/0:this.levels.values[this.level]}function m(){return this._level}function M(b){if(b!=="silent"&&!this.levels.values[b])throw Error("unknown level "+b);this._level=b,s(l,u,"error","log"),s(l,u,"fatal","error"),s(l,u,"warn","error"),s(l,u,"info","log"),s(l,u,"debug","log"),s(l,u,"trace","log")}function _(b,x){if(!b)throw new Error("missing bindings for child Pino");x=x||{},G&&b.serializers&&(x.serializers=b.serializers);const y=x.serializers;if(G&&y){var D=Object.assign({},j,y),J=P.browser.serialize===!0?Object.keys(D):G;delete b.serializers,c([b],J,D,this._stdErrSerialize)}function A(z){this._childLevel=(z._childLevel|0)+1,this.error=f(z,b,"error"),this.fatal=f(z,b,"fatal"),this.warn=f(z,b,"warn"),this.info=f(z,b,"info"),this.debug=f(z,b,"debug"),this.trace=f(z,b,"trace"),D&&(this.serializers=D,this._serialize=J),U&&(this._logEvent=g([].concat(z._logEvent.bindings,b)))}return A.prototype=this,new A(this)}return u}n.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},n.stdSerializers=r,n.stdTimeFunctions=Object.assign({},{nullTime:C,epochTime:T,unixTime:L,isoTime:R});function s(P,U,k,j){const G=Object.getPrototypeOf(U);U[k]=U.levelVal>U.levels.values[k]?N:G[k]?G[k]:e[k]||e[j]||N,o(P,U,k)}function o(P,U,k){!P.transmit&&U[k]===N||(U[k]=function(j){return function(){const O=P.timestamp(),p=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var u=0;u<p.length;u++)p[u]=arguments[u];if(P.serialize&&!P.asObject&&c(p,this._serialize,this.serializers,this._stdErrSerialize),P.asObject?j.call(d,a(this,k,p,O)):j.apply(d,p),P.transmit){const l=P.transmit.level||U.level,v=n.levels.values[l],m=n.levels.values[k];if(m<v)return;h(this,{ts:O,methodLevel:k,methodValue:m,transmitValue:n.levels.values[P.transmit.level||U.level],send:P.transmit.send,val:U.levelVal},p)}}}(U[k]))}function a(P,U,k,j){P._serialize&&c(k,P._serialize,P.serializers,P._stdErrSerialize);const G=k.slice();let O=G[0];const p={};j&&(p.time=j),p.level=n.levels.values[U];let d=(P._childLevel|0)+1;if(d<1&&(d=1),O!==null&&typeof O=="object"){for(;d--&&typeof G[0]=="object";)Object.assign(p,G.shift());O=G.length?t(G.shift(),G):void 0}else typeof O=="string"&&(O=t(G.shift(),G));return O!==void 0&&(p.msg=O),p}function c(P,U,k,j){for(const G in P)if(j&&P[G]instanceof Error)P[G]=n.stdSerializers.err(P[G]);else if(typeof P[G]=="object"&&!Array.isArray(P[G]))for(const O in P[G])U&&U.indexOf(O)>-1&&O in k&&(P[G][O]=k[O](P[G][O]))}function f(P,U,k){return function(){const j=new Array(1+arguments.length);j[0]=U;for(var G=1;G<j.length;G++)j[G]=arguments[G-1];return P[k].apply(this,j)}}function h(P,U,k){const j=U.send,G=U.ts,O=U.methodLevel,p=U.methodValue,d=U.val,u=P._logEvent.bindings;c(k,P._serialize||Object.keys(P.serializers),P.serializers,P._stdErrSerialize===void 0?!0:P._stdErrSerialize),P._logEvent.ts=G,P._logEvent.messages=k.filter(function(l){return u.indexOf(l)===-1}),P._logEvent.level.label=O,P._logEvent.level.value=p,j(O,P._logEvent,d),P._logEvent=g(u)}function g(P){return{ts:0,messages:[],bindings:P||[],level:{label:"",value:0}}}function w(P){const U={type:P.constructor.name,msg:P.message,stack:P.stack};for(const k in P)U[k]===void 0&&(U[k]=P[k]);return U}function S(P){return typeof P.timestamp=="function"?P.timestamp:P.timestamp===!1?C:T}function E(){return{}}function I(P){return P}function N(){}function C(){return!1}function T(){return Date.now()}function L(){return Math.round(Date.now()/1e3)}function R(){return new Date(Date.now()).toISOString()}function $(){function P(U){return typeof U<"u"&&U}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return P(self)||P(window)||P(this)||{}}}return nf}var qn=i2();const wa=Qn(qn),n2={level:"info"},Zs="custom_context",fu=1e3*1024;let s2=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},kh=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new s2(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},Zp=class{constructor(e,r=fu){this.level=e??"error",this.levelValue=qn.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new kh(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===qn.levels.values.error?console.error(e):r===qn.levels.values.warn?console.warn(e):r===qn.levels.values.debug?console.debug(e):r===qn.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(yn({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new kh(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(yn({extraMetadata:e})),new Blob(r,{type:"application/json"})}};class o2{constructor(e,r=fu){this.baseChunkLogger=new Zp(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=r,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}}let a2=class{constructor(e,r=fu){this.baseChunkLogger=new Zp(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var f2=Object.defineProperty,c2=Object.defineProperties,u2=Object.getOwnPropertyDescriptors,jh=Object.getOwnPropertySymbols,h2=Object.prototype.hasOwnProperty,l2=Object.prototype.propertyIsEnumerable,Kh=(t,e,r)=>e in t?f2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qo=(t,e)=>{for(var r in e||(e={}))h2.call(e,r)&&Kh(t,r,e[r]);if(jh)for(var r of jh(e))l2.call(e,r)&&Kh(t,r,e[r]);return t},ea=(t,e)=>c2(t,u2(e));function cu(t){return ea(Qo({},t),{level:(t==null?void 0:t.level)||n2.level})}function d2(t,e=Zs){return t[e]||""}function p2(t,e,r=Zs){return t[r]=e,t}function fr(t,e=Zs){let r="";return typeof t.bindings>"u"?r=d2(t,e):r=t.bindings().context||"",r}function g2(t,e,r=Zs){const i=fr(t,r);return i.trim()?`${i}/${e}`:e}function Qt(t,e,r=Zs){const i=g2(t,e,r),n=t.child({context:i});return p2(n,i,r)}function b2(t){var e,r;const i=new o2((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:wa(ea(Qo({},t.opts),{level:"trace",browser:ea(Qo({},(r=t.opts)==null?void 0:r.browser),{write:n=>i.write(n)})})),chunkLoggerController:i}}function v2(t){var e;const r=new a2((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:wa(ea(Qo({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function y2(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?b2(t):v2(t)}let m2=class extends En{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},w2=class extends En{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}};class _2{constructor(e,r){this.logger=e,this.core=r}}let x2=class extends En{constructor(e,r){super(),this.relayer=e,this.logger=r}};class E2 extends En{constructor(e){super()}}let S2=class{constructor(e,r,i,n){this.core=e,this.logger=r,this.name=i}},M2=class extends En{constructor(e,r){super(),this.relayer=e,this.logger=r}},I2=class extends En{constructor(e,r){super(),this.core=e,this.logger=r}},A2=class{constructor(e,r,i){this.core=e,this.logger=r,this.store=i}},D2=class{constructor(e,r){this.projectId=e,this.logger=r}},O2=class{constructor(e,r,i){this.core=e,this.logger=r,this.telemetryEnabled=i}},R2=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},P2=class{constructor(e){this.client=e}};function N2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xp(t,...e){if(!N2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Vh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function C2(t,e){Xp(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Pn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sf=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function T2(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Qp(t){return typeof t=="string"&&(t=T2(t)),Xp(t),t}let F2=class{clone(){return this._cloneInto()}};function $2(t){const e=i=>t().update(Qp(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function e1(t=32){if(Pn&&typeof Pn.getRandomValues=="function")return Pn.getRandomValues(new Uint8Array(t));if(Pn&&typeof Pn.randomBytes=="function")return Pn.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function L2(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,f=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+f,a,i)}class q2 extends F2{constructor(e,r,i,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=sf(this.buffer)}update(e){Vh(this);const{view:r,buffer:i,blockLen:n}=this;e=Qp(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);if(a===n){const c=sf(e);for(;n<=s-o;o+=n)this.process(c,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Vh(this),C2(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:n,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let g=o;g<n;g++)r[g]=0;L2(i,n-8,BigInt(this.length*8),s),this.process(i,0);const a=sf(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)a.setUint32(4*g,h[g],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%r&&e.buffer.set(i),e}}const mo=BigInt(2**32-1),Ec=BigInt(32);function t1(t,e=!1){return e?{h:Number(t&mo),l:Number(t>>Ec&mo)}:{h:Number(t>>Ec&mo)|0,l:Number(t&mo)|0}}function B2(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){const{h:s,l:o}=t1(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}const U2=(t,e)=>BigInt(t>>>0)<<Ec|BigInt(e>>>0),z2=(t,e,r)=>t>>>r,k2=(t,e,r)=>t<<32-r|e>>>r,j2=(t,e,r)=>t>>>r|e<<32-r,K2=(t,e,r)=>t<<32-r|e>>>r,V2=(t,e,r)=>t<<64-r|e>>>r-32,H2=(t,e,r)=>t>>>r-32|e<<64-r,W2=(t,e)=>e,G2=(t,e)=>t,J2=(t,e,r)=>t<<r|e>>>32-r,Y2=(t,e,r)=>e<<r|t>>>32-r,Z2=(t,e,r)=>e<<r-32|t>>>64-r,X2=(t,e,r)=>t<<r-32|e>>>64-r;function Q2(t,e,r,i){const n=(e>>>0)+(i>>>0);return{h:t+r+(n/2**32|0)|0,l:n|0}}const e3=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),t3=(t,e,r,i)=>e+r+i+(t/2**32|0)|0,r3=(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),i3=(t,e,r,i,n)=>e+r+i+n+(t/2**32|0)|0,n3=(t,e,r,i,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(n>>>0),s3=(t,e,r,i,n,s)=>e+r+i+n+s+(t/2**32|0)|0,$e={fromBig:t1,split:B2,toBig:U2,shrSH:z2,shrSL:k2,rotrSH:j2,rotrSL:K2,rotrBH:V2,rotrBL:H2,rotr32H:W2,rotr32L:G2,rotlSH:J2,rotlSL:Y2,rotlBH:Z2,rotlBL:X2,add:Q2,add3L:e3,add3H:t3,add4L:r3,add4H:i3,add5H:s3,add5L:n3},[o3,a3]=$e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ci=new Uint32Array(80),Ti=new Uint32Array(80);let f3=class extends q2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:i,Bl:n,Ch:s,Cl:o,Dh:a,Dl:c,Eh:f,El:h,Fh:g,Fl:w,Gh:S,Gl:E,Hh:I,Hl:N}=this;return[e,r,i,n,s,o,a,c,f,h,g,w,S,E,I,N]}set(e,r,i,n,s,o,a,c,f,h,g,w,S,E,I,N){this.Ah=e|0,this.Al=r|0,this.Bh=i|0,this.Bl=n|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=h|0,this.Fh=g|0,this.Fl=w|0,this.Gh=S|0,this.Gl=E|0,this.Hh=I|0,this.Hl=N|0}process(e,r){for(let L=0;L<16;L++,r+=4)Ci[L]=e.getUint32(r),Ti[L]=e.getUint32(r+=4);for(let L=16;L<80;L++){const R=Ci[L-15]|0,$=Ti[L-15]|0,P=$e.rotrSH(R,$,1)^$e.rotrSH(R,$,8)^$e.shrSH(R,$,7),U=$e.rotrSL(R,$,1)^$e.rotrSL(R,$,8)^$e.shrSL(R,$,7),k=Ci[L-2]|0,j=Ti[L-2]|0,G=$e.rotrSH(k,j,19)^$e.rotrBH(k,j,61)^$e.shrSH(k,j,6),O=$e.rotrSL(k,j,19)^$e.rotrBL(k,j,61)^$e.shrSL(k,j,6),p=$e.add4L(U,O,Ti[L-7],Ti[L-16]),d=$e.add4H(p,P,G,Ci[L-7],Ci[L-16]);Ci[L]=d|0,Ti[L]=p|0}let{Ah:i,Al:n,Bh:s,Bl:o,Ch:a,Cl:c,Dh:f,Dl:h,Eh:g,El:w,Fh:S,Fl:E,Gh:I,Gl:N,Hh:C,Hl:T}=this;for(let L=0;L<80;L++){const R=$e.rotrSH(g,w,14)^$e.rotrSH(g,w,18)^$e.rotrBH(g,w,41),$=$e.rotrSL(g,w,14)^$e.rotrSL(g,w,18)^$e.rotrBL(g,w,41),P=g&S^~g&I,U=w&E^~w&N,k=$e.add5L(T,$,U,a3[L],Ti[L]),j=$e.add5H(k,C,R,P,o3[L],Ci[L]),G=k|0,O=$e.rotrSH(i,n,28)^$e.rotrBH(i,n,34)^$e.rotrBH(i,n,39),p=$e.rotrSL(i,n,28)^$e.rotrBL(i,n,34)^$e.rotrBL(i,n,39),d=i&s^i&a^s&a,u=n&o^n&c^o&c;C=I|0,T=N|0,I=S|0,N=E|0,S=g|0,E=w|0,{h:g,l:w}=$e.add(f|0,h|0,j|0,G|0),f=a|0,h=c|0,a=s|0,c=o|0,s=i|0,o=n|0;const l=$e.add3L(G,p,u);i=$e.add3H(l,j,O,d),n=l|0}({h:i,l:n}=$e.add(this.Ah|0,this.Al|0,i|0,n|0)),{h:s,l:o}=$e.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=$e.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:h}=$e.add(this.Dh|0,this.Dl|0,f|0,h|0),{h:g,l:w}=$e.add(this.Eh|0,this.El|0,g|0,w|0),{h:S,l:E}=$e.add(this.Fh|0,this.Fl|0,S|0,E|0),{h:I,l:N}=$e.add(this.Gh|0,this.Gl|0,I|0,N|0),{h:C,l:T}=$e.add(this.Hh|0,this.Hl|0,C|0,T|0),this.set(i,n,s,o,a,c,f,h,g,w,S,E,I,N,C,T)}roundClean(){Ci.fill(0),Ti.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const c3=$2(()=>new f3);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uu=BigInt(0),r1=BigInt(1),u3=BigInt(2);function hu(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lu(t){if(!hu(t))throw new Error("Uint8Array expected")}function of(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const h3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function du(t){lu(t);let e="";for(let r=0;r<t.length;r++)e+=h3[t[r]];return e}function i1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?uu:BigInt("0x"+t)}const gi={_0:48,_9:57,A:65,F:70,a:97,f:102};function Hh(t){if(t>=gi._0&&t<=gi._9)return t-gi._0;if(t>=gi.A&&t<=gi.F)return t-(gi.A-10);if(t>=gi.a&&t<=gi.f)return t-(gi.a-10)}function n1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){const o=Hh(t.charCodeAt(s)),a=Hh(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}i[n]=o*16+a}return i}function l3(t){return i1(du(t))}function Fo(t){return lu(t),i1(du(Uint8Array.from(t).reverse()))}function s1(t,e){return n1(t.toString(16).padStart(e*2,"0"))}function Sc(t,e){return s1(t,e).reverse()}function bi(t,e,r){let i;if(typeof e=="string")try{i=n1(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(hu(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const n=i.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return i}function Wh(...t){let e=0;for(let i=0;i<t.length;i++){const n=t[i];lu(n),e+=n.length}const r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){const s=t[i];r.set(s,n),n+=s.length}return r}const af=t=>typeof t=="bigint"&&uu<=t;function d3(t,e,r){return af(t)&&af(e)&&af(r)&&e<=t&&t<r}function ds(t,e,r,i){if(!d3(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}function p3(t){let e;for(e=0;t>uu;t>>=r1,e+=1);return e}const g3=t=>(u3<<BigInt(t-1))-r1,b3={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||hu(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function pu(t,e,r={}){const i=(n,s,o)=>{const a=b3[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[n];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+c)};for(const[n,s]of Object.entries(e))i(n,s,!1);for(const[n,s]of Object.entries(r))i(n,s,!0);return t}function Gh(t){const e=new WeakMap;return(r,...i)=>{const n=e.get(r);if(n!==void 0)return n;const s=t(r,...i);return e.set(r,s),s}}const Nt=BigInt(0),xt=BigInt(1),un=BigInt(2),v3=BigInt(3),Mc=BigInt(4),Jh=BigInt(5),Yh=BigInt(8);function It(t,e){const r=t%e;return r>=Nt?r:e+r}function y3(t,e,r){if(e<Nt)throw new Error("invalid exponent, negatives unsupported");if(r<=Nt)throw new Error("invalid modulus");if(r===xt)return Nt;let i=xt;for(;e>Nt;)e&xt&&(i=i*t%r),t=t*t%r,e>>=xt;return i}function jr(t,e,r){let i=t;for(;e-- >Nt;)i*=i,i%=r;return i}function Zh(t,e){if(t===Nt)throw new Error("invert: expected non-zero number");if(e<=Nt)throw new Error("invert: expected positive modulus, got "+e);let r=It(t,e),i=e,n=Nt,s=xt;for(;r!==Nt;){const o=i/r,a=i%r,c=n-s*o;i=r,r=a,n=s,s=c}if(i!==xt)throw new Error("invert: does not exist");return It(n,e)}function m3(t){const e=(t-xt)/un;let r,i,n;for(r=t-xt,i=0;r%un===Nt;r/=un,i++);for(n=un;n<t&&y3(n,e,t)!==t-xt;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){const o=(t+xt)/Mc;return function(a,c){const f=a.pow(c,o);if(!a.eql(a.sqr(f),c))throw new Error("Cannot find square root");return f}}const s=(r+xt)/un;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=i,f=o.pow(o.mul(o.ONE,n),r),h=o.pow(a,s),g=o.pow(a,r);for(;!o.eql(g,o.ONE);){if(o.eql(g,o.ZERO))return o.ZERO;let w=1;for(let E=o.sqr(g);w<c&&!o.eql(E,o.ONE);w++)E=o.sqr(E);const S=o.pow(f,xt<<BigInt(c-w-1));f=o.sqr(S),h=o.mul(h,S),g=o.mul(g,f),c=w}return h}}function w3(t){if(t%Mc===v3){const e=(t+xt)/Mc;return function(r,i){const n=r.pow(i,e);if(!r.eql(r.sqr(n),i))throw new Error("Cannot find square root");return n}}if(t%Yh===Jh){const e=(t-Jh)/Yh;return function(r,i){const n=r.mul(i,un),s=r.pow(n,e),o=r.mul(i,s),a=r.mul(r.mul(o,un),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return m3(t)}const _3=(t,e)=>(It(t,e)&xt)===xt,x3=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function E3(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=x3.reduce((i,n)=>(i[n]="function",i),e);return pu(t,r)}function S3(t,e,r){if(r<Nt)throw new Error("invalid exponent, negatives unsupported");if(r===Nt)return t.ONE;if(r===xt)return e;let i=t.ONE,n=e;for(;r>Nt;)r&xt&&(i=t.mul(i,n)),n=t.sqr(n),r>>=xt;return i}function M3(t,e){const r=new Array(e.length),i=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),n=t.inv(i);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),n),r}function o1(t,e){const r=e!==void 0?e:t.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function a1(t,e,r=!1,i={}){if(t<=Nt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:n,nByteLength:s}=o1(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:n,BYTES:s,MASK:g3(n),ZERO:Nt,ONE:xt,create:c=>It(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Nt<=c&&c<t},is0:c=>c===Nt,isOdd:c=>(c&xt)===xt,neg:c=>It(-c,t),eql:(c,f)=>c===f,sqr:c=>It(c*c,t),add:(c,f)=>It(c+f,t),sub:(c,f)=>It(c-f,t),mul:(c,f)=>It(c*f,t),pow:(c,f)=>S3(a,c,f),div:(c,f)=>It(c*Zh(f,t),t),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>Zh(c,t),sqrt:i.sqrt||(c=>(o||(o=w3(t)),o(a,c))),invertBatch:c=>M3(a,c),cmov:(c,f,h)=>h?f:c,toBytes:c=>r?Sc(c,s):s1(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?Fo(c):l3(c)}});return Object.freeze(a)}const Xh=BigInt(0),wo=BigInt(1);function ff(t,e){const r=e.negate();return t?r:e}function f1(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function cf(t,e){f1(t,e);const r=Math.ceil(e/t)+1,i=2**(t-1);return{windows:r,windowSize:i}}function I3(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,i)=>{if(!(r instanceof e))throw new Error("invalid point at index "+i)})}function A3(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,i)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+i)})}const uf=new WeakMap,c1=new WeakMap;function hf(t){return c1.get(t)||1}function D3(t,e){return{constTimeNegate:ff,hasPrecomputes(r){return hf(r)!==1},unsafeLadder(r,i,n=t.ZERO){let s=r;for(;i>Xh;)i&wo&&(n=n.add(s)),s=s.double(),i>>=wo;return n},precomputeWindow(r,i){const{windows:n,windowSize:s}=cf(i,e),o=[];let a=r,c=a;for(let f=0;f<n;f++){c=a,o.push(c);for(let h=1;h<s;h++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,i,n){const{windows:s,windowSize:o}=cf(r,e);let a=t.ZERO,c=t.BASE;const f=BigInt(2**r-1),h=2**r,g=BigInt(r);for(let w=0;w<s;w++){const S=w*o;let E=Number(n&f);n>>=g,E>o&&(E-=h,n+=wo);const I=S,N=S+Math.abs(E)-1,C=w%2!==0,T=E<0;E===0?c=c.add(ff(C,i[I])):a=a.add(ff(T,i[N]))}return{p:a,f:c}},wNAFUnsafe(r,i,n,s=t.ZERO){const{windows:o,windowSize:a}=cf(r,e),c=BigInt(2**r-1),f=2**r,h=BigInt(r);for(let g=0;g<o;g++){const w=g*a;if(n===Xh)break;let S=Number(n&c);if(n>>=h,S>a&&(S-=f,n+=wo),S===0)continue;let E=i[w+Math.abs(S)-1];S<0&&(E=E.negate()),s=s.add(E)}return s},getPrecomputes(r,i,n){let s=uf.get(i);return s||(s=this.precomputeWindow(i,r),r!==1&&uf.set(i,n(s))),s},wNAFCached(r,i,n){const s=hf(r);return this.wNAF(s,this.getPrecomputes(s,r,n),i)},wNAFCachedUnsafe(r,i,n,s){const o=hf(r);return o===1?this.unsafeLadder(r,i,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,n),i,s)},setWindowSize(r,i){f1(i,e),c1.set(r,i),uf.delete(r)}}}function O3(t,e,r,i){if(I3(r,t),A3(i,e),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const n=t.ZERO,s=p3(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(n),f=Math.floor((e.BITS-1)/o)*o;let h=n;for(let g=f;g>=0;g-=o){c.fill(n);for(let S=0;S<i.length;S++){const E=i[S],I=Number(E>>BigInt(g)&BigInt(a));c[I]=c[I].add(r[S])}let w=n;for(let S=c.length-1,E=n;S>0;S--)E=E.add(c[S]),w=w.add(E);if(h=h.add(w),g!==0)for(let S=0;S<o;S++)h=h.double()}return h}function R3(t){return E3(t.Fp),pu(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...o1(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Pr=BigInt(0),nr=BigInt(1),_o=BigInt(2),P3=BigInt(8),N3={zip215:!0};function C3(t){const e=R3(t);return pu(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function T3(t){const e=C3(t),{Fp:r,n:i,prehash:n,hash:s,randomBytes:o,nByteLength:a,h:c}=e,f=_o<<BigInt(a*8)-nr,h=r.create,g=a1(e.n,e.nBitLength),w=e.uvRatio||((l,v)=>{try{return{isValid:!0,value:r.sqrt(l*r.inv(v))}}catch{return{isValid:!1,value:Pr}}}),S=e.adjustScalarBytes||(l=>l),E=e.domain||((l,v,m)=>{if(of("phflag",m),v.length||m)throw new Error("Contexts/pre-hash are not supported");return l});function I(l,v){ds("coordinate "+l,v,Pr,f)}function N(l){if(!(l instanceof L))throw new Error("ExtendedPoint expected")}const C=Gh((l,v)=>{const{ex:m,ey:M,ez:_}=l,b=l.is0();v==null&&(v=b?P3:r.inv(_));const x=h(m*v),y=h(M*v),D=h(_*v);if(b)return{x:Pr,y:nr};if(D!==nr)throw new Error("invZ was invalid");return{x,y}}),T=Gh(l=>{const{a:v,d:m}=e;if(l.is0())throw new Error("bad point: ZERO");const{ex:M,ey:_,ez:b,et:x}=l,y=h(M*M),D=h(_*_),J=h(b*b),A=h(J*J),z=h(y*v),H=h(J*h(z+D)),Y=h(A+h(m*h(y*D)));if(H!==Y)throw new Error("bad point: equation left != right (1)");const X=h(M*_),ae=h(b*x);if(X!==ae)throw new Error("bad point: equation left != right (2)");return!0});class L{constructor(v,m,M,_){this.ex=v,this.ey=m,this.ez=M,this.et=_,I("x",v),I("y",m),I("z",M),I("t",_),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof L)throw new Error("extended point not allowed");const{x:m,y:M}=v||{};return I("x",m),I("y",M),new L(m,M,nr,h(m*M))}static normalizeZ(v){const m=r.invertBatch(v.map(M=>M.ez));return v.map((M,_)=>M.toAffine(m[_])).map(L.fromAffine)}static msm(v,m){return O3(L,g,v,m)}_setWindowSize(v){P.setWindowSize(this,v)}assertValidity(){T(this)}equals(v){N(v);const{ex:m,ey:M,ez:_}=this,{ex:b,ey:x,ez:y}=v,D=h(m*y),J=h(b*_),A=h(M*y),z=h(x*_);return D===J&&A===z}is0(){return this.equals(L.ZERO)}negate(){return new L(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:v}=e,{ex:m,ey:M,ez:_}=this,b=h(m*m),x=h(M*M),y=h(_o*h(_*_)),D=h(v*b),J=m+M,A=h(h(J*J)-b-x),z=D+x,H=z-y,Y=D-x,X=h(A*H),ae=h(z*Y),fe=h(A*Y),F=h(H*z);return new L(X,ae,F,fe)}add(v){N(v);const{a:m,d:M}=e,{ex:_,ey:b,ez:x,et:y}=this,{ex:D,ey:J,ez:A,et:z}=v;if(m===BigInt(-1)){const ie=h((b-_)*(J+D)),re=h((b+_)*(J-D)),Z=h(re-ie);if(Z===Pr)return this.double();const ce=h(x*_o*z),se=h(y*_o*A),ne=se+ce,he=re+ie,ge=se-ce,le=h(ne*Z),ve=h(he*ge),De=h(ne*ge),pe=h(Z*he);return new L(le,ve,pe,De)}const H=h(_*D),Y=h(b*J),X=h(y*M*z),ae=h(x*A),fe=h((_+b)*(D+J)-H-Y),F=ae-X,B=ae+X,K=h(Y-m*H),W=h(fe*F),Q=h(B*K),ee=h(fe*K),te=h(F*B);return new L(W,Q,te,ee)}subtract(v){return this.add(v.negate())}wNAF(v){return P.wNAFCached(this,v,L.normalizeZ)}multiply(v){const m=v;ds("scalar",m,nr,i);const{p:M,f:_}=this.wNAF(m);return L.normalizeZ([M,_])[0]}multiplyUnsafe(v,m=L.ZERO){const M=v;return ds("scalar",M,Pr,i),M===Pr?$:this.is0()||M===nr?this:P.wNAFCachedUnsafe(this,M,L.normalizeZ,m)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return P.unsafeLadder(this,i).is0()}toAffine(v){return C(this,v)}clearCofactor(){const{h:v}=e;return v===nr?this:this.multiplyUnsafe(v)}static fromHex(v,m=!1){const{d:M,a:_}=e,b=r.BYTES;v=bi("pointHex",v,b),of("zip215",m);const x=v.slice(),y=v[b-1];x[b-1]=y&-129;const D=Fo(x),J=m?f:r.ORDER;ds("pointHex.y",D,Pr,J);const A=h(D*D),z=h(A-nr),H=h(M*A-_);let{isValid:Y,value:X}=w(z,H);if(!Y)throw new Error("Point.fromHex: invalid y coordinate");const ae=(X&nr)===nr,fe=(y&128)!==0;if(!m&&X===Pr&&fe)throw new Error("Point.fromHex: x=0 and x_0=1");return fe!==ae&&(X=h(-X)),L.fromAffine({x:X,y:D})}static fromPrivateKey(v){return j(v).point}toRawBytes(){const{x:v,y:m}=this.toAffine(),M=Sc(m,r.BYTES);return M[M.length-1]|=v&nr?128:0,M}toHex(){return du(this.toRawBytes())}}L.BASE=new L(e.Gx,e.Gy,nr,h(e.Gx*e.Gy)),L.ZERO=new L(Pr,nr,nr,Pr);const{BASE:R,ZERO:$}=L,P=D3(L,a*8);function U(l){return It(l,i)}function k(l){return U(Fo(l))}function j(l){const v=r.BYTES;l=bi("private key",l,v);const m=bi("hashed private key",s(l),2*v),M=S(m.slice(0,v)),_=m.slice(v,2*v),b=k(M),x=R.multiply(b),y=x.toRawBytes();return{head:M,prefix:_,scalar:b,point:x,pointBytes:y}}function G(l){return j(l).pointBytes}function O(l=new Uint8Array,...v){const m=Wh(...v);return k(s(E(m,bi("context",l),!!n)))}function p(l,v,m={}){l=bi("message",l),n&&(l=n(l));const{prefix:M,scalar:_,pointBytes:b}=j(v),x=O(m.context,M,l),y=R.multiply(x).toRawBytes(),D=O(m.context,y,b,l),J=U(x+D*_);ds("signature.s",J,Pr,i);const A=Wh(y,Sc(J,r.BYTES));return bi("result",A,r.BYTES*2)}const d=N3;function u(l,v,m,M=d){const{context:_,zip215:b}=M,x=r.BYTES;l=bi("signature",l,2*x),v=bi("message",v),m=bi("publicKey",m,x),b!==void 0&&of("zip215",b),n&&(v=n(v));const y=Fo(l.slice(x,2*x));let D,J,A;try{D=L.fromHex(m,b),J=L.fromHex(l.slice(0,x),b),A=R.multiplyUnsafe(y)}catch{return!1}if(!b&&D.isSmallOrder())return!1;const z=O(_,J.toRawBytes(),D.toRawBytes(),v);return J.add(D.multiplyUnsafe(z)).subtract(A).clearCofactor().equals(L.ZERO)}return R._setWindowSize(8),{CURVE:e,getPublicKey:G,sign:p,verify:u,ExtendedPoint:L,utils:{getExtendedPublicKey:j,randomPrivateKey:()=>o(r.BYTES),precompute(l=8,v=L.BASE){return v._setWindowSize(l),v.multiply(BigInt(3)),v}}}}BigInt(0),BigInt(1);const gu=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Qh=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const F3=BigInt(1),el=BigInt(2);BigInt(3);const $3=BigInt(5),L3=BigInt(8);function q3(t){const e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=gu,o=t*t%s*t%s,a=jr(o,el,s)*o%s,c=jr(a,F3,s)*t%s,f=jr(c,$3,s)*c%s,h=jr(f,e,s)*f%s,g=jr(h,r,s)*h%s,w=jr(g,i,s)*g%s,S=jr(w,n,s)*w%s,E=jr(S,n,s)*w%s,I=jr(E,e,s)*f%s;return{pow_p_5_8:jr(I,el,s)*t%s,b2:o}}function B3(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function U3(t,e){const r=gu,i=It(e*e*e,r),n=It(i*i*e,r),s=q3(t*n).pow_p_5_8;let o=It(t*i*s,r);const a=It(e*o*o,r),c=o,f=It(o*Qh,r),h=a===t,g=a===It(-t,r),w=a===It(-t*Qh,r);return h&&(o=c),(g||w)&&(o=f),_3(o,r)&&(o=It(-o,r)),{isValid:h||g,value:o}}const z3=a1(gu,void 0,!0),k3={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:z3,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:L3,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:c3,randomBytes:e1,adjustScalarBytes:B3,uvRatio:U3},u1=T3(k3),j3="EdDSA",K3="JWT",ta=".",_a="base64url",h1="utf8",l1="utf8",V3=":",H3="did",W3="key",tl="base58btc",G3="z",J3="K36",Y3=32;function bu(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function d1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?bu(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function p1(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));const r=d1(e);let i=0;for(const n of t)r.set(n,i),i+=n.length;return bu(r)}function Z3(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function g(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var I=0,N=0,C=0,T=E.length;C!==T&&E[C]===0;)C++,I++;for(var L=(T-C)*h+1>>>0,R=new Uint8Array(L);C!==T;){for(var $=E[C],P=0,U=L-1;($!==0||P<N)&&U!==-1;U--,P++)$+=256*R[U]>>>0,R[U]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");N=P,C++}for(var k=L-N;k!==L&&R[k]===0;)k++;for(var j=c.repeat(I);k<L;++k)j+=t.charAt(R[k]);return j}function w(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var I=0;if(E[I]!==" "){for(var N=0,C=0;E[I]===c;)N++,I++;for(var T=(E.length-I)*f+1>>>0,L=new Uint8Array(T);E[I];){var R=r[E.charCodeAt(I)];if(R===255)return;for(var $=0,P=T-1;(R!==0||$<C)&&P!==-1;P--,$++)R+=a*L[P]>>>0,L[P]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");C=$,I++}if(E[I]!==" "){for(var U=T-C;U!==T&&L[U]===0;)U++;for(var k=new Uint8Array(N+(T-U)),j=N;U!==T;)k[j++]=L[U++];return k}}}function S(E){var I=w(E);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:w,decode:S}}var X3=Z3,Q3=X3;const g1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ew=t=>new TextEncoder().encode(t),tw=t=>new TextDecoder().decode(t);let rw=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},iw=class{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return b1(this,e)}},nw=class{constructor(e){this.decoders=e}or(e){return b1(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const b1=(t,e)=>new nw({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let sw=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new rw(e,r,i),this.decoder=new iw(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const xa=({name:t,prefix:e,encode:r,decode:i})=>new sw(t,e,r,i),Xs=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=Q3(r,e);return xa({prefix:t,name:e,encode:i,decode:s=>g1(n(s))})},ow=(t,e,r,i)=>{const n={};for(let h=0;h<e.length;++h)n[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,f=0;for(let h=0;h<s;++h){const g=n[t[h]];if(g===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|g,a+=r,a>=8&&(a-=8,o[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},aw=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},$t=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>xa({prefix:e,name:t,encode(n){return aw(n,i,r)},decode(n){return ow(n,i,r,t)}}),fw=xa({prefix:"\0",name:"identity",encode:t=>tw(t),decode:t=>ew(t)});var cw=Object.freeze({__proto__:null,identity:fw});const uw=$t({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var hw=Object.freeze({__proto__:null,base2:uw});const lw=$t({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var dw=Object.freeze({__proto__:null,base8:lw});const pw=Xs({prefix:"9",name:"base10",alphabet:"0123456789"});var gw=Object.freeze({__proto__:null,base10:pw});const bw=$t({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vw=$t({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yw=Object.freeze({__proto__:null,base16:bw,base16upper:vw});const mw=$t({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ww=$t({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_w=$t({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xw=$t({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ew=$t({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Sw=$t({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Mw=$t({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Iw=$t({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Aw=$t({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Dw=Object.freeze({__proto__:null,base32:mw,base32upper:ww,base32pad:_w,base32padupper:xw,base32hex:Ew,base32hexupper:Sw,base32hexpad:Mw,base32hexpadupper:Iw,base32z:Aw});const Ow=Xs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Rw=Xs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Pw=Object.freeze({__proto__:null,base36:Ow,base36upper:Rw});const Nw=Xs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Cw=Xs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Tw=Object.freeze({__proto__:null,base58btc:Nw,base58flickr:Cw});const Fw=$t({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$w=$t({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lw=$t({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qw=$t({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Bw=Object.freeze({__proto__:null,base64:Fw,base64pad:$w,base64url:Lw,base64urlpad:qw});const v1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Uw=v1.reduce((t,e,r)=>(t[r]=e,t),[]),zw=v1.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function kw(t){return t.reduce((e,r)=>(e+=Uw[r],e),"")}function jw(t){const e=[];for(const r of t){const i=zw[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const Kw=xa({prefix:"🚀",name:"base256emoji",encode:kw,decode:jw});var Vw=Object.freeze({__proto__:null,base256emoji:Kw}),Hw=y1,rl=128,Ww=-128,Gw=Math.pow(2,31);function y1(t,e,r){e=e||[],r=r||0;for(var i=r;t>=Gw;)e[r++]=t&255|rl,t/=128;for(;t&Ww;)e[r++]=t&255|rl,t>>>=7;return e[r]=t|0,y1.bytes=r-i+1,e}var Jw=Ic,Yw=128,il=127;function Ic(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw Ic.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&il)<<n:(o&il)*Math.pow(2,n),n+=7}while(o>=Yw);return Ic.bytes=s-i,r}var Zw=Math.pow(2,7),Xw=Math.pow(2,14),Qw=Math.pow(2,21),e6=Math.pow(2,28),t6=Math.pow(2,35),r6=Math.pow(2,42),i6=Math.pow(2,49),n6=Math.pow(2,56),s6=Math.pow(2,63),o6=function(t){return t<Zw?1:t<Xw?2:t<Qw?3:t<e6?4:t<t6?5:t<r6?6:t<i6?7:t<n6?8:t<s6?9:10},a6={encode:Hw,decode:Jw,encodingLength:o6},m1=a6;const nl=(t,e,r=0)=>(m1.encode(t,e,r),e),sl=t=>m1.encodingLength(t),Ac=(t,e)=>{const r=e.byteLength,i=sl(t),n=i+sl(r),s=new Uint8Array(n+r);return nl(t,s,0),nl(r,s,i),s.set(e,n),new f6(t,r,e,s)};let f6=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}};const w1=({name:t,code:e,encode:r})=>new c6(t,e,r);let c6=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Ac(this.code,r):r.then(i=>Ac(this.code,i))}else throw Error("Unknown type, must be binary type")}};const _1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),u6=w1({name:"sha2-256",code:18,encode:_1("SHA-256")}),h6=w1({name:"sha2-512",code:19,encode:_1("SHA-512")});var l6=Object.freeze({__proto__:null,sha256:u6,sha512:h6});const x1=0,d6="identity",E1=g1,p6=t=>Ac(x1,E1(t)),g6={code:x1,name:d6,encode:E1,digest:p6};var b6=Object.freeze({__proto__:null,identity:g6});new TextEncoder,new TextDecoder;const ol={...cw,...hw,...dw,...gw,...yw,...Dw,...Pw,...Tw,...Bw,...Vw};({...l6,...b6});function S1(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const al=S1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),lf=S1("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=d1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),M1={utf8:al,"utf-8":al,hex:ol.base16,latin1:lf,ascii:lf,binary:lf,...ol};function Ea(t,e="utf8"){const r=M1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function ts(t,e="utf8"){const r=M1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?bu(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function fl(t){return Jn(Ea(ts(t,_a),h1))}function ra(t){return Ea(ts(yn(t),h1),_a)}function I1(t){const e=ts(J3,tl),r=G3+Ea(p1([e,t]),tl);return[H3,W3,r].join(V3)}function v6(t){return Ea(t,_a)}function y6(t){return ts(t,_a)}function m6(t){return ts([ra(t.header),ra(t.payload)].join(ta),l1)}function w6(t){return[ra(t.header),ra(t.payload),v6(t.signature)].join(ta)}function Dc(t){const e=t.split(ta),r=fl(e[0]),i=fl(e[1]),n=y6(e[2]),s=ts(e.slice(0,2).join(ta),l1);return{header:r,payload:i,signature:n,data:s}}function cl(t=e1(Y3)){const e=u1.getPublicKey(t);return{secretKey:p1([t,e]),publicKey:e}}async function _6(t,e,r,i,n=ue.fromMiliseconds(Date.now())){const s={alg:j3,typ:K3},o=I1(i.publicKey),a=n+r,c={iss:o,sub:t,aud:e,iat:n,exp:a},f=m6({header:s,payload:c}),h=u1.sign(f,i.secretKey.slice(0,32));return w6({header:s,payload:c,signature:h})}var ul=function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))},x6=function(){function t(e,r,i){this.name=e,this.version=r,this.os=i,this.type="browser"}return t}(),E6=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),S6=function(){function t(e,r,i,n){this.name=e,this.version=r,this.os=i,this.bot=n,this.type="bot-device"}return t}(),M6=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),I6=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),A6=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,D6=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,hl=3,O6=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",A6]],ll=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function R6(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new I6:typeof navigator<"u"?N6(navigator.userAgent):T6()}function P6(t){return t!==""&&O6.reduce(function(e,r){var i=r[0],n=r[1];if(e)return e;var s=n.exec(t);return!!s&&[i,s]},!1)}function N6(t){var e=P6(t);if(!e)return null;var r=e[0],i=e[1];if(r==="searchbot")return new M6;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<hl&&(n=ul(ul([],n,!0),F6(hl-n.length),!0)):n=[];var s=n.join("."),o=C6(t),a=D6.exec(t);return a&&a[1]?new S6(r,s,o,a[1]):new x6(r,s,o)}function C6(t){for(var e=0,r=ll.length;e<r;e++){var i=ll[e],n=i[0],s=i[1],o=s.exec(t);if(o)return n}return null}function T6(){var t=typeof process<"u"&&process.version;return t?new E6(process.version.slice(1)):null}function F6(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var ct={},dl;function A1(){if(dl)return ct;dl=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.getLocalStorage=ct.getLocalStorageOrThrow=ct.getCrypto=ct.getCryptoOrThrow=ct.getLocation=ct.getLocationOrThrow=ct.getNavigator=ct.getNavigatorOrThrow=ct.getDocument=ct.getDocumentOrThrow=ct.getFromWindowOrThrow=ct.getFromWindow=void 0;function t(w){let S;return typeof window<"u"&&typeof window[w]<"u"&&(S=window[w]),S}ct.getFromWindow=t;function e(w){const S=t(w);if(!S)throw new Error(`${w} is not defined in Window`);return S}ct.getFromWindowOrThrow=e;function r(){return e("document")}ct.getDocumentOrThrow=r;function i(){return t("document")}ct.getDocument=i;function n(){return e("navigator")}ct.getNavigatorOrThrow=n;function s(){return t("navigator")}ct.getNavigator=s;function o(){return e("location")}ct.getLocationOrThrow=o;function a(){return t("location")}ct.getLocation=a;function c(){return e("crypto")}ct.getCryptoOrThrow=c;function f(){return t("crypto")}ct.getCrypto=f;function h(){return e("localStorage")}ct.getLocalStorageOrThrow=h;function g(){return t("localStorage")}return ct.getLocalStorage=g,ct}var mn=A1(),ps={},pl;function $6(){if(pl)return ps;pl=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.getWindowMetadata=void 0;const t=A1();function e(){let r,i;try{r=t.getDocumentOrThrow(),i=t.getLocationOrThrow()}catch{return null}function n(){const S=r.getElementsByTagName("link"),E=[];for(let I=0;I<S.length;I++){const N=S[I],C=N.getAttribute("rel");if(C&&C.toLowerCase().indexOf("icon")>-1){const T=N.getAttribute("href");if(T)if(T.toLowerCase().indexOf("https:")===-1&&T.toLowerCase().indexOf("http:")===-1&&T.indexOf("//")!==0){let L=i.protocol+"//"+i.host;if(T.indexOf("/")===0)L+=T;else{const R=i.pathname.split("/");R.pop();const $=R.join("/");L+=$+"/"+T}E.push(L)}else if(T.indexOf("//")===0){const L=i.protocol+T;E.push(L)}else E.push(T)}}return E}function s(...S){const E=r.getElementsByTagName("meta");for(let I=0;I<E.length;I++){const N=E[I],C=["itemprop","property","name"].map(T=>N.getAttribute(T)).filter(T=>T?S.includes(T):!1);if(C.length&&C){const T=N.getAttribute("content");if(T)return T}}return""}function o(){let S=s("name","og:site_name","og:title","twitter:title");return S||(S=r.title),S}function a(){return s("description","og:description","twitter:description","keywords")}const c=o(),f=a(),h=i.origin,g=n();return{description:f,url:h,icons:g,name:c}}return ps.getWindowMetadata=e,ps}var L6=$6();const q6="logger/5.7.0";let gl=!1,bl=!1;const $o={debug:1,default:2,info:2,warning:3,error:4,off:5};let vl=$o.default,df=null;function B6(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(t){return t.message}return null}const yl=B6();var Oc;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Oc||(Oc={}));var $r;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})($r||($r={}));const ml="0123456789abcdef";class gt{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const i=e.toLowerCase();$o[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(vl>$o[i])&&console.log.apply(console,r)}debug(...e){this._log(gt.levels.DEBUG,e)}info(...e){this._log(gt.levels.INFO,e)}warn(...e){this._log(gt.levels.WARNING,e)}makeError(e,r,i){if(bl)return this.makeError("censored error",r,{});r||(r=gt.errors.UNKNOWN_ERROR),i||(i={});const n=[];Object.keys(i).forEach(c=>{const f=i[c];try{if(f instanceof Uint8Array){let h="";for(let g=0;g<f.length;g++)h+=ml[f[g]>>4],h+=ml[f[g]&15];n.push(c+"=Uint8Array(0x"+h+")")}else n.push(c+"="+JSON.stringify(f))}catch{n.push(c+"="+JSON.stringify(i[c].toString()))}}),n.push(`code=${r}`),n.push(`version=${this.version}`);const s=e;let o="";switch(r){case $r.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case $r.CALL_EXCEPTION:case $r.INSUFFICIENT_FUNDS:case $r.MISSING_NEW:case $r.NONCE_EXPIRED:case $r.REPLACEMENT_UNDERPRICED:case $r.TRANSACTION_REPLACED:case $r.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(i).forEach(function(c){a[c]=i[c]}),a}throwError(e,r,i){throw this.makeError(e,r,i)}throwArgumentError(e,r,i){return this.throwError(e,gt.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(e,r,i,n){e||this.throwError(r,i,n)}assertArgument(e,r,i,n){e||this.throwArgumentError(r,i,n)}checkNormalize(e){yl&&this.throwError("platform missing String.prototype.normalize",gt.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:yl})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,gt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,gt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,i){i?i=": "+i:i="",e<r&&this.throwError("missing argument"+i,gt.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+i,gt.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",gt.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",gt.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",gt.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return df||(df=new gt(q6)),df}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",gt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),gl){if(!e)return;this.globalLogger().throwError("error censorship permanent",gt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}bl=!!e,gl=!!r}static setLogLevel(e){const r=$o[e.toLowerCase()];if(r==null){gt.globalLogger().warn("invalid log level - "+e);return}vl=r}static from(e){return new gt(e)}}gt.errors=$r;gt.levels=Oc;const U6="bytes/5.7.0",wt=new gt(U6);function D1(t){return!!t.toHexString}function Cs(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Cs(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function z6(t){return Qr(t)&&!(t.length%2)||vu(t)}function wl(t){return typeof t=="number"&&t==t&&t%1===0}function vu(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!wl(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!wl(r)||r<0||r>=256)return!1}return!0}function Rt(t,e){if(e||(e={}),typeof t=="number"){wt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Cs(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),D1(t)&&(t=t.toHexString()),Qr(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":wt.throwArgumentError("hex data is odd-length","value",t));const i=[];for(let n=0;n<r.length;n+=2)i.push(parseInt(r.substring(n,n+2),16));return Cs(new Uint8Array(i))}return vu(t)?Cs(new Uint8Array(t)):wt.throwArgumentError("invalid arrayify value","value",t)}function k6(t,e){t=Rt(t),t.length>e&&wt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Cs(r)}function Qr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const pf="0123456789abcdef";function dr(t,e){if(e||(e={}),typeof t=="number"){wt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=pf[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),D1(t))return t.toHexString();if(Qr(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":wt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(vu(t)){let r="0x";for(let i=0;i<t.length;i++){let n=t[i];r+=pf[(n&240)>>4]+pf[n&15]}return r}return wt.throwArgumentError("invalid hexlify value","value",t)}function j6(t){if(typeof t!="string")t=dr(t);else if(!Qr(t)||t.length%2)return null;return(t.length-2)/2}function _l(t,e,r){return typeof t!="string"?t=dr(t):(!Qr(t)||t.length%2)&&wt.throwArgumentError("invalid hexData","value",t),e=2+2*e,"0x"+t.substring(e)}function Vn(t,e){for(typeof t!="string"?t=dr(t):Qr(t)||wt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&wt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function O1(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(z6(t)){let r=Rt(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=dr(r.slice(0,32)),e.s=dr(r.slice(32,64))):r.length===65?(e.r=dr(r.slice(0,32)),e.s=dr(r.slice(32,64)),e.v=r[64]):wt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:wt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=dr(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const n=k6(Rt(e._vs),32);e._vs=dr(n);const s=n[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&wt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),n[0]&=127;const o=dr(n);e.s==null?e.s=o:e.s!==o&&wt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?wt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const n=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==n&&wt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Qr(e.r)?wt.throwArgumentError("signature missing or invalid r","signature",t):e.r=Vn(e.r,32),e.s==null||!Qr(e.s)?wt.throwArgumentError("signature missing or invalid s","signature",t):e.s=Vn(e.s,32);const r=Rt(e.s);r[0]>=128&&wt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const i=dr(r);e._vs&&(Qr(e._vs)||wt.throwArgumentError("signature invalid _vs","signature",t),e._vs=Vn(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&wt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}var Lo={exports:{}};const K6={},V6=Object.freeze(Object.defineProperty({__proto__:null,default:K6},Symbol.toStringTag,{value:"Module"})),yu=Vp(V6);var H6=Lo.exports,xl;function W6(){return xl||(xl=1,function(t){(function(e,r){function i(d,u){if(!d)throw new Error(u||"Assertion failed")}function n(d,u){d.super_=u;var l=function(){};l.prototype=u.prototype,d.prototype=new l,d.prototype.constructor=d}function s(d,u,l){if(s.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((u==="le"||u==="be")&&(l=u,u=10),this._init(d||0,u||10,l||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=yu.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,l){return u.cmp(l)>0?u:l},s.min=function(u,l){return u.cmp(l)<0?u:l},s.prototype._init=function(u,l,v){if(typeof u=="number")return this._initNumber(u,l,v);if(typeof u=="object")return this._initArray(u,l,v);l==="hex"&&(l=16),i(l===(l|0)&&l>=2&&l<=36),u=u.toString().replace(/\s+/g,"");var m=0;u[0]==="-"&&(m++,this.negative=1),m<u.length&&(l===16?this._parseHex(u,m,v):(this._parseBase(u,l,m),v==="le"&&this._initArray(this.toArray(),l,v)))},s.prototype._initNumber=function(u,l,v){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(i(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),l,v)},s.prototype._initArray=function(u,l,v){if(i(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var M,_,b=0;if(v==="be")for(m=u.length-1,M=0;m>=0;m-=3)_=u[m]|u[m-1]<<8|u[m-2]<<16,this.words[M]|=_<<b&67108863,this.words[M+1]=_>>>26-b&67108863,b+=24,b>=26&&(b-=26,M++);else if(v==="le")for(m=0,M=0;m<u.length;m+=3)_=u[m]|u[m+1]<<8|u[m+2]<<16,this.words[M]|=_<<b&67108863,this.words[M+1]=_>>>26-b&67108863,b+=24,b>=26&&(b-=26,M++);return this._strip()};function a(d,u){var l=d.charCodeAt(u);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;i(!1,"Invalid character in "+d)}function c(d,u,l){var v=a(d,l);return l-1>=u&&(v|=a(d,l-1)<<4),v}s.prototype._parseHex=function(u,l,v){this.length=Math.ceil((u.length-l)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var M=0,_=0,b;if(v==="be")for(m=u.length-1;m>=l;m-=2)b=c(u,l,m)<<M,this.words[_]|=b&67108863,M>=18?(M-=18,_+=1,this.words[_]|=b>>>26):M+=8;else{var x=u.length-l;for(m=x%2===0?l+1:l;m<u.length;m+=2)b=c(u,l,m)<<M,this.words[_]|=b&67108863,M>=18?(M-=18,_+=1,this.words[_]|=b>>>26):M+=8}this._strip()};function f(d,u,l,v){for(var m=0,M=0,_=Math.min(d.length,l),b=u;b<_;b++){var x=d.charCodeAt(b)-48;m*=v,x>=49?M=x-49+10:x>=17?M=x-17+10:M=x,i(x>=0&&M<v,"Invalid character"),m+=M}return m}s.prototype._parseBase=function(u,l,v){this.words=[0],this.length=1;for(var m=0,M=1;M<=67108863;M*=l)m++;m--,M=M/l|0;for(var _=u.length-v,b=_%m,x=Math.min(_,_-b)+v,y=0,D=v;D<x;D+=m)y=f(u,D,D+m,l),this.imuln(M),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(b!==0){var J=1;for(y=f(u,D,u.length,l),D=0;D<b;D++)J*=l;this.imuln(J),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this._strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var l=0;l<this.length;l++)u.words[l]=this.words[l];u.length=this.length,u.negative=this.negative,u.red=this.red};function h(d,u){d.words=u.words,d.length=u.length,d.negative=u.negative,d.red=u.red}if(s.prototype._move=function(u){h(u,this)},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{s.prototype.inspect=g}else s.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,l){u=u||10,l=l|0||1;var v;if(u===16||u==="hex"){v="";for(var m=0,M=0,_=0;_<this.length;_++){var b=this.words[_],x=((b<<m|M)&16777215).toString(16);M=b>>>24-m&16777215,m+=2,m>=26&&(m-=26,_--),M!==0||_!==this.length-1?v=w[6-x.length]+x+v:v=x+v}for(M!==0&&(v=M.toString(16)+v);v.length%l!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(u===(u|0)&&u>=2&&u<=36){var y=S[u],D=E[u];v="";var J=this.clone();for(J.negative=0;!J.isZero();){var A=J.modrn(D).toString(u);J=J.idivn(D),J.isZero()?v=A+v:v=w[y-A.length]+A+v}for(this.isZero()&&(v="0"+v);v.length%l!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(u,l){return this.toArrayLike(o,u,l)}),s.prototype.toArray=function(u,l){return this.toArrayLike(Array,u,l)};var I=function(u,l){return u.allocUnsafe?u.allocUnsafe(l):new u(l)};s.prototype.toArrayLike=function(u,l,v){this._strip();var m=this.byteLength(),M=v||Math.max(1,m);i(m<=M,"byte array longer than desired length"),i(M>0,"Requested array length <= 0");var _=I(u,M),b=l==="le"?"LE":"BE";return this["_toArrayLike"+b](_,m),_},s.prototype._toArrayLikeLE=function(u,l){for(var v=0,m=0,M=0,_=0;M<this.length;M++){var b=this.words[M]<<_|m;u[v++]=b&255,v<u.length&&(u[v++]=b>>8&255),v<u.length&&(u[v++]=b>>16&255),_===6?(v<u.length&&(u[v++]=b>>24&255),m=0,_=0):(m=b>>>24,_+=2)}if(v<u.length)for(u[v++]=m;v<u.length;)u[v++]=0},s.prototype._toArrayLikeBE=function(u,l){for(var v=u.length-1,m=0,M=0,_=0;M<this.length;M++){var b=this.words[M]<<_|m;u[v--]=b&255,v>=0&&(u[v--]=b>>8&255),v>=0&&(u[v--]=b>>16&255),_===6?(v>=0&&(u[v--]=b>>24&255),m=0,_=0):(m=b>>>24,_+=2)}if(v>=0)for(u[v--]=m;v>=0;)u[v--]=0},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var l=u,v=0;return l>=4096&&(v+=13,l>>>=13),l>=64&&(v+=7,l>>>=7),l>=8&&(v+=4,l>>>=4),l>=2&&(v+=2,l>>>=2),v+l},s.prototype._zeroBits=function(u){if(u===0)return 26;var l=u,v=0;return l&8191||(v+=13,l>>>=13),l&127||(v+=7,l>>>=7),l&15||(v+=4,l>>>=4),l&3||(v+=2,l>>>=2),l&1||v++,v},s.prototype.bitLength=function(){var u=this.words[this.length-1],l=this._countBits(u);return(this.length-1)*26+l};function N(d){for(var u=new Array(d.bitLength()),l=0;l<u.length;l++){var v=l/26|0,m=l%26;u[l]=d.words[v]>>>m&1}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,l=0;l<this.length;l++){var v=this._zeroBits(this.words[l]);if(u+=v,v!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]|u.words[l];return this._strip()},s.prototype.ior=function(u){return i((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var l;this.length>u.length?l=u:l=this;for(var v=0;v<l.length;v++)this.words[v]=this.words[v]&u.words[v];return this.length=l.length,this._strip()},s.prototype.iand=function(u){return i((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var l,v;this.length>u.length?(l=this,v=u):(l=u,v=this);for(var m=0;m<v.length;m++)this.words[m]=l.words[m]^v.words[m];if(this!==l)for(;m<l.length;m++)this.words[m]=l.words[m];return this.length=l.length,this._strip()},s.prototype.ixor=function(u){return i((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){i(typeof u=="number"&&u>=0);var l=Math.ceil(u/26)|0,v=u%26;this._expand(l),v>0&&l--;for(var m=0;m<l;m++)this.words[m]=~this.words[m]&67108863;return v>0&&(this.words[m]=~this.words[m]&67108863>>26-v),this._strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,l){i(typeof u=="number"&&u>=0);var v=u/26|0,m=u%26;return this._expand(v+1),l?this.words[v]=this.words[v]|1<<m:this.words[v]=this.words[v]&~(1<<m),this._strip()},s.prototype.iadd=function(u){var l;if(this.negative!==0&&u.negative===0)return this.negative=0,l=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,l=this.isub(u),u.negative=1,l._normSign();var v,m;this.length>u.length?(v=this,m=u):(v=u,m=this);for(var M=0,_=0;_<m.length;_++)l=(v.words[_]|0)+(m.words[_]|0)+M,this.words[_]=l&67108863,M=l>>>26;for(;M!==0&&_<v.length;_++)l=(v.words[_]|0)+M,this.words[_]=l&67108863,M=l>>>26;if(this.length=v.length,M!==0)this.words[this.length]=M,this.length++;else if(v!==this)for(;_<v.length;_++)this.words[_]=v.words[_];return this},s.prototype.add=function(u){var l;return u.negative!==0&&this.negative===0?(u.negative=0,l=this.sub(u),u.negative^=1,l):u.negative===0&&this.negative!==0?(this.negative=0,l=u.sub(this),this.negative=1,l):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var l=this.iadd(u);return u.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var v=this.cmp(u);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,M;v>0?(m=this,M=u):(m=u,M=this);for(var _=0,b=0;b<M.length;b++)l=(m.words[b]|0)-(M.words[b]|0)+_,_=l>>26,this.words[b]=l&67108863;for(;_!==0&&b<m.length;b++)l=(m.words[b]|0)+_,_=l>>26,this.words[b]=l&67108863;if(_===0&&b<m.length&&m!==this)for(;b<m.length;b++)this.words[b]=m.words[b];return this.length=Math.max(this.length,b),m!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function C(d,u,l){l.negative=u.negative^d.negative;var v=d.length+u.length|0;l.length=v,v=v-1|0;var m=d.words[0]|0,M=u.words[0]|0,_=m*M,b=_&67108863,x=_/67108864|0;l.words[0]=b;for(var y=1;y<v;y++){for(var D=x>>>26,J=x&67108863,A=Math.min(y,u.length-1),z=Math.max(0,y-d.length+1);z<=A;z++){var H=y-z|0;m=d.words[H]|0,M=u.words[z]|0,_=m*M+J,D+=_/67108864|0,J=_&67108863}l.words[y]=J|0,x=D|0}return x!==0?l.words[y]=x|0:l.length--,l._strip()}var T=function(u,l,v){var m=u.words,M=l.words,_=v.words,b=0,x,y,D,J=m[0]|0,A=J&8191,z=J>>>13,H=m[1]|0,Y=H&8191,X=H>>>13,ae=m[2]|0,fe=ae&8191,F=ae>>>13,B=m[3]|0,K=B&8191,W=B>>>13,Q=m[4]|0,ee=Q&8191,te=Q>>>13,ie=m[5]|0,re=ie&8191,Z=ie>>>13,ce=m[6]|0,se=ce&8191,ne=ce>>>13,he=m[7]|0,ge=he&8191,le=he>>>13,ve=m[8]|0,De=ve&8191,pe=ve>>>13,Ne=m[9]|0,Ce=Ne&8191,me=Ne>>>13,Ue=M[0]|0,Oe=Ue&8191,ye=Ue>>>13,ze=M[1]|0,Ye=ze&8191,we=ze>>>13,Ge=M[2]|0,Ze=Ge&8191,Se=Ge>>>13,je=M[3]|0,ke=je&8191,xe=je>>>13,Ke=M[4]|0,Ve=Ke&8191,_e=Ke>>>13,Xe=M[5]|0,Qe=Xe&8191,Me=Xe>>>13,et=M[6]|0,tt=et&8191,Ee=et>>>13,He=M[7]|0,Be=He&8191,Ie=He>>>13,rt=M[8]|0,it=rt&8191,Ae=rt>>>13,nt=M[9]|0,Le=nt&8191,Je=nt>>>13;v.negative=u.negative^l.negative,v.length=19,x=Math.imul(A,Oe),y=Math.imul(A,ye),y=y+Math.imul(z,Oe)|0,D=Math.imul(z,ye);var er=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(er>>>26)|0,er&=67108863,x=Math.imul(Y,Oe),y=Math.imul(Y,ye),y=y+Math.imul(X,Oe)|0,D=Math.imul(X,ye),x=x+Math.imul(A,Ye)|0,y=y+Math.imul(A,we)|0,y=y+Math.imul(z,Ye)|0,D=D+Math.imul(z,we)|0;var tr=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(tr>>>26)|0,tr&=67108863,x=Math.imul(fe,Oe),y=Math.imul(fe,ye),y=y+Math.imul(F,Oe)|0,D=Math.imul(F,ye),x=x+Math.imul(Y,Ye)|0,y=y+Math.imul(Y,we)|0,y=y+Math.imul(X,Ye)|0,D=D+Math.imul(X,we)|0,x=x+Math.imul(A,Ze)|0,y=y+Math.imul(A,Se)|0,y=y+Math.imul(z,Ze)|0,D=D+Math.imul(z,Se)|0;var rr=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(rr>>>26)|0,rr&=67108863,x=Math.imul(K,Oe),y=Math.imul(K,ye),y=y+Math.imul(W,Oe)|0,D=Math.imul(W,ye),x=x+Math.imul(fe,Ye)|0,y=y+Math.imul(fe,we)|0,y=y+Math.imul(F,Ye)|0,D=D+Math.imul(F,we)|0,x=x+Math.imul(Y,Ze)|0,y=y+Math.imul(Y,Se)|0,y=y+Math.imul(X,Ze)|0,D=D+Math.imul(X,Se)|0,x=x+Math.imul(A,ke)|0,y=y+Math.imul(A,xe)|0,y=y+Math.imul(z,ke)|0,D=D+Math.imul(z,xe)|0;var ir=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(ir>>>26)|0,ir&=67108863,x=Math.imul(ee,Oe),y=Math.imul(ee,ye),y=y+Math.imul(te,Oe)|0,D=Math.imul(te,ye),x=x+Math.imul(K,Ye)|0,y=y+Math.imul(K,we)|0,y=y+Math.imul(W,Ye)|0,D=D+Math.imul(W,we)|0,x=x+Math.imul(fe,Ze)|0,y=y+Math.imul(fe,Se)|0,y=y+Math.imul(F,Ze)|0,D=D+Math.imul(F,Se)|0,x=x+Math.imul(Y,ke)|0,y=y+Math.imul(Y,xe)|0,y=y+Math.imul(X,ke)|0,D=D+Math.imul(X,xe)|0,x=x+Math.imul(A,Ve)|0,y=y+Math.imul(A,_e)|0,y=y+Math.imul(z,Ve)|0,D=D+Math.imul(z,_e)|0;var Et=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(Et>>>26)|0,Et&=67108863,x=Math.imul(re,Oe),y=Math.imul(re,ye),y=y+Math.imul(Z,Oe)|0,D=Math.imul(Z,ye),x=x+Math.imul(ee,Ye)|0,y=y+Math.imul(ee,we)|0,y=y+Math.imul(te,Ye)|0,D=D+Math.imul(te,we)|0,x=x+Math.imul(K,Ze)|0,y=y+Math.imul(K,Se)|0,y=y+Math.imul(W,Ze)|0,D=D+Math.imul(W,Se)|0,x=x+Math.imul(fe,ke)|0,y=y+Math.imul(fe,xe)|0,y=y+Math.imul(F,ke)|0,D=D+Math.imul(F,xe)|0,x=x+Math.imul(Y,Ve)|0,y=y+Math.imul(Y,_e)|0,y=y+Math.imul(X,Ve)|0,D=D+Math.imul(X,_e)|0,x=x+Math.imul(A,Qe)|0,y=y+Math.imul(A,Me)|0,y=y+Math.imul(z,Qe)|0,D=D+Math.imul(z,Me)|0;var ii=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(ii>>>26)|0,ii&=67108863,x=Math.imul(se,Oe),y=Math.imul(se,ye),y=y+Math.imul(ne,Oe)|0,D=Math.imul(ne,ye),x=x+Math.imul(re,Ye)|0,y=y+Math.imul(re,we)|0,y=y+Math.imul(Z,Ye)|0,D=D+Math.imul(Z,we)|0,x=x+Math.imul(ee,Ze)|0,y=y+Math.imul(ee,Se)|0,y=y+Math.imul(te,Ze)|0,D=D+Math.imul(te,Se)|0,x=x+Math.imul(K,ke)|0,y=y+Math.imul(K,xe)|0,y=y+Math.imul(W,ke)|0,D=D+Math.imul(W,xe)|0,x=x+Math.imul(fe,Ve)|0,y=y+Math.imul(fe,_e)|0,y=y+Math.imul(F,Ve)|0,D=D+Math.imul(F,_e)|0,x=x+Math.imul(Y,Qe)|0,y=y+Math.imul(Y,Me)|0,y=y+Math.imul(X,Qe)|0,D=D+Math.imul(X,Me)|0,x=x+Math.imul(A,tt)|0,y=y+Math.imul(A,Ee)|0,y=y+Math.imul(z,tt)|0,D=D+Math.imul(z,Ee)|0;var ni=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(ni>>>26)|0,ni&=67108863,x=Math.imul(ge,Oe),y=Math.imul(ge,ye),y=y+Math.imul(le,Oe)|0,D=Math.imul(le,ye),x=x+Math.imul(se,Ye)|0,y=y+Math.imul(se,we)|0,y=y+Math.imul(ne,Ye)|0,D=D+Math.imul(ne,we)|0,x=x+Math.imul(re,Ze)|0,y=y+Math.imul(re,Se)|0,y=y+Math.imul(Z,Ze)|0,D=D+Math.imul(Z,Se)|0,x=x+Math.imul(ee,ke)|0,y=y+Math.imul(ee,xe)|0,y=y+Math.imul(te,ke)|0,D=D+Math.imul(te,xe)|0,x=x+Math.imul(K,Ve)|0,y=y+Math.imul(K,_e)|0,y=y+Math.imul(W,Ve)|0,D=D+Math.imul(W,_e)|0,x=x+Math.imul(fe,Qe)|0,y=y+Math.imul(fe,Me)|0,y=y+Math.imul(F,Qe)|0,D=D+Math.imul(F,Me)|0,x=x+Math.imul(Y,tt)|0,y=y+Math.imul(Y,Ee)|0,y=y+Math.imul(X,tt)|0,D=D+Math.imul(X,Ee)|0,x=x+Math.imul(A,Be)|0,y=y+Math.imul(A,Ie)|0,y=y+Math.imul(z,Be)|0,D=D+Math.imul(z,Ie)|0;var si=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(si>>>26)|0,si&=67108863,x=Math.imul(De,Oe),y=Math.imul(De,ye),y=y+Math.imul(pe,Oe)|0,D=Math.imul(pe,ye),x=x+Math.imul(ge,Ye)|0,y=y+Math.imul(ge,we)|0,y=y+Math.imul(le,Ye)|0,D=D+Math.imul(le,we)|0,x=x+Math.imul(se,Ze)|0,y=y+Math.imul(se,Se)|0,y=y+Math.imul(ne,Ze)|0,D=D+Math.imul(ne,Se)|0,x=x+Math.imul(re,ke)|0,y=y+Math.imul(re,xe)|0,y=y+Math.imul(Z,ke)|0,D=D+Math.imul(Z,xe)|0,x=x+Math.imul(ee,Ve)|0,y=y+Math.imul(ee,_e)|0,y=y+Math.imul(te,Ve)|0,D=D+Math.imul(te,_e)|0,x=x+Math.imul(K,Qe)|0,y=y+Math.imul(K,Me)|0,y=y+Math.imul(W,Qe)|0,D=D+Math.imul(W,Me)|0,x=x+Math.imul(fe,tt)|0,y=y+Math.imul(fe,Ee)|0,y=y+Math.imul(F,tt)|0,D=D+Math.imul(F,Ee)|0,x=x+Math.imul(Y,Be)|0,y=y+Math.imul(Y,Ie)|0,y=y+Math.imul(X,Be)|0,D=D+Math.imul(X,Ie)|0,x=x+Math.imul(A,it)|0,y=y+Math.imul(A,Ae)|0,y=y+Math.imul(z,it)|0,D=D+Math.imul(z,Ae)|0;var oi=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(oi>>>26)|0,oi&=67108863,x=Math.imul(Ce,Oe),y=Math.imul(Ce,ye),y=y+Math.imul(me,Oe)|0,D=Math.imul(me,ye),x=x+Math.imul(De,Ye)|0,y=y+Math.imul(De,we)|0,y=y+Math.imul(pe,Ye)|0,D=D+Math.imul(pe,we)|0,x=x+Math.imul(ge,Ze)|0,y=y+Math.imul(ge,Se)|0,y=y+Math.imul(le,Ze)|0,D=D+Math.imul(le,Se)|0,x=x+Math.imul(se,ke)|0,y=y+Math.imul(se,xe)|0,y=y+Math.imul(ne,ke)|0,D=D+Math.imul(ne,xe)|0,x=x+Math.imul(re,Ve)|0,y=y+Math.imul(re,_e)|0,y=y+Math.imul(Z,Ve)|0,D=D+Math.imul(Z,_e)|0,x=x+Math.imul(ee,Qe)|0,y=y+Math.imul(ee,Me)|0,y=y+Math.imul(te,Qe)|0,D=D+Math.imul(te,Me)|0,x=x+Math.imul(K,tt)|0,y=y+Math.imul(K,Ee)|0,y=y+Math.imul(W,tt)|0,D=D+Math.imul(W,Ee)|0,x=x+Math.imul(fe,Be)|0,y=y+Math.imul(fe,Ie)|0,y=y+Math.imul(F,Be)|0,D=D+Math.imul(F,Ie)|0,x=x+Math.imul(Y,it)|0,y=y+Math.imul(Y,Ae)|0,y=y+Math.imul(X,it)|0,D=D+Math.imul(X,Ae)|0,x=x+Math.imul(A,Le)|0,y=y+Math.imul(A,Je)|0,y=y+Math.imul(z,Le)|0,D=D+Math.imul(z,Je)|0;var ai=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(ai>>>26)|0,ai&=67108863,x=Math.imul(Ce,Ye),y=Math.imul(Ce,we),y=y+Math.imul(me,Ye)|0,D=Math.imul(me,we),x=x+Math.imul(De,Ze)|0,y=y+Math.imul(De,Se)|0,y=y+Math.imul(pe,Ze)|0,D=D+Math.imul(pe,Se)|0,x=x+Math.imul(ge,ke)|0,y=y+Math.imul(ge,xe)|0,y=y+Math.imul(le,ke)|0,D=D+Math.imul(le,xe)|0,x=x+Math.imul(se,Ve)|0,y=y+Math.imul(se,_e)|0,y=y+Math.imul(ne,Ve)|0,D=D+Math.imul(ne,_e)|0,x=x+Math.imul(re,Qe)|0,y=y+Math.imul(re,Me)|0,y=y+Math.imul(Z,Qe)|0,D=D+Math.imul(Z,Me)|0,x=x+Math.imul(ee,tt)|0,y=y+Math.imul(ee,Ee)|0,y=y+Math.imul(te,tt)|0,D=D+Math.imul(te,Ee)|0,x=x+Math.imul(K,Be)|0,y=y+Math.imul(K,Ie)|0,y=y+Math.imul(W,Be)|0,D=D+Math.imul(W,Ie)|0,x=x+Math.imul(fe,it)|0,y=y+Math.imul(fe,Ae)|0,y=y+Math.imul(F,it)|0,D=D+Math.imul(F,Ae)|0,x=x+Math.imul(Y,Le)|0,y=y+Math.imul(Y,Je)|0,y=y+Math.imul(X,Le)|0,D=D+Math.imul(X,Je)|0;var yr=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(yr>>>26)|0,yr&=67108863,x=Math.imul(Ce,Ze),y=Math.imul(Ce,Se),y=y+Math.imul(me,Ze)|0,D=Math.imul(me,Se),x=x+Math.imul(De,ke)|0,y=y+Math.imul(De,xe)|0,y=y+Math.imul(pe,ke)|0,D=D+Math.imul(pe,xe)|0,x=x+Math.imul(ge,Ve)|0,y=y+Math.imul(ge,_e)|0,y=y+Math.imul(le,Ve)|0,D=D+Math.imul(le,_e)|0,x=x+Math.imul(se,Qe)|0,y=y+Math.imul(se,Me)|0,y=y+Math.imul(ne,Qe)|0,D=D+Math.imul(ne,Me)|0,x=x+Math.imul(re,tt)|0,y=y+Math.imul(re,Ee)|0,y=y+Math.imul(Z,tt)|0,D=D+Math.imul(Z,Ee)|0,x=x+Math.imul(ee,Be)|0,y=y+Math.imul(ee,Ie)|0,y=y+Math.imul(te,Be)|0,D=D+Math.imul(te,Ie)|0,x=x+Math.imul(K,it)|0,y=y+Math.imul(K,Ae)|0,y=y+Math.imul(W,it)|0,D=D+Math.imul(W,Ae)|0,x=x+Math.imul(fe,Le)|0,y=y+Math.imul(fe,Je)|0,y=y+Math.imul(F,Le)|0,D=D+Math.imul(F,Je)|0;var fi=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(fi>>>26)|0,fi&=67108863,x=Math.imul(Ce,ke),y=Math.imul(Ce,xe),y=y+Math.imul(me,ke)|0,D=Math.imul(me,xe),x=x+Math.imul(De,Ve)|0,y=y+Math.imul(De,_e)|0,y=y+Math.imul(pe,Ve)|0,D=D+Math.imul(pe,_e)|0,x=x+Math.imul(ge,Qe)|0,y=y+Math.imul(ge,Me)|0,y=y+Math.imul(le,Qe)|0,D=D+Math.imul(le,Me)|0,x=x+Math.imul(se,tt)|0,y=y+Math.imul(se,Ee)|0,y=y+Math.imul(ne,tt)|0,D=D+Math.imul(ne,Ee)|0,x=x+Math.imul(re,Be)|0,y=y+Math.imul(re,Ie)|0,y=y+Math.imul(Z,Be)|0,D=D+Math.imul(Z,Ie)|0,x=x+Math.imul(ee,it)|0,y=y+Math.imul(ee,Ae)|0,y=y+Math.imul(te,it)|0,D=D+Math.imul(te,Ae)|0,x=x+Math.imul(K,Le)|0,y=y+Math.imul(K,Je)|0,y=y+Math.imul(W,Le)|0,D=D+Math.imul(W,Je)|0;var ci=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(ci>>>26)|0,ci&=67108863,x=Math.imul(Ce,Ve),y=Math.imul(Ce,_e),y=y+Math.imul(me,Ve)|0,D=Math.imul(me,_e),x=x+Math.imul(De,Qe)|0,y=y+Math.imul(De,Me)|0,y=y+Math.imul(pe,Qe)|0,D=D+Math.imul(pe,Me)|0,x=x+Math.imul(ge,tt)|0,y=y+Math.imul(ge,Ee)|0,y=y+Math.imul(le,tt)|0,D=D+Math.imul(le,Ee)|0,x=x+Math.imul(se,Be)|0,y=y+Math.imul(se,Ie)|0,y=y+Math.imul(ne,Be)|0,D=D+Math.imul(ne,Ie)|0,x=x+Math.imul(re,it)|0,y=y+Math.imul(re,Ae)|0,y=y+Math.imul(Z,it)|0,D=D+Math.imul(Z,Ae)|0,x=x+Math.imul(ee,Le)|0,y=y+Math.imul(ee,Je)|0,y=y+Math.imul(te,Le)|0,D=D+Math.imul(te,Je)|0;var Ut=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,x=Math.imul(Ce,Qe),y=Math.imul(Ce,Me),y=y+Math.imul(me,Qe)|0,D=Math.imul(me,Me),x=x+Math.imul(De,tt)|0,y=y+Math.imul(De,Ee)|0,y=y+Math.imul(pe,tt)|0,D=D+Math.imul(pe,Ee)|0,x=x+Math.imul(ge,Be)|0,y=y+Math.imul(ge,Ie)|0,y=y+Math.imul(le,Be)|0,D=D+Math.imul(le,Ie)|0,x=x+Math.imul(se,it)|0,y=y+Math.imul(se,Ae)|0,y=y+Math.imul(ne,it)|0,D=D+Math.imul(ne,Ae)|0,x=x+Math.imul(re,Le)|0,y=y+Math.imul(re,Je)|0,y=y+Math.imul(Z,Le)|0,D=D+Math.imul(Z,Je)|0;var ui=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(ui>>>26)|0,ui&=67108863,x=Math.imul(Ce,tt),y=Math.imul(Ce,Ee),y=y+Math.imul(me,tt)|0,D=Math.imul(me,Ee),x=x+Math.imul(De,Be)|0,y=y+Math.imul(De,Ie)|0,y=y+Math.imul(pe,Be)|0,D=D+Math.imul(pe,Ie)|0,x=x+Math.imul(ge,it)|0,y=y+Math.imul(ge,Ae)|0,y=y+Math.imul(le,it)|0,D=D+Math.imul(le,Ae)|0,x=x+Math.imul(se,Le)|0,y=y+Math.imul(se,Je)|0,y=y+Math.imul(ne,Le)|0,D=D+Math.imul(ne,Je)|0;var hi=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(hi>>>26)|0,hi&=67108863,x=Math.imul(Ce,Be),y=Math.imul(Ce,Ie),y=y+Math.imul(me,Be)|0,D=Math.imul(me,Ie),x=x+Math.imul(De,it)|0,y=y+Math.imul(De,Ae)|0,y=y+Math.imul(pe,it)|0,D=D+Math.imul(pe,Ae)|0,x=x+Math.imul(ge,Le)|0,y=y+Math.imul(ge,Je)|0,y=y+Math.imul(le,Le)|0,D=D+Math.imul(le,Je)|0;var li=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(li>>>26)|0,li&=67108863,x=Math.imul(Ce,it),y=Math.imul(Ce,Ae),y=y+Math.imul(me,it)|0,D=Math.imul(me,Ae),x=x+Math.imul(De,Le)|0,y=y+Math.imul(De,Je)|0,y=y+Math.imul(pe,Le)|0,D=D+Math.imul(pe,Je)|0;var ns=(b+x|0)+((y&8191)<<13)|0;b=(D+(y>>>13)|0)+(ns>>>26)|0,ns&=67108863,x=Math.imul(Ce,Le),y=Math.imul(Ce,Je),y=y+Math.imul(me,Le)|0,D=Math.imul(me,Je);var ss=(b+x|0)+((y&8191)<<13)|0;return b=(D+(y>>>13)|0)+(ss>>>26)|0,ss&=67108863,_[0]=er,_[1]=tr,_[2]=rr,_[3]=ir,_[4]=Et,_[5]=ii,_[6]=ni,_[7]=si,_[8]=oi,_[9]=ai,_[10]=yr,_[11]=fi,_[12]=ci,_[13]=Ut,_[14]=ui,_[15]=hi,_[16]=li,_[17]=ns,_[18]=ss,b!==0&&(_[19]=b,v.length++),v};Math.imul||(T=C);function L(d,u,l){l.negative=u.negative^d.negative,l.length=d.length+u.length;for(var v=0,m=0,M=0;M<l.length-1;M++){var _=m;m=0;for(var b=v&67108863,x=Math.min(M,u.length-1),y=Math.max(0,M-d.length+1);y<=x;y++){var D=M-y,J=d.words[D]|0,A=u.words[y]|0,z=J*A,H=z&67108863;_=_+(z/67108864|0)|0,H=H+b|0,b=H&67108863,_=_+(H>>>26)|0,m+=_>>>26,_&=67108863}l.words[M]=b,v=_,_=m}return v!==0?l.words[M]=v:l.length--,l._strip()}function R(d,u,l){return L(d,u,l)}s.prototype.mulTo=function(u,l){var v,m=this.length+u.length;return this.length===10&&u.length===10?v=T(this,u,l):m<63?v=C(this,u,l):m<1024?v=L(this,u,l):v=R(this,u,l),v},s.prototype.mul=function(u){var l=new s(null);return l.words=new Array(this.length+u.length),this.mulTo(u,l)},s.prototype.mulf=function(u){var l=new s(null);return l.words=new Array(this.length+u.length),R(this,u,l)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){var l=u<0;l&&(u=-u),i(typeof u=="number"),i(u<67108864);for(var v=0,m=0;m<this.length;m++){var M=(this.words[m]|0)*u,_=(M&67108863)+(v&67108863);v>>=26,v+=M/67108864|0,v+=_>>>26,this.words[m]=_&67108863}return v!==0&&(this.words[m]=v,this.length++),l?this.ineg():this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var l=N(u);if(l.length===0)return new s(1);for(var v=this,m=0;m<l.length&&l[m]===0;m++,v=v.sqr());if(++m<l.length)for(var M=v.sqr();m<l.length;m++,M=M.sqr())l[m]!==0&&(v=v.mul(M));return v},s.prototype.iushln=function(u){i(typeof u=="number"&&u>=0);var l=u%26,v=(u-l)/26,m=67108863>>>26-l<<26-l,M;if(l!==0){var _=0;for(M=0;M<this.length;M++){var b=this.words[M]&m,x=(this.words[M]|0)-b<<l;this.words[M]=x|_,_=b>>>26-l}_&&(this.words[M]=_,this.length++)}if(v!==0){for(M=this.length-1;M>=0;M--)this.words[M+v]=this.words[M];for(M=0;M<v;M++)this.words[M]=0;this.length+=v}return this._strip()},s.prototype.ishln=function(u){return i(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,l,v){i(typeof u=="number"&&u>=0);var m;l?m=(l-l%26)/26:m=0;var M=u%26,_=Math.min((u-M)/26,this.length),b=67108863^67108863>>>M<<M,x=v;if(m-=_,m=Math.max(0,m),x){for(var y=0;y<_;y++)x.words[y]=this.words[y];x.length=_}if(_!==0)if(this.length>_)for(this.length-=_,y=0;y<this.length;y++)this.words[y]=this.words[y+_];else this.words[0]=0,this.length=1;var D=0;for(y=this.length-1;y>=0&&(D!==0||y>=m);y--){var J=this.words[y]|0;this.words[y]=D<<26-M|J>>>M,D=J&b}return x&&D!==0&&(x.words[x.length++]=D),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(u,l,v){return i(this.negative===0),this.iushrn(u,l,v)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){i(typeof u=="number"&&u>=0);var l=u%26,v=(u-l)/26,m=1<<l;if(this.length<=v)return!1;var M=this.words[v];return!!(M&m)},s.prototype.imaskn=function(u){i(typeof u=="number"&&u>=0);var l=u%26,v=(u-l)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(l!==0&&v++,this.length=Math.min(v,this.length),l!==0){var m=67108863^67108863>>>l<<l;this.words[this.length-1]&=m}return this._strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return i(typeof u=="number"),i(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(u){if(i(typeof u=="number"),i(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,l,v){var m=u.length+v,M;this._expand(m);var _,b=0;for(M=0;M<u.length;M++){_=(this.words[M+v]|0)+b;var x=(u.words[M]|0)*l;_-=x&67108863,b=(_>>26)-(x/67108864|0),this.words[M+v]=_&67108863}for(;M<this.length-v;M++)_=(this.words[M+v]|0)+b,b=_>>26,this.words[M+v]=_&67108863;if(b===0)return this._strip();for(i(b===-1),b=0,M=0;M<this.length;M++)_=-(this.words[M]|0)+b,b=_>>26,this.words[M]=_&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(u,l){var v=this.length-u.length,m=this.clone(),M=u,_=M.words[M.length-1]|0,b=this._countBits(_);v=26-b,v!==0&&(M=M.ushln(v),m.iushln(v),_=M.words[M.length-1]|0);var x=m.length-M.length,y;if(l!=="mod"){y=new s(null),y.length=x+1,y.words=new Array(y.length);for(var D=0;D<y.length;D++)y.words[D]=0}var J=m.clone()._ishlnsubmul(M,1,x);J.negative===0&&(m=J,y&&(y.words[x]=1));for(var A=x-1;A>=0;A--){var z=(m.words[M.length+A]|0)*67108864+(m.words[M.length+A-1]|0);for(z=Math.min(z/_|0,67108863),m._ishlnsubmul(M,z,A);m.negative!==0;)z--,m.negative=0,m._ishlnsubmul(M,1,A),m.isZero()||(m.negative^=1);y&&(y.words[A]=z)}return y&&y._strip(),m._strip(),l!=="div"&&v!==0&&m.iushrn(v),{div:y||null,mod:m}},s.prototype.divmod=function(u,l,v){if(i(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var m,M,_;return this.negative!==0&&u.negative===0?(_=this.neg().divmod(u,l),l!=="mod"&&(m=_.div.neg()),l!=="div"&&(M=_.mod.neg(),v&&M.negative!==0&&M.iadd(u)),{div:m,mod:M}):this.negative===0&&u.negative!==0?(_=this.divmod(u.neg(),l),l!=="mod"&&(m=_.div.neg()),{div:m,mod:_.mod}):this.negative&u.negative?(_=this.neg().divmod(u.neg(),l),l!=="div"&&(M=_.mod.neg(),v&&M.negative!==0&&M.isub(u)),{div:_.div,mod:M}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?l==="div"?{div:this.divn(u.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modrn(u.words[0]))}:this._wordDiv(u,l)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var l=this.divmod(u);if(l.mod.isZero())return l.div;var v=l.div.negative!==0?l.mod.isub(u):l.mod,m=u.ushrn(1),M=u.andln(1),_=v.cmp(m);return _<0||M===1&&_===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modrn=function(u){var l=u<0;l&&(u=-u),i(u<=67108863);for(var v=(1<<26)%u,m=0,M=this.length-1;M>=0;M--)m=(v*m+(this.words[M]|0))%u;return l?-m:m},s.prototype.modn=function(u){return this.modrn(u)},s.prototype.idivn=function(u){var l=u<0;l&&(u=-u),i(u<=67108863);for(var v=0,m=this.length-1;m>=0;m--){var M=(this.words[m]|0)+v*67108864;this.words[m]=M/u|0,v=M%u}return this._strip(),l?this.ineg():this},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){i(u.negative===0),i(!u.isZero());var l=this,v=u.clone();l.negative!==0?l=l.umod(u):l=l.clone();for(var m=new s(1),M=new s(0),_=new s(0),b=new s(1),x=0;l.isEven()&&v.isEven();)l.iushrn(1),v.iushrn(1),++x;for(var y=v.clone(),D=l.clone();!l.isZero();){for(var J=0,A=1;!(l.words[0]&A)&&J<26;++J,A<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(m.isOdd()||M.isOdd())&&(m.iadd(y),M.isub(D)),m.iushrn(1),M.iushrn(1);for(var z=0,H=1;!(v.words[0]&H)&&z<26;++z,H<<=1);if(z>0)for(v.iushrn(z);z-- >0;)(_.isOdd()||b.isOdd())&&(_.iadd(y),b.isub(D)),_.iushrn(1),b.iushrn(1);l.cmp(v)>=0?(l.isub(v),m.isub(_),M.isub(b)):(v.isub(l),_.isub(m),b.isub(M))}return{a:_,b,gcd:v.iushln(x)}},s.prototype._invmp=function(u){i(u.negative===0),i(!u.isZero());var l=this,v=u.clone();l.negative!==0?l=l.umod(u):l=l.clone();for(var m=new s(1),M=new s(0),_=v.clone();l.cmpn(1)>0&&v.cmpn(1)>0;){for(var b=0,x=1;!(l.words[0]&x)&&b<26;++b,x<<=1);if(b>0)for(l.iushrn(b);b-- >0;)m.isOdd()&&m.iadd(_),m.iushrn(1);for(var y=0,D=1;!(v.words[0]&D)&&y<26;++y,D<<=1);if(y>0)for(v.iushrn(y);y-- >0;)M.isOdd()&&M.iadd(_),M.iushrn(1);l.cmp(v)>=0?(l.isub(v),m.isub(M)):(v.isub(l),M.isub(m))}var J;return l.cmpn(1)===0?J=m:J=M,J.cmpn(0)<0&&J.iadd(u),J},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var l=this.clone(),v=u.clone();l.negative=0,v.negative=0;for(var m=0;l.isEven()&&v.isEven();m++)l.iushrn(1),v.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;v.isEven();)v.iushrn(1);var M=l.cmp(v);if(M<0){var _=l;l=v,v=_}else if(M===0||v.cmpn(1)===0)break;l.isub(v)}while(!0);return v.iushln(m)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){i(typeof u=="number");var l=u%26,v=(u-l)/26,m=1<<l;if(this.length<=v)return this._expand(v+1),this.words[v]|=m,this;for(var M=m,_=v;M!==0&&_<this.length;_++){var b=this.words[_]|0;b+=M,M=b>>>26,b&=67108863,this.words[_]=b}return M!==0&&(this.words[_]=M,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var l=u<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var v;if(this.length>1)v=1;else{l&&(u=-u),i(u<=67108863,"Number is too big");var m=this.words[0]|0;v=m===u?0:m<u?-1:1}return this.negative!==0?-v|0:v},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var l=this.ucmp(u);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var l=0,v=this.length-1;v>=0;v--){var m=this.words[v]|0,M=u.words[v]|0;if(m!==M){m<M?l=-1:m>M&&(l=1);break}}return l},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new O(u)},s.prototype.toRed=function(u){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return i(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return i(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var $={k256:null,p224:null,p192:null,p25519:null};function P(d,u){this.name=d,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},P.prototype.ireduce=function(u){var l=u,v;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),v=l.bitLength();while(v>this.n);var m=v<this.n?-1:l.ucmp(this.p);return m===0?(l.words[0]=0,l.length=1):m>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},P.prototype.split=function(u,l){u.iushrn(this.n,0,l)},P.prototype.imulK=function(u){return u.imul(this.k)};function U(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(U,P),U.prototype.split=function(u,l){for(var v=4194303,m=Math.min(u.length,9),M=0;M<m;M++)l.words[M]=u.words[M];if(l.length=m,u.length<=9){u.words[0]=0,u.length=1;return}var _=u.words[9];for(l.words[l.length++]=_&v,M=10;M<u.length;M++){var b=u.words[M]|0;u.words[M-10]=(b&v)<<4|_>>>22,_=b}_>>>=22,u.words[M-10]=_,_===0&&u.length>10?u.length-=10:u.length-=9},U.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var l=0,v=0;v<u.length;v++){var m=u.words[v]|0;l+=m*977,u.words[v]=l&67108863,l=m*64+(l/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function k(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(k,P);function j(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(j,P);function G(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,P),G.prototype.imulK=function(u){for(var l=0,v=0;v<u.length;v++){var m=(u.words[v]|0)*19+l,M=m&67108863;m>>>=26,u.words[v]=M,l=m}return l!==0&&(u.words[u.length++]=l),u},s._prime=function(u){if($[u])return $[u];var l;if(u==="k256")l=new U;else if(u==="p224")l=new k;else if(u==="p192")l=new j;else if(u==="p25519")l=new G;else throw new Error("Unknown prime "+u);return $[u]=l,l};function O(d){if(typeof d=="string"){var u=s._prime(d);this.m=u.p,this.prime=u}else i(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}O.prototype._verify1=function(u){i(u.negative===0,"red works only with positives"),i(u.red,"red works only with red numbers")},O.prototype._verify2=function(u,l){i((u.negative|l.negative)===0,"red works only with positives"),i(u.red&&u.red===l.red,"red works only with red numbers")},O.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(h(u,u.umod(this.m)._forceRed(this)),u)},O.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},O.prototype.add=function(u,l){this._verify2(u,l);var v=u.add(l);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},O.prototype.iadd=function(u,l){this._verify2(u,l);var v=u.iadd(l);return v.cmp(this.m)>=0&&v.isub(this.m),v},O.prototype.sub=function(u,l){this._verify2(u,l);var v=u.sub(l);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},O.prototype.isub=function(u,l){this._verify2(u,l);var v=u.isub(l);return v.cmpn(0)<0&&v.iadd(this.m),v},O.prototype.shl=function(u,l){return this._verify1(u),this.imod(u.ushln(l))},O.prototype.imul=function(u,l){return this._verify2(u,l),this.imod(u.imul(l))},O.prototype.mul=function(u,l){return this._verify2(u,l),this.imod(u.mul(l))},O.prototype.isqr=function(u){return this.imul(u,u.clone())},O.prototype.sqr=function(u){return this.mul(u,u)},O.prototype.sqrt=function(u){if(u.isZero())return u.clone();var l=this.m.andln(3);if(i(l%2===1),l===3){var v=this.m.add(new s(1)).iushrn(2);return this.pow(u,v)}for(var m=this.m.subn(1),M=0;!m.isZero()&&m.andln(1)===0;)M++,m.iushrn(1);i(!m.isZero());var _=new s(1).toRed(this),b=_.redNeg(),x=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new s(2*y*y).toRed(this);this.pow(y,x).cmp(b)!==0;)y.redIAdd(b);for(var D=this.pow(y,m),J=this.pow(u,m.addn(1).iushrn(1)),A=this.pow(u,m),z=M;A.cmp(_)!==0;){for(var H=A,Y=0;H.cmp(_)!==0;Y++)H=H.redSqr();i(Y<z);var X=this.pow(D,new s(1).iushln(z-Y-1));J=J.redMul(X),D=X.redSqr(),A=A.redMul(D),z=Y}return J},O.prototype.invm=function(u){var l=u._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},O.prototype.pow=function(u,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return u.clone();var v=4,m=new Array(1<<v);m[0]=new s(1).toRed(this),m[1]=u;for(var M=2;M<m.length;M++)m[M]=this.mul(m[M-1],u);var _=m[0],b=0,x=0,y=l.bitLength()%26;for(y===0&&(y=26),M=l.length-1;M>=0;M--){for(var D=l.words[M],J=y-1;J>=0;J--){var A=D>>J&1;if(_!==m[0]&&(_=this.sqr(_)),A===0&&b===0){x=0;continue}b<<=1,b|=A,x++,!(x!==v&&(M!==0||J!==0))&&(_=this.mul(_,m[b]),x=0,b=0)}y=26}return _},O.prototype.convertTo=function(u){var l=u.umod(this.m);return l===u?l.clone():l},O.prototype.convertFrom=function(u){var l=u.clone();return l.red=null,l},s.mont=function(u){return new p(u)};function p(d){O.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(p,O),p.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},p.prototype.convertFrom=function(u){var l=this.imod(u.mul(this.rinv));return l.red=null,l},p.prototype.imul=function(u,l){if(u.isZero()||l.isZero())return u.words[0]=0,u.length=1,u;var v=u.imul(l),m=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=v.isub(m).iushrn(this.shift),_=M;return M.cmp(this.m)>=0?_=M.isub(this.m):M.cmpn(0)<0&&(_=M.iadd(this.m)),_._forceRed(this)},p.prototype.mul=function(u,l){if(u.isZero()||l.isZero())return new s(0)._forceRed(this);var v=u.mul(l),m=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=v.isub(m).iushrn(this.shift),_=M;return M.cmp(this.m)>=0?_=M.isub(this.m):M.cmpn(0)<0&&(_=M.iadd(this.m)),_._forceRed(this)},p.prototype.invm=function(u){var l=this.imod(u._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,H6)}(Lo)),Lo.exports}var G6=W6();const Pe=Qn(G6);var J6=Pe.BN;function Y6(t){return new J6(t,36).toString(16)}var gf={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */var El;function Z6(){return El||(El=1,function(t){(function(){var e="input is invalid type",r="finalize already called",i=typeof window=="object",n=i?window:{};n.JS_SHA3_NO_WINDOW&&(i=!1);var s=!i&&typeof self=="object",o=!n.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?n=Lr:s&&(n=self);var a=!n.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),h=[31,7936,2031616,520093696],g=[4,1024,262144,67108864],w=[1,256,65536,16777216],S=[6,1536,393216,100663296],E=[0,8,16,24],I=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],N=[224,256,384,512],C=[128,256],T=["hex","buffer","arrayBuffer","array","digest"],L={128:168,256:136};(n.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(A){return Object.prototype.toString.call(A)==="[object Array]"}),c&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(A){return typeof A=="object"&&A.buffer&&A.buffer.constructor===ArrayBuffer});for(var R=function(A,z,H){return function(Y){return new y(A,z,A).update(Y)[H]()}},$=function(A,z,H){return function(Y,X){return new y(A,z,X).update(Y)[H]()}},P=function(A,z,H){return function(Y,X,ae,fe){return u["cshake"+A].update(Y,X,ae,fe)[H]()}},U=function(A,z,H){return function(Y,X,ae,fe){return u["kmac"+A].update(Y,X,ae,fe)[H]()}},k=function(A,z,H,Y){for(var X=0;X<T.length;++X){var ae=T[X];A[ae]=z(H,Y,ae)}return A},j=function(A,z){var H=R(A,z,"hex");return H.create=function(){return new y(A,z,A)},H.update=function(Y){return H.create().update(Y)},k(H,R,A,z)},G=function(A,z){var H=$(A,z,"hex");return H.create=function(Y){return new y(A,z,Y)},H.update=function(Y,X){return H.create(X).update(Y)},k(H,$,A,z)},O=function(A,z){var H=L[A],Y=P(A,z,"hex");return Y.create=function(X,ae,fe){return!ae&&!fe?u["shake"+A].create(X):new y(A,z,X).bytepad([ae,fe],H)},Y.update=function(X,ae,fe,F){return Y.create(ae,fe,F).update(X)},k(Y,P,A,z)},p=function(A,z){var H=L[A],Y=U(A,z,"hex");return Y.create=function(X,ae,fe){return new D(A,z,ae).bytepad(["KMAC",fe],H).bytepad([X],H)},Y.update=function(X,ae,fe,F){return Y.create(X,fe,F).update(ae)},k(Y,U,A,z)},d=[{name:"keccak",padding:w,bits:N,createMethod:j},{name:"sha3",padding:S,bits:N,createMethod:j},{name:"shake",padding:h,bits:C,createMethod:G},{name:"cshake",padding:g,bits:C,createMethod:O},{name:"kmac",padding:g,bits:C,createMethod:p}],u={},l=[],v=0;v<d.length;++v)for(var m=d[v],M=m.bits,_=0;_<M.length;++_){var b=m.name+"_"+M[_];if(l.push(b),u[b]=m.createMethod(M[_],m.padding),m.name!=="sha3"){var x=m.name+M[_];l.push(x),u[x]=u[b]}}function y(A,z,H){this.blocks=[],this.s=[],this.padding=z,this.outputBits=H,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(A<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=H>>5,this.extraBytes=(H&31)>>3;for(var Y=0;Y<50;++Y)this.s[Y]=0}y.prototype.update=function(A){if(this.finalized)throw new Error(r);var z,H=typeof A;if(H!=="string"){if(H==="object"){if(A===null)throw new Error(e);if(c&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!c||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);z=!0}for(var Y=this.blocks,X=this.byteCount,ae=A.length,fe=this.blockCount,F=0,B=this.s,K,W;F<ae;){if(this.reset)for(this.reset=!1,Y[0]=this.block,K=1;K<fe+1;++K)Y[K]=0;if(z)for(K=this.start;F<ae&&K<X;++F)Y[K>>2]|=A[F]<<E[K++&3];else for(K=this.start;F<ae&&K<X;++F)W=A.charCodeAt(F),W<128?Y[K>>2]|=W<<E[K++&3]:W<2048?(Y[K>>2]|=(192|W>>6)<<E[K++&3],Y[K>>2]|=(128|W&63)<<E[K++&3]):W<55296||W>=57344?(Y[K>>2]|=(224|W>>12)<<E[K++&3],Y[K>>2]|=(128|W>>6&63)<<E[K++&3],Y[K>>2]|=(128|W&63)<<E[K++&3]):(W=65536+((W&1023)<<10|A.charCodeAt(++F)&1023),Y[K>>2]|=(240|W>>18)<<E[K++&3],Y[K>>2]|=(128|W>>12&63)<<E[K++&3],Y[K>>2]|=(128|W>>6&63)<<E[K++&3],Y[K>>2]|=(128|W&63)<<E[K++&3]);if(this.lastByteIndex=K,K>=X){for(this.start=K-X,this.block=Y[fe],K=0;K<fe;++K)B[K]^=Y[K];J(B),this.reset=!0}else this.start=K}return this},y.prototype.encode=function(A,z){var H=A&255,Y=1,X=[H];for(A=A>>8,H=A&255;H>0;)X.unshift(H),A=A>>8,H=A&255,++Y;return z?X.push(Y):X.unshift(Y),this.update(X),X.length},y.prototype.encodeString=function(A){var z,H=typeof A;if(H!=="string"){if(H==="object"){if(A===null)throw new Error(e);if(c&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!c||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);z=!0}var Y=0,X=A.length;if(z)Y=X;else for(var ae=0;ae<A.length;++ae){var fe=A.charCodeAt(ae);fe<128?Y+=1:fe<2048?Y+=2:fe<55296||fe>=57344?Y+=3:(fe=65536+((fe&1023)<<10|A.charCodeAt(++ae)&1023),Y+=4)}return Y+=this.encode(Y*8),this.update(A),Y},y.prototype.bytepad=function(A,z){for(var H=this.encode(z),Y=0;Y<A.length;++Y)H+=this.encodeString(A[Y]);var X=z-H%z,ae=[];return ae.length=X,this.update(ae),this},y.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var A=this.blocks,z=this.lastByteIndex,H=this.blockCount,Y=this.s;if(A[z>>2]|=this.padding[z&3],this.lastByteIndex===this.byteCount)for(A[0]=A[H],z=1;z<H+1;++z)A[z]=0;for(A[H-1]|=2147483648,z=0;z<H;++z)Y[z]^=A[z];J(Y)}},y.prototype.toString=y.prototype.hex=function(){this.finalize();for(var A=this.blockCount,z=this.s,H=this.outputBlocks,Y=this.extraBytes,X=0,ae=0,fe="",F;ae<H;){for(X=0;X<A&&ae<H;++X,++ae)F=z[X],fe+=f[F>>4&15]+f[F&15]+f[F>>12&15]+f[F>>8&15]+f[F>>20&15]+f[F>>16&15]+f[F>>28&15]+f[F>>24&15];ae%A===0&&(J(z),X=0)}return Y&&(F=z[X],fe+=f[F>>4&15]+f[F&15],Y>1&&(fe+=f[F>>12&15]+f[F>>8&15]),Y>2&&(fe+=f[F>>20&15]+f[F>>16&15])),fe},y.prototype.arrayBuffer=function(){this.finalize();var A=this.blockCount,z=this.s,H=this.outputBlocks,Y=this.extraBytes,X=0,ae=0,fe=this.outputBits>>3,F;Y?F=new ArrayBuffer(H+1<<2):F=new ArrayBuffer(fe);for(var B=new Uint32Array(F);ae<H;){for(X=0;X<A&&ae<H;++X,++ae)B[ae]=z[X];ae%A===0&&J(z)}return Y&&(B[X]=z[X],F=F.slice(0,fe)),F},y.prototype.buffer=y.prototype.arrayBuffer,y.prototype.digest=y.prototype.array=function(){this.finalize();for(var A=this.blockCount,z=this.s,H=this.outputBlocks,Y=this.extraBytes,X=0,ae=0,fe=[],F,B;ae<H;){for(X=0;X<A&&ae<H;++X,++ae)F=ae<<2,B=z[X],fe[F]=B&255,fe[F+1]=B>>8&255,fe[F+2]=B>>16&255,fe[F+3]=B>>24&255;ae%A===0&&J(z)}return Y&&(F=ae<<2,B=z[X],fe[F]=B&255,Y>1&&(fe[F+1]=B>>8&255),Y>2&&(fe[F+2]=B>>16&255)),fe};function D(A,z,H){y.call(this,A,z,H)}D.prototype=new y,D.prototype.finalize=function(){return this.encode(this.outputBits,!0),y.prototype.finalize.call(this)};var J=function(A){var z,H,Y,X,ae,fe,F,B,K,W,Q,ee,te,ie,re,Z,ce,se,ne,he,ge,le,ve,De,pe,Ne,Ce,me,Ue,Oe,ye,ze,Ye,we,Ge,Ze,Se,je,ke,xe,Ke,Ve,_e,Xe,Qe,Me,et,tt,Ee,He,Be,Ie,rt,it,Ae,nt,Le,Je,er,tr,rr,ir,Et;for(Y=0;Y<48;Y+=2)X=A[0]^A[10]^A[20]^A[30]^A[40],ae=A[1]^A[11]^A[21]^A[31]^A[41],fe=A[2]^A[12]^A[22]^A[32]^A[42],F=A[3]^A[13]^A[23]^A[33]^A[43],B=A[4]^A[14]^A[24]^A[34]^A[44],K=A[5]^A[15]^A[25]^A[35]^A[45],W=A[6]^A[16]^A[26]^A[36]^A[46],Q=A[7]^A[17]^A[27]^A[37]^A[47],ee=A[8]^A[18]^A[28]^A[38]^A[48],te=A[9]^A[19]^A[29]^A[39]^A[49],z=ee^(fe<<1|F>>>31),H=te^(F<<1|fe>>>31),A[0]^=z,A[1]^=H,A[10]^=z,A[11]^=H,A[20]^=z,A[21]^=H,A[30]^=z,A[31]^=H,A[40]^=z,A[41]^=H,z=X^(B<<1|K>>>31),H=ae^(K<<1|B>>>31),A[2]^=z,A[3]^=H,A[12]^=z,A[13]^=H,A[22]^=z,A[23]^=H,A[32]^=z,A[33]^=H,A[42]^=z,A[43]^=H,z=fe^(W<<1|Q>>>31),H=F^(Q<<1|W>>>31),A[4]^=z,A[5]^=H,A[14]^=z,A[15]^=H,A[24]^=z,A[25]^=H,A[34]^=z,A[35]^=H,A[44]^=z,A[45]^=H,z=B^(ee<<1|te>>>31),H=K^(te<<1|ee>>>31),A[6]^=z,A[7]^=H,A[16]^=z,A[17]^=H,A[26]^=z,A[27]^=H,A[36]^=z,A[37]^=H,A[46]^=z,A[47]^=H,z=W^(X<<1|ae>>>31),H=Q^(ae<<1|X>>>31),A[8]^=z,A[9]^=H,A[18]^=z,A[19]^=H,A[28]^=z,A[29]^=H,A[38]^=z,A[39]^=H,A[48]^=z,A[49]^=H,ie=A[0],re=A[1],Me=A[11]<<4|A[10]>>>28,et=A[10]<<4|A[11]>>>28,me=A[20]<<3|A[21]>>>29,Ue=A[21]<<3|A[20]>>>29,tr=A[31]<<9|A[30]>>>23,rr=A[30]<<9|A[31]>>>23,Ve=A[40]<<18|A[41]>>>14,_e=A[41]<<18|A[40]>>>14,we=A[2]<<1|A[3]>>>31,Ge=A[3]<<1|A[2]>>>31,Z=A[13]<<12|A[12]>>>20,ce=A[12]<<12|A[13]>>>20,tt=A[22]<<10|A[23]>>>22,Ee=A[23]<<10|A[22]>>>22,Oe=A[33]<<13|A[32]>>>19,ye=A[32]<<13|A[33]>>>19,ir=A[42]<<2|A[43]>>>30,Et=A[43]<<2|A[42]>>>30,it=A[5]<<30|A[4]>>>2,Ae=A[4]<<30|A[5]>>>2,Ze=A[14]<<6|A[15]>>>26,Se=A[15]<<6|A[14]>>>26,se=A[25]<<11|A[24]>>>21,ne=A[24]<<11|A[25]>>>21,He=A[34]<<15|A[35]>>>17,Be=A[35]<<15|A[34]>>>17,ze=A[45]<<29|A[44]>>>3,Ye=A[44]<<29|A[45]>>>3,De=A[6]<<28|A[7]>>>4,pe=A[7]<<28|A[6]>>>4,nt=A[17]<<23|A[16]>>>9,Le=A[16]<<23|A[17]>>>9,je=A[26]<<25|A[27]>>>7,ke=A[27]<<25|A[26]>>>7,he=A[36]<<21|A[37]>>>11,ge=A[37]<<21|A[36]>>>11,Ie=A[47]<<24|A[46]>>>8,rt=A[46]<<24|A[47]>>>8,Xe=A[8]<<27|A[9]>>>5,Qe=A[9]<<27|A[8]>>>5,Ne=A[18]<<20|A[19]>>>12,Ce=A[19]<<20|A[18]>>>12,Je=A[29]<<7|A[28]>>>25,er=A[28]<<7|A[29]>>>25,xe=A[38]<<8|A[39]>>>24,Ke=A[39]<<8|A[38]>>>24,le=A[48]<<14|A[49]>>>18,ve=A[49]<<14|A[48]>>>18,A[0]=ie^~Z&se,A[1]=re^~ce&ne,A[10]=De^~Ne&me,A[11]=pe^~Ce&Ue,A[20]=we^~Ze&je,A[21]=Ge^~Se&ke,A[30]=Xe^~Me&tt,A[31]=Qe^~et&Ee,A[40]=it^~nt&Je,A[41]=Ae^~Le&er,A[2]=Z^~se&he,A[3]=ce^~ne&ge,A[12]=Ne^~me&Oe,A[13]=Ce^~Ue&ye,A[22]=Ze^~je&xe,A[23]=Se^~ke&Ke,A[32]=Me^~tt&He,A[33]=et^~Ee&Be,A[42]=nt^~Je&tr,A[43]=Le^~er&rr,A[4]=se^~he&le,A[5]=ne^~ge&ve,A[14]=me^~Oe&ze,A[15]=Ue^~ye&Ye,A[24]=je^~xe&Ve,A[25]=ke^~Ke&_e,A[34]=tt^~He&Ie,A[35]=Ee^~Be&rt,A[44]=Je^~tr&ir,A[45]=er^~rr&Et,A[6]=he^~le&ie,A[7]=ge^~ve&re,A[16]=Oe^~ze&De,A[17]=ye^~Ye&pe,A[26]=xe^~Ve&we,A[27]=Ke^~_e&Ge,A[36]=He^~Ie&Xe,A[37]=Be^~rt&Qe,A[46]=tr^~ir&it,A[47]=rr^~Et&Ae,A[8]=le^~ie&Z,A[9]=ve^~re&ce,A[18]=ze^~De&Ne,A[19]=Ye^~pe&Ce,A[28]=Ve^~we&Ze,A[29]=_e^~Ge&Se,A[38]=Ie^~Xe&Me,A[39]=rt^~Qe&et,A[48]=ir^~it&nt,A[49]=Et^~Ae&Le,A[0]^=I[Y],A[1]^=I[Y+1]};if(a)t.exports=u;else for(v=0;v<l.length;++v)n[l[v]]=u[l[v]]})()}(gf)),gf.exports}var X6=Z6();const Q6=Qn(X6);function R1(t){return"0x"+Q6.keccak_256(Rt(t))}const e4="address/5.7.0",Ss=new gt(e4);function Sl(t){Qr(t,20)||Ss.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let n=0;n<40;n++)r[n]=e[n].charCodeAt(0);const i=Rt(R1(r));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(e[n]=e[n].toUpperCase()),(i[n>>1]&15)>=8&&(e[n+1]=e[n+1].toUpperCase());return"0x"+e.join("")}const t4=9007199254740991;function r4(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const mu={};for(let t=0;t<10;t++)mu[String(t)]=String(t);for(let t=0;t<26;t++)mu[String.fromCharCode(65+t)]=String(10+t);const Ml=Math.floor(r4(t4));function i4(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(i=>mu[i]).join("");for(;e.length>=Ml;){let i=e.substring(0,Ml);e=parseInt(i,10)%97+e.substring(i.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function n4(t){let e=null;if(typeof t!="string"&&Ss.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=Sl(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Ss.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==i4(t)&&Ss.throwArgumentError("bad icap checksum","address",t),e=Y6(t.substring(4));e.length<40;)e="0"+e;e=Sl("0x"+e)}else Ss.throwArgumentError("invalid address","address",t);return e}function gs(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}var bf={},ot={},vf,Il;function Mn(){if(Il)return vf;Il=1,vf=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,i,n){if(r!=i)throw new Error(n||"Assertion failed: "+r+" != "+i)},vf}var xo={exports:{}},Al;function Sa(){return Al||(Al=1,typeof Object.create=="function"?xo.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:xo.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}}),xo.exports}var Dl;function ri(){if(Dl)return ot;Dl=1;var t=Mn(),e=Sa();ot.inherits=e;function r(p,d){return(p.charCodeAt(d)&64512)!==55296||d<0||d+1>=p.length?!1:(p.charCodeAt(d+1)&64512)===56320}function i(p,d){if(Array.isArray(p))return p.slice();if(!p)return[];var u=[];if(typeof p=="string")if(d){if(d==="hex")for(p=p.replace(/[^a-z0-9]+/ig,""),p.length%2!==0&&(p="0"+p),v=0;v<p.length;v+=2)u.push(parseInt(p[v]+p[v+1],16))}else for(var l=0,v=0;v<p.length;v++){var m=p.charCodeAt(v);m<128?u[l++]=m:m<2048?(u[l++]=m>>6|192,u[l++]=m&63|128):r(p,v)?(m=65536+((m&1023)<<10)+(p.charCodeAt(++v)&1023),u[l++]=m>>18|240,u[l++]=m>>12&63|128,u[l++]=m>>6&63|128,u[l++]=m&63|128):(u[l++]=m>>12|224,u[l++]=m>>6&63|128,u[l++]=m&63|128)}else for(v=0;v<p.length;v++)u[v]=p[v]|0;return u}ot.toArray=i;function n(p){for(var d="",u=0;u<p.length;u++)d+=a(p[u].toString(16));return d}ot.toHex=n;function s(p){var d=p>>>24|p>>>8&65280|p<<8&16711680|(p&255)<<24;return d>>>0}ot.htonl=s;function o(p,d){for(var u="",l=0;l<p.length;l++){var v=p[l];d==="little"&&(v=s(v)),u+=c(v.toString(16))}return u}ot.toHex32=o;function a(p){return p.length===1?"0"+p:p}ot.zero2=a;function c(p){return p.length===7?"0"+p:p.length===6?"00"+p:p.length===5?"000"+p:p.length===4?"0000"+p:p.length===3?"00000"+p:p.length===2?"000000"+p:p.length===1?"0000000"+p:p}ot.zero8=c;function f(p,d,u,l){var v=u-d;t(v%4===0);for(var m=new Array(v/4),M=0,_=d;M<m.length;M++,_+=4){var b;l==="big"?b=p[_]<<24|p[_+1]<<16|p[_+2]<<8|p[_+3]:b=p[_+3]<<24|p[_+2]<<16|p[_+1]<<8|p[_],m[M]=b>>>0}return m}ot.join32=f;function h(p,d){for(var u=new Array(p.length*4),l=0,v=0;l<p.length;l++,v+=4){var m=p[l];d==="big"?(u[v]=m>>>24,u[v+1]=m>>>16&255,u[v+2]=m>>>8&255,u[v+3]=m&255):(u[v+3]=m>>>24,u[v+2]=m>>>16&255,u[v+1]=m>>>8&255,u[v]=m&255)}return u}ot.split32=h;function g(p,d){return p>>>d|p<<32-d}ot.rotr32=g;function w(p,d){return p<<d|p>>>32-d}ot.rotl32=w;function S(p,d){return p+d>>>0}ot.sum32=S;function E(p,d,u){return p+d+u>>>0}ot.sum32_3=E;function I(p,d,u,l){return p+d+u+l>>>0}ot.sum32_4=I;function N(p,d,u,l,v){return p+d+u+l+v>>>0}ot.sum32_5=N;function C(p,d,u,l){var v=p[d],m=p[d+1],M=l+m>>>0,_=(M<l?1:0)+u+v;p[d]=_>>>0,p[d+1]=M}ot.sum64=C;function T(p,d,u,l){var v=d+l>>>0,m=(v<d?1:0)+p+u;return m>>>0}ot.sum64_hi=T;function L(p,d,u,l){var v=d+l;return v>>>0}ot.sum64_lo=L;function R(p,d,u,l,v,m,M,_){var b=0,x=d;x=x+l>>>0,b+=x<d?1:0,x=x+m>>>0,b+=x<m?1:0,x=x+_>>>0,b+=x<_?1:0;var y=p+u+v+M+b;return y>>>0}ot.sum64_4_hi=R;function $(p,d,u,l,v,m,M,_){var b=d+l+m+_;return b>>>0}ot.sum64_4_lo=$;function P(p,d,u,l,v,m,M,_,b,x){var y=0,D=d;D=D+l>>>0,y+=D<d?1:0,D=D+m>>>0,y+=D<m?1:0,D=D+_>>>0,y+=D<_?1:0,D=D+x>>>0,y+=D<x?1:0;var J=p+u+v+M+b+y;return J>>>0}ot.sum64_5_hi=P;function U(p,d,u,l,v,m,M,_,b,x){var y=d+l+m+_+x;return y>>>0}ot.sum64_5_lo=U;function k(p,d,u){var l=d<<32-u|p>>>u;return l>>>0}ot.rotr64_hi=k;function j(p,d,u){var l=p<<32-u|d>>>u;return l>>>0}ot.rotr64_lo=j;function G(p,d,u){return p>>>u}ot.shr64_hi=G;function O(p,d,u){var l=p<<32-u|d>>>u;return l>>>0}return ot.shr64_lo=O,ot}var yf={},Ol;function Qs(){if(Ol)return yf;Ol=1;var t=ri(),e=Mn();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return yf.BlockHash=r,r.prototype.update=function(n,s){if(n=t.toArray(n,s),this.pending?this.pending=this.pending.concat(n):this.pending=n,this.pendingTotal+=n.length,this.pending.length>=this._delta8){n=this.pending;var o=n.length%this._delta8;this.pending=n.slice(n.length-o,n.length),this.pending.length===0&&(this.pending=null),n=t.join32(n,0,n.length-o,this.endian);for(var a=0;a<n.length;a+=this._delta32)this._update(n,a,a+this._delta32)}return this},r.prototype.digest=function(n){return this.update(this._pad()),e(this.pending===null),this._digest(n)},r.prototype._pad=function(){var n=this.pendingTotal,s=this._delta8,o=s-(n+this.padLength)%s,a=new Array(o+this.padLength);a[0]=128;for(var c=1;c<o;c++)a[c]=0;if(n<<=3,this.endian==="big"){for(var f=8;f<this.padLength;f++)a[c++]=0;a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=n>>>24&255,a[c++]=n>>>16&255,a[c++]=n>>>8&255,a[c++]=n&255}else for(a[c++]=n&255,a[c++]=n>>>8&255,a[c++]=n>>>16&255,a[c++]=n>>>24&255,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,f=8;f<this.padLength;f++)a[c++]=0;return a},yf}var sn={},Kr={},Rl;function P1(){if(Rl)return Kr;Rl=1;var t=ri(),e=t.rotr32;function r(h,g,w,S){if(h===0)return i(g,w,S);if(h===1||h===3)return s(g,w,S);if(h===2)return n(g,w,S)}Kr.ft_1=r;function i(h,g,w){return h&g^~h&w}Kr.ch32=i;function n(h,g,w){return h&g^h&w^g&w}Kr.maj32=n;function s(h,g,w){return h^g^w}Kr.p32=s;function o(h){return e(h,2)^e(h,13)^e(h,22)}Kr.s0_256=o;function a(h){return e(h,6)^e(h,11)^e(h,25)}Kr.s1_256=a;function c(h){return e(h,7)^e(h,18)^h>>>3}Kr.g0_256=c;function f(h){return e(h,17)^e(h,19)^h>>>10}return Kr.g1_256=f,Kr}var mf,Pl;function s4(){if(Pl)return mf;Pl=1;var t=ri(),e=Qs(),r=P1(),i=t.rotl32,n=t.sum32,s=t.sum32_5,o=r.ft_1,a=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(f,a),mf=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(g,w){for(var S=this.W,E=0;E<16;E++)S[E]=g[w+E];for(;E<S.length;E++)S[E]=i(S[E-3]^S[E-8]^S[E-14]^S[E-16],1);var I=this.h[0],N=this.h[1],C=this.h[2],T=this.h[3],L=this.h[4];for(E=0;E<S.length;E++){var R=~~(E/20),$=s(i(I,5),o(R,N,C,T),L,S[E],c[R]);L=T,T=C,C=i(N,30),N=I,I=$}this.h[0]=n(this.h[0],I),this.h[1]=n(this.h[1],N),this.h[2]=n(this.h[2],C),this.h[3]=n(this.h[3],T),this.h[4]=n(this.h[4],L)},f.prototype._digest=function(g){return g==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},mf}var wf,Nl;function N1(){if(Nl)return wf;Nl=1;var t=ri(),e=Qs(),r=P1(),i=Mn(),n=t.sum32,s=t.sum32_4,o=t.sum32_5,a=r.ch32,c=r.maj32,f=r.s0_256,h=r.s1_256,g=r.g0_256,w=r.g1_256,S=e.BlockHash,E=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function I(){if(!(this instanceof I))return new I;S.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=E,this.W=new Array(64)}return t.inherits(I,S),wf=I,I.blockSize=512,I.outSize=256,I.hmacStrength=192,I.padLength=64,I.prototype._update=function(C,T){for(var L=this.W,R=0;R<16;R++)L[R]=C[T+R];for(;R<L.length;R++)L[R]=s(w(L[R-2]),L[R-7],g(L[R-15]),L[R-16]);var $=this.h[0],P=this.h[1],U=this.h[2],k=this.h[3],j=this.h[4],G=this.h[5],O=this.h[6],p=this.h[7];for(i(this.k.length===L.length),R=0;R<L.length;R++){var d=o(p,h(j),a(j,G,O),this.k[R],L[R]),u=n(f($),c($,P,U));p=O,O=G,G=j,j=n(k,d),k=U,U=P,P=$,$=n(d,u)}this.h[0]=n(this.h[0],$),this.h[1]=n(this.h[1],P),this.h[2]=n(this.h[2],U),this.h[3]=n(this.h[3],k),this.h[4]=n(this.h[4],j),this.h[5]=n(this.h[5],G),this.h[6]=n(this.h[6],O),this.h[7]=n(this.h[7],p)},I.prototype._digest=function(C){return C==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},wf}var _f,Cl;function o4(){if(Cl)return _f;Cl=1;var t=ri(),e=N1();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),_f=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(n){return n==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},_f}var xf,Tl;function C1(){if(Tl)return xf;Tl=1;var t=ri(),e=Qs(),r=Mn(),i=t.rotr64_hi,n=t.rotr64_lo,s=t.shr64_hi,o=t.shr64_lo,a=t.sum64,c=t.sum64_hi,f=t.sum64_lo,h=t.sum64_4_hi,g=t.sum64_4_lo,w=t.sum64_5_hi,S=t.sum64_5_lo,E=e.BlockHash,I=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function N(){if(!(this instanceof N))return new N;E.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=I,this.W=new Array(160)}t.inherits(N,E),xf=N,N.blockSize=1024,N.outSize=512,N.hmacStrength=192,N.padLength=128,N.prototype._prepareBlock=function(u,l){for(var v=this.W,m=0;m<32;m++)v[m]=u[l+m];for(;m<v.length;m+=2){var M=O(v[m-4],v[m-3]),_=p(v[m-4],v[m-3]),b=v[m-14],x=v[m-13],y=j(v[m-30],v[m-29]),D=G(v[m-30],v[m-29]),J=v[m-32],A=v[m-31];v[m]=h(M,_,b,x,y,D,J,A),v[m+1]=g(M,_,b,x,y,D,J,A)}},N.prototype._update=function(u,l){this._prepareBlock(u,l);var v=this.W,m=this.h[0],M=this.h[1],_=this.h[2],b=this.h[3],x=this.h[4],y=this.h[5],D=this.h[6],J=this.h[7],A=this.h[8],z=this.h[9],H=this.h[10],Y=this.h[11],X=this.h[12],ae=this.h[13],fe=this.h[14],F=this.h[15];r(this.k.length===v.length);for(var B=0;B<v.length;B+=2){var K=fe,W=F,Q=U(A,z),ee=k(A,z),te=C(A,z,H,Y,X),ie=T(A,z,H,Y,X,ae),re=this.k[B],Z=this.k[B+1],ce=v[B],se=v[B+1],ne=w(K,W,Q,ee,te,ie,re,Z,ce,se),he=S(K,W,Q,ee,te,ie,re,Z,ce,se);K=$(m,M),W=P(m,M),Q=L(m,M,_,b,x),ee=R(m,M,_,b,x,y);var ge=c(K,W,Q,ee),le=f(K,W,Q,ee);fe=X,F=ae,X=H,ae=Y,H=A,Y=z,A=c(D,J,ne,he),z=f(J,J,ne,he),D=x,J=y,x=_,y=b,_=m,b=M,m=c(ne,he,ge,le),M=f(ne,he,ge,le)}a(this.h,0,m,M),a(this.h,2,_,b),a(this.h,4,x,y),a(this.h,6,D,J),a(this.h,8,A,z),a(this.h,10,H,Y),a(this.h,12,X,ae),a(this.h,14,fe,F)},N.prototype._digest=function(u){return u==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function C(d,u,l,v,m){var M=d&l^~d&m;return M<0&&(M+=4294967296),M}function T(d,u,l,v,m,M){var _=u&v^~u&M;return _<0&&(_+=4294967296),_}function L(d,u,l,v,m){var M=d&l^d&m^l&m;return M<0&&(M+=4294967296),M}function R(d,u,l,v,m,M){var _=u&v^u&M^v&M;return _<0&&(_+=4294967296),_}function $(d,u){var l=i(d,u,28),v=i(u,d,2),m=i(u,d,7),M=l^v^m;return M<0&&(M+=4294967296),M}function P(d,u){var l=n(d,u,28),v=n(u,d,2),m=n(u,d,7),M=l^v^m;return M<0&&(M+=4294967296),M}function U(d,u){var l=i(d,u,14),v=i(d,u,18),m=i(u,d,9),M=l^v^m;return M<0&&(M+=4294967296),M}function k(d,u){var l=n(d,u,14),v=n(d,u,18),m=n(u,d,9),M=l^v^m;return M<0&&(M+=4294967296),M}function j(d,u){var l=i(d,u,1),v=i(d,u,8),m=s(d,u,7),M=l^v^m;return M<0&&(M+=4294967296),M}function G(d,u){var l=n(d,u,1),v=n(d,u,8),m=o(d,u,7),M=l^v^m;return M<0&&(M+=4294967296),M}function O(d,u){var l=i(d,u,19),v=i(u,d,29),m=s(d,u,6),M=l^v^m;return M<0&&(M+=4294967296),M}function p(d,u){var l=n(d,u,19),v=n(u,d,29),m=o(d,u,6),M=l^v^m;return M<0&&(M+=4294967296),M}return xf}var Ef,Fl;function a4(){if(Fl)return Ef;Fl=1;var t=ri(),e=C1();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),Ef=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(n){return n==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},Ef}var $l;function f4(){return $l||($l=1,sn.sha1=s4(),sn.sha224=o4(),sn.sha256=N1(),sn.sha384=a4(),sn.sha512=C1()),sn}var Sf={},Ll;function c4(){if(Ll)return Sf;Ll=1;var t=ri(),e=Qs(),r=t.rotl32,i=t.sum32,n=t.sum32_3,s=t.sum32_4,o=e.BlockHash;function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(a,o),Sf.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(N,C){for(var T=this.h[0],L=this.h[1],R=this.h[2],$=this.h[3],P=this.h[4],U=T,k=L,j=R,G=$,O=P,p=0;p<80;p++){var d=i(r(s(T,c(p,L,R,$),N[g[p]+C],f(p)),S[p]),P);T=P,P=$,$=r(R,10),R=L,L=d,d=i(r(s(U,c(79-p,k,j,G),N[w[p]+C],h(p)),E[p]),O),U=O,O=G,G=r(j,10),j=k,k=d}d=n(this.h[1],R,G),this.h[1]=n(this.h[2],$,O),this.h[2]=n(this.h[3],P,U),this.h[3]=n(this.h[4],T,k),this.h[4]=n(this.h[0],L,j),this.h[0]=d},a.prototype._digest=function(N){return N==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function c(I,N,C,T){return I<=15?N^C^T:I<=31?N&C|~N&T:I<=47?(N|~C)^T:I<=63?N&T|C&~T:N^(C|~T)}function f(I){return I<=15?0:I<=31?1518500249:I<=47?1859775393:I<=63?2400959708:2840853838}function h(I){return I<=15?1352829926:I<=31?1548603684:I<=47?1836072691:I<=63?2053994217:0}var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],w=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],S=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],E=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Sf}var Mf,ql;function u4(){if(ql)return Mf;ql=1;var t=ri(),e=Mn();function r(i,n,s){if(!(this instanceof r))return new r(i,n,s);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(n,s))}return Mf=r,r.prototype._init=function(n){n.length>this.blockSize&&(n=new this.Hash().update(n).digest()),e(n.length<=this.blockSize);for(var s=n.length;s<this.blockSize;s++)n.push(0);for(s=0;s<n.length;s++)n[s]^=54;for(this.inner=new this.Hash().update(n),s=0;s<n.length;s++)n[s]^=106;this.outer=new this.Hash().update(n)},r.prototype.update=function(n,s){return this.inner.update(n,s),this},r.prototype.digest=function(n){return this.outer.update(this.inner.digest()),this.outer.digest(n)},Mf}var Bl;function Ma(){return Bl||(Bl=1,function(t){var e=t;e.utils=ri(),e.common=Qs(),e.sha=f4(),e.ripemd=c4(),e.hmac=u4(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(bf)),bf}var h4=Ma();const wi=Qn(h4);function rs(t,e,r){return r={path:e,exports:{},require:function(i,n){return l4(i,n??r.path)}},t(r,r.exports),r.exports}function l4(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var wu=T1;function T1(t,e){if(!t)throw new Error(e||"Assertion failed")}T1.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)};var qr=rs(function(t,e){var r=e;function i(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var f=0;f<o.length;f++)c[f]=o[f]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var f=0;f<o.length;f+=2)c.push(parseInt(o[f]+o[f+1],16))}else for(var f=0;f<o.length;f++){var h=o.charCodeAt(f),g=h>>8,w=h&255;g?c.push(g,w):c.push(w)}return c}r.toArray=i;function n(o){return o.length===1?"0"+o:o}r.zero2=n;function s(o){for(var a="",c=0;c<o.length;c++)a+=n(o[c].toString(16));return a}r.toHex=s,r.encode=function(a,c){return c==="hex"?s(a):a}}),vr=rs(function(t,e){var r=e;r.assert=wu,r.toArray=qr.toArray,r.zero2=qr.zero2,r.toHex=qr.toHex,r.encode=qr.encode;function i(c,f,h){var g=new Array(Math.max(c.bitLength(),h)+1);g.fill(0);for(var w=1<<f+1,S=c.clone(),E=0;E<g.length;E++){var I,N=S.andln(w-1);S.isOdd()?(N>(w>>1)-1?I=(w>>1)-N:I=N,S.isubn(I)):I=0,g[E]=I,S.iushrn(1)}return g}r.getNAF=i;function n(c,f){var h=[[],[]];c=c.clone(),f=f.clone();for(var g=0,w=0,S;c.cmpn(-g)>0||f.cmpn(-w)>0;){var E=c.andln(3)+g&3,I=f.andln(3)+w&3;E===3&&(E=-1),I===3&&(I=-1);var N;E&1?(S=c.andln(7)+g&7,(S===3||S===5)&&I===2?N=-E:N=E):N=0,h[0].push(N);var C;I&1?(S=f.andln(7)+w&7,(S===3||S===5)&&E===2?C=-I:C=I):C=0,h[1].push(C),2*g===N+1&&(g=1-g),2*w===C+1&&(w=1-w),c.iushrn(1),f.iushrn(1)}return h}r.getJSF=n;function s(c,f,h){var g="_"+f;c.prototype[f]=function(){return this[g]!==void 0?this[g]:this[g]=h.call(this)}}r.cachedProperty=s;function o(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=o;function a(c){return new Pe(c,"hex","le")}r.intFromLE=a}),ia=vr.getNAF,d4=vr.getJSF,na=vr.assert;function Yi(t,e){this.type=t,this.p=new Pe(e.p,16),this.red=e.prime?Pe.red(e.prime):Pe.mont(this.p),this.zero=new Pe(0).toRed(this.red),this.one=new Pe(1).toRed(this.red),this.two=new Pe(2).toRed(this.red),this.n=e.n&&new Pe(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var In=Yi;Yi.prototype.point=function(){throw new Error("Not implemented")};Yi.prototype.validate=function(){throw new Error("Not implemented")};Yi.prototype._fixedNafMul=function(e,r){na(e.precomputed);var i=e._getDoubles(),n=ia(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<n.length;a+=i.step){c=0;for(var f=a+i.step-1;f>=a;f--)c=(c<<1)+n[f];o.push(c)}for(var h=this.jpoint(null,null,null),g=this.jpoint(null,null,null),w=s;w>0;w--){for(a=0;a<o.length;a++)c=o[a],c===w?g=g.mixedAdd(i.points[a]):c===-w&&(g=g.mixedAdd(i.points[a].neg()));h=h.add(g)}return h.toP()};Yi.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=ia(r,i,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var f=0;c>=0&&o[c]===0;c--)f++;if(c>=0&&f++,a=a.dblp(f),c<0)break;var h=o[c];na(h!==0),e.type==="affine"?h>0?a=a.mixedAdd(s[h-1>>1]):a=a.mixedAdd(s[-h-1>>1].neg()):h>0?a=a.add(s[h-1>>1]):a=a.add(s[-h-1>>1].neg())}return e.type==="affine"?a.toP():a};Yi.prototype._wnafMulAdd=function(e,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,f=0,h,g,w;for(h=0;h<n;h++){w=r[h];var S=w._getNAFPoints(e);o[h]=S.wnd,a[h]=S.points}for(h=n-1;h>=1;h-=2){var E=h-1,I=h;if(o[E]!==1||o[I]!==1){c[E]=ia(i[E],o[E],this._bitLength),c[I]=ia(i[I],o[I],this._bitLength),f=Math.max(c[E].length,f),f=Math.max(c[I].length,f);continue}var N=[r[E],null,null,r[I]];r[E].y.cmp(r[I].y)===0?(N[1]=r[E].add(r[I]),N[2]=r[E].toJ().mixedAdd(r[I].neg())):r[E].y.cmp(r[I].y.redNeg())===0?(N[1]=r[E].toJ().mixedAdd(r[I]),N[2]=r[E].add(r[I].neg())):(N[1]=r[E].toJ().mixedAdd(r[I]),N[2]=r[E].toJ().mixedAdd(r[I].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],T=d4(i[E],i[I]);for(f=Math.max(T[0].length,f),c[E]=new Array(f),c[I]=new Array(f),g=0;g<f;g++){var L=T[0][g]|0,R=T[1][g]|0;c[E][g]=C[(L+1)*3+(R+1)],c[I][g]=0,a[E]=N}}var $=this.jpoint(null,null,null),P=this._wnafT4;for(h=f;h>=0;h--){for(var U=0;h>=0;){var k=!0;for(g=0;g<n;g++)P[g]=c[g][h]|0,P[g]!==0&&(k=!1);if(!k)break;U++,h--}if(h>=0&&U++,$=$.dblp(U),h<0)break;for(g=0;g<n;g++){var j=P[g];j!==0&&(j>0?w=a[g][j-1>>1]:j<0&&(w=a[g][-j-1>>1].neg()),w.type==="affine"?$=$.mixedAdd(w):$=$.add(w))}}for(h=0;h<n;h++)a[h]=null;return s?$:$.toP()};function Ar(t,e){this.curve=t,this.type=e,this.precomputed=null}Yi.BasePoint=Ar;Ar.prototype.eq=function(){throw new Error("Not implemented")};Ar.prototype.validate=function(){return this.curve.validate(this)};Yi.prototype.decodePoint=function(e,r){e=vr.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?na(e[e.length-1]%2===0):e[0]===7&&na(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Ar.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Ar.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Ar.prototype.encode=function(e,r){return vr.encode(this._encode(r),e)};Ar.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Ar.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Ar.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)n=n.dbl();i.push(n)}return{step:e,points:i}};Ar.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}};Ar.prototype._getBeta=function(){return null};Ar.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r};var _u=rs(function(t){typeof Object.create=="function"?t.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,i){if(i){r.super_=i;var n=function(){};n.prototype=i.prototype,r.prototype=new n,r.prototype.constructor=r}}}),p4=vr.assert;function Dr(t){In.call(this,"short",t),this.a=new Pe(t.a,16).toRed(this.red),this.b=new Pe(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_u(Dr,In);var g4=Dr;Dr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new Pe(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new Pe(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],p4(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Pe(a.a,16),b:new Pe(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}};Dr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Pe.mont(e),i=new Pe(2).toRed(r).redInvm(),n=i.redNeg(),s=new Pe(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]};Dr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new Pe(1),o=new Pe(0),a=new Pe(0),c=new Pe(1),f,h,g,w,S,E,I,N=0,C,T;i.cmpn(0)!==0;){var L=n.div(i);C=n.sub(L.mul(i)),T=a.sub(L.mul(s));var R=c.sub(L.mul(o));if(!g&&C.cmp(r)<0)f=I.neg(),h=s,g=C.neg(),w=T;else if(g&&++N===2)break;I=C,n=i,i=C,a=s,s=T,c=o,o=R}S=C.neg(),E=T;var $=g.sqr().add(w.sqr()),P=S.sqr().add(E.sqr());return P.cmp($)>=0&&(S=f,E=h),g.negative&&(g=g.neg(),w=w.neg()),S.negative&&(S=S.neg(),E=E.neg()),[{a:g,b:w},{a:S,b:E}]};Dr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),c=o.mul(n.a),f=s.mul(i.b),h=o.mul(n.b),g=e.sub(a).sub(c),w=f.add(h).neg();return{k1:g,k2:w}};Dr.prototype.pointFromX=function(e,r){e=new Pe(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)};Dr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};Dr.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],f=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),f=f.neg(!0)),n[o*2]=c,n[o*2+1]=f,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var h=this._wnafMulAdd(1,n,s,o*2,i),g=0;g<o*2;g++)n[g]=null,s[g]=null;return h};function Ct(t,e,r,i){In.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Pe(e,16),this.y=new Pe(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}_u(Ct,In.BasePoint);Dr.prototype.point=function(e,r,i){return new Ct(this,e,r,i)};Dr.prototype.pointFromJSON=function(e,r){return Ct.fromJSON(this,e,r)};Ct.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}};Ct.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ct.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(a){return e.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n};Ct.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ct.prototype.isInfinity=function(){return this.inf};Ct.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};Ct.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Ct.prototype.getX=function(){return this.x.fromRed()};Ct.prototype.getY=function(){return this.y.fromRed()};Ct.prototype.mul=function(e){return e=new Pe(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Ct.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)};Ct.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)};Ct.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Ct.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};Ct.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Lt(t,e,r,i){In.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Pe(0)):(this.x=new Pe(e,16),this.y=new Pe(r,16),this.z=new Pe(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}_u(Lt,In.BasePoint);Dr.prototype.jpoint=function(e,r,i){return new Lt(this,e,r,i)};Lt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)};Lt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Lt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),c=n.redSub(s),f=o.redSub(a);if(c.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=c.redSqr(),g=h.redMul(c),w=n.redMul(h),S=f.redSqr().redIAdd(g).redISub(w).redISub(w),E=f.redMul(w.redISub(S)).redISub(o.redMul(g)),I=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(S,E,I)};Lt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=i.redSub(n),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=a.redSqr(),h=f.redMul(a),g=i.redMul(f),w=c.redSqr().redIAdd(h).redISub(g).redISub(g),S=c.redMul(g.redISub(w)).redISub(s.redMul(h)),E=this.z.redMul(a);return this.curve.jpoint(w,S,E)};Lt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,f=c.redSqr().redSqr(),h=a.redAdd(a);for(r=0;r<e;r++){var g=o.redSqr(),w=h.redSqr(),S=w.redSqr(),E=g.redAdd(g).redIAdd(g).redIAdd(n.redMul(f)),I=o.redMul(w),N=E.redSqr().redISub(I.redAdd(I)),C=I.redISub(N),T=E.redMul(C);T=T.redIAdd(T).redISub(S);var L=h.redMul(c);r+1<e&&(f=f.redMul(S)),o=N,c=L,h=T}return this.curve.jpoint(o,h.redMul(s),c)};Lt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Lt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n),f=c.redSqr().redISub(a).redISub(a),h=o.redIAdd(o);h=h.redIAdd(h),h=h.redIAdd(h),e=f,r=c.redMul(a.redISub(f)).redISub(h),i=this.y.redAdd(this.y)}else{var g=this.x.redSqr(),w=this.y.redSqr(),S=w.redSqr(),E=this.x.redAdd(w).redSqr().redISub(g).redISub(S);E=E.redIAdd(E);var I=g.redAdd(g).redIAdd(g),N=I.redSqr(),C=S.redIAdd(S);C=C.redIAdd(C),C=C.redIAdd(C),e=N.redISub(E).redISub(E),r=I.redMul(E.redISub(e)).redISub(C),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)};Lt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),f=c.redSqr().redISub(a).redISub(a);e=f;var h=o.redIAdd(o);h=h.redIAdd(h),h=h.redIAdd(h),r=c.redMul(a.redISub(f)).redISub(h),i=this.y.redAdd(this.y)}else{var g=this.z.redSqr(),w=this.y.redSqr(),S=this.x.redMul(w),E=this.x.redSub(g).redMul(this.x.redAdd(g));E=E.redAdd(E).redIAdd(E);var I=S.redIAdd(S);I=I.redIAdd(I);var N=I.redAdd(I);e=E.redSqr().redISub(N),i=this.y.redAdd(this.z).redSqr().redISub(w).redISub(g);var C=w.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),r=E.redMul(I.redISub(e)).redISub(C)}return this.curve.jpoint(e,r,i)};Lt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),f=r.redAdd(r);f=f.redIAdd(f);var h=f.redMul(a),g=c.redSqr().redISub(h.redAdd(h)),w=h.redISub(g),S=a.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var E=c.redMul(w).redISub(S),I=i.redAdd(i).redMul(n);return this.curve.jpoint(g,E,I)};Lt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),f=n.redIAdd(n);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var h=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(f),g=r.redMul(h);g=g.redIAdd(g),g=g.redIAdd(g);var w=this.x.redMul(c).redISub(g);w=w.redIAdd(w),w=w.redIAdd(w);var S=this.y.redMul(h.redMul(f.redISub(h)).redISub(a.redMul(c)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var E=this.z.redAdd(a).redSqr().redISub(i).redISub(c);return this.curve.jpoint(w,S,E)};Lt.prototype.mul=function(e,r){return e=new Pe(e,r),this.curve._wnafMul(this,e)};Lt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0};Lt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};Lt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Lt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var qo=rs(function(t,e){var r=e;r.base=In,r.short=g4,r.mont=null,r.edwards=null}),Bo=rs(function(t,e){var r=e,i=vr.assert;function n(a){a.type==="short"?this.curve=new qo.short(a):a.type==="edwards"?this.curve=new qo.edwards(a):this.curve=new qo.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=n;function s(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var f=new n(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:f}),f}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:wi.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:wi.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:wi.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:wi.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:wi.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wi.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wi.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:wi.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Hi(t){if(!(this instanceof Hi))return new Hi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=qr.toArray(t.entropy,t.entropyEnc||"hex"),r=qr.toArray(t.nonce,t.nonceEnc||"hex"),i=qr.toArray(t.pers,t.persEnc||"hex");wu(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var F1=Hi;Hi.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};Hi.prototype._hmac=function(){return new wi.hmac(this.hash,this.K)};Hi.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Hi.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=qr.toArray(e,r),i=qr.toArray(i,n),wu(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};Hi.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=qr.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(i),this._reseed++,qr.encode(o,r)};var Rc=vr.assert;function jt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var xu=jt;jt.fromPublic=function(e,r,i){return r instanceof jt?r:new jt(e,{pub:r,pubEnc:i})};jt.fromPrivate=function(e,r,i){return r instanceof jt?r:new jt(e,{priv:r,privEnc:i})};jt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};jt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};jt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};jt.prototype._importPrivate=function(e,r){this.priv=new Pe(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};jt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Rc(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Rc(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};jt.prototype.derive=function(e){return e.validate()||Rc(e.validate(),"public point not validated"),e.mul(this.priv).getX()};jt.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)};jt.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};jt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var b4=vr.assert;function Ia(t,e){if(t instanceof Ia)return t;this._importDER(t,e)||(b4(t.r&&t.s,"Signature without r or s"),this.r=new Pe(t.r,16),this.s=new Pe(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Aa=Ia;function v4(){this.place=0}function If(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return n<=127?!1:(e.place=o,n)}function Ul(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Ia.prototype._importDER=function(e,r){e=vr.toArray(e,r);var i=new v4;if(e[i.place++]!==48)return!1;var n=If(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=If(e,i);if(s===!1)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var a=If(e,i);if(a===!1||e.length!==a+i.place)return!1;var c=e.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Pe(o),this.s=new Pe(c),this.recoveryParam=null,!0};function Af(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Ia.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=Ul(r),i=Ul(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];Af(n,r.length),n=n.concat(r),n.push(2),Af(n,i.length);var s=n.concat(i),o=[48];return Af(o,s.length),o=o.concat(s),vr.encode(o,e)};var y4=function(){throw new Error("unsupported")},$1=vr.assert;function Ir(t){if(!(this instanceof Ir))return new Ir(t);typeof t=="string"&&($1(Object.prototype.hasOwnProperty.call(Bo,t),"Unknown curve "+t),t=Bo[t]),t instanceof Bo.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var m4=Ir;Ir.prototype.keyPair=function(e){return new xu(this,e)};Ir.prototype.keyFromPrivate=function(e,r){return xu.fromPrivate(this,e,r)};Ir.prototype.keyFromPublic=function(e,r){return xu.fromPublic(this,e,r)};Ir.prototype.genKeyPair=function(e){e||(e={});for(var r=new F1({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||y4(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new Pe(2));;){var s=new Pe(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Ir.prototype._truncateToN=function(e,r){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Ir.prototype.sign=function(e,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),e=this._truncateToN(new Pe(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new F1({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),f=this.n.sub(new Pe(1)),h=0;;h++){var g=n.k?n.k(h):new Pe(c.generate(this.n.byteLength()));if(g=this._truncateToN(g,!0),!(g.cmpn(1)<=0||g.cmp(f)>=0)){var w=this.g.mul(g);if(!w.isInfinity()){var S=w.getX(),E=S.umod(this.n);if(E.cmpn(0)!==0){var I=g.invm(this.n).mul(E.mul(r.getPrivate()).iadd(e));if(I=I.umod(this.n),I.cmpn(0)!==0){var N=(w.getY().isOdd()?1:0)|(S.cmp(E)!==0?2:0);return n.canonical&&I.cmp(this.nh)>0&&(I=this.n.sub(I),N^=1),new Aa({r:E,s:I,recoveryParam:N})}}}}}};Ir.prototype.verify=function(e,r,i,n){e=this._truncateToN(new Pe(e,16)),i=this.keyFromPublic(i,n),r=new Aa(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),f=a.mul(s).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(c,i.getPublic(),f),h.isInfinity()?!1:h.eqXToP(s)):(h=this.g.mulAdd(c,i.getPublic(),f),h.isInfinity()?!1:h.getX().umod(this.n).cmp(s)===0)};Ir.prototype.recoverPubKey=function(t,e,r,i){$1((3&r)===r,"The recovery param is more than two bits"),e=new Aa(e,i);var n=this.n,s=new Pe(t),o=e.r,a=e.s,c=r&1,f=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var h=e.r.invm(n),g=n.sub(s).mul(h).umod(n),w=a.mul(h).umod(n);return this.g.mulAdd(g,o,w)};Ir.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new Aa(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch{continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var w4=rs(function(t,e){var r=e;r.version="6.5.4",r.utils=vr,r.rand=function(){throw new Error("unsupported")},r.curve=qo,r.curves=Bo,r.ec=m4,r.eddsa=null}),_4=w4.ec;const x4="signing-key/5.7.0",Pc=new gt(x4);let Df=null;function Bi(){return Df||(Df=new _4("secp256k1")),Df}class E4{constructor(e){gs(this,"curve","secp256k1"),gs(this,"privateKey",dr(e)),j6(this.privateKey)!==32&&Pc.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Bi().keyFromPrivate(Rt(this.privateKey));gs(this,"publicKey","0x"+r.getPublic(!1,"hex")),gs(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),gs(this,"_isSigningKey",!0)}_addPoint(e){const r=Bi().keyFromPublic(Rt(this.publicKey)),i=Bi().keyFromPublic(Rt(e));return"0x"+r.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){const r=Bi().keyFromPrivate(Rt(this.privateKey)),i=Rt(e);i.length!==32&&Pc.throwArgumentError("bad digest length","digest",e);const n=r.sign(i,{canonical:!0});return O1({recoveryParam:n.recoveryParam,r:Vn("0x"+n.r.toString(16),32),s:Vn("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const r=Bi().keyFromPrivate(Rt(this.privateKey)),i=Bi().keyFromPublic(Rt(L1(e)));return Vn("0x"+r.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function S4(t,e){const r=O1(e),i={r:Rt(r.r),s:Rt(r.s)};return"0x"+Bi().recoverPubKey(Rt(t),i,r.recoveryParam).encode("hex",!1)}function L1(t,e){const r=Rt(t);return r.length===32?new E4(r).publicKey:r.length===33?"0x"+Bi().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?dr(r):Pc.throwArgumentError("invalid public or private key","key","[REDACTED]")}var zl;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(zl||(zl={}));function M4(t){const e=L1(t);return n4(_l(R1(_l(e,1)),12))}function I4(t,e){return M4(S4(Rt(t),e))}function q1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Of(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));const r=q1(e);let i=0;for(const n of t)r.set(n,i),i+=n.length;return r}function A4(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function g(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var I=0,N=0,C=0,T=E.length;C!==T&&E[C]===0;)C++,I++;for(var L=(T-C)*h+1>>>0,R=new Uint8Array(L);C!==T;){for(var $=E[C],P=0,U=L-1;($!==0||P<N)&&U!==-1;U--,P++)$+=256*R[U]>>>0,R[U]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");N=P,C++}for(var k=L-N;k!==L&&R[k]===0;)k++;for(var j=c.repeat(I);k<L;++k)j+=t.charAt(R[k]);return j}function w(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var I=0;if(E[I]!==" "){for(var N=0,C=0;E[I]===c;)N++,I++;for(var T=(E.length-I)*f+1>>>0,L=new Uint8Array(T);E[I];){var R=r[E.charCodeAt(I)];if(R===255)return;for(var $=0,P=T-1;(R!==0||$<C)&&P!==-1;P--,$++)R+=a*L[P]>>>0,L[P]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");C=$,I++}if(E[I]!==" "){for(var U=T-C;U!==T&&L[U]===0;)U++;for(var k=new Uint8Array(N+(T-U)),j=N;U!==T;)k[j++]=L[U++];return k}}}function S(E){var I=w(E);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:w,decode:S}}var D4=A4,O4=D4;const R4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},P4=t=>new TextEncoder().encode(t),N4=t=>new TextDecoder().decode(t);class C4{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class T4{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return B1(this,e)}}class F4{constructor(e){this.decoders=e}or(e){return B1(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const B1=(t,e)=>new F4({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class $4{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new C4(e,r,i),this.decoder=new T4(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Da=({name:t,prefix:e,encode:r,decode:i})=>new $4(t,e,r,i),eo=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=O4(r,e);return Da({prefix:t,name:e,encode:i,decode:s=>R4(n(s))})},L4=(t,e,r,i)=>{const n={};for(let h=0;h<e.length;++h)n[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,f=0;for(let h=0;h<s;++h){const g=n[t[h]];if(g===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|g,a+=r,a>=8&&(a-=8,o[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},q4=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},qt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Da({prefix:e,name:t,encode(n){return q4(n,i,r)},decode(n){return L4(n,i,r,t)}}),B4=Da({prefix:"\0",name:"identity",encode:t=>N4(t),decode:t=>P4(t)}),U4=Object.freeze(Object.defineProperty({__proto__:null,identity:B4},Symbol.toStringTag,{value:"Module"})),z4=qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),k4=Object.freeze(Object.defineProperty({__proto__:null,base2:z4},Symbol.toStringTag,{value:"Module"})),j4=qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),K4=Object.freeze(Object.defineProperty({__proto__:null,base8:j4},Symbol.toStringTag,{value:"Module"})),V4=eo({prefix:"9",name:"base10",alphabet:"0123456789"}),H4=Object.freeze(Object.defineProperty({__proto__:null,base10:V4},Symbol.toStringTag,{value:"Module"})),W4=qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),G4=qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),J4=Object.freeze(Object.defineProperty({__proto__:null,base16:W4,base16upper:G4},Symbol.toStringTag,{value:"Module"})),Y4=qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Z4=qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),X4=qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Q4=qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),e8=qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),t8=qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),r8=qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),i8=qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),n8=qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),s8=Object.freeze(Object.defineProperty({__proto__:null,base32:Y4,base32hex:e8,base32hexpad:r8,base32hexpadupper:i8,base32hexupper:t8,base32pad:X4,base32padupper:Q4,base32upper:Z4,base32z:n8},Symbol.toStringTag,{value:"Module"})),o8=eo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),a8=eo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),f8=Object.freeze(Object.defineProperty({__proto__:null,base36:o8,base36upper:a8},Symbol.toStringTag,{value:"Module"})),c8=eo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),u8=eo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),h8=Object.freeze(Object.defineProperty({__proto__:null,base58btc:c8,base58flickr:u8},Symbol.toStringTag,{value:"Module"})),l8=qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),d8=qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),p8=qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),g8=qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),b8=Object.freeze(Object.defineProperty({__proto__:null,base64:l8,base64pad:d8,base64url:p8,base64urlpad:g8},Symbol.toStringTag,{value:"Module"})),U1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),v8=U1.reduce((t,e,r)=>(t[r]=e,t),[]),y8=U1.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function m8(t){return t.reduce((e,r)=>(e+=v8[r],e),"")}function w8(t){const e=[];for(const r of t){const i=y8[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const _8=Da({prefix:"🚀",name:"base256emoji",encode:m8,decode:w8}),x8=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:_8},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const kl={...U4,...k4,...K4,...H4,...J4,...s8,...f8,...h8,...b8,...x8};function z1(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const jl=z1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Rf=z1("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=q1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),k1={utf8:jl,"utf-8":jl,hex:kl.base16,latin1:Rf,ascii:Rf,binary:Rf,...kl};function Mr(t,e="utf8"){const r=k1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Zt(t,e="utf8"){const r=k1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Pf={};const E8="6.6.1",S8={version:E8};var Nf={},Uo={exports:{}},M8=Uo.exports,Kl;function Ri(){return Kl||(Kl=1,function(t){(function(e,r){function i(O,p){if(!O)throw new Error(p||"Assertion failed")}function n(O,p){O.super_=p;var d=function(){};d.prototype=p.prototype,O.prototype=new d,O.prototype.constructor=O}function s(O,p,d){if(s.isBN(O))return O;this.negative=0,this.words=null,this.length=0,this.red=null,O!==null&&((p==="le"||p==="be")&&(d=p,p=10),this._init(O||0,p||10,d||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=yu.Buffer}catch{}s.isBN=function(p){return p instanceof s?!0:p!==null&&typeof p=="object"&&p.constructor.wordSize===s.wordSize&&Array.isArray(p.words)},s.max=function(p,d){return p.cmp(d)>0?p:d},s.min=function(p,d){return p.cmp(d)<0?p:d},s.prototype._init=function(p,d,u){if(typeof p=="number")return this._initNumber(p,d,u);if(typeof p=="object")return this._initArray(p,d,u);d==="hex"&&(d=16),i(d===(d|0)&&d>=2&&d<=36),p=p.toString().replace(/\s+/g,"");var l=0;p[0]==="-"&&(l++,this.negative=1),l<p.length&&(d===16?this._parseHex(p,l,u):(this._parseBase(p,d,l),u==="le"&&this._initArray(this.toArray(),d,u)))},s.prototype._initNumber=function(p,d,u){p<0&&(this.negative=1,p=-p),p<67108864?(this.words=[p&67108863],this.length=1):p<4503599627370496?(this.words=[p&67108863,p/67108864&67108863],this.length=2):(i(p<9007199254740992),this.words=[p&67108863,p/67108864&67108863,1],this.length=3),u==="le"&&this._initArray(this.toArray(),d,u)},s.prototype._initArray=function(p,d,u){if(i(typeof p.length=="number"),p.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(p.length/3),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var v,m,M=0;if(u==="be")for(l=p.length-1,v=0;l>=0;l-=3)m=p[l]|p[l-1]<<8|p[l-2]<<16,this.words[v]|=m<<M&67108863,this.words[v+1]=m>>>26-M&67108863,M+=24,M>=26&&(M-=26,v++);else if(u==="le")for(l=0,v=0;l<p.length;l+=3)m=p[l]|p[l+1]<<8|p[l+2]<<16,this.words[v]|=m<<M&67108863,this.words[v+1]=m>>>26-M&67108863,M+=24,M>=26&&(M-=26,v++);return this.strip()};function a(O,p){var d=O.charCodeAt(p);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function c(O,p,d){var u=a(O,d);return d-1>=p&&(u|=a(O,d-1)<<4),u}s.prototype._parseHex=function(p,d,u){this.length=Math.ceil((p.length-d)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var v=0,m=0,M;if(u==="be")for(l=p.length-1;l>=d;l-=2)M=c(p,d,l)<<v,this.words[m]|=M&67108863,v>=18?(v-=18,m+=1,this.words[m]|=M>>>26):v+=8;else{var _=p.length-d;for(l=_%2===0?d+1:d;l<p.length;l+=2)M=c(p,d,l)<<v,this.words[m]|=M&67108863,v>=18?(v-=18,m+=1,this.words[m]|=M>>>26):v+=8}this.strip()};function f(O,p,d,u){for(var l=0,v=Math.min(O.length,d),m=p;m<v;m++){var M=O.charCodeAt(m)-48;l*=u,M>=49?l+=M-49+10:M>=17?l+=M-17+10:l+=M}return l}s.prototype._parseBase=function(p,d,u){this.words=[0],this.length=1;for(var l=0,v=1;v<=67108863;v*=d)l++;l--,v=v/d|0;for(var m=p.length-u,M=m%l,_=Math.min(m,m-M)+u,b=0,x=u;x<_;x+=l)b=f(p,x,x+l,d),this.imuln(v),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(M!==0){var y=1;for(b=f(p,x,p.length,d),x=0;x<M;x++)y*=d;this.imuln(y),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this.strip()},s.prototype.copy=function(p){p.words=new Array(this.length);for(var d=0;d<this.length;d++)p.words[d]=this.words[d];p.length=this.length,p.negative=this.negative,p.red=this.red},s.prototype.clone=function(){var p=new s(null);return this.copy(p),p},s.prototype._expand=function(p){for(;this.length<p;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(p,d){p=p||10,d=d|0||1;var u;if(p===16||p==="hex"){u="";for(var l=0,v=0,m=0;m<this.length;m++){var M=this.words[m],_=((M<<l|v)&16777215).toString(16);v=M>>>24-l&16777215,l+=2,l>=26&&(l-=26,m--),v!==0||m!==this.length-1?u=h[6-_.length]+_+u:u=_+u}for(v!==0&&(u=v.toString(16)+u);u.length%d!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}if(p===(p|0)&&p>=2&&p<=36){var b=g[p],x=w[p];u="";var y=this.clone();for(y.negative=0;!y.isZero();){var D=y.modn(x).toString(p);y=y.idivn(x),y.isZero()?u=D+u:u=h[b-D.length]+D+u}for(this.isZero()&&(u="0"+u);u.length%d!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var p=this.words[0];return this.length===2?p+=this.words[1]*67108864:this.length===3&&this.words[2]===1?p+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-p:p},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(p,d){return i(typeof o<"u"),this.toArrayLike(o,p,d)},s.prototype.toArray=function(p,d){return this.toArrayLike(Array,p,d)},s.prototype.toArrayLike=function(p,d,u){var l=this.byteLength(),v=u||Math.max(1,l);i(l<=v,"byte array longer than desired length"),i(v>0,"Requested array length <= 0"),this.strip();var m=d==="le",M=new p(v),_,b,x=this.clone();if(m){for(b=0;!x.isZero();b++)_=x.andln(255),x.iushrn(8),M[b]=_;for(;b<v;b++)M[b]=0}else{for(b=0;b<v-l;b++)M[b]=0;for(b=0;!x.isZero();b++)_=x.andln(255),x.iushrn(8),M[v-b-1]=_}return M},Math.clz32?s.prototype._countBits=function(p){return 32-Math.clz32(p)}:s.prototype._countBits=function(p){var d=p,u=0;return d>=4096&&(u+=13,d>>>=13),d>=64&&(u+=7,d>>>=7),d>=8&&(u+=4,d>>>=4),d>=2&&(u+=2,d>>>=2),u+d},s.prototype._zeroBits=function(p){if(p===0)return 26;var d=p,u=0;return d&8191||(u+=13,d>>>=13),d&127||(u+=7,d>>>=7),d&15||(u+=4,d>>>=4),d&3||(u+=2,d>>>=2),d&1||u++,u},s.prototype.bitLength=function(){var p=this.words[this.length-1],d=this._countBits(p);return(this.length-1)*26+d};function S(O){for(var p=new Array(O.bitLength()),d=0;d<p.length;d++){var u=d/26|0,l=d%26;p[d]=(O.words[u]&1<<l)>>>l}return p}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var p=0,d=0;d<this.length;d++){var u=this._zeroBits(this.words[d]);if(p+=u,u!==26)break}return p},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(p){return this.negative!==0?this.abs().inotn(p).iaddn(1):this.clone()},s.prototype.fromTwos=function(p){return this.testn(p-1)?this.notn(p).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(p){for(;this.length<p.length;)this.words[this.length++]=0;for(var d=0;d<p.length;d++)this.words[d]=this.words[d]|p.words[d];return this.strip()},s.prototype.ior=function(p){return i((this.negative|p.negative)===0),this.iuor(p)},s.prototype.or=function(p){return this.length>p.length?this.clone().ior(p):p.clone().ior(this)},s.prototype.uor=function(p){return this.length>p.length?this.clone().iuor(p):p.clone().iuor(this)},s.prototype.iuand=function(p){var d;this.length>p.length?d=p:d=this;for(var u=0;u<d.length;u++)this.words[u]=this.words[u]&p.words[u];return this.length=d.length,this.strip()},s.prototype.iand=function(p){return i((this.negative|p.negative)===0),this.iuand(p)},s.prototype.and=function(p){return this.length>p.length?this.clone().iand(p):p.clone().iand(this)},s.prototype.uand=function(p){return this.length>p.length?this.clone().iuand(p):p.clone().iuand(this)},s.prototype.iuxor=function(p){var d,u;this.length>p.length?(d=this,u=p):(d=p,u=this);for(var l=0;l<u.length;l++)this.words[l]=d.words[l]^u.words[l];if(this!==d)for(;l<d.length;l++)this.words[l]=d.words[l];return this.length=d.length,this.strip()},s.prototype.ixor=function(p){return i((this.negative|p.negative)===0),this.iuxor(p)},s.prototype.xor=function(p){return this.length>p.length?this.clone().ixor(p):p.clone().ixor(this)},s.prototype.uxor=function(p){return this.length>p.length?this.clone().iuxor(p):p.clone().iuxor(this)},s.prototype.inotn=function(p){i(typeof p=="number"&&p>=0);var d=Math.ceil(p/26)|0,u=p%26;this._expand(d),u>0&&d--;for(var l=0;l<d;l++)this.words[l]=~this.words[l]&67108863;return u>0&&(this.words[l]=~this.words[l]&67108863>>26-u),this.strip()},s.prototype.notn=function(p){return this.clone().inotn(p)},s.prototype.setn=function(p,d){i(typeof p=="number"&&p>=0);var u=p/26|0,l=p%26;return this._expand(u+1),d?this.words[u]=this.words[u]|1<<l:this.words[u]=this.words[u]&~(1<<l),this.strip()},s.prototype.iadd=function(p){var d;if(this.negative!==0&&p.negative===0)return this.negative=0,d=this.isub(p),this.negative^=1,this._normSign();if(this.negative===0&&p.negative!==0)return p.negative=0,d=this.isub(p),p.negative=1,d._normSign();var u,l;this.length>p.length?(u=this,l=p):(u=p,l=this);for(var v=0,m=0;m<l.length;m++)d=(u.words[m]|0)+(l.words[m]|0)+v,this.words[m]=d&67108863,v=d>>>26;for(;v!==0&&m<u.length;m++)d=(u.words[m]|0)+v,this.words[m]=d&67108863,v=d>>>26;if(this.length=u.length,v!==0)this.words[this.length]=v,this.length++;else if(u!==this)for(;m<u.length;m++)this.words[m]=u.words[m];return this},s.prototype.add=function(p){var d;return p.negative!==0&&this.negative===0?(p.negative=0,d=this.sub(p),p.negative^=1,d):p.negative===0&&this.negative!==0?(this.negative=0,d=p.sub(this),this.negative=1,d):this.length>p.length?this.clone().iadd(p):p.clone().iadd(this)},s.prototype.isub=function(p){if(p.negative!==0){p.negative=0;var d=this.iadd(p);return p.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(p),this.negative=1,this._normSign();var u=this.cmp(p);if(u===0)return this.negative=0,this.length=1,this.words[0]=0,this;var l,v;u>0?(l=this,v=p):(l=p,v=this);for(var m=0,M=0;M<v.length;M++)d=(l.words[M]|0)-(v.words[M]|0)+m,m=d>>26,this.words[M]=d&67108863;for(;m!==0&&M<l.length;M++)d=(l.words[M]|0)+m,m=d>>26,this.words[M]=d&67108863;if(m===0&&M<l.length&&l!==this)for(;M<l.length;M++)this.words[M]=l.words[M];return this.length=Math.max(this.length,M),l!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(p){return this.clone().isub(p)};function E(O,p,d){d.negative=p.negative^O.negative;var u=O.length+p.length|0;d.length=u,u=u-1|0;var l=O.words[0]|0,v=p.words[0]|0,m=l*v,M=m&67108863,_=m/67108864|0;d.words[0]=M;for(var b=1;b<u;b++){for(var x=_>>>26,y=_&67108863,D=Math.min(b,p.length-1),J=Math.max(0,b-O.length+1);J<=D;J++){var A=b-J|0;l=O.words[A]|0,v=p.words[J]|0,m=l*v+y,x+=m/67108864|0,y=m&67108863}d.words[b]=y|0,_=x|0}return _!==0?d.words[b]=_|0:d.length--,d.strip()}var I=function(p,d,u){var l=p.words,v=d.words,m=u.words,M=0,_,b,x,y=l[0]|0,D=y&8191,J=y>>>13,A=l[1]|0,z=A&8191,H=A>>>13,Y=l[2]|0,X=Y&8191,ae=Y>>>13,fe=l[3]|0,F=fe&8191,B=fe>>>13,K=l[4]|0,W=K&8191,Q=K>>>13,ee=l[5]|0,te=ee&8191,ie=ee>>>13,re=l[6]|0,Z=re&8191,ce=re>>>13,se=l[7]|0,ne=se&8191,he=se>>>13,ge=l[8]|0,le=ge&8191,ve=ge>>>13,De=l[9]|0,pe=De&8191,Ne=De>>>13,Ce=v[0]|0,me=Ce&8191,Ue=Ce>>>13,Oe=v[1]|0,ye=Oe&8191,ze=Oe>>>13,Ye=v[2]|0,we=Ye&8191,Ge=Ye>>>13,Ze=v[3]|0,Se=Ze&8191,je=Ze>>>13,ke=v[4]|0,xe=ke&8191,Ke=ke>>>13,Ve=v[5]|0,_e=Ve&8191,Xe=Ve>>>13,Qe=v[6]|0,Me=Qe&8191,et=Qe>>>13,tt=v[7]|0,Ee=tt&8191,He=tt>>>13,Be=v[8]|0,Ie=Be&8191,rt=Be>>>13,it=v[9]|0,Ae=it&8191,nt=it>>>13;u.negative=p.negative^d.negative,u.length=19,_=Math.imul(D,me),b=Math.imul(D,Ue),b=b+Math.imul(J,me)|0,x=Math.imul(J,Ue);var Le=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(Le>>>26)|0,Le&=67108863,_=Math.imul(z,me),b=Math.imul(z,Ue),b=b+Math.imul(H,me)|0,x=Math.imul(H,Ue),_=_+Math.imul(D,ye)|0,b=b+Math.imul(D,ze)|0,b=b+Math.imul(J,ye)|0,x=x+Math.imul(J,ze)|0;var Je=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(Je>>>26)|0,Je&=67108863,_=Math.imul(X,me),b=Math.imul(X,Ue),b=b+Math.imul(ae,me)|0,x=Math.imul(ae,Ue),_=_+Math.imul(z,ye)|0,b=b+Math.imul(z,ze)|0,b=b+Math.imul(H,ye)|0,x=x+Math.imul(H,ze)|0,_=_+Math.imul(D,we)|0,b=b+Math.imul(D,Ge)|0,b=b+Math.imul(J,we)|0,x=x+Math.imul(J,Ge)|0;var er=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(er>>>26)|0,er&=67108863,_=Math.imul(F,me),b=Math.imul(F,Ue),b=b+Math.imul(B,me)|0,x=Math.imul(B,Ue),_=_+Math.imul(X,ye)|0,b=b+Math.imul(X,ze)|0,b=b+Math.imul(ae,ye)|0,x=x+Math.imul(ae,ze)|0,_=_+Math.imul(z,we)|0,b=b+Math.imul(z,Ge)|0,b=b+Math.imul(H,we)|0,x=x+Math.imul(H,Ge)|0,_=_+Math.imul(D,Se)|0,b=b+Math.imul(D,je)|0,b=b+Math.imul(J,Se)|0,x=x+Math.imul(J,je)|0;var tr=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(tr>>>26)|0,tr&=67108863,_=Math.imul(W,me),b=Math.imul(W,Ue),b=b+Math.imul(Q,me)|0,x=Math.imul(Q,Ue),_=_+Math.imul(F,ye)|0,b=b+Math.imul(F,ze)|0,b=b+Math.imul(B,ye)|0,x=x+Math.imul(B,ze)|0,_=_+Math.imul(X,we)|0,b=b+Math.imul(X,Ge)|0,b=b+Math.imul(ae,we)|0,x=x+Math.imul(ae,Ge)|0,_=_+Math.imul(z,Se)|0,b=b+Math.imul(z,je)|0,b=b+Math.imul(H,Se)|0,x=x+Math.imul(H,je)|0,_=_+Math.imul(D,xe)|0,b=b+Math.imul(D,Ke)|0,b=b+Math.imul(J,xe)|0,x=x+Math.imul(J,Ke)|0;var rr=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(rr>>>26)|0,rr&=67108863,_=Math.imul(te,me),b=Math.imul(te,Ue),b=b+Math.imul(ie,me)|0,x=Math.imul(ie,Ue),_=_+Math.imul(W,ye)|0,b=b+Math.imul(W,ze)|0,b=b+Math.imul(Q,ye)|0,x=x+Math.imul(Q,ze)|0,_=_+Math.imul(F,we)|0,b=b+Math.imul(F,Ge)|0,b=b+Math.imul(B,we)|0,x=x+Math.imul(B,Ge)|0,_=_+Math.imul(X,Se)|0,b=b+Math.imul(X,je)|0,b=b+Math.imul(ae,Se)|0,x=x+Math.imul(ae,je)|0,_=_+Math.imul(z,xe)|0,b=b+Math.imul(z,Ke)|0,b=b+Math.imul(H,xe)|0,x=x+Math.imul(H,Ke)|0,_=_+Math.imul(D,_e)|0,b=b+Math.imul(D,Xe)|0,b=b+Math.imul(J,_e)|0,x=x+Math.imul(J,Xe)|0;var ir=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(ir>>>26)|0,ir&=67108863,_=Math.imul(Z,me),b=Math.imul(Z,Ue),b=b+Math.imul(ce,me)|0,x=Math.imul(ce,Ue),_=_+Math.imul(te,ye)|0,b=b+Math.imul(te,ze)|0,b=b+Math.imul(ie,ye)|0,x=x+Math.imul(ie,ze)|0,_=_+Math.imul(W,we)|0,b=b+Math.imul(W,Ge)|0,b=b+Math.imul(Q,we)|0,x=x+Math.imul(Q,Ge)|0,_=_+Math.imul(F,Se)|0,b=b+Math.imul(F,je)|0,b=b+Math.imul(B,Se)|0,x=x+Math.imul(B,je)|0,_=_+Math.imul(X,xe)|0,b=b+Math.imul(X,Ke)|0,b=b+Math.imul(ae,xe)|0,x=x+Math.imul(ae,Ke)|0,_=_+Math.imul(z,_e)|0,b=b+Math.imul(z,Xe)|0,b=b+Math.imul(H,_e)|0,x=x+Math.imul(H,Xe)|0,_=_+Math.imul(D,Me)|0,b=b+Math.imul(D,et)|0,b=b+Math.imul(J,Me)|0,x=x+Math.imul(J,et)|0;var Et=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(Et>>>26)|0,Et&=67108863,_=Math.imul(ne,me),b=Math.imul(ne,Ue),b=b+Math.imul(he,me)|0,x=Math.imul(he,Ue),_=_+Math.imul(Z,ye)|0,b=b+Math.imul(Z,ze)|0,b=b+Math.imul(ce,ye)|0,x=x+Math.imul(ce,ze)|0,_=_+Math.imul(te,we)|0,b=b+Math.imul(te,Ge)|0,b=b+Math.imul(ie,we)|0,x=x+Math.imul(ie,Ge)|0,_=_+Math.imul(W,Se)|0,b=b+Math.imul(W,je)|0,b=b+Math.imul(Q,Se)|0,x=x+Math.imul(Q,je)|0,_=_+Math.imul(F,xe)|0,b=b+Math.imul(F,Ke)|0,b=b+Math.imul(B,xe)|0,x=x+Math.imul(B,Ke)|0,_=_+Math.imul(X,_e)|0,b=b+Math.imul(X,Xe)|0,b=b+Math.imul(ae,_e)|0,x=x+Math.imul(ae,Xe)|0,_=_+Math.imul(z,Me)|0,b=b+Math.imul(z,et)|0,b=b+Math.imul(H,Me)|0,x=x+Math.imul(H,et)|0,_=_+Math.imul(D,Ee)|0,b=b+Math.imul(D,He)|0,b=b+Math.imul(J,Ee)|0,x=x+Math.imul(J,He)|0;var ii=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(ii>>>26)|0,ii&=67108863,_=Math.imul(le,me),b=Math.imul(le,Ue),b=b+Math.imul(ve,me)|0,x=Math.imul(ve,Ue),_=_+Math.imul(ne,ye)|0,b=b+Math.imul(ne,ze)|0,b=b+Math.imul(he,ye)|0,x=x+Math.imul(he,ze)|0,_=_+Math.imul(Z,we)|0,b=b+Math.imul(Z,Ge)|0,b=b+Math.imul(ce,we)|0,x=x+Math.imul(ce,Ge)|0,_=_+Math.imul(te,Se)|0,b=b+Math.imul(te,je)|0,b=b+Math.imul(ie,Se)|0,x=x+Math.imul(ie,je)|0,_=_+Math.imul(W,xe)|0,b=b+Math.imul(W,Ke)|0,b=b+Math.imul(Q,xe)|0,x=x+Math.imul(Q,Ke)|0,_=_+Math.imul(F,_e)|0,b=b+Math.imul(F,Xe)|0,b=b+Math.imul(B,_e)|0,x=x+Math.imul(B,Xe)|0,_=_+Math.imul(X,Me)|0,b=b+Math.imul(X,et)|0,b=b+Math.imul(ae,Me)|0,x=x+Math.imul(ae,et)|0,_=_+Math.imul(z,Ee)|0,b=b+Math.imul(z,He)|0,b=b+Math.imul(H,Ee)|0,x=x+Math.imul(H,He)|0,_=_+Math.imul(D,Ie)|0,b=b+Math.imul(D,rt)|0,b=b+Math.imul(J,Ie)|0,x=x+Math.imul(J,rt)|0;var ni=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(ni>>>26)|0,ni&=67108863,_=Math.imul(pe,me),b=Math.imul(pe,Ue),b=b+Math.imul(Ne,me)|0,x=Math.imul(Ne,Ue),_=_+Math.imul(le,ye)|0,b=b+Math.imul(le,ze)|0,b=b+Math.imul(ve,ye)|0,x=x+Math.imul(ve,ze)|0,_=_+Math.imul(ne,we)|0,b=b+Math.imul(ne,Ge)|0,b=b+Math.imul(he,we)|0,x=x+Math.imul(he,Ge)|0,_=_+Math.imul(Z,Se)|0,b=b+Math.imul(Z,je)|0,b=b+Math.imul(ce,Se)|0,x=x+Math.imul(ce,je)|0,_=_+Math.imul(te,xe)|0,b=b+Math.imul(te,Ke)|0,b=b+Math.imul(ie,xe)|0,x=x+Math.imul(ie,Ke)|0,_=_+Math.imul(W,_e)|0,b=b+Math.imul(W,Xe)|0,b=b+Math.imul(Q,_e)|0,x=x+Math.imul(Q,Xe)|0,_=_+Math.imul(F,Me)|0,b=b+Math.imul(F,et)|0,b=b+Math.imul(B,Me)|0,x=x+Math.imul(B,et)|0,_=_+Math.imul(X,Ee)|0,b=b+Math.imul(X,He)|0,b=b+Math.imul(ae,Ee)|0,x=x+Math.imul(ae,He)|0,_=_+Math.imul(z,Ie)|0,b=b+Math.imul(z,rt)|0,b=b+Math.imul(H,Ie)|0,x=x+Math.imul(H,rt)|0,_=_+Math.imul(D,Ae)|0,b=b+Math.imul(D,nt)|0,b=b+Math.imul(J,Ae)|0,x=x+Math.imul(J,nt)|0;var si=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(si>>>26)|0,si&=67108863,_=Math.imul(pe,ye),b=Math.imul(pe,ze),b=b+Math.imul(Ne,ye)|0,x=Math.imul(Ne,ze),_=_+Math.imul(le,we)|0,b=b+Math.imul(le,Ge)|0,b=b+Math.imul(ve,we)|0,x=x+Math.imul(ve,Ge)|0,_=_+Math.imul(ne,Se)|0,b=b+Math.imul(ne,je)|0,b=b+Math.imul(he,Se)|0,x=x+Math.imul(he,je)|0,_=_+Math.imul(Z,xe)|0,b=b+Math.imul(Z,Ke)|0,b=b+Math.imul(ce,xe)|0,x=x+Math.imul(ce,Ke)|0,_=_+Math.imul(te,_e)|0,b=b+Math.imul(te,Xe)|0,b=b+Math.imul(ie,_e)|0,x=x+Math.imul(ie,Xe)|0,_=_+Math.imul(W,Me)|0,b=b+Math.imul(W,et)|0,b=b+Math.imul(Q,Me)|0,x=x+Math.imul(Q,et)|0,_=_+Math.imul(F,Ee)|0,b=b+Math.imul(F,He)|0,b=b+Math.imul(B,Ee)|0,x=x+Math.imul(B,He)|0,_=_+Math.imul(X,Ie)|0,b=b+Math.imul(X,rt)|0,b=b+Math.imul(ae,Ie)|0,x=x+Math.imul(ae,rt)|0,_=_+Math.imul(z,Ae)|0,b=b+Math.imul(z,nt)|0,b=b+Math.imul(H,Ae)|0,x=x+Math.imul(H,nt)|0;var oi=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(oi>>>26)|0,oi&=67108863,_=Math.imul(pe,we),b=Math.imul(pe,Ge),b=b+Math.imul(Ne,we)|0,x=Math.imul(Ne,Ge),_=_+Math.imul(le,Se)|0,b=b+Math.imul(le,je)|0,b=b+Math.imul(ve,Se)|0,x=x+Math.imul(ve,je)|0,_=_+Math.imul(ne,xe)|0,b=b+Math.imul(ne,Ke)|0,b=b+Math.imul(he,xe)|0,x=x+Math.imul(he,Ke)|0,_=_+Math.imul(Z,_e)|0,b=b+Math.imul(Z,Xe)|0,b=b+Math.imul(ce,_e)|0,x=x+Math.imul(ce,Xe)|0,_=_+Math.imul(te,Me)|0,b=b+Math.imul(te,et)|0,b=b+Math.imul(ie,Me)|0,x=x+Math.imul(ie,et)|0,_=_+Math.imul(W,Ee)|0,b=b+Math.imul(W,He)|0,b=b+Math.imul(Q,Ee)|0,x=x+Math.imul(Q,He)|0,_=_+Math.imul(F,Ie)|0,b=b+Math.imul(F,rt)|0,b=b+Math.imul(B,Ie)|0,x=x+Math.imul(B,rt)|0,_=_+Math.imul(X,Ae)|0,b=b+Math.imul(X,nt)|0,b=b+Math.imul(ae,Ae)|0,x=x+Math.imul(ae,nt)|0;var ai=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(ai>>>26)|0,ai&=67108863,_=Math.imul(pe,Se),b=Math.imul(pe,je),b=b+Math.imul(Ne,Se)|0,x=Math.imul(Ne,je),_=_+Math.imul(le,xe)|0,b=b+Math.imul(le,Ke)|0,b=b+Math.imul(ve,xe)|0,x=x+Math.imul(ve,Ke)|0,_=_+Math.imul(ne,_e)|0,b=b+Math.imul(ne,Xe)|0,b=b+Math.imul(he,_e)|0,x=x+Math.imul(he,Xe)|0,_=_+Math.imul(Z,Me)|0,b=b+Math.imul(Z,et)|0,b=b+Math.imul(ce,Me)|0,x=x+Math.imul(ce,et)|0,_=_+Math.imul(te,Ee)|0,b=b+Math.imul(te,He)|0,b=b+Math.imul(ie,Ee)|0,x=x+Math.imul(ie,He)|0,_=_+Math.imul(W,Ie)|0,b=b+Math.imul(W,rt)|0,b=b+Math.imul(Q,Ie)|0,x=x+Math.imul(Q,rt)|0,_=_+Math.imul(F,Ae)|0,b=b+Math.imul(F,nt)|0,b=b+Math.imul(B,Ae)|0,x=x+Math.imul(B,nt)|0;var yr=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(yr>>>26)|0,yr&=67108863,_=Math.imul(pe,xe),b=Math.imul(pe,Ke),b=b+Math.imul(Ne,xe)|0,x=Math.imul(Ne,Ke),_=_+Math.imul(le,_e)|0,b=b+Math.imul(le,Xe)|0,b=b+Math.imul(ve,_e)|0,x=x+Math.imul(ve,Xe)|0,_=_+Math.imul(ne,Me)|0,b=b+Math.imul(ne,et)|0,b=b+Math.imul(he,Me)|0,x=x+Math.imul(he,et)|0,_=_+Math.imul(Z,Ee)|0,b=b+Math.imul(Z,He)|0,b=b+Math.imul(ce,Ee)|0,x=x+Math.imul(ce,He)|0,_=_+Math.imul(te,Ie)|0,b=b+Math.imul(te,rt)|0,b=b+Math.imul(ie,Ie)|0,x=x+Math.imul(ie,rt)|0,_=_+Math.imul(W,Ae)|0,b=b+Math.imul(W,nt)|0,b=b+Math.imul(Q,Ae)|0,x=x+Math.imul(Q,nt)|0;var fi=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(fi>>>26)|0,fi&=67108863,_=Math.imul(pe,_e),b=Math.imul(pe,Xe),b=b+Math.imul(Ne,_e)|0,x=Math.imul(Ne,Xe),_=_+Math.imul(le,Me)|0,b=b+Math.imul(le,et)|0,b=b+Math.imul(ve,Me)|0,x=x+Math.imul(ve,et)|0,_=_+Math.imul(ne,Ee)|0,b=b+Math.imul(ne,He)|0,b=b+Math.imul(he,Ee)|0,x=x+Math.imul(he,He)|0,_=_+Math.imul(Z,Ie)|0,b=b+Math.imul(Z,rt)|0,b=b+Math.imul(ce,Ie)|0,x=x+Math.imul(ce,rt)|0,_=_+Math.imul(te,Ae)|0,b=b+Math.imul(te,nt)|0,b=b+Math.imul(ie,Ae)|0,x=x+Math.imul(ie,nt)|0;var ci=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(ci>>>26)|0,ci&=67108863,_=Math.imul(pe,Me),b=Math.imul(pe,et),b=b+Math.imul(Ne,Me)|0,x=Math.imul(Ne,et),_=_+Math.imul(le,Ee)|0,b=b+Math.imul(le,He)|0,b=b+Math.imul(ve,Ee)|0,x=x+Math.imul(ve,He)|0,_=_+Math.imul(ne,Ie)|0,b=b+Math.imul(ne,rt)|0,b=b+Math.imul(he,Ie)|0,x=x+Math.imul(he,rt)|0,_=_+Math.imul(Z,Ae)|0,b=b+Math.imul(Z,nt)|0,b=b+Math.imul(ce,Ae)|0,x=x+Math.imul(ce,nt)|0;var Ut=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,_=Math.imul(pe,Ee),b=Math.imul(pe,He),b=b+Math.imul(Ne,Ee)|0,x=Math.imul(Ne,He),_=_+Math.imul(le,Ie)|0,b=b+Math.imul(le,rt)|0,b=b+Math.imul(ve,Ie)|0,x=x+Math.imul(ve,rt)|0,_=_+Math.imul(ne,Ae)|0,b=b+Math.imul(ne,nt)|0,b=b+Math.imul(he,Ae)|0,x=x+Math.imul(he,nt)|0;var ui=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(ui>>>26)|0,ui&=67108863,_=Math.imul(pe,Ie),b=Math.imul(pe,rt),b=b+Math.imul(Ne,Ie)|0,x=Math.imul(Ne,rt),_=_+Math.imul(le,Ae)|0,b=b+Math.imul(le,nt)|0,b=b+Math.imul(ve,Ae)|0,x=x+Math.imul(ve,nt)|0;var hi=(M+_|0)+((b&8191)<<13)|0;M=(x+(b>>>13)|0)+(hi>>>26)|0,hi&=67108863,_=Math.imul(pe,Ae),b=Math.imul(pe,nt),b=b+Math.imul(Ne,Ae)|0,x=Math.imul(Ne,nt);var li=(M+_|0)+((b&8191)<<13)|0;return M=(x+(b>>>13)|0)+(li>>>26)|0,li&=67108863,m[0]=Le,m[1]=Je,m[2]=er,m[3]=tr,m[4]=rr,m[5]=ir,m[6]=Et,m[7]=ii,m[8]=ni,m[9]=si,m[10]=oi,m[11]=ai,m[12]=yr,m[13]=fi,m[14]=ci,m[15]=Ut,m[16]=ui,m[17]=hi,m[18]=li,M!==0&&(m[19]=M,u.length++),u};Math.imul||(I=E);function N(O,p,d){d.negative=p.negative^O.negative,d.length=O.length+p.length;for(var u=0,l=0,v=0;v<d.length-1;v++){var m=l;l=0;for(var M=u&67108863,_=Math.min(v,p.length-1),b=Math.max(0,v-O.length+1);b<=_;b++){var x=v-b,y=O.words[x]|0,D=p.words[b]|0,J=y*D,A=J&67108863;m=m+(J/67108864|0)|0,A=A+M|0,M=A&67108863,m=m+(A>>>26)|0,l+=m>>>26,m&=67108863}d.words[v]=M,u=m,m=l}return u!==0?d.words[v]=u:d.length--,d.strip()}function C(O,p,d){var u=new T;return u.mulp(O,p,d)}s.prototype.mulTo=function(p,d){var u,l=this.length+p.length;return this.length===10&&p.length===10?u=I(this,p,d):l<63?u=E(this,p,d):l<1024?u=N(this,p,d):u=C(this,p,d),u};function T(O,p){this.x=O,this.y=p}T.prototype.makeRBT=function(p){for(var d=new Array(p),u=s.prototype._countBits(p)-1,l=0;l<p;l++)d[l]=this.revBin(l,u,p);return d},T.prototype.revBin=function(p,d,u){if(p===0||p===u-1)return p;for(var l=0,v=0;v<d;v++)l|=(p&1)<<d-v-1,p>>=1;return l},T.prototype.permute=function(p,d,u,l,v,m){for(var M=0;M<m;M++)l[M]=d[p[M]],v[M]=u[p[M]]},T.prototype.transform=function(p,d,u,l,v,m){this.permute(m,p,d,u,l,v);for(var M=1;M<v;M<<=1)for(var _=M<<1,b=Math.cos(2*Math.PI/_),x=Math.sin(2*Math.PI/_),y=0;y<v;y+=_)for(var D=b,J=x,A=0;A<M;A++){var z=u[y+A],H=l[y+A],Y=u[y+A+M],X=l[y+A+M],ae=D*Y-J*X;X=D*X+J*Y,Y=ae,u[y+A]=z+Y,l[y+A]=H+X,u[y+A+M]=z-Y,l[y+A+M]=H-X,A!==_&&(ae=b*D-x*J,J=b*J+x*D,D=ae)}},T.prototype.guessLen13b=function(p,d){var u=Math.max(d,p)|1,l=u&1,v=0;for(u=u/2|0;u;u=u>>>1)v++;return 1<<v+1+l},T.prototype.conjugate=function(p,d,u){if(!(u<=1))for(var l=0;l<u/2;l++){var v=p[l];p[l]=p[u-l-1],p[u-l-1]=v,v=d[l],d[l]=-d[u-l-1],d[u-l-1]=-v}},T.prototype.normalize13b=function(p,d){for(var u=0,l=0;l<d/2;l++){var v=Math.round(p[2*l+1]/d)*8192+Math.round(p[2*l]/d)+u;p[l]=v&67108863,v<67108864?u=0:u=v/67108864|0}return p},T.prototype.convert13b=function(p,d,u,l){for(var v=0,m=0;m<d;m++)v=v+(p[m]|0),u[2*m]=v&8191,v=v>>>13,u[2*m+1]=v&8191,v=v>>>13;for(m=2*d;m<l;++m)u[m]=0;i(v===0),i((v&-8192)===0)},T.prototype.stub=function(p){for(var d=new Array(p),u=0;u<p;u++)d[u]=0;return d},T.prototype.mulp=function(p,d,u){var l=2*this.guessLen13b(p.length,d.length),v=this.makeRBT(l),m=this.stub(l),M=new Array(l),_=new Array(l),b=new Array(l),x=new Array(l),y=new Array(l),D=new Array(l),J=u.words;J.length=l,this.convert13b(p.words,p.length,M,l),this.convert13b(d.words,d.length,x,l),this.transform(M,m,_,b,l,v),this.transform(x,m,y,D,l,v);for(var A=0;A<l;A++){var z=_[A]*y[A]-b[A]*D[A];b[A]=_[A]*D[A]+b[A]*y[A],_[A]=z}return this.conjugate(_,b,l),this.transform(_,b,J,m,l,v),this.conjugate(J,m,l),this.normalize13b(J,l),u.negative=p.negative^d.negative,u.length=p.length+d.length,u.strip()},s.prototype.mul=function(p){var d=new s(null);return d.words=new Array(this.length+p.length),this.mulTo(p,d)},s.prototype.mulf=function(p){var d=new s(null);return d.words=new Array(this.length+p.length),C(this,p,d)},s.prototype.imul=function(p){return this.clone().mulTo(p,this)},s.prototype.imuln=function(p){i(typeof p=="number"),i(p<67108864);for(var d=0,u=0;u<this.length;u++){var l=(this.words[u]|0)*p,v=(l&67108863)+(d&67108863);d>>=26,d+=l/67108864|0,d+=v>>>26,this.words[u]=v&67108863}return d!==0&&(this.words[u]=d,this.length++),this},s.prototype.muln=function(p){return this.clone().imuln(p)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(p){var d=S(p);if(d.length===0)return new s(1);for(var u=this,l=0;l<d.length&&d[l]===0;l++,u=u.sqr());if(++l<d.length)for(var v=u.sqr();l<d.length;l++,v=v.sqr())d[l]!==0&&(u=u.mul(v));return u},s.prototype.iushln=function(p){i(typeof p=="number"&&p>=0);var d=p%26,u=(p-d)/26,l=67108863>>>26-d<<26-d,v;if(d!==0){var m=0;for(v=0;v<this.length;v++){var M=this.words[v]&l,_=(this.words[v]|0)-M<<d;this.words[v]=_|m,m=M>>>26-d}m&&(this.words[v]=m,this.length++)}if(u!==0){for(v=this.length-1;v>=0;v--)this.words[v+u]=this.words[v];for(v=0;v<u;v++)this.words[v]=0;this.length+=u}return this.strip()},s.prototype.ishln=function(p){return i(this.negative===0),this.iushln(p)},s.prototype.iushrn=function(p,d,u){i(typeof p=="number"&&p>=0);var l;d?l=(d-d%26)/26:l=0;var v=p%26,m=Math.min((p-v)/26,this.length),M=67108863^67108863>>>v<<v,_=u;if(l-=m,l=Math.max(0,l),_){for(var b=0;b<m;b++)_.words[b]=this.words[b];_.length=m}if(m!==0)if(this.length>m)for(this.length-=m,b=0;b<this.length;b++)this.words[b]=this.words[b+m];else this.words[0]=0,this.length=1;var x=0;for(b=this.length-1;b>=0&&(x!==0||b>=l);b--){var y=this.words[b]|0;this.words[b]=x<<26-v|y>>>v,x=y&M}return _&&x!==0&&(_.words[_.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(p,d,u){return i(this.negative===0),this.iushrn(p,d,u)},s.prototype.shln=function(p){return this.clone().ishln(p)},s.prototype.ushln=function(p){return this.clone().iushln(p)},s.prototype.shrn=function(p){return this.clone().ishrn(p)},s.prototype.ushrn=function(p){return this.clone().iushrn(p)},s.prototype.testn=function(p){i(typeof p=="number"&&p>=0);var d=p%26,u=(p-d)/26,l=1<<d;if(this.length<=u)return!1;var v=this.words[u];return!!(v&l)},s.prototype.imaskn=function(p){i(typeof p=="number"&&p>=0);var d=p%26,u=(p-d)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=u)return this;if(d!==0&&u++,this.length=Math.min(u,this.length),d!==0){var l=67108863^67108863>>>d<<d;this.words[this.length-1]&=l}return this.strip()},s.prototype.maskn=function(p){return this.clone().imaskn(p)},s.prototype.iaddn=function(p){return i(typeof p=="number"),i(p<67108864),p<0?this.isubn(-p):this.negative!==0?this.length===1&&(this.words[0]|0)<p?(this.words[0]=p-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(p),this.negative=1,this):this._iaddn(p)},s.prototype._iaddn=function(p){this.words[0]+=p;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(p){if(i(typeof p=="number"),i(p<67108864),p<0)return this.iaddn(-p);if(this.negative!==0)return this.negative=0,this.iaddn(p),this.negative=1,this;if(this.words[0]-=p,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},s.prototype.addn=function(p){return this.clone().iaddn(p)},s.prototype.subn=function(p){return this.clone().isubn(p)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(p,d,u){var l=p.length+u,v;this._expand(l);var m,M=0;for(v=0;v<p.length;v++){m=(this.words[v+u]|0)+M;var _=(p.words[v]|0)*d;m-=_&67108863,M=(m>>26)-(_/67108864|0),this.words[v+u]=m&67108863}for(;v<this.length-u;v++)m=(this.words[v+u]|0)+M,M=m>>26,this.words[v+u]=m&67108863;if(M===0)return this.strip();for(i(M===-1),M=0,v=0;v<this.length;v++)m=-(this.words[v]|0)+M,M=m>>26,this.words[v]=m&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(p,d){var u=this.length-p.length,l=this.clone(),v=p,m=v.words[v.length-1]|0,M=this._countBits(m);u=26-M,u!==0&&(v=v.ushln(u),l.iushln(u),m=v.words[v.length-1]|0);var _=l.length-v.length,b;if(d!=="mod"){b=new s(null),b.length=_+1,b.words=new Array(b.length);for(var x=0;x<b.length;x++)b.words[x]=0}var y=l.clone()._ishlnsubmul(v,1,_);y.negative===0&&(l=y,b&&(b.words[_]=1));for(var D=_-1;D>=0;D--){var J=(l.words[v.length+D]|0)*67108864+(l.words[v.length+D-1]|0);for(J=Math.min(J/m|0,67108863),l._ishlnsubmul(v,J,D);l.negative!==0;)J--,l.negative=0,l._ishlnsubmul(v,1,D),l.isZero()||(l.negative^=1);b&&(b.words[D]=J)}return b&&b.strip(),l.strip(),d!=="div"&&u!==0&&l.iushrn(u),{div:b||null,mod:l}},s.prototype.divmod=function(p,d,u){if(i(!p.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var l,v,m;return this.negative!==0&&p.negative===0?(m=this.neg().divmod(p,d),d!=="mod"&&(l=m.div.neg()),d!=="div"&&(v=m.mod.neg(),u&&v.negative!==0&&v.iadd(p)),{div:l,mod:v}):this.negative===0&&p.negative!==0?(m=this.divmod(p.neg(),d),d!=="mod"&&(l=m.div.neg()),{div:l,mod:m.mod}):this.negative&p.negative?(m=this.neg().divmod(p.neg(),d),d!=="div"&&(v=m.mod.neg(),u&&v.negative!==0&&v.isub(p)),{div:m.div,mod:v}):p.length>this.length||this.cmp(p)<0?{div:new s(0),mod:this}:p.length===1?d==="div"?{div:this.divn(p.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modn(p.words[0]))}:{div:this.divn(p.words[0]),mod:new s(this.modn(p.words[0]))}:this._wordDiv(p,d)},s.prototype.div=function(p){return this.divmod(p,"div",!1).div},s.prototype.mod=function(p){return this.divmod(p,"mod",!1).mod},s.prototype.umod=function(p){return this.divmod(p,"mod",!0).mod},s.prototype.divRound=function(p){var d=this.divmod(p);if(d.mod.isZero())return d.div;var u=d.div.negative!==0?d.mod.isub(p):d.mod,l=p.ushrn(1),v=p.andln(1),m=u.cmp(l);return m<0||v===1&&m===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modn=function(p){i(p<=67108863);for(var d=(1<<26)%p,u=0,l=this.length-1;l>=0;l--)u=(d*u+(this.words[l]|0))%p;return u},s.prototype.idivn=function(p){i(p<=67108863);for(var d=0,u=this.length-1;u>=0;u--){var l=(this.words[u]|0)+d*67108864;this.words[u]=l/p|0,d=l%p}return this.strip()},s.prototype.divn=function(p){return this.clone().idivn(p)},s.prototype.egcd=function(p){i(p.negative===0),i(!p.isZero());var d=this,u=p.clone();d.negative!==0?d=d.umod(p):d=d.clone();for(var l=new s(1),v=new s(0),m=new s(0),M=new s(1),_=0;d.isEven()&&u.isEven();)d.iushrn(1),u.iushrn(1),++_;for(var b=u.clone(),x=d.clone();!d.isZero();){for(var y=0,D=1;!(d.words[0]&D)&&y<26;++y,D<<=1);if(y>0)for(d.iushrn(y);y-- >0;)(l.isOdd()||v.isOdd())&&(l.iadd(b),v.isub(x)),l.iushrn(1),v.iushrn(1);for(var J=0,A=1;!(u.words[0]&A)&&J<26;++J,A<<=1);if(J>0)for(u.iushrn(J);J-- >0;)(m.isOdd()||M.isOdd())&&(m.iadd(b),M.isub(x)),m.iushrn(1),M.iushrn(1);d.cmp(u)>=0?(d.isub(u),l.isub(m),v.isub(M)):(u.isub(d),m.isub(l),M.isub(v))}return{a:m,b:M,gcd:u.iushln(_)}},s.prototype._invmp=function(p){i(p.negative===0),i(!p.isZero());var d=this,u=p.clone();d.negative!==0?d=d.umod(p):d=d.clone();for(var l=new s(1),v=new s(0),m=u.clone();d.cmpn(1)>0&&u.cmpn(1)>0;){for(var M=0,_=1;!(d.words[0]&_)&&M<26;++M,_<<=1);if(M>0)for(d.iushrn(M);M-- >0;)l.isOdd()&&l.iadd(m),l.iushrn(1);for(var b=0,x=1;!(u.words[0]&x)&&b<26;++b,x<<=1);if(b>0)for(u.iushrn(b);b-- >0;)v.isOdd()&&v.iadd(m),v.iushrn(1);d.cmp(u)>=0?(d.isub(u),l.isub(v)):(u.isub(d),v.isub(l))}var y;return d.cmpn(1)===0?y=l:y=v,y.cmpn(0)<0&&y.iadd(p),y},s.prototype.gcd=function(p){if(this.isZero())return p.abs();if(p.isZero())return this.abs();var d=this.clone(),u=p.clone();d.negative=0,u.negative=0;for(var l=0;d.isEven()&&u.isEven();l++)d.iushrn(1),u.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;u.isEven();)u.iushrn(1);var v=d.cmp(u);if(v<0){var m=d;d=u,u=m}else if(v===0||u.cmpn(1)===0)break;d.isub(u)}while(!0);return u.iushln(l)},s.prototype.invm=function(p){return this.egcd(p).a.umod(p)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(p){return this.words[0]&p},s.prototype.bincn=function(p){i(typeof p=="number");var d=p%26,u=(p-d)/26,l=1<<d;if(this.length<=u)return this._expand(u+1),this.words[u]|=l,this;for(var v=l,m=u;v!==0&&m<this.length;m++){var M=this.words[m]|0;M+=v,v=M>>>26,M&=67108863,this.words[m]=M}return v!==0&&(this.words[m]=v,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(p){var d=p<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var u;if(this.length>1)u=1;else{d&&(p=-p),i(p<=67108863,"Number is too big");var l=this.words[0]|0;u=l===p?0:l<p?-1:1}return this.negative!==0?-u|0:u},s.prototype.cmp=function(p){if(this.negative!==0&&p.negative===0)return-1;if(this.negative===0&&p.negative!==0)return 1;var d=this.ucmp(p);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(p){if(this.length>p.length)return 1;if(this.length<p.length)return-1;for(var d=0,u=this.length-1;u>=0;u--){var l=this.words[u]|0,v=p.words[u]|0;if(l!==v){l<v?d=-1:l>v&&(d=1);break}}return d},s.prototype.gtn=function(p){return this.cmpn(p)===1},s.prototype.gt=function(p){return this.cmp(p)===1},s.prototype.gten=function(p){return this.cmpn(p)>=0},s.prototype.gte=function(p){return this.cmp(p)>=0},s.prototype.ltn=function(p){return this.cmpn(p)===-1},s.prototype.lt=function(p){return this.cmp(p)===-1},s.prototype.lten=function(p){return this.cmpn(p)<=0},s.prototype.lte=function(p){return this.cmp(p)<=0},s.prototype.eqn=function(p){return this.cmpn(p)===0},s.prototype.eq=function(p){return this.cmp(p)===0},s.red=function(p){return new j(p)},s.prototype.toRed=function(p){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),p.convertTo(this)._forceRed(p)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(p){return this.red=p,this},s.prototype.forceRed=function(p){return i(!this.red,"Already a number in reduction context"),this._forceRed(p)},s.prototype.redAdd=function(p){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,p)},s.prototype.redIAdd=function(p){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,p)},s.prototype.redSub=function(p){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,p)},s.prototype.redISub=function(p){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,p)},s.prototype.redShl=function(p){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,p)},s.prototype.redMul=function(p){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.mul(this,p)},s.prototype.redIMul=function(p){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.imul(this,p)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(p){return i(this.red&&!p.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,p)};var L={k256:null,p224:null,p192:null,p25519:null};function R(O,p){this.name=O,this.p=new s(p,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var p=new s(null);return p.words=new Array(Math.ceil(this.n/13)),p},R.prototype.ireduce=function(p){var d=p,u;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),u=d.bitLength();while(u>this.n);var l=u<this.n?-1:d.ucmp(this.p);return l===0?(d.words[0]=0,d.length=1):l>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},R.prototype.split=function(p,d){p.iushrn(this.n,0,d)},R.prototype.imulK=function(p){return p.imul(this.k)};function $(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n($,R),$.prototype.split=function(p,d){for(var u=4194303,l=Math.min(p.length,9),v=0;v<l;v++)d.words[v]=p.words[v];if(d.length=l,p.length<=9){p.words[0]=0,p.length=1;return}var m=p.words[9];for(d.words[d.length++]=m&u,v=10;v<p.length;v++){var M=p.words[v]|0;p.words[v-10]=(M&u)<<4|m>>>22,m=M}m>>>=22,p.words[v-10]=m,m===0&&p.length>10?p.length-=10:p.length-=9},$.prototype.imulK=function(p){p.words[p.length]=0,p.words[p.length+1]=0,p.length+=2;for(var d=0,u=0;u<p.length;u++){var l=p.words[u]|0;d+=l*977,p.words[u]=d&67108863,d=l*64+(d/67108864|0)}return p.words[p.length-1]===0&&(p.length--,p.words[p.length-1]===0&&p.length--),p};function P(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(P,R);function U(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(U,R);function k(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(k,R),k.prototype.imulK=function(p){for(var d=0,u=0;u<p.length;u++){var l=(p.words[u]|0)*19+d,v=l&67108863;l>>>=26,p.words[u]=v,d=l}return d!==0&&(p.words[p.length++]=d),p},s._prime=function(p){if(L[p])return L[p];var d;if(p==="k256")d=new $;else if(p==="p224")d=new P;else if(p==="p192")d=new U;else if(p==="p25519")d=new k;else throw new Error("Unknown prime "+p);return L[p]=d,d};function j(O){if(typeof O=="string"){var p=s._prime(O);this.m=p.p,this.prime=p}else i(O.gtn(1),"modulus must be greater than 1"),this.m=O,this.prime=null}j.prototype._verify1=function(p){i(p.negative===0,"red works only with positives"),i(p.red,"red works only with red numbers")},j.prototype._verify2=function(p,d){i((p.negative|d.negative)===0,"red works only with positives"),i(p.red&&p.red===d.red,"red works only with red numbers")},j.prototype.imod=function(p){return this.prime?this.prime.ireduce(p)._forceRed(this):p.umod(this.m)._forceRed(this)},j.prototype.neg=function(p){return p.isZero()?p.clone():this.m.sub(p)._forceRed(this)},j.prototype.add=function(p,d){this._verify2(p,d);var u=p.add(d);return u.cmp(this.m)>=0&&u.isub(this.m),u._forceRed(this)},j.prototype.iadd=function(p,d){this._verify2(p,d);var u=p.iadd(d);return u.cmp(this.m)>=0&&u.isub(this.m),u},j.prototype.sub=function(p,d){this._verify2(p,d);var u=p.sub(d);return u.cmpn(0)<0&&u.iadd(this.m),u._forceRed(this)},j.prototype.isub=function(p,d){this._verify2(p,d);var u=p.isub(d);return u.cmpn(0)<0&&u.iadd(this.m),u},j.prototype.shl=function(p,d){return this._verify1(p),this.imod(p.ushln(d))},j.prototype.imul=function(p,d){return this._verify2(p,d),this.imod(p.imul(d))},j.prototype.mul=function(p,d){return this._verify2(p,d),this.imod(p.mul(d))},j.prototype.isqr=function(p){return this.imul(p,p.clone())},j.prototype.sqr=function(p){return this.mul(p,p)},j.prototype.sqrt=function(p){if(p.isZero())return p.clone();var d=this.m.andln(3);if(i(d%2===1),d===3){var u=this.m.add(new s(1)).iushrn(2);return this.pow(p,u)}for(var l=this.m.subn(1),v=0;!l.isZero()&&l.andln(1)===0;)v++,l.iushrn(1);i(!l.isZero());var m=new s(1).toRed(this),M=m.redNeg(),_=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new s(2*b*b).toRed(this);this.pow(b,_).cmp(M)!==0;)b.redIAdd(M);for(var x=this.pow(b,l),y=this.pow(p,l.addn(1).iushrn(1)),D=this.pow(p,l),J=v;D.cmp(m)!==0;){for(var A=D,z=0;A.cmp(m)!==0;z++)A=A.redSqr();i(z<J);var H=this.pow(x,new s(1).iushln(J-z-1));y=y.redMul(H),x=H.redSqr(),D=D.redMul(x),J=z}return y},j.prototype.invm=function(p){var d=p._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},j.prototype.pow=function(p,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return p.clone();var u=4,l=new Array(1<<u);l[0]=new s(1).toRed(this),l[1]=p;for(var v=2;v<l.length;v++)l[v]=this.mul(l[v-1],p);var m=l[0],M=0,_=0,b=d.bitLength()%26;for(b===0&&(b=26),v=d.length-1;v>=0;v--){for(var x=d.words[v],y=b-1;y>=0;y--){var D=x>>y&1;if(m!==l[0]&&(m=this.sqr(m)),D===0&&M===0){_=0;continue}M<<=1,M|=D,_++,!(_!==u&&(v!==0||y!==0))&&(m=this.mul(m,l[M]),_=0,M=0)}b=26}return m},j.prototype.convertTo=function(p){var d=p.umod(this.m);return d===p?d.clone():d},j.prototype.convertFrom=function(p){var d=p.clone();return d.red=null,d},s.mont=function(p){return new G(p)};function G(O){j.call(this,O),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(G,j),G.prototype.convertTo=function(p){return this.imod(p.ushln(this.shift))},G.prototype.convertFrom=function(p){var d=this.imod(p.mul(this.rinv));return d.red=null,d},G.prototype.imul=function(p,d){if(p.isZero()||d.isZero())return p.words[0]=0,p.length=1,p;var u=p.imul(d),l=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=u.isub(l).iushrn(this.shift),m=v;return v.cmp(this.m)>=0?m=v.isub(this.m):v.cmpn(0)<0&&(m=v.iadd(this.m)),m._forceRed(this)},G.prototype.mul=function(p,d){if(p.isZero()||d.isZero())return new s(0)._forceRed(this);var u=p.mul(d),l=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=u.isub(l).iushrn(this.shift),m=v;return v.cmp(this.m)>=0?m=v.isub(this.m):v.cmpn(0)<0&&(m=v.iadd(this.m)),m._forceRed(this)},G.prototype.invm=function(p){var d=this.imod(p._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(t,M8)}(Uo)),Uo.exports}var Cf={},Vl;function j1(){return Vl||(Vl=1,function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var f=s.charCodeAt(c),h=f>>8,g=f&255;h?a.push(h,g):a.push(g)}return a}e.toArray=r;function i(s){return s.length===1?"0"+s:s}e.zero2=i;function n(s){for(var o="",a=0;a<s.length;a++)o+=i(s[a].toString(16));return o}e.toHex=n,e.encode=function(o,a){return a==="hex"?n(o):o}}(Cf)),Cf}var Hl;function Or(){return Hl||(Hl=1,function(t){var e=t,r=Ri(),i=Mn(),n=j1();e.assert=i,e.toArray=n.toArray,e.zero2=n.zero2,e.toHex=n.toHex,e.encode=n.encode;function s(h,g,w){var S=new Array(Math.max(h.bitLength(),w)+1),E;for(E=0;E<S.length;E+=1)S[E]=0;var I=1<<g+1,N=h.clone();for(E=0;E<S.length;E++){var C,T=N.andln(I-1);N.isOdd()?(T>(I>>1)-1?C=(I>>1)-T:C=T,N.isubn(C)):C=0,S[E]=C,N.iushrn(1)}return S}e.getNAF=s;function o(h,g){var w=[[],[]];h=h.clone(),g=g.clone();for(var S=0,E=0,I;h.cmpn(-S)>0||g.cmpn(-E)>0;){var N=h.andln(3)+S&3,C=g.andln(3)+E&3;N===3&&(N=-1),C===3&&(C=-1);var T;N&1?(I=h.andln(7)+S&7,(I===3||I===5)&&C===2?T=-N:T=N):T=0,w[0].push(T);var L;C&1?(I=g.andln(7)+E&7,(I===3||I===5)&&N===2?L=-C:L=C):L=0,w[1].push(L),2*S===T+1&&(S=1-S),2*E===L+1&&(E=1-E),h.iushrn(1),g.iushrn(1)}return w}e.getJSF=o;function a(h,g,w){var S="_"+g;h.prototype[g]=function(){return this[S]!==void 0?this[S]:this[S]=w.call(this)}}e.cachedProperty=a;function c(h){return typeof h=="string"?e.toArray(h,"hex"):h}e.parseBytes=c;function f(h){return new r(h,"hex","le")}e.intFromLE=f}(Nf)),Nf}var Eo={exports:{}},Wl;function K1(){if(Wl)return Eo.exports;Wl=1;var t;Eo.exports=function(n){return t||(t=new e(null)),t.generate(n)};function e(i){this.rand=i}if(Eo.exports.Rand=e,e.prototype.generate=function(n){return this._rand(n)},e.prototype._rand=function(n){if(this.rand.getBytes)return this.rand.getBytes(n);for(var s=new Uint8Array(n),o=0;o<s.length;o++)s[o]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(n){var s=new Uint8Array(n);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(n){var s=new Uint8Array(n);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=yu;if(typeof r.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(n){return r.randomBytes(n)}}catch{}return Eo.exports}var Tf={},Ff,Gl;function Oa(){if(Gl)return Ff;Gl=1;var t=Ri(),e=Or(),r=e.getNAF,i=e.getJSF,n=e.assert;function s(a,c){this.type=a,this.p=new t(c.p,16),this.red=c.prime?t.red(c.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=c.n&&new t(c.n,16),this.g=c.g&&this.pointFromJSON(c.g,c.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var f=this.n&&this.p.div(this.n);!f||f.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}Ff=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(c,f){n(c.precomputed);var h=c._getDoubles(),g=r(f,1,this._bitLength),w=(1<<h.step+1)-(h.step%2===0?2:1);w/=3;var S=[],E,I;for(E=0;E<g.length;E+=h.step){I=0;for(var N=E+h.step-1;N>=E;N--)I=(I<<1)+g[N];S.push(I)}for(var C=this.jpoint(null,null,null),T=this.jpoint(null,null,null),L=w;L>0;L--){for(E=0;E<S.length;E++)I=S[E],I===L?T=T.mixedAdd(h.points[E]):I===-L&&(T=T.mixedAdd(h.points[E].neg()));C=C.add(T)}return C.toP()},s.prototype._wnafMul=function(c,f){var h=4,g=c._getNAFPoints(h);h=g.wnd;for(var w=g.points,S=r(f,h,this._bitLength),E=this.jpoint(null,null,null),I=S.length-1;I>=0;I--){for(var N=0;I>=0&&S[I]===0;I--)N++;if(I>=0&&N++,E=E.dblp(N),I<0)break;var C=S[I];n(C!==0),c.type==="affine"?C>0?E=E.mixedAdd(w[C-1>>1]):E=E.mixedAdd(w[-C-1>>1].neg()):C>0?E=E.add(w[C-1>>1]):E=E.add(w[-C-1>>1].neg())}return c.type==="affine"?E.toP():E},s.prototype._wnafMulAdd=function(c,f,h,g,w){var S=this._wnafT1,E=this._wnafT2,I=this._wnafT3,N=0,C,T,L;for(C=0;C<g;C++){L=f[C];var R=L._getNAFPoints(c);S[C]=R.wnd,E[C]=R.points}for(C=g-1;C>=1;C-=2){var $=C-1,P=C;if(S[$]!==1||S[P]!==1){I[$]=r(h[$],S[$],this._bitLength),I[P]=r(h[P],S[P],this._bitLength),N=Math.max(I[$].length,N),N=Math.max(I[P].length,N);continue}var U=[f[$],null,null,f[P]];f[$].y.cmp(f[P].y)===0?(U[1]=f[$].add(f[P]),U[2]=f[$].toJ().mixedAdd(f[P].neg())):f[$].y.cmp(f[P].y.redNeg())===0?(U[1]=f[$].toJ().mixedAdd(f[P]),U[2]=f[$].add(f[P].neg())):(U[1]=f[$].toJ().mixedAdd(f[P]),U[2]=f[$].toJ().mixedAdd(f[P].neg()));var k=[-3,-1,-5,-7,0,7,5,1,3],j=i(h[$],h[P]);for(N=Math.max(j[0].length,N),I[$]=new Array(N),I[P]=new Array(N),T=0;T<N;T++){var G=j[0][T]|0,O=j[1][T]|0;I[$][T]=k[(G+1)*3+(O+1)],I[P][T]=0,E[$]=U}}var p=this.jpoint(null,null,null),d=this._wnafT4;for(C=N;C>=0;C--){for(var u=0;C>=0;){var l=!0;for(T=0;T<g;T++)d[T]=I[T][C]|0,d[T]!==0&&(l=!1);if(!l)break;u++,C--}if(C>=0&&u++,p=p.dblp(u),C<0)break;for(T=0;T<g;T++){var v=d[T];v!==0&&(v>0?L=E[T][v-1>>1]:v<0&&(L=E[T][-v-1>>1].neg()),L.type==="affine"?p=p.mixedAdd(L):p=p.add(L))}}for(C=0;C<g;C++)E[C]=null;return w?p:p.toP()};function o(a,c){this.curve=a,this.type=c,this.precomputed=null}return s.BasePoint=o,o.prototype.eq=function(){throw new Error("Not implemented")},o.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(c,f){c=e.toArray(c,f);var h=this.p.byteLength();if((c[0]===4||c[0]===6||c[0]===7)&&c.length-1===2*h){c[0]===6?n(c[c.length-1]%2===0):c[0]===7&&n(c[c.length-1]%2===1);var g=this.point(c.slice(1,1+h),c.slice(1+h,1+2*h));return g}else if((c[0]===2||c[0]===3)&&c.length-1===h)return this.pointFromX(c.slice(1,1+h),c[0]===3);throw new Error("Unknown point format")},o.prototype.encodeCompressed=function(c){return this.encode(c,!0)},o.prototype._encode=function(c){var f=this.curve.p.byteLength(),h=this.getX().toArray("be",f);return c?[this.getY().isEven()?2:3].concat(h):[4].concat(h,this.getY().toArray("be",f))},o.prototype.encode=function(c,f){return e.encode(this._encode(f),c)},o.prototype.precompute=function(c){if(this.precomputed)return this;var f={doubles:null,naf:null,beta:null};return f.naf=this._getNAFPoints(8),f.doubles=this._getDoubles(4,c),f.beta=this._getBeta(),this.precomputed=f,this},o.prototype._hasDoubles=function(c){if(!this.precomputed)return!1;var f=this.precomputed.doubles;return f?f.points.length>=Math.ceil((c.bitLength()+1)/f.step):!1},o.prototype._getDoubles=function(c,f){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var h=[this],g=this,w=0;w<f;w+=c){for(var S=0;S<c;S++)g=g.dbl();h.push(g)}return{step:c,points:h}},o.prototype._getNAFPoints=function(c){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var f=[this],h=(1<<c)-1,g=h===1?null:this.dbl(),w=1;w<h;w++)f[w]=f[w-1].add(g);return{wnd:c,points:f}},o.prototype._getBeta=function(){return null},o.prototype.dblp=function(c){for(var f=this,h=0;h<c;h++)f=f.dbl();return f},Ff}var $f,Jl;function I8(){if(Jl)return $f;Jl=1;var t=Or(),e=Ri(),r=Sa(),i=Oa(),n=t.assert;function s(c){i.call(this,"short",c),this.a=new e(c.a,16).toRed(this.red),this.b=new e(c.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(c),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}r(s,i),$f=s,s.prototype._getEndomorphism=function(f){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var h,g;if(f.beta)h=new e(f.beta,16).toRed(this.red);else{var w=this._getEndoRoots(this.p);h=w[0].cmp(w[1])<0?w[0]:w[1],h=h.toRed(this.red)}if(f.lambda)g=new e(f.lambda,16);else{var S=this._getEndoRoots(this.n);this.g.mul(S[0]).x.cmp(this.g.x.redMul(h))===0?g=S[0]:(g=S[1],n(this.g.mul(g).x.cmp(this.g.x.redMul(h))===0))}var E;return f.basis?E=f.basis.map(function(I){return{a:new e(I.a,16),b:new e(I.b,16)}}):E=this._getEndoBasis(g),{beta:h,lambda:g,basis:E}}},s.prototype._getEndoRoots=function(f){var h=f===this.p?this.red:e.mont(f),g=new e(2).toRed(h).redInvm(),w=g.redNeg(),S=new e(3).toRed(h).redNeg().redSqrt().redMul(g),E=w.redAdd(S).fromRed(),I=w.redSub(S).fromRed();return[E,I]},s.prototype._getEndoBasis=function(f){for(var h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),g=f,w=this.n.clone(),S=new e(1),E=new e(0),I=new e(0),N=new e(1),C,T,L,R,$,P,U,k=0,j,G;g.cmpn(0)!==0;){var O=w.div(g);j=w.sub(O.mul(g)),G=I.sub(O.mul(S));var p=N.sub(O.mul(E));if(!L&&j.cmp(h)<0)C=U.neg(),T=S,L=j.neg(),R=G;else if(L&&++k===2)break;U=j,w=g,g=j,I=S,S=G,N=E,E=p}$=j.neg(),P=G;var d=L.sqr().add(R.sqr()),u=$.sqr().add(P.sqr());return u.cmp(d)>=0&&($=C,P=T),L.negative&&(L=L.neg(),R=R.neg()),$.negative&&($=$.neg(),P=P.neg()),[{a:L,b:R},{a:$,b:P}]},s.prototype._endoSplit=function(f){var h=this.endo.basis,g=h[0],w=h[1],S=w.b.mul(f).divRound(this.n),E=g.b.neg().mul(f).divRound(this.n),I=S.mul(g.a),N=E.mul(w.a),C=S.mul(g.b),T=E.mul(w.b),L=f.sub(I).sub(N),R=C.add(T).neg();return{k1:L,k2:R}},s.prototype.pointFromX=function(f,h){f=new e(f,16),f.red||(f=f.toRed(this.red));var g=f.redSqr().redMul(f).redIAdd(f.redMul(this.a)).redIAdd(this.b),w=g.redSqrt();if(w.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var S=w.fromRed().isOdd();return(h&&!S||!h&&S)&&(w=w.redNeg()),this.point(f,w)},s.prototype.validate=function(f){if(f.inf)return!0;var h=f.x,g=f.y,w=this.a.redMul(h),S=h.redSqr().redMul(h).redIAdd(w).redIAdd(this.b);return g.redSqr().redISub(S).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(f,h,g){for(var w=this._endoWnafT1,S=this._endoWnafT2,E=0;E<f.length;E++){var I=this._endoSplit(h[E]),N=f[E],C=N._getBeta();I.k1.negative&&(I.k1.ineg(),N=N.neg(!0)),I.k2.negative&&(I.k2.ineg(),C=C.neg(!0)),w[E*2]=N,w[E*2+1]=C,S[E*2]=I.k1,S[E*2+1]=I.k2}for(var T=this._wnafMulAdd(1,w,S,E*2,g),L=0;L<E*2;L++)w[L]=null,S[L]=null;return T};function o(c,f,h,g){i.BasePoint.call(this,c,"affine"),f===null&&h===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(f,16),this.y=new e(h,16),g&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}r(o,i.BasePoint),s.prototype.point=function(f,h,g){return new o(this,f,h,g)},s.prototype.pointFromJSON=function(f,h){return o.fromJSON(this,f,h)},o.prototype._getBeta=function(){if(this.curve.endo){var f=this.precomputed;if(f&&f.beta)return f.beta;var h=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(f){var g=this.curve,w=function(S){return g.point(S.x.redMul(g.endo.beta),S.y)};f.beta=h,h.precomputed={beta:null,naf:f.naf&&{wnd:f.naf.wnd,points:f.naf.points.map(w)},doubles:f.doubles&&{step:f.doubles.step,points:f.doubles.points.map(w)}}}return h}},o.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},o.fromJSON=function(f,h,g){typeof h=="string"&&(h=JSON.parse(h));var w=f.point(h[0],h[1],g);if(!h[2])return w;function S(I){return f.point(I[0],I[1],g)}var E=h[2];return w.precomputed={beta:null,doubles:E.doubles&&{step:E.doubles.step,points:[w].concat(E.doubles.points.map(S))},naf:E.naf&&{wnd:E.naf.wnd,points:[w].concat(E.naf.points.map(S))}},w},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.inf},o.prototype.add=function(f){if(this.inf)return f;if(f.inf)return this;if(this.eq(f))return this.dbl();if(this.neg().eq(f))return this.curve.point(null,null);if(this.x.cmp(f.x)===0)return this.curve.point(null,null);var h=this.y.redSub(f.y);h.cmpn(0)!==0&&(h=h.redMul(this.x.redSub(f.x).redInvm()));var g=h.redSqr().redISub(this.x).redISub(f.x),w=h.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,w)},o.prototype.dbl=function(){if(this.inf)return this;var f=this.y.redAdd(this.y);if(f.cmpn(0)===0)return this.curve.point(null,null);var h=this.curve.a,g=this.x.redSqr(),w=f.redInvm(),S=g.redAdd(g).redIAdd(g).redIAdd(h).redMul(w),E=S.redSqr().redISub(this.x.redAdd(this.x)),I=S.redMul(this.x.redSub(E)).redISub(this.y);return this.curve.point(E,I)},o.prototype.getX=function(){return this.x.fromRed()},o.prototype.getY=function(){return this.y.fromRed()},o.prototype.mul=function(f){return f=new e(f,16),this.isInfinity()?this:this._hasDoubles(f)?this.curve._fixedNafMul(this,f):this.curve.endo?this.curve._endoWnafMulAdd([this],[f]):this.curve._wnafMul(this,f)},o.prototype.mulAdd=function(f,h,g){var w=[this,h],S=[f,g];return this.curve.endo?this.curve._endoWnafMulAdd(w,S):this.curve._wnafMulAdd(1,w,S,2)},o.prototype.jmulAdd=function(f,h,g){var w=[this,h],S=[f,g];return this.curve.endo?this.curve._endoWnafMulAdd(w,S,!0):this.curve._wnafMulAdd(1,w,S,2,!0)},o.prototype.eq=function(f){return this===f||this.inf===f.inf&&(this.inf||this.x.cmp(f.x)===0&&this.y.cmp(f.y)===0)},o.prototype.neg=function(f){if(this.inf)return this;var h=this.curve.point(this.x,this.y.redNeg());if(f&&this.precomputed){var g=this.precomputed,w=function(S){return S.neg()};h.precomputed={naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(w)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(w)}}}return h},o.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var f=this.curve.jpoint(this.x,this.y,this.curve.one);return f};function a(c,f,h,g){i.BasePoint.call(this,c,"jacobian"),f===null&&h===null&&g===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(f,16),this.y=new e(h,16),this.z=new e(g,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(a,i.BasePoint),s.prototype.jpoint=function(f,h,g){return new a(this,f,h,g)},a.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var f=this.z.redInvm(),h=f.redSqr(),g=this.x.redMul(h),w=this.y.redMul(h).redMul(f);return this.curve.point(g,w)},a.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},a.prototype.add=function(f){if(this.isInfinity())return f;if(f.isInfinity())return this;var h=f.z.redSqr(),g=this.z.redSqr(),w=this.x.redMul(h),S=f.x.redMul(g),E=this.y.redMul(h.redMul(f.z)),I=f.y.redMul(g.redMul(this.z)),N=w.redSub(S),C=E.redSub(I);if(N.cmpn(0)===0)return C.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var T=N.redSqr(),L=T.redMul(N),R=w.redMul(T),$=C.redSqr().redIAdd(L).redISub(R).redISub(R),P=C.redMul(R.redISub($)).redISub(E.redMul(L)),U=this.z.redMul(f.z).redMul(N);return this.curve.jpoint($,P,U)},a.prototype.mixedAdd=function(f){if(this.isInfinity())return f.toJ();if(f.isInfinity())return this;var h=this.z.redSqr(),g=this.x,w=f.x.redMul(h),S=this.y,E=f.y.redMul(h).redMul(this.z),I=g.redSub(w),N=S.redSub(E);if(I.cmpn(0)===0)return N.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var C=I.redSqr(),T=C.redMul(I),L=g.redMul(C),R=N.redSqr().redIAdd(T).redISub(L).redISub(L),$=N.redMul(L.redISub(R)).redISub(S.redMul(T)),P=this.z.redMul(I);return this.curve.jpoint(R,$,P)},a.prototype.dblp=function(f){if(f===0)return this;if(this.isInfinity())return this;if(!f)return this.dbl();var h;if(this.curve.zeroA||this.curve.threeA){var g=this;for(h=0;h<f;h++)g=g.dbl();return g}var w=this.curve.a,S=this.curve.tinv,E=this.x,I=this.y,N=this.z,C=N.redSqr().redSqr(),T=I.redAdd(I);for(h=0;h<f;h++){var L=E.redSqr(),R=T.redSqr(),$=R.redSqr(),P=L.redAdd(L).redIAdd(L).redIAdd(w.redMul(C)),U=E.redMul(R),k=P.redSqr().redISub(U.redAdd(U)),j=U.redISub(k),G=P.redMul(j);G=G.redIAdd(G).redISub($);var O=T.redMul(N);h+1<f&&(C=C.redMul($)),E=k,N=O,T=G}return this.curve.jpoint(E,T.redMul(S),N)},a.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},a.prototype._zeroDbl=function(){var f,h,g;if(this.zOne){var w=this.x.redSqr(),S=this.y.redSqr(),E=S.redSqr(),I=this.x.redAdd(S).redSqr().redISub(w).redISub(E);I=I.redIAdd(I);var N=w.redAdd(w).redIAdd(w),C=N.redSqr().redISub(I).redISub(I),T=E.redIAdd(E);T=T.redIAdd(T),T=T.redIAdd(T),f=C,h=N.redMul(I.redISub(C)).redISub(T),g=this.y.redAdd(this.y)}else{var L=this.x.redSqr(),R=this.y.redSqr(),$=R.redSqr(),P=this.x.redAdd(R).redSqr().redISub(L).redISub($);P=P.redIAdd(P);var U=L.redAdd(L).redIAdd(L),k=U.redSqr(),j=$.redIAdd($);j=j.redIAdd(j),j=j.redIAdd(j),f=k.redISub(P).redISub(P),h=U.redMul(P.redISub(f)).redISub(j),g=this.y.redMul(this.z),g=g.redIAdd(g)}return this.curve.jpoint(f,h,g)},a.prototype._threeDbl=function(){var f,h,g;if(this.zOne){var w=this.x.redSqr(),S=this.y.redSqr(),E=S.redSqr(),I=this.x.redAdd(S).redSqr().redISub(w).redISub(E);I=I.redIAdd(I);var N=w.redAdd(w).redIAdd(w).redIAdd(this.curve.a),C=N.redSqr().redISub(I).redISub(I);f=C;var T=E.redIAdd(E);T=T.redIAdd(T),T=T.redIAdd(T),h=N.redMul(I.redISub(C)).redISub(T),g=this.y.redAdd(this.y)}else{var L=this.z.redSqr(),R=this.y.redSqr(),$=this.x.redMul(R),P=this.x.redSub(L).redMul(this.x.redAdd(L));P=P.redAdd(P).redIAdd(P);var U=$.redIAdd($);U=U.redIAdd(U);var k=U.redAdd(U);f=P.redSqr().redISub(k),g=this.y.redAdd(this.z).redSqr().redISub(R).redISub(L);var j=R.redSqr();j=j.redIAdd(j),j=j.redIAdd(j),j=j.redIAdd(j),h=P.redMul(U.redISub(f)).redISub(j)}return this.curve.jpoint(f,h,g)},a.prototype._dbl=function(){var f=this.curve.a,h=this.x,g=this.y,w=this.z,S=w.redSqr().redSqr(),E=h.redSqr(),I=g.redSqr(),N=E.redAdd(E).redIAdd(E).redIAdd(f.redMul(S)),C=h.redAdd(h);C=C.redIAdd(C);var T=C.redMul(I),L=N.redSqr().redISub(T.redAdd(T)),R=T.redISub(L),$=I.redSqr();$=$.redIAdd($),$=$.redIAdd($),$=$.redIAdd($);var P=N.redMul(R).redISub($),U=g.redAdd(g).redMul(w);return this.curve.jpoint(L,P,U)},a.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var f=this.x.redSqr(),h=this.y.redSqr(),g=this.z.redSqr(),w=h.redSqr(),S=f.redAdd(f).redIAdd(f),E=S.redSqr(),I=this.x.redAdd(h).redSqr().redISub(f).redISub(w);I=I.redIAdd(I),I=I.redAdd(I).redIAdd(I),I=I.redISub(E);var N=I.redSqr(),C=w.redIAdd(w);C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C);var T=S.redIAdd(I).redSqr().redISub(E).redISub(N).redISub(C),L=h.redMul(T);L=L.redIAdd(L),L=L.redIAdd(L);var R=this.x.redMul(N).redISub(L);R=R.redIAdd(R),R=R.redIAdd(R);var $=this.y.redMul(T.redMul(C.redISub(T)).redISub(I.redMul(N)));$=$.redIAdd($),$=$.redIAdd($),$=$.redIAdd($);var P=this.z.redAdd(I).redSqr().redISub(g).redISub(N);return this.curve.jpoint(R,$,P)},a.prototype.mul=function(f,h){return f=new e(f,h),this.curve._wnafMul(this,f)},a.prototype.eq=function(f){if(f.type==="affine")return this.eq(f.toJ());if(this===f)return!0;var h=this.z.redSqr(),g=f.z.redSqr();if(this.x.redMul(g).redISub(f.x.redMul(h)).cmpn(0)!==0)return!1;var w=h.redMul(this.z),S=g.redMul(f.z);return this.y.redMul(S).redISub(f.y.redMul(w)).cmpn(0)===0},a.prototype.eqXToP=function(f){var h=this.z.redSqr(),g=f.toRed(this.curve.red).redMul(h);if(this.x.cmp(g)===0)return!0;for(var w=f.clone(),S=this.curve.redN.redMul(h);;){if(w.iadd(this.curve.n),w.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(S),this.x.cmp(g)===0)return!0}},a.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},a.prototype.isInfinity=function(){return this.z.cmpn(0)===0},$f}var Lf,Yl;function A8(){if(Yl)return Lf;Yl=1;var t=Ri(),e=Sa(),r=Oa(),i=Or();function n(o){r.call(this,"mont",o),this.a=new t(o.a,16).toRed(this.red),this.b=new t(o.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(n,r),Lf=n,n.prototype.validate=function(a){var c=a.normalize().x,f=c.redSqr(),h=f.redMul(c).redAdd(f.redMul(this.a)).redAdd(c),g=h.redSqrt();return g.redSqr().cmp(h)===0};function s(o,a,c){r.BasePoint.call(this,o,"projective"),a===null&&c===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(a,16),this.z=new t(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(s,r.BasePoint),n.prototype.decodePoint=function(a,c){return this.point(i.toArray(a,c),1)},n.prototype.point=function(a,c){return new s(this,a,c)},n.prototype.pointFromJSON=function(a){return s.fromJSON(this,a)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(a,c){return new s(a,c[0],c[1]||a.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var a=this.x.redAdd(this.z),c=a.redSqr(),f=this.x.redSub(this.z),h=f.redSqr(),g=c.redSub(h),w=c.redMul(h),S=g.redMul(h.redAdd(this.curve.a24.redMul(g)));return this.curve.point(w,S)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(a,c){var f=this.x.redAdd(this.z),h=this.x.redSub(this.z),g=a.x.redAdd(a.z),w=a.x.redSub(a.z),S=w.redMul(f),E=g.redMul(h),I=c.z.redMul(S.redAdd(E).redSqr()),N=c.x.redMul(S.redISub(E).redSqr());return this.curve.point(I,N)},s.prototype.mul=function(a){for(var c=a.clone(),f=this,h=this.curve.point(null,null),g=this,w=[];c.cmpn(0)!==0;c.iushrn(1))w.push(c.andln(1));for(var S=w.length-1;S>=0;S--)w[S]===0?(f=f.diffAdd(h,g),h=h.dbl()):(h=f.diffAdd(h,g),f=f.dbl());return h},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(a){return this.getX().cmp(a.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Lf}var qf,Zl;function D8(){if(Zl)return qf;Zl=1;var t=Or(),e=Ri(),r=Sa(),i=Oa(),n=t.assert;function s(a){this.twisted=(a.a|0)!==1,this.mOneA=this.twisted&&(a.a|0)===-1,this.extended=this.mOneA,i.call(this,"edwards",a),this.a=new e(a.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),n(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(a.c|0)===1}r(s,i),qf=s,s.prototype._mulA=function(c){return this.mOneA?c.redNeg():this.a.redMul(c)},s.prototype._mulC=function(c){return this.oneC?c:this.c.redMul(c)},s.prototype.jpoint=function(c,f,h,g){return this.point(c,f,h,g)},s.prototype.pointFromX=function(c,f){c=new e(c,16),c.red||(c=c.toRed(this.red));var h=c.redSqr(),g=this.c2.redSub(this.a.redMul(h)),w=this.one.redSub(this.c2.redMul(this.d).redMul(h)),S=g.redMul(w.redInvm()),E=S.redSqrt();if(E.redSqr().redSub(S).cmp(this.zero)!==0)throw new Error("invalid point");var I=E.fromRed().isOdd();return(f&&!I||!f&&I)&&(E=E.redNeg()),this.point(c,E)},s.prototype.pointFromY=function(c,f){c=new e(c,16),c.red||(c=c.toRed(this.red));var h=c.redSqr(),g=h.redSub(this.c2),w=h.redMul(this.d).redMul(this.c2).redSub(this.a),S=g.redMul(w.redInvm());if(S.cmp(this.zero)===0){if(f)throw new Error("invalid point");return this.point(this.zero,c)}var E=S.redSqrt();if(E.redSqr().redSub(S).cmp(this.zero)!==0)throw new Error("invalid point");return E.fromRed().isOdd()!==f&&(E=E.redNeg()),this.point(E,c)},s.prototype.validate=function(c){if(c.isInfinity())return!0;c.normalize();var f=c.x.redSqr(),h=c.y.redSqr(),g=f.redMul(this.a).redAdd(h),w=this.c2.redMul(this.one.redAdd(this.d.redMul(f).redMul(h)));return g.cmp(w)===0};function o(a,c,f,h,g){i.BasePoint.call(this,a,"projective"),c===null&&f===null&&h===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(c,16),this.y=new e(f,16),this.z=h?new e(h,16):this.curve.one,this.t=g&&new e(g,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(o,i.BasePoint),s.prototype.pointFromJSON=function(c){return o.fromJSON(this,c)},s.prototype.point=function(c,f,h,g){return new o(this,c,f,h,g)},o.fromJSON=function(c,f){return new o(c,f[0],f[1],f[2])},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},o.prototype._extDbl=function(){var c=this.x.redSqr(),f=this.y.redSqr(),h=this.z.redSqr();h=h.redIAdd(h);var g=this.curve._mulA(c),w=this.x.redAdd(this.y).redSqr().redISub(c).redISub(f),S=g.redAdd(f),E=S.redSub(h),I=g.redSub(f),N=w.redMul(E),C=S.redMul(I),T=w.redMul(I),L=E.redMul(S);return this.curve.point(N,C,L,T)},o.prototype._projDbl=function(){var c=this.x.redAdd(this.y).redSqr(),f=this.x.redSqr(),h=this.y.redSqr(),g,w,S,E,I,N;if(this.curve.twisted){E=this.curve._mulA(f);var C=E.redAdd(h);this.zOne?(g=c.redSub(f).redSub(h).redMul(C.redSub(this.curve.two)),w=C.redMul(E.redSub(h)),S=C.redSqr().redSub(C).redSub(C)):(I=this.z.redSqr(),N=C.redSub(I).redISub(I),g=c.redSub(f).redISub(h).redMul(N),w=C.redMul(E.redSub(h)),S=C.redMul(N))}else E=f.redAdd(h),I=this.curve._mulC(this.z).redSqr(),N=E.redSub(I).redSub(I),g=this.curve._mulC(c.redISub(E)).redMul(N),w=this.curve._mulC(E).redMul(f.redISub(h)),S=E.redMul(N);return this.curve.point(g,w,S)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},o.prototype._extAdd=function(c){var f=this.y.redSub(this.x).redMul(c.y.redSub(c.x)),h=this.y.redAdd(this.x).redMul(c.y.redAdd(c.x)),g=this.t.redMul(this.curve.dd).redMul(c.t),w=this.z.redMul(c.z.redAdd(c.z)),S=h.redSub(f),E=w.redSub(g),I=w.redAdd(g),N=h.redAdd(f),C=S.redMul(E),T=I.redMul(N),L=S.redMul(N),R=E.redMul(I);return this.curve.point(C,T,R,L)},o.prototype._projAdd=function(c){var f=this.z.redMul(c.z),h=f.redSqr(),g=this.x.redMul(c.x),w=this.y.redMul(c.y),S=this.curve.d.redMul(g).redMul(w),E=h.redSub(S),I=h.redAdd(S),N=this.x.redAdd(this.y).redMul(c.x.redAdd(c.y)).redISub(g).redISub(w),C=f.redMul(E).redMul(N),T,L;return this.curve.twisted?(T=f.redMul(I).redMul(w.redSub(this.curve._mulA(g))),L=E.redMul(I)):(T=f.redMul(I).redMul(w.redSub(g)),L=this.curve._mulC(E).redMul(I)),this.curve.point(C,T,L)},o.prototype.add=function(c){return this.isInfinity()?c:c.isInfinity()?this:this.curve.extended?this._extAdd(c):this._projAdd(c)},o.prototype.mul=function(c){return this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve._wnafMul(this,c)},o.prototype.mulAdd=function(c,f,h){return this.curve._wnafMulAdd(1,[this,f],[c,h],2,!1)},o.prototype.jmulAdd=function(c,f,h){return this.curve._wnafMulAdd(1,[this,f],[c,h],2,!0)},o.prototype.normalize=function(){if(this.zOne)return this;var c=this.z.redInvm();return this.x=this.x.redMul(c),this.y=this.y.redMul(c),this.t&&(this.t=this.t.redMul(c)),this.z=this.curve.one,this.zOne=!0,this},o.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()},o.prototype.getY=function(){return this.normalize(),this.y.fromRed()},o.prototype.eq=function(c){return this===c||this.getX().cmp(c.getX())===0&&this.getY().cmp(c.getY())===0},o.prototype.eqXToP=function(c){var f=c.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(f)===0)return!0;for(var h=c.clone(),g=this.curve.redN.redMul(this.z);;){if(h.iadd(this.curve.n),h.cmp(this.curve.p)>=0)return!1;if(f.redIAdd(g),this.x.cmp(f)===0)return!0}},o.prototype.toP=o.prototype.normalize,o.prototype.mixedAdd=o.prototype.add,qf}var Xl;function V1(){return Xl||(Xl=1,function(t){var e=t;e.base=Oa(),e.short=I8(),e.mont=A8(),e.edwards=D8()}(Tf)),Tf}var Bf={},Uf,Ql;function O8(){return Ql||(Ql=1,Uf={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Uf}var ed;function Eu(){return ed||(ed=1,function(t){var e=t,r=Ma(),i=V1(),n=Or(),s=n.assert;function o(f){f.type==="short"?this.curve=new i.short(f):f.type==="edwards"?this.curve=new i.edwards(f):this.curve=new i.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(f,h){Object.defineProperty(e,f,{configurable:!0,enumerable:!0,get:function(){var g=new o(h);return Object.defineProperty(e,f,{configurable:!0,enumerable:!0,value:g}),g}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=O8()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})}(Bf)),Bf}var zf,td;function R8(){if(td)return zf;td=1;var t=Ma(),e=j1(),r=Mn();function i(n){if(!(this instanceof i))return new i(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=e.toArray(n.entropy,n.entropyEnc||"hex"),o=e.toArray(n.nonce,n.nonceEnc||"hex"),a=e.toArray(n.pers,n.persEnc||"hex");r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,o,a)}return zf=i,i.prototype._init=function(s,o,a){var c=s.concat(o).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var f=0;f<this.V.length;f++)this.K[f]=0,this.V[f]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656},i.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},i.prototype._update=function(s){var o=this._hmac().update(this.V).update([0]);s&&(o=o.update(s)),this.K=o.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},i.prototype.reseed=function(s,o,a,c){typeof o!="string"&&(c=a,a=o,o=null),s=e.toArray(s,o),a=e.toArray(a,c),r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(a||[])),this._reseed=1},i.prototype.generate=function(s,o,a,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof o!="string"&&(c=a,a=o,o=null),a&&(a=e.toArray(a,c||"hex"),this._update(a));for(var f=[];f.length<s;)this.V=this._hmac().update(this.V).digest(),f=f.concat(this.V);var h=f.slice(0,s);return this._update(a),this._reseed++,e.encode(h,o)},zf}var kf,rd;function P8(){if(rd)return kf;rd=1;var t=Ri(),e=Or(),r=e.assert;function i(n,s){this.ec=n,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}return kf=i,i.fromPublic=function(s,o,a){return o instanceof i?o:new i(s,{pub:o,pubEnc:a})},i.fromPrivate=function(s,o,a){return o instanceof i?o:new i(s,{priv:o,privEnc:a})},i.prototype.validate=function(){var s=this.getPublic();return s.isInfinity()?{result:!1,reason:"Invalid public key"}:s.validate()?s.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(s,o){return typeof s=="string"&&(o=s,s=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),o?this.pub.encode(o,s):this.pub},i.prototype.getPrivate=function(s){return s==="hex"?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(s,o){this.priv=new t(s,o||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(s,o){if(s.x||s.y){this.ec.curve.type==="mont"?r(s.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&r(s.x&&s.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(s.x,s.y);return}this.pub=this.ec.curve.decodePoint(s,o)},i.prototype.derive=function(s){return s.validate()||r(s.validate(),"public point not validated"),s.mul(this.priv).getX()},i.prototype.sign=function(s,o,a){return this.ec.sign(s,this,o,a)},i.prototype.verify=function(s,o,a){return this.ec.verify(s,o,this,void 0,a)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},kf}var jf,id;function N8(){if(id)return jf;id=1;var t=Ri(),e=Or(),r=e.assert;function i(c,f){if(c instanceof i)return c;this._importDER(c,f)||(r(c.r&&c.s,"Signature without r or s"),this.r=new t(c.r,16),this.s=new t(c.s,16),c.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=c.recoveryParam)}jf=i;function n(){this.place=0}function s(c,f){var h=c[f.place++];if(!(h&128))return h;var g=h&15;if(g===0||g>4||c[f.place]===0)return!1;for(var w=0,S=0,E=f.place;S<g;S++,E++)w<<=8,w|=c[E],w>>>=0;return w<=127?!1:(f.place=E,w)}function o(c){for(var f=0,h=c.length-1;!c[f]&&!(c[f+1]&128)&&f<h;)f++;return f===0?c:c.slice(f)}i.prototype._importDER=function(f,h){f=e.toArray(f,h);var g=new n;if(f[g.place++]!==48)return!1;var w=s(f,g);if(w===!1||w+g.place!==f.length||f[g.place++]!==2)return!1;var S=s(f,g);if(S===!1||f[g.place]&128)return!1;var E=f.slice(g.place,S+g.place);if(g.place+=S,f[g.place++]!==2)return!1;var I=s(f,g);if(I===!1||f.length!==I+g.place||f[g.place]&128)return!1;var N=f.slice(g.place,I+g.place);if(E[0]===0)if(E[1]&128)E=E.slice(1);else return!1;if(N[0]===0)if(N[1]&128)N=N.slice(1);else return!1;return this.r=new t(E),this.s=new t(N),this.recoveryParam=null,!0};function a(c,f){if(f<128){c.push(f);return}var h=1+(Math.log(f)/Math.LN2>>>3);for(c.push(h|128);--h;)c.push(f>>>(h<<3)&255);c.push(f)}return i.prototype.toDER=function(f){var h=this.r.toArray(),g=this.s.toArray();for(h[0]&128&&(h=[0].concat(h)),g[0]&128&&(g=[0].concat(g)),h=o(h),g=o(g);!g[0]&&!(g[1]&128);)g=g.slice(1);var w=[2];a(w,h.length),w=w.concat(h),w.push(2),a(w,g.length);var S=w.concat(g),E=[48];return a(E,S.length),E=E.concat(S),e.encode(E,f)},jf}var Kf,nd;function C8(){if(nd)return Kf;nd=1;var t=Ri(),e=R8(),r=Or(),i=Eu(),n=K1(),s=r.assert,o=P8(),a=N8();function c(f){if(!(this instanceof c))return new c(f);typeof f=="string"&&(s(Object.prototype.hasOwnProperty.call(i,f),"Unknown curve "+f),f=i[f]),f instanceof i.PresetCurve&&(f={curve:f}),this.curve=f.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=f.curve.g,this.g.precompute(f.curve.n.bitLength()+1),this.hash=f.hash||f.curve.hash}return Kf=c,c.prototype.keyPair=function(h){return new o(this,h)},c.prototype.keyFromPrivate=function(h,g){return o.fromPrivate(this,h,g)},c.prototype.keyFromPublic=function(h,g){return o.fromPublic(this,h,g)},c.prototype.genKeyPair=function(h){h||(h={});for(var g=new e({hash:this.hash,pers:h.pers,persEnc:h.persEnc||"utf8",entropy:h.entropy||n(this.hash.hmacStrength),entropyEnc:h.entropy&&h.entropyEnc||"utf8",nonce:this.n.toArray()}),w=this.n.byteLength(),S=this.n.sub(new t(2));;){var E=new t(g.generate(w));if(!(E.cmp(S)>0))return E.iaddn(1),this.keyFromPrivate(E)}},c.prototype._truncateToN=function(h,g,w){var S;if(t.isBN(h)||typeof h=="number")h=new t(h,16),S=h.byteLength();else if(typeof h=="object")S=h.length,h=new t(h,16);else{var E=h.toString();S=E.length+1>>>1,h=new t(E,16)}typeof w!="number"&&(w=S*8);var I=w-this.n.bitLength();return I>0&&(h=h.ushrn(I)),!g&&h.cmp(this.n)>=0?h.sub(this.n):h},c.prototype.sign=function(h,g,w,S){if(typeof w=="object"&&(S=w,w=null),S||(S={}),typeof h!="string"&&typeof h!="number"&&!t.isBN(h)){s(typeof h=="object"&&h&&typeof h.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),s(h.length>>>0===h.length);for(var E=0;E<h.length;E++)s((h[E]&255)===h[E])}g=this.keyFromPrivate(g,w),h=this._truncateToN(h,!1,S.msgBitLength),s(!h.isNeg(),"Can not sign a negative message");var I=this.n.byteLength(),N=g.getPrivate().toArray("be",I),C=h.toArray("be",I);s(new t(C).eq(h),"Can not sign message");for(var T=new e({hash:this.hash,entropy:N,nonce:C,pers:S.pers,persEnc:S.persEnc||"utf8"}),L=this.n.sub(new t(1)),R=0;;R++){var $=S.k?S.k(R):new t(T.generate(this.n.byteLength()));if($=this._truncateToN($,!0),!($.cmpn(1)<=0||$.cmp(L)>=0)){var P=this.g.mul($);if(!P.isInfinity()){var U=P.getX(),k=U.umod(this.n);if(k.cmpn(0)!==0){var j=$.invm(this.n).mul(k.mul(g.getPrivate()).iadd(h));if(j=j.umod(this.n),j.cmpn(0)!==0){var G=(P.getY().isOdd()?1:0)|(U.cmp(k)!==0?2:0);return S.canonical&&j.cmp(this.nh)>0&&(j=this.n.sub(j),G^=1),new a({r:k,s:j,recoveryParam:G})}}}}}},c.prototype.verify=function(h,g,w,S,E){E||(E={}),h=this._truncateToN(h,!1,E.msgBitLength),w=this.keyFromPublic(w,S),g=new a(g,"hex");var I=g.r,N=g.s;if(I.cmpn(1)<0||I.cmp(this.n)>=0||N.cmpn(1)<0||N.cmp(this.n)>=0)return!1;var C=N.invm(this.n),T=C.mul(h).umod(this.n),L=C.mul(I).umod(this.n),R;return this.curve._maxwellTrick?(R=this.g.jmulAdd(T,w.getPublic(),L),R.isInfinity()?!1:R.eqXToP(I)):(R=this.g.mulAdd(T,w.getPublic(),L),R.isInfinity()?!1:R.getX().umod(this.n).cmp(I)===0)},c.prototype.recoverPubKey=function(f,h,g,w){s((3&g)===g,"The recovery param is more than two bits"),h=new a(h,w);var S=this.n,E=new t(f),I=h.r,N=h.s,C=g&1,T=g>>1;if(I.cmp(this.curve.p.umod(this.curve.n))>=0&&T)throw new Error("Unable to find sencond key candinate");T?I=this.curve.pointFromX(I.add(this.curve.n),C):I=this.curve.pointFromX(I,C);var L=h.r.invm(S),R=S.sub(E).mul(L).umod(S),$=N.mul(L).umod(S);return this.g.mulAdd(R,I,$)},c.prototype.getKeyRecoveryParam=function(f,h,g,w){if(h=new a(h,w),h.recoveryParam!==null)return h.recoveryParam;for(var S=0;S<4;S++){var E;try{E=this.recoverPubKey(f,h,S)}catch{continue}if(E.eq(g))return S}throw new Error("Unable to find valid recovery factor")},Kf}var Vf,sd;function T8(){if(sd)return Vf;sd=1;var t=Or(),e=t.assert,r=t.parseBytes,i=t.cachedProperty;function n(s,o){this.eddsa=s,this._secret=r(o.secret),s.isPoint(o.pub)?this._pub=o.pub:this._pubBytes=r(o.pub)}return n.fromPublic=function(o,a){return a instanceof n?a:new n(o,{pub:a})},n.fromSecret=function(o,a){return a instanceof n?a:new n(o,{secret:a})},n.prototype.secret=function(){return this._secret},i(n,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),i(n,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),i(n,"privBytes",function(){var o=this.eddsa,a=this.hash(),c=o.encodingLength-1,f=a.slice(0,o.encodingLength);return f[0]&=248,f[c]&=127,f[c]|=64,f}),i(n,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),i(n,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),i(n,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),n.prototype.sign=function(o){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(o,this)},n.prototype.verify=function(o,a){return this.eddsa.verify(o,a,this)},n.prototype.getSecret=function(o){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),o)},n.prototype.getPublic=function(o){return t.encode(this.pubBytes(),o)},Vf=n,Vf}var Hf,od;function F8(){if(od)return Hf;od=1;var t=Ri(),e=Or(),r=e.assert,i=e.cachedProperty,n=e.parseBytes;function s(o,a){this.eddsa=o,typeof a!="object"&&(a=n(a)),Array.isArray(a)&&(r(a.length===o.encodingLength*2,"Signature has invalid size"),a={R:a.slice(0,o.encodingLength),S:a.slice(o.encodingLength)}),r(a.R&&a.S,"Signature without R or S"),o.isPoint(a.R)&&(this._R=a.R),a.S instanceof t&&(this._S=a.S),this._Rencoded=Array.isArray(a.R)?a.R:a.Rencoded,this._Sencoded=Array.isArray(a.S)?a.S:a.Sencoded}return i(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),i(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),i(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),i(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},Hf=s,Hf}var Wf,ad;function $8(){if(ad)return Wf;ad=1;var t=Ma(),e=Eu(),r=Or(),i=r.assert,n=r.parseBytes,s=T8(),o=F8();function a(c){if(i(c==="ed25519","only tested with ed25519 so far"),!(this instanceof a))return new a(c);c=e[c].curve,this.curve=c,this.g=c.g,this.g.precompute(c.n.bitLength()+1),this.pointClass=c.point().constructor,this.encodingLength=Math.ceil(c.n.bitLength()/8),this.hash=t.sha512}return Wf=a,a.prototype.sign=function(f,h){f=n(f);var g=this.keyFromSecret(h),w=this.hashInt(g.messagePrefix(),f),S=this.g.mul(w),E=this.encodePoint(S),I=this.hashInt(E,g.pubBytes(),f).mul(g.priv()),N=w.add(I).umod(this.curve.n);return this.makeSignature({R:S,S:N,Rencoded:E})},a.prototype.verify=function(f,h,g){if(f=n(f),h=this.makeSignature(h),h.S().gte(h.eddsa.curve.n)||h.S().isNeg())return!1;var w=this.keyFromPublic(g),S=this.hashInt(h.Rencoded(),w.pubBytes(),f),E=this.g.mul(h.S()),I=h.R().add(w.pub().mul(S));return I.eq(E)},a.prototype.hashInt=function(){for(var f=this.hash(),h=0;h<arguments.length;h++)f.update(arguments[h]);return r.intFromLE(f.digest()).umod(this.curve.n)},a.prototype.keyFromPublic=function(f){return s.fromPublic(this,f)},a.prototype.keyFromSecret=function(f){return s.fromSecret(this,f)},a.prototype.makeSignature=function(f){return f instanceof o?f:new o(this,f)},a.prototype.encodePoint=function(f){var h=f.getY().toArray("le",this.encodingLength);return h[this.encodingLength-1]|=f.getX().isOdd()?128:0,h},a.prototype.decodePoint=function(f){f=r.parseBytes(f);var h=f.length-1,g=f.slice(0,h).concat(f[h]&-129),w=(f[h]&128)!==0,S=r.intFromLE(g);return this.curve.pointFromY(S,w)},a.prototype.encodeInt=function(f){return f.toArray("le",this.encodingLength)},a.prototype.decodeInt=function(f){return r.intFromLE(f)},a.prototype.isPoint=function(f){return f instanceof this.pointClass},Wf}var fd;function L8(){return fd||(fd=1,function(t){var e=t;e.version=S8.version,e.utils=Or(),e.rand=K1(),e.curve=V1(),e.curves=Eu(),e.ec=C8(),e.eddsa=$8()}(Pf)),Pf}var q8=L8();const B8={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var U8={};const z8=":";function zo(t){const[e,r]=t.split(z8);return{namespace:e,reference:r}}function H1(t,e){return t.includes(":")?[t]:e.chains||[]}const k8="ReactNative",br={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},j8="js";function sa(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Zi(){return!mn.getDocument()&&!!mn.getNavigator()&&navigator.product===k8}function K8(){return Zi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function V8(){return Zi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function to(){return!sa()&&!!mn.getNavigator()&&!!mn.getDocument()}function ro(){return Zi()?br.reactNative:sa()?br.node:to()?br.browser:br.unknown}function cd(){var t;try{return Zi()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function H8(t,e){const r=new URLSearchParams(t);for(const i of Object.keys(e).sort())if(e.hasOwnProperty(i)){const n=e[i];n!==void 0&&r.set(i,n)}return r.toString()}function W1(){return L6.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function W8(){if(ro()===br.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:i}=global.Platform;return[r,i].join("-")}const t=R6();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function G8(){var t;const e=ro();return e===br.browser?[e,((t=mn.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function G1(t,e,r){const i=W8(),n=G8();return[[t,e].join("-"),[j8,r].join("-"),i,n].join("/")}function J8({protocol:t,version:e,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const f=r.split("?"),h=G1(t,e,i),g={auth:n,ua:h,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},w=H8(f[1]||"",g);return f[0]+"?"+w}function ln(t,e){return t.filter(r=>e.includes(r)).length===t.length}function J1(t){return Object.fromEntries(t.entries())}function Y1(t){return new Map(Object.entries(t))}function cn(t=ue.FIVE_MINUTES,e){const r=ue.toMiliseconds(t||ue.FIVE_MINUTES);let i,n,s,o;return{resolve:a=>{s&&i&&(clearTimeout(s),i(a),o=Promise.resolve(a))},reject:a=>{s&&n&&(clearTimeout(s),n(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const f=new Error(e);o=Promise.reject(f),c(f)},r),i=a,n=c})}}function zi(t,e,r){return new Promise(async(i,n)=>{const s=setTimeout(()=>n(new Error(r)),e);try{const o=await t;i(o)}catch(o){n(o)}clearTimeout(s)})}function Z1(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Y8(t){return Z1("topic",t)}function Z8(t){return Z1("id",t)}function X1(t){const[e,r]=t.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")i.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return i}function Mt(t,e){return ue.fromMiliseconds(Date.now()+ue.toMiliseconds(t))}function Ui(t){return Date.now()>=ue.toMiliseconds(t)}function qe(t,e){return`${t}${e?`:${e}`:""}`}function ki(t=[],e=[]){return[...new Set([...t,...e])]}async function X8({id:t,topic:e,wcDeepLink:r}){var i;try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r,s=n==null?void 0:n.href;if(typeof s!="string")return;const o=Q8(s,t,e),a=ro();if(a===br.browser){if(!((i=mn.getDocument())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}e5(o)}else a===br.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(n){console.error(n)}}function Q8(t,e,r){const i=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let n=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";n=`${n}${s}${n5(i,!0)}`}else n=`${n}/wc?${i}`;return n}function e5(t){let e="_self";i5()?e="_top":(r5()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function t5(t,e){let r="";try{if(to()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(i){console.error(i)}return r}function ud(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),i=r.indexOf(e);return r[i+2]}function hd(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Su(){return typeof process<"u"&&U8.IS_VITEST==="true"}function r5(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function i5(){try{return window.self!==window.top}catch{return!1}}function n5(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function Q1(t){return Buffer.from(t,"base64").toString("utf-8")}function s5(t){return new Promise(e=>setTimeout(e,t))}function js(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function o5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ra(t,...e){if(!o5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Mu(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");js(t.outputLen),js(t.blockLen)}function Yn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function eg(t,e){Ra(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const So=BigInt(2**32-1),ld=BigInt(32);function a5(t,e=!1){return e?{h:Number(t&So),l:Number(t>>ld&So)}:{h:Number(t>>ld&So)|0,l:Number(t&So)|0}}function f5(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){const{h:s,l:o}=a5(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}const c5=(t,e,r)=>t<<r|e>>>32-r,u5=(t,e,r)=>e<<r|t>>>32-r,h5=(t,e,r)=>e<<r-32|t>>>64-r,l5=(t,e,r)=>t<<r-32|e>>>64-r,Nn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function d5(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Gf(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Vr(t,e){return t<<32-e|t>>>e}const dd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function p5(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function pd(t){for(let e=0;e<t.length;e++)t[e]=p5(t[e])}function g5(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Zn(t){return typeof t=="string"&&(t=g5(t)),Ra(t),t}let Iu=class{clone(){return this._cloneInto()}};function tg(t){const e=i=>t().update(Zn(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function io(t=32){if(Nn&&typeof Nn.getRandomValues=="function")return Nn.getRandomValues(new Uint8Array(t));if(Nn&&typeof Nn.randomBytes=="function")return Nn.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const rg=[],ig=[],ng=[],b5=BigInt(0),bs=BigInt(1),v5=BigInt(2),y5=BigInt(7),m5=BigInt(256),w5=BigInt(113);for(let t=0,e=bs,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],rg.push(2*(5*i+r)),ig.push((t+1)*(t+2)/2%64);let n=b5;for(let s=0;s<7;s++)e=(e<<bs^(e>>y5)*w5)%m5,e&v5&&(n^=bs<<(bs<<BigInt(s))-bs);ng.push(n)}const[_5,x5]=f5(ng,!0),gd=(t,e,r)=>r>32?h5(t,e,r):c5(t,e,r),bd=(t,e,r)=>r>32?l5(t,e,r):u5(t,e,r);function E5(t,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,f=r[c],h=r[c+1],g=gd(f,h,1)^r[a],w=bd(f,h,1)^r[a+1];for(let S=0;S<50;S+=10)t[o+S]^=g,t[o+S+1]^=w}let n=t[2],s=t[3];for(let o=0;o<24;o++){const a=ig[o],c=gd(n,s,a),f=bd(n,s,a),h=rg[o];n=t[h],s=t[h+1],t[h]=c,t[h+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=_5[i],t[1]^=x5[i]}r.fill(0)}let S5=class sg extends Iu{constructor(e,r,i,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,js(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=d5(this.state)}keccak(){dd||pd(this.state32),E5(this.state32,this.rounds),dd||pd(this.state32),this.posOut=0,this.pos=0}update(e){Yn(this);const{blockLen:r,state:i}=this;e=Zn(e);const n=e.length;for(let s=0;s<n;){const o=Math.min(r-this.pos,n-s);for(let a=0;a<o;a++)i[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:i,blockLen:n}=this;e[i]^=r,r&128&&i===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){Yn(this,!1),Ra(e),this.finish();const r=this.state,{blockLen:i}=this;for(let n=0,s=e.length;n<s;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,s-n);e.set(r.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return js(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eg(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:i,outputLen:n,rounds:s,enableXOF:o}=this;return e||(e=new sg(r,i,n,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=i,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}};const M5=(t,e,r)=>tg(()=>new S5(e,t,r)),I5=M5(1,136,256/8),A5="https://rpc.walletconnect.org/v1";function og(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(I5(r)).toString("hex")}async function D5(t,e,r,i,n,s){switch(r.t){case"eip191":return O5(t,e,r.s);case"eip1271":return await R5(t,e,r.s,i,n,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function O5(t,e,r){return I4(og(e),r).toLowerCase()===t.toLowerCase()}async function R5(t,e,r,i,n,s){const o=zo(i);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",f="0000000000000000000000000000000000000000000000000000000000000041",h=r.substring(2),g=og(e).substring(2),w=a+g+c+f+h,S=await fetch(`${s||A5}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:P5(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:w},"latest"]})}),{result:E}=await S.json();return E?E.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function P5(){return Date.now()+Math.floor(Math.random()*1e3)}var N5=Object.defineProperty,C5=Object.defineProperties,T5=Object.getOwnPropertyDescriptors,vd=Object.getOwnPropertySymbols,F5=Object.prototype.hasOwnProperty,$5=Object.prototype.propertyIsEnumerable,yd=(t,e,r)=>e in t?N5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,L5=(t,e)=>{for(var r in e||(e={}))F5.call(e,r)&&yd(t,r,e[r]);if(vd)for(var r of vd(e))$5.call(e,r)&&yd(t,r,e[r]);return t},q5=(t,e)=>C5(t,T5(e));const B5="did:pkh:",Au=t=>t==null?void 0:t.split(":"),U5=t=>{const e=t&&Au(t);if(e)return t.includes(B5)?e[3]:e[1]},Nc=t=>{const e=t&&Au(t);if(e)return e[2]+":"+e[3]},oa=t=>{const e=t&&Au(t);if(e)return e.pop()};async function md(t){const{cacao:e,projectId:r}=t,{s:i,p:n}=e,s=ag(n,n.iss),o=oa(n.iss);return await D5(o,s,i,Nc(n.iss),r)}const ag=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,i=oa(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${U5(e)}`,c=`Nonce: ${t.nonce}`,f=`Issued At: ${t.iat}`,h=t.exp?`Expiration Time: ${t.exp}`:void 0,g=t.nbf?`Not Before: ${t.nbf}`:void 0,w=t.requestId?`Request ID: ${t.requestId}`:void 0,S=t.resources?`Resources:${t.resources.map(I=>`
- ${I}`).join("")}`:void 0,E=ko(t.resources);if(E){const I=Ks(E);n=J5(n,I)}return[r,i,"",n,"",s,o,a,c,f,h,g,w,S].filter(I=>I!=null).join(`
`)};function z5(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function k5(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function wn(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const i=t.att[r];if(Array.isArray(i))throw new Error(`Resource must be an object: ${r}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(i).forEach(n=>{const s=i[n];if(!Array.isArray(s))throw new Error(`Ability limits ${n} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${n} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${n}) must be an array of objects, found: ${o}`)})})})}function j5(t,e,r,i={}){return r==null||r.sort((n,s)=>n.localeCompare(s)),{att:{[t]:K5(e,r,i)}}}function K5(t,e,r={}){e=e==null?void 0:e.sort((n,s)=>n.localeCompare(s));const i=e.map(n=>({[`${t}/${n}`]:[r]}));return Object.assign({},...i)}function fg(t){return wn(t),`urn:recap:${z5(t).replace(/=/g,"")}`}function Ks(t){const e=k5(t.replace("urn:recap:",""));return wn(e),e}function V5(t,e,r){const i=j5(t,e,r);return fg(i)}function H5(t){return t&&t.includes("urn:recap:")}function W5(t,e){const r=Ks(t),i=Ks(e),n=G5(r,i);return fg(n)}function G5(t,e){wn(t),wn(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((n,s)=>n.localeCompare(s)),i={att:{}};return r.forEach(n=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[n])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[n])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,f;i.att[n]=q5(L5({},i.att[n]),{[a]:((c=t.att[n])==null?void 0:c[a])||((f=e.att[n])==null?void 0:f[a])})})}),i}function J5(t="",e){wn(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const i=[];let n=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(g=>({ability:g.split("/")[0],action:g.split("/")[1]}));c.sort((g,w)=>g.action.localeCompare(w.action));const f={};c.forEach(g=>{f[g.ability]||(f[g.ability]=[]),f[g.ability].push(g.action)});const h=Object.keys(f).map(g=>(n++,`(${n}) '${g}': '${f[g].join("', '")}' for '${a}'.`));i.push(h.join(", ").replace(".,","."))});const s=i.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function wd(t){var e;const r=Ks(t);wn(r);const i=(e=r.att)==null?void 0:e.eip155;return i?Object.keys(i).map(n=>n.split("/")[1]):[]}function _d(t){const e=Ks(t);wn(e);const r=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(n=>{var s;(s=n==null?void 0:n[0])!=null&&s.chains&&r.push(n[0].chains)})}),[...new Set(r.flat())]}function ko(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return H5(e)?e:void 0}function Jf(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function cg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function pr(t,...e){if(!cg(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function xd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Y5(t,e){pr(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Ed(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Ki=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Z5=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),X5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!X5)throw new Error("Non little-endian hardware is not supported");function Q5(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Cc(t){if(typeof t=="string")t=Q5(t);else if(cg(t))t=Tc(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function e9(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function t9(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return r===0}const r9=(t,e)=>{function r(i,...n){if(pr(i),t.nonceLength!==void 0){const f=n[0];if(!f)throw new Error("nonce / iv required");t.varSizeNonce?pr(f):pr(f,t.nonceLength)}const s=t.tagLength;s&&n[1]!==void 0&&pr(n[1]);const o=e(i,...n),a=(f,h)=>{if(h!==void 0){if(f!==2)throw new Error("cipher output not supported");pr(h)}};let c=!1;return{encrypt(f,h){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,pr(f),a(o.encrypt.length,h),o.encrypt(f,h)},decrypt(f,h){if(pr(f),s&&f.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,h),o.decrypt(f,h)}}}return Object.assign(r,t),r};function Sd(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!i9(e))throw new Error("invalid output, must be aligned");return e}function Md(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s);t.setUint32(e+4,o,i),t.setUint32(e+0,a,i)}function i9(t){return t.byteOffset%4===0}function Tc(t){return Uint8Array.from(t)}function Xn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const ug=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),n9=ug("expand 16-byte k"),s9=ug("expand 32-byte k"),o9=Ki(n9),a9=Ki(s9);function We(t,e){return t<<e|t>>>32-e}function Fc(t){return t.byteOffset%4===0}const Mo=64,f9=16,hg=2**32-1,Id=new Uint32Array;function c9(t,e,r,i,n,s,o,a){const c=n.length,f=new Uint8Array(Mo),h=Ki(f),g=Fc(n)&&Fc(s),w=g?Ki(n):Id,S=g?Ki(s):Id;for(let E=0;E<c;o++){if(t(e,r,i,h,o,a),o>=hg)throw new Error("arx: counter overflow");const I=Math.min(Mo,c-E);if(g&&I===Mo){const N=E/4;if(E%4!==0)throw new Error("arx: invalid block position");for(let C=0,T;C<f9;C++)T=N+C,S[T]=w[T]^h[C];E+=Mo;continue}for(let N=0,C;N<I;N++)C=E+N,s[C]=n[C]^f[N];E+=I}}function u9(t,e){const{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=e9({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Jf(n),Jf(o),Ed(s),Ed(r),(a,c,f,h,g=0)=>{pr(a),pr(c),pr(f);const w=f.length;if(h===void 0&&(h=new Uint8Array(w)),pr(h),Jf(g),g<0||g>=hg)throw new Error("arx: counter overflow");if(h.length<w)throw new Error(`arx: output (${h.length}) is shorter than data (${w})`);const S=[];let E=a.length,I,N;if(E===32)S.push(I=Tc(a)),N=a9;else if(E===16&&r)I=new Uint8Array(32),I.set(a),I.set(a,16),N=o9,S.push(I);else throw new Error(`arx: invalid 32-byte key, got length=${E}`);Fc(c)||S.push(c=Tc(c));const C=Ki(I);if(i){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(N,C,Ki(c.subarray(0,16)),C),c=c.subarray(16)}const T=16-n;if(T!==c.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(T!==12){const R=new Uint8Array(12);R.set(c,s?0:12-c.length),c=R,S.push(c)}const L=Ki(c);return c9(t,N,C,L,f,h,g,o),Xn(...S),h}}const Ft=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let h9=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Cc(e),pr(e,32);const r=Ft(e,0),i=Ft(e,2),n=Ft(e,4),s=Ft(e,6),o=Ft(e,8),a=Ft(e,10),c=Ft(e,12),f=Ft(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|i<<3)&8191,this.r[2]=(i>>>10|n<<6)&7939,this.r[3]=(n>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let h=0;h<8;h++)this.pad[h]=Ft(e,16+2*h)}process(e,r,i=!1){const n=i?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],f=o[2],h=o[3],g=o[4],w=o[5],S=o[6],E=o[7],I=o[8],N=o[9],C=Ft(e,r+0),T=Ft(e,r+2),L=Ft(e,r+4),R=Ft(e,r+6),$=Ft(e,r+8),P=Ft(e,r+10),U=Ft(e,r+12),k=Ft(e,r+14);let j=s[0]+(C&8191),G=s[1]+((C>>>13|T<<3)&8191),O=s[2]+((T>>>10|L<<6)&8191),p=s[3]+((L>>>7|R<<9)&8191),d=s[4]+((R>>>4|$<<12)&8191),u=s[5]+($>>>1&8191),l=s[6]+(($>>>14|P<<2)&8191),v=s[7]+((P>>>11|U<<5)&8191),m=s[8]+((U>>>8|k<<8)&8191),M=s[9]+(k>>>5|n),_=0,b=_+j*a+G*(5*N)+O*(5*I)+p*(5*E)+d*(5*S);_=b>>>13,b&=8191,b+=u*(5*w)+l*(5*g)+v*(5*h)+m*(5*f)+M*(5*c),_+=b>>>13,b&=8191;let x=_+j*c+G*a+O*(5*N)+p*(5*I)+d*(5*E);_=x>>>13,x&=8191,x+=u*(5*S)+l*(5*w)+v*(5*g)+m*(5*h)+M*(5*f),_+=x>>>13,x&=8191;let y=_+j*f+G*c+O*a+p*(5*N)+d*(5*I);_=y>>>13,y&=8191,y+=u*(5*E)+l*(5*S)+v*(5*w)+m*(5*g)+M*(5*h),_+=y>>>13,y&=8191;let D=_+j*h+G*f+O*c+p*a+d*(5*N);_=D>>>13,D&=8191,D+=u*(5*I)+l*(5*E)+v*(5*S)+m*(5*w)+M*(5*g),_+=D>>>13,D&=8191;let J=_+j*g+G*h+O*f+p*c+d*a;_=J>>>13,J&=8191,J+=u*(5*N)+l*(5*I)+v*(5*E)+m*(5*S)+M*(5*w),_+=J>>>13,J&=8191;let A=_+j*w+G*g+O*h+p*f+d*c;_=A>>>13,A&=8191,A+=u*a+l*(5*N)+v*(5*I)+m*(5*E)+M*(5*S),_+=A>>>13,A&=8191;let z=_+j*S+G*w+O*g+p*h+d*f;_=z>>>13,z&=8191,z+=u*c+l*a+v*(5*N)+m*(5*I)+M*(5*E),_+=z>>>13,z&=8191;let H=_+j*E+G*S+O*w+p*g+d*h;_=H>>>13,H&=8191,H+=u*f+l*c+v*a+m*(5*N)+M*(5*I),_+=H>>>13,H&=8191;let Y=_+j*I+G*E+O*S+p*w+d*g;_=Y>>>13,Y&=8191,Y+=u*h+l*f+v*c+m*a+M*(5*N),_+=Y>>>13,Y&=8191;let X=_+j*N+G*I+O*E+p*S+d*w;_=X>>>13,X&=8191,X+=u*g+l*h+v*f+m*c+M*a,_+=X>>>13,X&=8191,_=(_<<2)+_|0,_=_+b|0,b=_&8191,_=_>>>13,x+=_,s[0]=b,s[1]=x,s[2]=y,s[3]=D,s[4]=J,s[5]=A,s[6]=z,s[7]=H,s[8]=Y,s[9]=X}finalize(){const{h:e,pad:r}=this,i=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=n,n=e[a]>>>13,e[a]&=8191;e[0]+=n*5,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,i[0]=e[0]+5,n=i[0]>>>13,i[0]&=8191;for(let a=1;a<10;a++)i[a]=e[a]+n,n=i[a]>>>13,i[a]&=8191;i[9]-=8192;let s=(n^1)-1;for(let a=0;a<10;a++)i[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|i[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Xn(i)}update(e){xd(this);const{buffer:r,blockLen:i}=this;e=Cc(e);const n=e.length;for(let s=0;s<n;){const o=Math.min(i-this.pos,n-s);if(o===i){for(;i<=n-s;s+=i)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Xn(this.h,this.r,this.buffer,this.pad)}digestInto(e){xd(this),Y5(e,this),this.finished=!0;const{buffer:r,h:i}=this;let{pos:n}=this;if(n){for(r[n++]=1;n<16;n++)r[n]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=i[o]>>>0,e[s++]=i[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}};function l9(t){const e=(i,n)=>t(n).update(Cc(i)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=i=>t(i),e}const d9=l9(t=>new h9(t));function p9(t,e,r,i,n,s=20){let o=t[0],a=t[1],c=t[2],f=t[3],h=e[0],g=e[1],w=e[2],S=e[3],E=e[4],I=e[5],N=e[6],C=e[7],T=n,L=r[0],R=r[1],$=r[2],P=o,U=a,k=c,j=f,G=h,O=g,p=w,d=S,u=E,l=I,v=N,m=C,M=T,_=L,b=R,x=$;for(let D=0;D<s;D+=2)P=P+G|0,M=We(M^P,16),u=u+M|0,G=We(G^u,12),P=P+G|0,M=We(M^P,8),u=u+M|0,G=We(G^u,7),U=U+O|0,_=We(_^U,16),l=l+_|0,O=We(O^l,12),U=U+O|0,_=We(_^U,8),l=l+_|0,O=We(O^l,7),k=k+p|0,b=We(b^k,16),v=v+b|0,p=We(p^v,12),k=k+p|0,b=We(b^k,8),v=v+b|0,p=We(p^v,7),j=j+d|0,x=We(x^j,16),m=m+x|0,d=We(d^m,12),j=j+d|0,x=We(x^j,8),m=m+x|0,d=We(d^m,7),P=P+O|0,x=We(x^P,16),v=v+x|0,O=We(O^v,12),P=P+O|0,x=We(x^P,8),v=v+x|0,O=We(O^v,7),U=U+p|0,M=We(M^U,16),m=m+M|0,p=We(p^m,12),U=U+p|0,M=We(M^U,8),m=m+M|0,p=We(p^m,7),k=k+d|0,_=We(_^k,16),u=u+_|0,d=We(d^u,12),k=k+d|0,_=We(_^k,8),u=u+_|0,d=We(d^u,7),j=j+G|0,b=We(b^j,16),l=l+b|0,G=We(G^l,12),j=j+G|0,b=We(b^j,8),l=l+b|0,G=We(G^l,7);let y=0;i[y++]=o+P|0,i[y++]=a+U|0,i[y++]=c+k|0,i[y++]=f+j|0,i[y++]=h+G|0,i[y++]=g+O|0,i[y++]=w+p|0,i[y++]=S+d|0,i[y++]=E+u|0,i[y++]=I+l|0,i[y++]=N+v|0,i[y++]=C+m|0,i[y++]=T+M|0,i[y++]=L+_|0,i[y++]=R+b|0,i[y++]=$+x|0}const g9=u9(p9,{counterRight:!1,counterLength:4,allowShortKeys:!1}),b9=new Uint8Array(16),Ad=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(b9.subarray(r))},v9=new Uint8Array(32);function Dd(t,e,r,i,n){const s=t(e,r,v9),o=d9.create(s);n&&Ad(o,n),Ad(o,i);const a=new Uint8Array(16),c=Z5(a);Md(c,0,BigInt(n?n.length:0),!0),Md(c,8,BigInt(i.length),!0),o.update(a);const f=o.digest();return Xn(s,a),f}const y9=t=>(e,r,i)=>({encrypt(n,s){const o=n.length;s=Sd(o+16,s,!1),s.set(n);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=Dd(t,e,r,a,i);return s.set(c,o),Xn(c),s},decrypt(n,s){s=Sd(n.length-16,s,!1);const o=n.subarray(0,-16),a=n.subarray(-16),c=Dd(t,e,r,o,i);if(!t9(a,c))throw new Error("invalid tag");return s.set(n.subarray(0,-16)),t(e,r,s,s,1),Xn(c),s}}),lg=r9({blockSize:64,nonceLength:12,tagLength:16},y9(g9));class dg extends Iu{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Mu(e);const i=Zn(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?e.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Yn(this),this.iHash.update(e),this}digestInto(e){Yn(this),Ra(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:i,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Du=(t,e,r)=>new dg(t,e).update(r).digest();Du.create=(t,e)=>new dg(t,e);function m9(t,e,r){return Mu(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Du(t,Zn(r),Zn(e))}const Yf=new Uint8Array([0]),Od=new Uint8Array;function w9(t,e,r,i=32){if(Mu(t),js(i),i>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const n=Math.ceil(i/t.outputLen);r===void 0&&(r=Od);const s=new Uint8Array(n*t.outputLen),o=Du.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let f=0;f<n;f++)Yf[0]=f+1,a.update(f===0?Od:c).update(r).update(Yf).digestInto(c),s.set(c,t.outputLen*f),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Yf.fill(0),s.slice(0,i)}const _9=(t,e,r,i,n)=>w9(t,m9(t,e,r),i,n);function x9(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,f=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+f,a,i)}function E9(t,e,r){return t&e^~t&r}function S9(t,e,r){return t&e^t&r^e&r}let M9=class extends Iu{constructor(e,r,i,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Gf(this.buffer)}update(e){Yn(this);const{view:r,buffer:i,blockLen:n}=this;e=Zn(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);if(a===n){const c=Gf(e);for(;n<=s-o;o+=n)this.process(c,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yn(this),eg(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:n,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let g=o;g<n;g++)r[g]=0;x9(i,n-8,BigInt(this.length*8),s),this.process(i,0);const a=Gf(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)a.setUint32(4*g,h[g],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%r&&e.buffer.set(i),e}};const I9=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$i=new Uint32Array(64);let A9=class extends M9{constructor(){super(64,32,8,!1),this.A=Fi[0]|0,this.B=Fi[1]|0,this.C=Fi[2]|0,this.D=Fi[3]|0,this.E=Fi[4]|0,this.F=Fi[5]|0,this.G=Fi[6]|0,this.H=Fi[7]|0}get(){const{A:e,B:r,C:i,D:n,E:s,F:o,G:a,H:c}=this;return[e,r,i,n,s,o,a,c]}set(e,r,i,n,s,o,a,c){this.A=e|0,this.B=r|0,this.C=i|0,this.D=n|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let g=0;g<16;g++,r+=4)$i[g]=e.getUint32(r,!1);for(let g=16;g<64;g++){const w=$i[g-15],S=$i[g-2],E=Vr(w,7)^Vr(w,18)^w>>>3,I=Vr(S,17)^Vr(S,19)^S>>>10;$i[g]=I+$i[g-7]+E+$i[g-16]|0}let{A:i,B:n,C:s,D:o,E:a,F:c,G:f,H:h}=this;for(let g=0;g<64;g++){const w=Vr(a,6)^Vr(a,11)^Vr(a,25),S=h+w+E9(a,c,f)+I9[g]+$i[g]|0,E=(Vr(i,2)^Vr(i,13)^Vr(i,22))+S9(i,n,s)|0;h=f,f=c,c=a,a=o+S|0,o=s,s=n,n=i,i=S+E|0}i=i+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(i,n,s,o,a,c,f,h)}roundClean(){$i.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Pa=tg(()=>new A9);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pg=BigInt(0);function Ou(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function gg(t){if(!Ou(t))throw new Error("Uint8Array expected")}const D9=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function O9(t){gg(t);let e="";for(let r=0;r<t.length;r++)e+=D9[t[r]];return e}function R9(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?pg:BigInt("0x"+t)}const vi={_0:48,_9:57,A:65,F:70,a:97,f:102};function Rd(t){if(t>=vi._0&&t<=vi._9)return t-vi._0;if(t>=vi.A&&t<=vi.F)return t-(vi.A-10);if(t>=vi.a&&t<=vi.f)return t-(vi.a-10)}function bg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){const o=Rd(t.charCodeAt(s)),a=Rd(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}i[n]=o*16+a}return i}function Pd(t){return gg(t),R9(O9(Uint8Array.from(t).reverse()))}function P9(t,e){return bg(t.toString(16).padStart(e*2,"0"))}function N9(t,e){return P9(t,e).reverse()}function Nd(t,e,r){let i;if(typeof e=="string")try{i=bg(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Ou(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const n=i.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return i}const Zf=t=>typeof t=="bigint"&&pg<=t;function C9(t,e,r){return Zf(t)&&Zf(e)&&Zf(r)&&e<=t&&t<r}function Cd(t,e,r,i){if(!C9(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}const T9={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ou(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function F9(t,e,r={}){const i=(n,s,o)=>{const a=T9[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[n];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+c)};for(const[n,s]of Object.entries(e))i(n,s,!1);for(const[n,s]of Object.entries(r))i(n,s,!0);return t}const Bn=BigInt(0),Io=BigInt(1);function vg(t,e){const r=t%e;return r>=Bn?r:e+r}function $9(t,e,r){if(e<Bn)throw new Error("invalid exponent, negatives unsupported");if(r<=Bn)throw new Error("invalid modulus");if(r===Io)return Bn;let i=Io;for(;e>Bn;)e&Io&&(i=i*t%r),t=t*t%r,e>>=Io;return i}function Fr(t,e,r){let i=t;for(;e-- >Bn;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Cn=BigInt(0),Xf=BigInt(1);function L9(t){return F9(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function q9(t){const e=L9(t),{P:r}=e,i=T=>vg(T,r),n=e.montgomeryBits,s=Math.ceil(n/8),o=e.nByteLength,a=e.adjustScalarBytes||(T=>T),c=e.powPminus2||(T=>$9(T,r-BigInt(2),r));function f(T,L,R){const $=i(T*(L-R));return L=i(L-$),R=i(R+$),[L,R]}const h=(e.a-BigInt(2))/BigInt(4);function g(T,L){Cd("u",T,Cn,r),Cd("scalar",L,Cn,r);const R=L,$=T;let P=Xf,U=Cn,k=T,j=Xf,G=Cn,O;for(let d=BigInt(n-1);d>=Cn;d--){const u=R>>d&Xf;G^=u,O=f(G,P,k),P=O[0],k=O[1],O=f(G,U,j),U=O[0],j=O[1],G=u;const l=P+U,v=i(l*l),m=P-U,M=i(m*m),_=v-M,b=k+j,x=k-j,y=i(x*l),D=i(b*m),J=y+D,A=y-D;k=i(J*J),j=i($*i(A*A)),P=i(v*M),U=i(_*(v+i(h*_)))}O=f(G,P,k),P=O[0],k=O[1],O=f(G,U,j),U=O[0],j=O[1];const p=c(U);return i(P*p)}function w(T){return N9(i(T),s)}function S(T){const L=Nd("u coordinate",T,s);return o===32&&(L[31]&=127),Pd(L)}function E(T){const L=Nd("scalar",T),R=L.length;if(R!==s&&R!==o){let $=""+s+" or "+o;throw new Error("invalid scalar, expected "+$+" bytes, got "+R)}return Pd(a(L))}function I(T,L){const R=S(L),$=E(T),P=g(R,$);if(P===Cn)throw new Error("invalid private or public key received");return w(P)}const N=w(e.Gu);function C(T){return I(T,N)}return{scalarMult:I,scalarMultBase:C,getSharedSecret:(T,L)=>I(T,L),getPublicKey:T=>C(T),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:N}}const $c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const B9=BigInt(1),Td=BigInt(2),U9=BigInt(3),z9=BigInt(5);BigInt(8);function k9(t){const e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=$c,o=t*t%s*t%s,a=Fr(o,Td,s)*o%s,c=Fr(a,B9,s)*t%s,f=Fr(c,z9,s)*c%s,h=Fr(f,e,s)*f%s,g=Fr(h,r,s)*h%s,w=Fr(g,i,s)*g%s,S=Fr(w,n,s)*w%s,E=Fr(S,n,s)*w%s,I=Fr(E,e,s)*f%s;return{pow_p_5_8:Fr(I,Td,s)*t%s,b2:o}}function j9(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Lc=q9({P:$c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=$c,{pow_p_5_8:r,b2:i}=k9(t);return vg(Fr(r,U9,e)*i,e)},adjustScalarBytes:j9,randomBytes:io}),yg="base10",Kt="base16",ji="base64pad",vs="base64url",no="utf8",mg=0,Di=1,so=2,K9=0,Fd=1,Ts=12,Ru=32;function V9(){const t=Lc.utils.randomPrivateKey(),e=Lc.getPublicKey(t);return{privateKey:Zt(t,Kt),publicKey:Zt(e,Kt)}}function qc(){const t=io(Ru);return Zt(t,Kt)}function H9(t,e){const r=Lc.getSharedSecret(Mr(t,Kt),Mr(e,Kt)),i=_9(Pa,r,void 0,void 0,Ru);return Zt(i,Kt)}function jo(t){const e=Pa(Mr(t,Kt));return Zt(e,Kt)}function Si(t){const e=Pa(Mr(t,no));return Zt(e,Kt)}function wg(t){return Mr(`${t}`,yg)}function _n(t){return Number(Zt(t,yg))}function W9(t){const e=wg(typeof t.type<"u"?t.type:mg);if(_n(e)===Di&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Mr(t.senderPublicKey,Kt):void 0,i=typeof t.iv<"u"?Mr(t.iv,Kt):io(Ts),n=Mr(t.symKey,Kt),s=lg(n,i).encrypt(Mr(t.message,no));return _g({type:e,sealed:s,iv:i,senderPublicKey:r,encoding:t.encoding})}function G9(t){const e=Mr(t.symKey,Kt),{sealed:r,iv:i}=Vs(t),n=lg(e,i).decrypt(r);if(n===null)throw new Error("Failed to decrypt");return Zt(n,no)}function J9(t,e){const r=wg(so),i=io(Ts),n=Mr(t,no);return _g({type:r,sealed:n,iv:i,encoding:e})}function Y9(t,e){const{sealed:r}=Vs({encoded:t,encoding:e});return Zt(r,no)}function _g(t){const{encoding:e=ji}=t;if(_n(t.type)===so)return Zt(Of([t.type,t.sealed]),e);if(_n(t.type)===Di){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Zt(Of([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Zt(Of([t.type,t.iv,t.sealed]),e)}function Vs(t){const{encoded:e,encoding:r=ji}=t,i=Mr(e,r),n=i.slice(K9,Fd),s=Fd;if(_n(n)===Di){const f=s+Ru,h=f+Ts,g=i.slice(s,f),w=i.slice(f,h),S=i.slice(h);return{type:n,sealed:S,iv:w,senderPublicKey:g}}if(_n(n)===so){const f=i.slice(s),h=io(Ts);return{type:n,sealed:f,iv:h}}const o=s+Ts,a=i.slice(s,o),c=i.slice(o);return{type:n,sealed:c,iv:a}}function Z9(t,e){const r=Vs({encoded:t,encoding:e==null?void 0:e.encoding});return xg({type:_n(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Zt(r.senderPublicKey,Kt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function xg(t){const e=(t==null?void 0:t.type)||mg;if(e===Di){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function $d(t){return t.type===Di&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Ld(t){return t.type===so}function X9(t){return new q8.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function Q9(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function e7(t){return Buffer.from(Q9(t),"base64")}function t7(t,e){const[r,i,n]=t.split("."),s=e7(n);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${r}.${i}`,f=Pa(c),h=X9(e),g=Zt(f,Kt);if(!h.verify(g,{r:o,s:a}))throw new Error("Invalid signature");return Dc(t).payload}const r7="irn";function aa(t){return(t==null?void 0:t.relay)||{protocol:r7}}function Ms(t){const e=B8[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function i7(t,e="-"){const r={},i="relay"+e;return Object.keys(t).forEach(n=>{if(n.startsWith(i)){const s=n.replace(i,""),o=t[n];r[s]=o}}),r}function qd(t){if(!t.includes("wc:")){const f=Q1(t);f!=null&&f.includes("wc:")&&(t=f)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,i=t.substring(0,e),n=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((f,h)=>{a[h]=f});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:i,topic:n7(n[0]),version:parseInt(n[1],10),symKey:a.symKey,relay:i7(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function n7(t){return t.startsWith("//")?t.substring(2):t}function s7(t,e="-"){const r="relay",i={};return Object.keys(t).forEach(n=>{const s=r+e+n;t[n]&&(i[s]=t[n])}),i}function Bd(t){const e=new URLSearchParams,r=s7(t.relay);Object.keys(r).sort().forEach(n=>{e.set(n,r[n])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const i=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${i}`}function Ao(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var o7=Object.defineProperty,a7=Object.defineProperties,f7=Object.getOwnPropertyDescriptors,Ud=Object.getOwnPropertySymbols,c7=Object.prototype.hasOwnProperty,u7=Object.prototype.propertyIsEnumerable,zd=(t,e,r)=>e in t?o7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,h7=(t,e)=>{for(var r in e||(e={}))c7.call(e,r)&&zd(t,r,e[r]);if(Ud)for(var r of Ud(e))u7.call(e,r)&&zd(t,r,e[r]);return t},l7=(t,e)=>a7(t,f7(e));function is(t){const e=[];return t.forEach(r=>{const[i,n]=r.split(":");e.push(`${i}:${n}`)}),e}function d7(t){const e=[];return Object.values(t).forEach(r=>{e.push(...is(r.accounts))}),e}function p7(t,e){const r=[];return Object.values(t).forEach(i=>{is(i.accounts).includes(e)&&r.push(...i.methods)}),r}function g7(t,e){const r=[];return Object.values(t).forEach(i=>{is(i.accounts).includes(e)&&r.push(...i.events)}),r}function b7(t){const{proposal:{requiredNamespaces:e,optionalNamespaces:r={}},supportedNamespaces:i}=t,n=kd(e),s=kd(r),o={};Object.keys(i).forEach(f=>{const h=i[f].chains,g=i[f].methods,w=i[f].events,S=i[f].accounts;h.forEach(E=>{if(!S.some(I=>I.includes(E)))throw new Error(`No accounts provided for chain ${E} in namespace ${f}`)}),o[f]={chains:h,methods:g,events:w,accounts:S}});const a=Bc(e,o,"approve()");if(a)throw new Error(a.message);const c={};return!Object.keys(e).length&&!Object.keys(r).length?o:(Object.keys(n).forEach(f=>{const h=i[f].chains.filter(E=>{var I,N;return(N=(I=n[f])==null?void 0:I.chains)==null?void 0:N.includes(E)}),g=i[f].methods.filter(E=>{var I,N;return(N=(I=n[f])==null?void 0:I.methods)==null?void 0:N.includes(E)}),w=i[f].events.filter(E=>{var I,N;return(N=(I=n[f])==null?void 0:I.events)==null?void 0:N.includes(E)}),S=h.map(E=>i[f].accounts.filter(I=>I.includes(`${E}:`))).flat();c[f]={chains:h,methods:g,events:w,accounts:S}}),Object.keys(s).forEach(f=>{var h,g,w,S,E,I;if(!i[f])return;const N=(g=(h=s[f])==null?void 0:h.chains)==null?void 0:g.filter(R=>i[f].chains.includes(R)),C=i[f].methods.filter(R=>{var $,P;return(P=($=s[f])==null?void 0:$.methods)==null?void 0:P.includes(R)}),T=i[f].events.filter(R=>{var $,P;return(P=($=s[f])==null?void 0:$.events)==null?void 0:P.includes(R)}),L=N==null?void 0:N.map(R=>i[f].accounts.filter($=>$.includes(`${R}:`))).flat();c[f]={chains:ki((w=c[f])==null?void 0:w.chains,N),methods:ki((S=c[f])==null?void 0:S.methods,C),events:ki((E=c[f])==null?void 0:E.events,T),accounts:ki((I=c[f])==null?void 0:I.accounts,L)}}),c)}function Eg(t){return t.includes(":")}function v7(t){return Eg(t)?t.split(":")[0]:t}function kd(t){var e,r,i;const n={};if(!Hs(t))return n;for(const[s,o]of Object.entries(t)){const a=Eg(s)?[s]:o.chains,c=o.methods||[],f=o.events||[],h=v7(s);n[h]=l7(h7({},n[h]),{chains:ki(a,(e=n[h])==null?void 0:e.chains),methods:ki(c,(r=n[h])==null?void 0:r.methods),events:ki(f,(i=n[h])==null?void 0:i.events)})}return n}function y7(t){const e={};return t==null||t.forEach(r=>{const[i,n]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(r),e[i].chains.push(`${i}:${n}`)}),e}function jd(t,e){e=e.map(i=>i.replace("did:pkh:",""));const r=y7(e);for(const[i,n]of Object.entries(r))n.methods?n.methods=ki(n.methods,t):n.methods=t,n.events=["chainChanged","accountsChanged"];return r}const m7={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},w7={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(t,e){const{message:r,code:i}=w7[t];return{message:e?`${r} ${e}`:r,code:i}}function ut(t,e){const{message:r,code:i}=m7[t];return{message:e?`${r} ${e}`:r,code:i}}function Na(t,e){return!!Array.isArray(t)}function Hs(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Jt(t){return typeof t>"u"}function _t(t,e){return e&&Jt(t)?!0:typeof t=="string"&&!!t.trim().length}function Pu(t,e){return e&&Jt(t)?!0:typeof t=="number"&&!isNaN(t)}function _7(t,e){const{requiredNamespaces:r}=e,i=Object.keys(t.namespaces),n=Object.keys(r);let s=!0;return ln(n,i)?(i.forEach(o=>{const{accounts:a,methods:c,events:f}=t.namespaces[o],h=is(a),g=r[o];(!ln(H1(o,g),h)||!ln(g.methods,c)||!ln(g.events,f))&&(s=!1)}),s):!1}function fa(t){return _t(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function x7(t){if(_t(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&fa(r)}}return!1}function E7(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(_t(t,!1)){if(e(t))return!0;const r=Q1(t);return e(r)}}catch{}return!1}function S7(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function M7(t){return t==null?void 0:t.topic}function I7(t,e){let r=null;return _t(t==null?void 0:t.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Kd(t){let e=!0;return Na(t)?t.length&&(e=t.every(r=>_t(r,!1))):e=!1,e}function A7(t,e,r){let i=null;return Na(e)&&e.length?e.forEach(n=>{i||fa(n)||(i=ut("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):fa(t)||(i=ut("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function D7(t,e,r){let i=null;return Object.entries(t).forEach(([n,s])=>{if(i)return;const o=A7(n,H1(n,s),`${e} ${r}`);o&&(i=o)}),i}function O7(t,e){let r=null;return Na(t)?t.forEach(i=>{r||x7(i)||(r=ut("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=ut("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function R7(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=O7(i==null?void 0:i.accounts,`${e} namespace`);n&&(r=n)}),r}function P7(t,e){let r=null;return Kd(t==null?void 0:t.methods)?Kd(t==null?void 0:t.events)||(r=ut("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ut("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Sg(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=P7(i,`${e}, namespace`);n&&(r=n)}),r}function N7(t,e,r){let i=null;if(t&&Hs(t)){const n=Sg(t,e);n&&(i=n);const s=D7(t,e,r);s&&(i=s)}else i=de("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return i}function Qf(t,e){let r=null;if(t&&Hs(t)){const i=Sg(t,e);i&&(r=i);const n=R7(t,e);n&&(r=n)}else r=de("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Mg(t){return _t(t.protocol,!0)}function C7(t,e){let r=!1;return t?t&&Na(t)&&t.length&&t.forEach(i=>{r=Mg(i)}):r=!0,r}function T7(t){return typeof t=="number"}function or(t){return typeof t<"u"&&typeof t!==null}function F7(t){return!(!t||typeof t!="object"||!t.code||!Pu(t.code,!1)||!t.message||!_t(t.message,!1))}function $7(t){return!(Jt(t)||!_t(t.method,!1))}function L7(t){return!(Jt(t)||Jt(t.result)&&Jt(t.error)||!Pu(t.id,!1)||!_t(t.jsonrpc,!1))}function q7(t){return!(Jt(t)||!_t(t.name,!1))}function Vd(t,e){return!(!fa(e)||!d7(t).includes(e))}function B7(t,e,r){return _t(r,!1)?p7(t,e).includes(r):!1}function U7(t,e,r){return _t(r,!1)?g7(t,e).includes(r):!1}function Bc(t,e,r){let i=null;const n=z7(t),s=k7(e),o=Object.keys(n),a=Object.keys(s),c=Hd(Object.keys(t)),f=Hd(Object.keys(e)),h=c.filter(g=>!f.includes(g));return h.length&&(i=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(e).toString()}`)),ln(o,a)||(i=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(g=>{if(!g.includes(":")||i)return;const w=is(e[g].accounts);w.includes(g)||(i=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${w.toString()}`))}),o.forEach(g=>{i||(ln(n[g].methods,s[g].methods)?ln(n[g].events,s[g].events)||(i=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${g}`)):i=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${g}`))}),i}function z7(t){const e={};return Object.keys(t).forEach(r=>{var i;r.includes(":")?e[r]=t[r]:(i=t[r].chains)==null||i.forEach(n=>{e[n]={methods:t[r].methods,events:t[r].events}})}),e}function Hd(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function k7(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const i=is(t[r].accounts);i==null||i.forEach(n=>{e[n]={accounts:t[r].accounts.filter(s=>s.includes(`${n}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function j7(t,e){return Pu(t,!1)&&t<=e.max&&t>=e.min}function Wd(){const t=ro();return new Promise(e=>{switch(t){case br.browser:e(K7());break;case br.reactNative:e(V7());break;case br.node:e(H7());break;default:e(!0)}})}function K7(){return to()&&(navigator==null?void 0:navigator.onLine)}async function V7(){if(Zi()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function H7(){return!0}function W7(t){switch(ro()){case br.browser:G7(t);break;case br.reactNative:J7(t);break}}function G7(t){!Zi()&&to()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function J7(t){Zi()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const ec={};class ys{static get(e){return ec[e]}static set(e,r){ec[e]=r}static delete(e){delete ec[e]}}const Y7="PARSE_ERROR",Z7="INVALID_REQUEST",X7="METHOD_NOT_FOUND",Q7="INVALID_PARAMS",Ig="INTERNAL_ERROR",Nu="SERVER_ERROR",e_=[-32700,-32600,-32601,-32602,-32603],Fs={[Y7]:{code:-32700,message:"Parse error"},[Z7]:{code:-32600,message:"Invalid Request"},[X7]:{code:-32601,message:"Method not found"},[Q7]:{code:-32602,message:"Invalid params"},[Ig]:{code:-32603,message:"Internal error"},[Nu]:{code:-32e3,message:"Server error"}},Ag=Nu;function t_(t){return e_.includes(t)}function Gd(t){return Object.keys(Fs).includes(t)?Fs[t]:Fs[Ag]}function r_(t){const e=Object.values(Fs).find(r=>r.code===t);return e||Fs[Ag]}function i_(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var tc={},yi={},Jd;function n_(){if(Jd)return yi;Jd=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.isBrowserCryptoAvailable=yi.getSubtleCrypto=yi.getBrowerCrypto=void 0;function t(){return(Lr==null?void 0:Lr.crypto)||(Lr==null?void 0:Lr.msCrypto)||{}}yi.getBrowerCrypto=t;function e(){const i=t();return i.subtle||i.webkitSubtle}yi.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return yi.isBrowserCryptoAvailable=r,yi}var mi={},Yd;function s_(){if(Yd)return mi;Yd=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.isBrowser=mi.isNode=mi.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}mi.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}mi.isNode=e;function r(){return!t()&&!e()}return mi.isBrowser=r,mi}var Zd;function o_(){return Zd||(Zd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Js;e.__exportStar(n_(),t),e.__exportStar(s_(),t)}(tc)),tc}var a_=o_();function Ei(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function dn(t=6){return BigInt(Ei(t))}function pn(t,e,r){return{id:r||Ei(),jsonrpc:"2.0",method:t,params:e}}function Cu(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Tu(t,e,r){return{id:t,jsonrpc:"2.0",error:f_(e)}}function f_(t,e){return typeof t>"u"?Gd(Ig):(typeof t=="string"&&(t=Object.assign(Object.assign({},Gd(Nu)),{message:t})),t_(t.code)&&(t=r_(t.code)),t)}class c_{}class u_ extends c_{constructor(){super()}}class h_ extends u_{constructor(e){super()}}const l_="^wss?:";function d_(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function p_(t,e){const r=d_(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Xd(t){return p_(t,l_)}function g_(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Dg(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Fu(t){return Dg(t)&&"method"in t}function Ca(t){return Dg(t)&&(Jr(t)||Er(t))}function Jr(t){return"result"in t}function Er(t){return"error"in t}let b_=class extends h_{constructor(e){super(e),this.events=new zr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(pn(e.method,e.params||[],e.id||dn().toString()),r)}async requestStrict(e,r){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(s){n(s)}this.events.on(`${e.id}`,s=>{Er(s)?n(s.error):i(s.result)});try{await this.connection.send(e,r)}catch(s){n(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ca(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const v_=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),y_=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Qd=t=>t.split("?")[0],e0=10,m_=v_();let w_=class{constructor(e){if(this.url=e,this.events=new zr.EventEmitter,this.registering=!1,!Xd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(yn(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!Xd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),n(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{const n=a_.isReactNative()?void 0:{rejectUnauthorized:!g_(e)},s=new m_(e,[],n);y_()?s.onerror=o=>{const a=o;i(this.emitError(a.error))}:s.on("error",o=>{i(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Jn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),n=i.message||i.toString(),s=Tu(e,n);this.events.emit("payload",s)}parseError(e,r=this.url){return i_(e,Qd(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>e0&&this.events.setMaxListeners(e0)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Qd(this.url)}`));return this.events.emit("register_error",r),r}};var Is={exports:{}};Is.exports;var t0;function __(){return t0||(t0=1,function(t,e){var r=200,i="__lodash_hash_undefined__",n=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",f="[object AsyncFunction]",h="[object Boolean]",g="[object Date]",w="[object Error]",S="[object Function]",E="[object GeneratorFunction]",I="[object Map]",N="[object Number]",C="[object Null]",T="[object Object]",L="[object Promise]",R="[object Proxy]",$="[object RegExp]",P="[object Set]",U="[object String]",k="[object Symbol]",j="[object Undefined]",G="[object WeakMap]",O="[object ArrayBuffer]",p="[object DataView]",d="[object Float32Array]",u="[object Float64Array]",l="[object Int8Array]",v="[object Int16Array]",m="[object Int32Array]",M="[object Uint8Array]",_="[object Uint8ClampedArray]",b="[object Uint16Array]",x="[object Uint32Array]",y=/[\\^$.*+?()[\]{}|]/g,D=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,A={};A[d]=A[u]=A[l]=A[v]=A[m]=A[M]=A[_]=A[b]=A[x]=!0,A[a]=A[c]=A[O]=A[h]=A[p]=A[g]=A[w]=A[S]=A[I]=A[N]=A[T]=A[$]=A[P]=A[U]=A[G]=!1;var z=typeof Lr=="object"&&Lr&&Lr.Object===Object&&Lr,H=typeof self=="object"&&self&&self.Object===Object&&self,Y=z||H||Function("return this")(),X=e&&!e.nodeType&&e,ae=X&&!0&&t&&!t.nodeType&&t,fe=ae&&ae.exports===X,F=fe&&z.process,B=function(){try{return F&&F.binding&&F.binding("util")}catch{}}(),K=B&&B.isTypedArray;function W(q,V){for(var oe=-1,be=q==null?0:q.length,pt=0,Te=[];++oe<be;){var yt=q[oe];V(yt,oe,q)&&(Te[pt++]=yt)}return Te}function Q(q,V){for(var oe=-1,be=V.length,pt=q.length;++oe<be;)q[pt+oe]=V[oe];return q}function ee(q,V){for(var oe=-1,be=q==null?0:q.length;++oe<be;)if(V(q[oe],oe,q))return!0;return!1}function te(q,V){for(var oe=-1,be=Array(q);++oe<q;)be[oe]=V(oe);return be}function ie(q){return function(V){return q(V)}}function re(q,V){return q.has(V)}function Z(q,V){return q==null?void 0:q[V]}function ce(q){var V=-1,oe=Array(q.size);return q.forEach(function(be,pt){oe[++V]=[pt,be]}),oe}function se(q,V){return function(oe){return q(V(oe))}}function ne(q){var V=-1,oe=Array(q.size);return q.forEach(function(be){oe[++V]=be}),oe}var he=Array.prototype,ge=Function.prototype,le=Object.prototype,ve=Y["__core-js_shared__"],De=ge.toString,pe=le.hasOwnProperty,Ne=function(){var q=/[^.]+$/.exec(ve&&ve.keys&&ve.keys.IE_PROTO||"");return q?"Symbol(src)_1."+q:""}(),Ce=le.toString,me=RegExp("^"+De.call(pe).replace(y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=fe?Y.Buffer:void 0,Oe=Y.Symbol,ye=Y.Uint8Array,ze=le.propertyIsEnumerable,Ye=he.splice,we=Oe?Oe.toStringTag:void 0,Ge=Object.getOwnPropertySymbols,Ze=Ue?Ue.isBuffer:void 0,Se=se(Object.keys,Object),je=Dn(Y,"DataView"),ke=Dn(Y,"Map"),xe=Dn(Y,"Promise"),Ke=Dn(Y,"Set"),Ve=Dn(Y,"WeakMap"),_e=Dn(Object,"create"),Xe=Xi(je),Qe=Xi(ke),Me=Xi(xe),et=Xi(Ke),tt=Xi(Ve),Ee=Oe?Oe.prototype:void 0,He=Ee?Ee.valueOf:void 0;function Be(q){var V=-1,oe=q==null?0:q.length;for(this.clear();++V<oe;){var be=q[V];this.set(be[0],be[1])}}function Ie(){this.__data__=_e?_e(null):{},this.size=0}function rt(q){var V=this.has(q)&&delete this.__data__[q];return this.size-=V?1:0,V}function it(q){var V=this.__data__;if(_e){var oe=V[q];return oe===i?void 0:oe}return pe.call(V,q)?V[q]:void 0}function Ae(q){var V=this.__data__;return _e?V[q]!==void 0:pe.call(V,q)}function nt(q,V){var oe=this.__data__;return this.size+=this.has(q)?0:1,oe[q]=_e&&V===void 0?i:V,this}Be.prototype.clear=Ie,Be.prototype.delete=rt,Be.prototype.get=it,Be.prototype.has=Ae,Be.prototype.set=nt;function Le(q){var V=-1,oe=q==null?0:q.length;for(this.clear();++V<oe;){var be=q[V];this.set(be[0],be[1])}}function Je(){this.__data__=[],this.size=0}function er(q){var V=this.__data__,oe=ao(V,q);if(oe<0)return!1;var be=V.length-1;return oe==be?V.pop():Ye.call(V,oe,1),--this.size,!0}function tr(q){var V=this.__data__,oe=ao(V,q);return oe<0?void 0:V[oe][1]}function rr(q){return ao(this.__data__,q)>-1}function ir(q,V){var oe=this.__data__,be=ao(oe,q);return be<0?(++this.size,oe.push([q,V])):oe[be][1]=V,this}Le.prototype.clear=Je,Le.prototype.delete=er,Le.prototype.get=tr,Le.prototype.has=rr,Le.prototype.set=ir;function Et(q){var V=-1,oe=q==null?0:q.length;for(this.clear();++V<oe;){var be=q[V];this.set(be[0],be[1])}}function ii(){this.size=0,this.__data__={hash:new Be,map:new(ke||Le),string:new Be}}function ni(q){var V=fo(this,q).delete(q);return this.size-=V?1:0,V}function si(q){return fo(this,q).get(q)}function oi(q){return fo(this,q).has(q)}function ai(q,V){var oe=fo(this,q),be=oe.size;return oe.set(q,V),this.size+=oe.size==be?0:1,this}Et.prototype.clear=ii,Et.prototype.delete=ni,Et.prototype.get=si,Et.prototype.has=oi,Et.prototype.set=ai;function yr(q){var V=-1,oe=q==null?0:q.length;for(this.__data__=new Et;++V<oe;)this.add(q[V])}function fi(q){return this.__data__.set(q,i),this}function ci(q){return this.__data__.has(q)}yr.prototype.add=yr.prototype.push=fi,yr.prototype.has=ci;function Ut(q){var V=this.__data__=new Le(q);this.size=V.size}function ui(){this.__data__=new Le,this.size=0}function hi(q){var V=this.__data__,oe=V.delete(q);return this.size=V.size,oe}function li(q){return this.__data__.get(q)}function ns(q){return this.__data__.has(q)}function ss(q,V){var oe=this.__data__;if(oe instanceof Le){var be=oe.__data__;if(!ke||be.length<r-1)return be.push([q,V]),this.size=++oe.size,this;oe=this.__data__=new Et(be)}return oe.set(q,V),this.size=oe.size,this}Ut.prototype.clear=ui,Ut.prototype.delete=hi,Ut.prototype.get=li,Ut.prototype.has=ns,Ut.prototype.set=ss;function eb(q,V){var oe=co(q),be=!oe&&gb(q),pt=!oe&&!be&&$a(q),Te=!oe&&!be&&!pt&&Hu(q),yt=oe||be||pt||Te,At=yt?te(q.length,String):[],Tt=At.length;for(var bt in q)pe.call(q,bt)&&!(yt&&(bt=="length"||pt&&(bt=="offset"||bt=="parent")||Te&&(bt=="buffer"||bt=="byteLength"||bt=="byteOffset")||ub(bt,Tt)))&&At.push(bt);return At}function ao(q,V){for(var oe=q.length;oe--;)if(ku(q[oe][0],V))return oe;return-1}function tb(q,V,oe){var be=V(q);return co(q)?be:Q(be,oe(q))}function os(q){return q==null?q===void 0?j:C:we&&we in Object(q)?fb(q):pb(q)}function qu(q){return as(q)&&os(q)==a}function Bu(q,V,oe,be,pt){return q===V?!0:q==null||V==null||!as(q)&&!as(V)?q!==q&&V!==V:rb(q,V,oe,be,Bu,pt)}function rb(q,V,oe,be,pt,Te){var yt=co(q),At=co(V),Tt=yt?c:Pi(q),bt=At?c:Pi(V);Tt=Tt==a?T:Tt,bt=bt==a?T:bt;var cr=Tt==T,Rr=bt==T,zt=Tt==bt;if(zt&&$a(q)){if(!$a(V))return!1;yt=!0,cr=!1}if(zt&&!cr)return Te||(Te=new Ut),yt||Hu(q)?Uu(q,V,oe,be,pt,Te):ob(q,V,Tt,oe,be,pt,Te);if(!(oe&n)){var mr=cr&&pe.call(q,"__wrapped__"),wr=Rr&&pe.call(V,"__wrapped__");if(mr||wr){var Ni=mr?q.value():q,di=wr?V.value():V;return Te||(Te=new Ut),pt(Ni,di,oe,be,Te)}}return zt?(Te||(Te=new Ut),ab(q,V,oe,be,pt,Te)):!1}function ib(q){if(!Vu(q)||lb(q))return!1;var V=ju(q)?me:D;return V.test(Xi(q))}function nb(q){return as(q)&&Ku(q.length)&&!!A[os(q)]}function sb(q){if(!db(q))return Se(q);var V=[];for(var oe in Object(q))pe.call(q,oe)&&oe!="constructor"&&V.push(oe);return V}function Uu(q,V,oe,be,pt,Te){var yt=oe&n,At=q.length,Tt=V.length;if(At!=Tt&&!(yt&&Tt>At))return!1;var bt=Te.get(q);if(bt&&Te.get(V))return bt==V;var cr=-1,Rr=!0,zt=oe&s?new yr:void 0;for(Te.set(q,V),Te.set(V,q);++cr<At;){var mr=q[cr],wr=V[cr];if(be)var Ni=yt?be(wr,mr,cr,V,q,Te):be(mr,wr,cr,q,V,Te);if(Ni!==void 0){if(Ni)continue;Rr=!1;break}if(zt){if(!ee(V,function(di,Qi){if(!re(zt,Qi)&&(mr===di||pt(mr,di,oe,be,Te)))return zt.push(Qi)})){Rr=!1;break}}else if(!(mr===wr||pt(mr,wr,oe,be,Te))){Rr=!1;break}}return Te.delete(q),Te.delete(V),Rr}function ob(q,V,oe,be,pt,Te,yt){switch(oe){case p:if(q.byteLength!=V.byteLength||q.byteOffset!=V.byteOffset)return!1;q=q.buffer,V=V.buffer;case O:return!(q.byteLength!=V.byteLength||!Te(new ye(q),new ye(V)));case h:case g:case N:return ku(+q,+V);case w:return q.name==V.name&&q.message==V.message;case $:case U:return q==V+"";case I:var At=ce;case P:var Tt=be&n;if(At||(At=ne),q.size!=V.size&&!Tt)return!1;var bt=yt.get(q);if(bt)return bt==V;be|=s,yt.set(q,V);var cr=Uu(At(q),At(V),be,pt,Te,yt);return yt.delete(q),cr;case k:if(He)return He.call(q)==He.call(V)}return!1}function ab(q,V,oe,be,pt,Te){var yt=oe&n,At=zu(q),Tt=At.length,bt=zu(V),cr=bt.length;if(Tt!=cr&&!yt)return!1;for(var Rr=Tt;Rr--;){var zt=At[Rr];if(!(yt?zt in V:pe.call(V,zt)))return!1}var mr=Te.get(q);if(mr&&Te.get(V))return mr==V;var wr=!0;Te.set(q,V),Te.set(V,q);for(var Ni=yt;++Rr<Tt;){zt=At[Rr];var di=q[zt],Qi=V[zt];if(be)var Wu=yt?be(Qi,di,zt,V,q,Te):be(di,Qi,zt,q,V,Te);if(!(Wu===void 0?di===Qi||pt(di,Qi,oe,be,Te):Wu)){wr=!1;break}Ni||(Ni=zt=="constructor")}if(wr&&!Ni){var uo=q.constructor,ho=V.constructor;uo!=ho&&"constructor"in q&&"constructor"in V&&!(typeof uo=="function"&&uo instanceof uo&&typeof ho=="function"&&ho instanceof ho)&&(wr=!1)}return Te.delete(q),Te.delete(V),wr}function zu(q){return tb(q,yb,cb)}function fo(q,V){var oe=q.__data__;return hb(V)?oe[typeof V=="string"?"string":"hash"]:oe.map}function Dn(q,V){var oe=Z(q,V);return ib(oe)?oe:void 0}function fb(q){var V=pe.call(q,we),oe=q[we];try{q[we]=void 0;var be=!0}catch{}var pt=Ce.call(q);return be&&(V?q[we]=oe:delete q[we]),pt}var cb=Ge?function(q){return q==null?[]:(q=Object(q),W(Ge(q),function(V){return ze.call(q,V)}))}:mb,Pi=os;(je&&Pi(new je(new ArrayBuffer(1)))!=p||ke&&Pi(new ke)!=I||xe&&Pi(xe.resolve())!=L||Ke&&Pi(new Ke)!=P||Ve&&Pi(new Ve)!=G)&&(Pi=function(q){var V=os(q),oe=V==T?q.constructor:void 0,be=oe?Xi(oe):"";if(be)switch(be){case Xe:return p;case Qe:return I;case Me:return L;case et:return P;case tt:return G}return V});function ub(q,V){return V=V??o,!!V&&(typeof q=="number"||J.test(q))&&q>-1&&q%1==0&&q<V}function hb(q){var V=typeof q;return V=="string"||V=="number"||V=="symbol"||V=="boolean"?q!=="__proto__":q===null}function lb(q){return!!Ne&&Ne in q}function db(q){var V=q&&q.constructor,oe=typeof V=="function"&&V.prototype||le;return q===oe}function pb(q){return Ce.call(q)}function Xi(q){if(q!=null){try{return De.call(q)}catch{}try{return q+""}catch{}}return""}function ku(q,V){return q===V||q!==q&&V!==V}var gb=qu(function(){return arguments}())?qu:function(q){return as(q)&&pe.call(q,"callee")&&!ze.call(q,"callee")},co=Array.isArray;function bb(q){return q!=null&&Ku(q.length)&&!ju(q)}var $a=Ze||wb;function vb(q,V){return Bu(q,V)}function ju(q){if(!Vu(q))return!1;var V=os(q);return V==S||V==E||V==f||V==R}function Ku(q){return typeof q=="number"&&q>-1&&q%1==0&&q<=o}function Vu(q){var V=typeof q;return q!=null&&(V=="object"||V=="function")}function as(q){return q!=null&&typeof q=="object"}var Hu=K?ie(K):nb;function yb(q){return bb(q)?eb(q):sb(q)}function mb(){return[]}function wb(){return!1}t.exports=vb}(Is,Is.exports)),Is.exports}var x_=__();const E_=Qn(x_),Og="wc",Rg=2,Uc="core",ti=`${Og}@2:${Uc}:`,S_={logger:"error"},M_={database:":memory:"},I_="crypto",r0="client_ed25519_seed",A_=ue.ONE_DAY,D_="keychain",O_="0.3",R_="messages",P_="0.3",i0=ue.SIX_HOURS,N_="publisher",Pg="irn",C_="error",Ng="wss://relay.walletconnect.org",T_="relayer",Pt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},F_="_subscription",_r={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},$_=.1,zc="2.18.0",lt={link_mode:"link_mode",relay:"relay"},L_="0.3",q_="WALLETCONNECT_CLIENT_ID",n0="WALLETCONNECT_LINK_MODE_APPS",hr={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},B_="subscription",U_="0.3",z_=ue.FIVE_SECONDS*1e3,k_="pairing",j_="0.3",ms={wc_pairingDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:0},res:{ttl:ue.ONE_DAY,prompt:!1,tag:0}}},hn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Nr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},K_="history",V_="0.3",H_="expirer",xr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},W_="0.3",G_="verify-api",J_="https://verify.walletconnect.com",Cg="https://verify.walletconnect.org",$s=Cg,Y_=`${$s}/v3`,Z_=[J_,Cg],X_="echo",Q_="https://echo.walletconnect.com",Wr={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},_i={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},Cr={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},on={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},an={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},ws={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},ex=.1,tx="event-client",rx=86400,ix="https://pulse.walletconnect.org/batch";function nx(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function g(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var I=0,N=0,C=0,T=E.length;C!==T&&E[C]===0;)C++,I++;for(var L=(T-C)*h+1>>>0,R=new Uint8Array(L);C!==T;){for(var $=E[C],P=0,U=L-1;($!==0||P<N)&&U!==-1;U--,P++)$+=256*R[U]>>>0,R[U]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");N=P,C++}for(var k=L-N;k!==L&&R[k]===0;)k++;for(var j=c.repeat(I);k<L;++k)j+=t.charAt(R[k]);return j}function w(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var I=0;if(E[I]!==" "){for(var N=0,C=0;E[I]===c;)N++,I++;for(var T=(E.length-I)*f+1>>>0,L=new Uint8Array(T);E[I];){var R=r[E.charCodeAt(I)];if(R===255)return;for(var $=0,P=T-1;(R!==0||$<C)&&P!==-1;P--,$++)R+=a*L[P]>>>0,L[P]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");C=$,I++}if(E[I]!==" "){for(var U=T-C;U!==T&&L[U]===0;)U++;for(var k=new Uint8Array(N+(T-U)),j=N;U!==T;)k[j++]=L[U++];return k}}}function S(E){var I=w(E);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:w,decode:S}}var sx=nx,ox=sx;const Tg=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ax=t=>new TextEncoder().encode(t),fx=t=>new TextDecoder().decode(t);class cx{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ux{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Fg(this,e)}}class hx{constructor(e){this.decoders=e}or(e){return Fg(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Fg=(t,e)=>new hx({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class lx{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new cx(e,r,i),this.decoder=new ux(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ta=({name:t,prefix:e,encode:r,decode:i})=>new lx(t,e,r,i),oo=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=ox(r,e);return Ta({prefix:t,name:e,encode:i,decode:s=>Tg(n(s))})},dx=(t,e,r,i)=>{const n={};for(let h=0;h<e.length;++h)n[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,f=0;for(let h=0;h<s;++h){const g=n[t[h]];if(g===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|g,a+=r,a>=8&&(a-=8,o[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},px=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},Bt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Ta({prefix:e,name:t,encode(n){return px(n,i,r)},decode(n){return dx(n,i,r,t)}}),gx=Ta({prefix:"\0",name:"identity",encode:t=>fx(t),decode:t=>ax(t)});var bx=Object.freeze({__proto__:null,identity:gx});const vx=Bt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yx=Object.freeze({__proto__:null,base2:vx});const mx=Bt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var wx=Object.freeze({__proto__:null,base8:mx});const _x=oo({prefix:"9",name:"base10",alphabet:"0123456789"});var xx=Object.freeze({__proto__:null,base10:_x});const Ex=Bt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sx=Bt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Mx=Object.freeze({__proto__:null,base16:Ex,base16upper:Sx});const Ix=Bt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ax=Bt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dx=Bt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ox=Bt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Rx=Bt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Px=Bt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Nx=Bt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Cx=Bt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tx=Bt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Fx=Object.freeze({__proto__:null,base32:Ix,base32upper:Ax,base32pad:Dx,base32padupper:Ox,base32hex:Rx,base32hexupper:Px,base32hexpad:Nx,base32hexpadupper:Cx,base32z:Tx});const $x=oo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Lx=oo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qx=Object.freeze({__proto__:null,base36:$x,base36upper:Lx});const Bx=oo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ux=oo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var zx=Object.freeze({__proto__:null,base58btc:Bx,base58flickr:Ux});const kx=Bt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jx=Bt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Kx=Bt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Vx=Bt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Hx=Object.freeze({__proto__:null,base64:kx,base64pad:jx,base64url:Kx,base64urlpad:Vx});const $g=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Wx=$g.reduce((t,e,r)=>(t[r]=e,t),[]),Gx=$g.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Jx(t){return t.reduce((e,r)=>(e+=Wx[r],e),"")}function Yx(t){const e=[];for(const r of t){const i=Gx[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const Zx=Ta({prefix:"🚀",name:"base256emoji",encode:Jx,decode:Yx});var Xx=Object.freeze({__proto__:null,base256emoji:Zx}),Qx=Lg,s0=128,eE=-128,tE=Math.pow(2,31);function Lg(t,e,r){e=e||[],r=r||0;for(var i=r;t>=tE;)e[r++]=t&255|s0,t/=128;for(;t&eE;)e[r++]=t&255|s0,t>>>=7;return e[r]=t|0,Lg.bytes=r-i+1,e}var rE=kc,iE=128,o0=127;function kc(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw kc.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&o0)<<n:(o&o0)*Math.pow(2,n),n+=7}while(o>=iE);return kc.bytes=s-i,r}var nE=Math.pow(2,7),sE=Math.pow(2,14),oE=Math.pow(2,21),aE=Math.pow(2,28),fE=Math.pow(2,35),cE=Math.pow(2,42),uE=Math.pow(2,49),hE=Math.pow(2,56),lE=Math.pow(2,63),dE=function(t){return t<nE?1:t<sE?2:t<oE?3:t<aE?4:t<fE?5:t<cE?6:t<uE?7:t<hE?8:t<lE?9:10},pE={encode:Qx,decode:rE,encodingLength:dE},qg=pE;const a0=(t,e,r=0)=>(qg.encode(t,e,r),e),f0=t=>qg.encodingLength(t),jc=(t,e)=>{const r=e.byteLength,i=f0(t),n=i+f0(r),s=new Uint8Array(n+r);return a0(t,s,0),a0(r,s,i),s.set(e,n),new gE(t,r,e,s)};class gE{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const Bg=({name:t,code:e,encode:r})=>new bE(t,e,r);class bE{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?jc(this.code,r):r.then(i=>jc(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Ug=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),vE=Bg({name:"sha2-256",code:18,encode:Ug("SHA-256")}),yE=Bg({name:"sha2-512",code:19,encode:Ug("SHA-512")});var mE=Object.freeze({__proto__:null,sha256:vE,sha512:yE});const zg=0,wE="identity",kg=Tg,_E=t=>jc(zg,kg(t)),xE={code:zg,name:wE,encode:kg,digest:_E};var EE=Object.freeze({__proto__:null,identity:xE});new TextEncoder,new TextDecoder;const c0={...bx,...yx,...wx,...xx,...Mx,...Fx,...qx,...zx,...Hx,...Xx};({...mE,...EE});function SE(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function jg(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const u0=jg("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),rc=jg("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=SE(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),ME={utf8:u0,"utf-8":u0,hex:c0.base16,latin1:rc,ascii:rc,binary:rc,...c0};function IE(t,e="utf8"){const r=ME[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}class AE{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=D_,this.version=O_,this.initialized=!1,this.storagePrefix=ti,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()},this.get=i=>{this.isInitialized();const n=this.keychain.get(i);if(typeof n>"u"){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return n},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=Qt(r,this.name)}get context(){return fr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,J1(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Y1(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class DE{constructor(e,r,i){this.core=e,this.logger=r,this.name=I_,this.randomSessionIdentifier=qc(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=async()=>{this.isInitialized();const n=await this.getClientSeed(),s=cl(n);return I1(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const n=V9();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=async n=>{this.isInitialized();const s=await this.getClientSeed(),o=cl(s),a=this.randomSessionIdentifier;return await _6(a,n,A_,o)},this.generateSharedKey=(n,s,o)=>{this.isInitialized();const a=this.getPrivateKey(n),c=H9(a,s);return this.setSymKey(c,o)},this.setSymKey=async(n,s)=>{this.isInitialized();const o=s||jo(n);return await this.keychain.set(o,n),o},this.deleteKeyPair=async n=>{this.isInitialized(),await this.keychain.del(n)},this.deleteSymKey=async n=>{this.isInitialized(),await this.keychain.del(n)},this.encode=async(n,s,o)=>{this.isInitialized();const a=xg(o),c=yn(s);if(Ld(a))return J9(c,o==null?void 0:o.encoding);if($d(a)){const w=a.senderPublicKey,S=a.receiverPublicKey;n=await this.generateSharedKey(w,S)}const f=this.getSymKey(n),{type:h,senderPublicKey:g}=a;return W9({type:h,symKey:f,message:c,senderPublicKey:g,encoding:o==null?void 0:o.encoding})},this.decode=async(n,s,o)=>{this.isInitialized();const a=Z9(s,o);if(Ld(a)){const c=Y9(s,o==null?void 0:o.encoding);return Jn(c)}if($d(a)){const c=a.receiverPublicKey,f=a.senderPublicKey;n=await this.generateSharedKey(c,f)}try{const c=this.getSymKey(n),f=G9({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return Jn(f)}catch(c){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=(n,s=ji)=>{const o=Vs({encoded:n,encoding:s});return _n(o.type)},this.getPayloadSenderPublicKey=(n,s=ji)=>{const o=Vs({encoded:n,encoding:s});return o.senderPublicKey?Zt(o.senderPublicKey,Kt):void 0},this.core=e,this.logger=Qt(r,this.name),this.keychain=i||new AE(this.core,this.logger)}get context(){return fr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(r0)}catch{e=qc(),await this.keychain.set(r0,e)}return IE(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class OE extends _2{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=R_,this.version=P_,this.initialized=!1,this.storagePrefix=ti,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,n)=>{this.isInitialized();const s=Si(n);let o=this.messages.get(i);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=n,this.messages.set(i,o),await this.persist()),s},this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();const s=this.get(i),o=Si(n);return typeof s[o]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Qt(e,this.name),this.core=r}get context(){return fr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,J1(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Y1(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var RE=Object.defineProperty,PE=Object.defineProperties,NE=Object.getOwnPropertyDescriptors,h0=Object.getOwnPropertySymbols,CE=Object.prototype.hasOwnProperty,TE=Object.prototype.propertyIsEnumerable,l0=(t,e,r)=>e in t?RE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d0=(t,e)=>{for(var r in e||(e={}))CE.call(e,r)&&l0(t,r,e[r]);if(h0)for(var r of h0(e))TE.call(e,r)&&l0(t,r,e[r]);return t},p0=(t,e)=>PE(t,NE(e));class FE extends x2{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new zr.EventEmitter,this.name=N_,this.queue=new Map,this.publishTimeout=ue.toMiliseconds(ue.ONE_MINUTE),this.initialPublishTimeout=ue.toMiliseconds(ue.ONE_SECOND*15),this.needsTransportRestart=!1,this.publish=async(i,n,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:s}});const a=(s==null?void 0:s.ttl)||i0,c=aa(s),f=(s==null?void 0:s.prompt)||!1,h=(s==null?void 0:s.tag)||0,g=(s==null?void 0:s.id)||dn().toString(),w={topic:i,message:n,opts:{ttl:a,relay:c,prompt:f,tag:h,id:g,attestation:s==null?void 0:s.attestation}},S=`Failed to publish payload, please try again. id:${g} tag:${h}`;try{const E=new Promise(async I=>{const N=({id:T})=>{w.opts.id===T&&(this.removeRequestFromQueue(T),this.relayer.events.removeListener(Pt.publish,N),I(w))};this.relayer.events.on(Pt.publish,N);const C=zi(new Promise((T,L)=>{this.rpcPublish({topic:i,message:n,ttl:a,prompt:f,tag:h,id:g,attestation:s==null?void 0:s.attestation}).then(T).catch(R=>{this.logger.warn(R,R==null?void 0:R.message),L(R)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${h}`);try{await C,this.events.removeListener(Pt.publish,N)}catch(T){this.queue.set(g,p0(d0({},w),{attempt:1})),this.logger.warn(T,T==null?void 0:T.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:i,message:n,opts:s}}),await zi(E,this.publishTimeout,S)}catch(E){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(E),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw E}finally{this.queue.delete(g)}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=e,this.logger=Qt(r,this.name),this.registerEventListeners()}get context(){return fr(this.logger)}async rpcPublish(e){var r,i,n,s;const{topic:o,message:a,ttl:c=i0,prompt:f,tag:h,id:g,attestation:w}=e,S={method:Ms(aa().protocol).publish,params:{topic:o,message:a,ttl:c,prompt:f,tag:h,attestation:w},id:g};Jt((r=S.params)==null?void 0:r.prompt)&&((i=S.params)==null||delete i.prompt),Jt((n=S.params)==null?void 0:n.tag)&&((s=S.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S});const E=await this.relayer.request(S);return this.relayer.events.emit(Pt.publish,e),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const i=e.attempt+1;this.queue.set(r,p0(d0({},e),{attempt:i}));const{topic:n,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${i}`),await this.rpcPublish({topic:n,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a}),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(es.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Pt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Pt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class $E{constructor(){this.map=new Map,this.set=(e,r)=>{const i=this.get(e);this.exists(e,r)||this.map.set(e,[...i,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,r))return;const n=i.filter(s=>s!==r);if(!n.length){this.map.delete(e);return}this.map.set(e,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var LE=Object.defineProperty,qE=Object.defineProperties,BE=Object.getOwnPropertyDescriptors,g0=Object.getOwnPropertySymbols,UE=Object.prototype.hasOwnProperty,zE=Object.prototype.propertyIsEnumerable,b0=(t,e,r)=>e in t?LE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_s=(t,e)=>{for(var r in e||(e={}))UE.call(e,r)&&b0(t,r,e[r]);if(g0)for(var r of g0(e))zE.call(e,r)&&b0(t,r,e[r]);return t},ic=(t,e)=>qE(t,BE(e));class kE extends M2{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new $E,this.events=new zr.EventEmitter,this.name=B_,this.version=U_,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=ti,this.subscribeTimeout=ue.toMiliseconds(ue.ONE_MINUTE),this.initialSubscribeTimeout=ue.toMiliseconds(ue.ONE_SECOND*15),this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(i,n)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{const s=aa(n),o={topic:i,relay:s,transportType:n==null?void 0:n.transportType};this.pending.set(i,o);const a=await this.rpcSubscribe(i,s,n);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),typeof(n==null?void 0:n.id)<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const n=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((s,o)=>{const a=new ue.Watch;a.start(n);const c=setInterval(()=>{(!this.pending.has(i)&&this.topics.includes(i)||this.cached.some(f=>f.topic===i))&&(clearInterval(c),a.stop(n),s(!0)),a.elapsed(n)>=z_&&(clearInterval(c),a.stop(n),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{await this.restore(),await this.onRestart()},this.checkPending=async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const i=[];this.pending.forEach(n=>{i.push(n)}),await this.batchSubscribe(i)},this.registerEventListeners=()=>{this.relayer.core.heartbeat.on(es.pulse,async()=>{await this.checkPending()}),this.events.on(hr.created,async i=>{const n=hr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:i}),await this.persist()}),this.events.on(hr.deleted,async i=>{const n=hr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:i}),await this.persist()})},this.relayer=e,this.logger=Qt(r,this.name),this.clientId=""}get context(){return fr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let i=!1;try{i=this.getSubscription(e).topic===r}catch{}return i}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const i=this.topicMap.get(e);await Promise.all(i.map(async n=>await this.unsubscribeById(e,n,r)))}async unsubscribeById(e,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}});try{const n=aa(i);await this.rpcUnsubscribe(e,r,n);const s=ut("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(e,r,i){var n;(i==null?void 0:i.transportType)===lt.relay&&await this.restartToComplete();const s={method:Ms(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(n=i==null?void 0:i.internal)==null?void 0:n.throwOnFailedPublish;try{const a=this.getSubscriptionId(e);if((i==null?void 0:i.transportType)===lt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(h=>this.logger.warn(h))},ue.toMiliseconds(ue.ONE_SECOND)),a;const c=new Promise(async h=>{const g=w=>{w.topic===e&&(this.events.removeListener(hr.created,g),h(w.id))};this.events.on(hr.created,g);try{const w=await zi(new Promise((S,E)=>{this.relayer.request(s).catch(I=>{this.logger.warn(I,I==null?void 0:I.message),E(I)}).then(S)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(hr.created,g),h(w)}catch{}}),f=await zi(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!f&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return f?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Pt.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,i={method:Ms(r.protocol).batchSubscribe,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await zi(new Promise(n=>{this.relayer.request(i).catch(s=>this.logger.warn(s)).then(n)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Pt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,i={method:Ms(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let n;try{n=await await zi(new Promise((s,o)=>{this.relayer.request(i).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Pt.connection_stalled)}return n}rpcUnsubscribe(e,r,i){const n={method:Ms(i.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,r){this.setSubscription(e,ic(_s({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,_s({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,_s({},r)),this.topicMap.set(r.topic,e),this.events.emit(hr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:i}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(hr.deleted,ic(_s({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(hr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<r;i++){const n=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(hr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(e.map(r=>ic(_s({},r),{id:this.getSubscriptionId(r.topic)}))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await s5(ue.toMiliseconds(ue.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen()}getSubscriptionId(e){return Si(e+this.clientId)}}var jE=Object.defineProperty,v0=Object.getOwnPropertySymbols,KE=Object.prototype.hasOwnProperty,VE=Object.prototype.propertyIsEnumerable,y0=(t,e,r)=>e in t?jE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,m0=(t,e)=>{for(var r in e||(e={}))KE.call(e,r)&&y0(t,r,e[r]);if(v0)for(var r of v0(e))VE.call(e,r)&&y0(t,r,e[r]);return t};class HE extends E2{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new zr.EventEmitter,this.name=T_,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1,this.heartBeatTimeout=ue.toMiliseconds(ue.THIRTY_SECONDS+ue.FIVE_SECONDS),this.requestsInFlight=[],this.connectTimeout=ue.toMiliseconds(ue.ONE_SECOND*15),this.request=async r=>{var i,n;this.logger.debug("Publishing Request Payload");const s=r.id||dn().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - publishing...");const o=`${s}:${((n=r.params)==null?void 0:n.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}},this.resetPingTimeout=()=>{if(sa())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,n;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(n=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||n.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r,r==null?void 0:r.message)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Pt.connect)},this.onDisconnectHandler=()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.fatal(r,`Fatal socket error: ${r==null?void 0:r.message}`),this.events.emit(Pt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(_r.payload,this.onPayloadHandler),this.provider.on(_r.connect,this.onConnectHandler),this.provider.on(_r.disconnect,this.onDisconnectHandler),this.provider.on(_r.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Qt(e.logger,this.name):wa(cu({level:e.logger||C_})),this.messages=new OE(this.logger,e.core),this.subscriber=new kE(this,this.logger),this.publisher=new FE(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Ng,this.projectId=e.projectId,K8()?this.packageName=cd():V8()&&(this.bundleId=cd()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return fr(this.logger)}get connected(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===1}get connecting(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===0}async publish(e,r,i){this.isInitialized(),await this.publisher.publish(e,r,i),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:lt.relay})}async subscribe(e,r){var i,n,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish)>"u"?!0:(n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const f=h=>{h.topic===e&&(this.subscriber.off(hr.created,f),c())};return await Promise.all([new Promise(h=>{c=h,this.subscriber.on(hr.created,f)}),new Promise(async(h,g)=>{a=await this.subscriber.subscribe(e,m0({internal:{throwOnFailedPublish:o}},r)).catch(w=>{o&&g(w)})||a,h()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await zi(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,i)=>{await this.connect(e).then(r).catch(i).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Wd())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((i,n)=>i.publishedAt-n.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const i of r)try{await this.onMessageEvent(i)}catch(n){this.logger.warn(n,"Error while processing batch message event: "+(n==null?void 0:n.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:i}=e;if(!r.sessionExists){const n=Mt(ue.FIVE_MINUTES),s={topic:i,expiry:n,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,s)}this.events.emit(Pt.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(i,n)=>{const s=()=>{n(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(_r.disconnect,s),await zi(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{n(o)}).finally(()=>{this.provider.off(_r.disconnect,s),clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(_r.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(_r.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,i()})}catch(i){await this.subscriber.stop();const n=i;this.logger.warn({},n.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(i=>setTimeout(i,ue.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,i,n,s;if(sa())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new b_(new w_(J8({sdkVersion:zc,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:i}=e;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(e){const{topic:r,message:i}=e;if(!i||i.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.warn(`Ignoring message for non-subscribed topic ${r}`),!0;const n=this.messages.has(r,i);return n&&this.logger.warn(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Fu(e)){if(!e.method.endsWith(F_))return;const r=e.params,{topic:i,message:n,publishedAt:s,attestation:o}=r.data,a={topic:i,message:n,publishedAt:s,transportType:lt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(m0({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Ca(e)&&this.events.emit(Pt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Pt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Cu(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(_r.payload,this.onPayloadHandler),this.provider.off(_r.connect,this.onConnectHandler),this.provider.off(_r.disconnect,this.onDisconnectHandler),this.provider.off(_r.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Wd();W7(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(i=>this.logger.error(i,i==null?void 0:i.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),clearTimeout(this.pingTimeout),this.events.emit(Pt.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||this.connectPromise||(this.reconnectTimeout=setTimeout(async()=>{clearTimeout(this.reconnectTimeout),await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message))},ue.toMiliseconds($_))))}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.transportOpen()}}var WE=Object.defineProperty,w0=Object.getOwnPropertySymbols,GE=Object.prototype.hasOwnProperty,JE=Object.prototype.propertyIsEnumerable,_0=(t,e,r)=>e in t?WE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x0=(t,e)=>{for(var r in e||(e={}))GE.call(e,r)&&_0(t,r,e[r]);if(w0)for(var r of w0(e))JE.call(e,r)&&_0(t,r,e[r]);return t};class An extends S2{constructor(e,r,i,n=ti,s=void 0){super(e,r,i,n),this.core=e,this.logger=r,this.name=i,this.map=new Map,this.version=L_,this.cached=[],this.initialized=!1,this.storagePrefix=ti,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Jt(o)?this.map.set(this.getKey(o),o):S7(o)?this.map.set(o.id,o):M7(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>E_(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=x0(x0({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())},this.logger=Qt(r,this.name),this.storagePrefix=n,this.getKey=s}get context(){return fr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:n}=de("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}const{message:i}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class YE{constructor(e,r){this.core=e,this.logger=r,this.name=k_,this.version=j_,this.events=new Hp,this.initialized=!1,this.storagePrefix=ti,this.ignoredPayloadTypes=[Di],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const n=qc(),s=await this.core.crypto.setSymKey(n),o=Mt(ue.FIVE_MINUTES),a={protocol:Pg},c={topic:s,expiry:o,relay:a,active:!1,methods:i==null?void 0:i.methods},f=Bd({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:n,relay:a,expiryTimestamp:o,methods:i==null?void 0:i.methods});return this.events.emit(hn.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:i==null?void 0:i.transportType}),{topic:s,uri:f}},this.pair=async i=>{this.isInitialized();const n=this.core.eventClient.createEvent({properties:{topic:i==null?void 0:i.uri,trace:[Wr.pairing_started]}});this.isValidPair(i,n);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:f}=qd(i.uri);n.props.properties.topic=s,n.addTrace(Wr.pairing_uri_validation_success),n.addTrace(Wr.pairing_uri_not_expired);let h;if(this.pairings.keys.includes(s)){if(h=this.pairings.get(s),n.addTrace(Wr.existing_pairing),h.active)throw n.setError(_i.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);n.addTrace(Wr.pairing_not_expired)}const g=c||Mt(ue.FIVE_MINUTES),w={topic:s,relay:a,expiry:g,active:!1,methods:f};this.core.expirer.set(s,g),await this.pairings.set(s,w),n.addTrace(Wr.store_new_pairing),i.activatePairing&&await this.activate({topic:s}),this.events.emit(hn.create,w),n.addTrace(Wr.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),n.addTrace(Wr.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{n.setError(_i.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(S){throw n.setError(_i.subscribe_pairing_topic_failure),S}return n.addTrace(Wr.subscribe_pairing_topic_success),w},this.activate=async({topic:i})=>{this.isInitialized();const n=Mt(ue.FIVE_MINUTES);this.core.expirer.set(i,n),await this.pairings.update(i,{active:!0,expiry:n})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:n}=i;if(this.pairings.keys.includes(n)){const s=await this.sendRequest(n,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=cn();this.events.once(qe("pairing_ping",s),({error:f})=>{f?c(f):a()}),await o()}},this.updateExpiry=async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})},this.updateMetadata=async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",ut("USER_DISCONNECTED")),await this.deletePairing(n))},this.formatUriFromPairing=i=>{this.isInitialized();const{topic:n,relay:s,expiry:o,methods:a}=i,c=this.core.crypto.keychain.get(n);return Bd({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:c,relay:s,expiryTimestamp:o,methods:a})},this.sendRequest=async(i,n,s)=>{const o=pn(n,s),a=await this.core.crypto.encode(i,o),c=ms[n].req;return this.core.history.set(i,o),this.core.relayer.publish(i,a,c),o.id},this.sendResult=async(i,n,s)=>{const o=Cu(i,s),a=await this.core.crypto.encode(n,o),c=await this.core.history.get(n,i),f=ms[c.request.method].res;await this.core.relayer.publish(n,a,f),await this.core.history.resolve(o)},this.sendError=async(i,n,s)=>{const o=Tu(i,s),a=await this.core.crypto.encode(n,o),c=await this.core.history.get(n,i),f=ms[c.request.method]?ms[c.request.method].res:ms.unregistered_method.res;await this.core.relayer.publish(n,a,f),await this.core.history.resolve(o)},this.deletePairing=async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,ut("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(n=>Ui(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))},this.onRelayEventRequest=i=>{const{topic:n,payload:s}=i;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(n,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,s);default:return this.onUnknownRpcMethodRequest(n,s)}},this.onRelayEventResponse=async i=>{const{topic:n,payload:s}=i,o=(await this.core.history.get(n,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(n,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(i,n)=>{const{id:s}=n;try{this.isValidPing({topic:i}),await this.sendResult(s,i,!0),this.events.emit(hn.ping,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onPairingPingResponse=(i,n)=>{const{id:s}=n;setTimeout(()=>{Jr(n)?this.events.emit(qe("pairing_ping",s),{}):Er(n)&&this.events.emit(qe("pairing_ping",s),{error:n.error})},500)},this.onPairingDeleteRequest=async(i,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(hn.delete,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(i,n)=>{const{id:s,method:o}=n;try{if(this.registeredMethods.includes(o))return;const a=ut("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,i,a),this.logger.error(a)}catch(a){await this.sendError(s,i,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(ut("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,n)=>{var s;if(!or(i)){const{message:a}=de("MISSING_OR_INVALID",`pair() params: ${i}`);throw n.setError(_i.malformed_pairing_uri),new Error(a)}if(!E7(i.uri)){const{message:a}=de("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw n.setError(_i.malformed_pairing_uri),new Error(a)}const o=qd(i==null?void 0:i.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=de("MISSING_OR_INVALID","pair() uri#relay-protocol");throw n.setError(_i.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=de("MISSING_OR_INVALID","pair() uri#symKey");throw n.setError(_i.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&ue.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){n.setError(_i.pairing_expired);const{message:a}=de("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}},this.isValidPing=async i=>{if(!or(i)){const{message:s}=de("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidDisconnect=async i=>{if(!or(i)){const{message:s}=de("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async i=>{if(!_t(i,!1)){const{message:n}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){const{message:n}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(Ui(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:n}=de("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}},this.core=e,this.logger=Qt(r,this.name),this.pairings=new An(this.core,this.logger,this.name,this.storagePrefix)}get context(){return fr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Pt.message,async e=>{const{topic:r,message:i,transportType:n}=e;if(!this.pairings.keys.includes(r)||n===lt.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(r,i);try{Fu(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):Ca(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(xr.expired,async e=>{const{topic:r}=X1(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(hn.expire,{topic:r}))})}}class ZE extends w2{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new zr.EventEmitter,this.name=K_,this.version=V_,this.cached=[],this.initialized=!1,this.storagePrefix=ti,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,n,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:s}),this.records.has(n.id))return;const o={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:s,expiry:Mt(ue.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Nr.created,o)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=Er(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.persist(),this.events.emit(Nr.updated,n))},this.get=async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n)),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(s=>{if(s.topic===i){if(typeof n<"u"&&s.id!==n)return;this.records.delete(s.id),this.events.emit(Nr.deleted,s)}}),this.persist()},this.exists=async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Qt(r,this.name)}get context(){return fr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:pn(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:i}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Nr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Nr.created,e=>{const r=Nr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Nr.updated,e=>{const r=Nr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Nr.deleted,e=>{const r=Nr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(es.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{ue.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Nr.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class XE extends I2{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new zr.EventEmitter,this.name=H_,this.version=W_,this.cached=[],this.initialized=!1,this.storagePrefix=ti,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();const s=this.formatTarget(i),o={target:s,expiry:n};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(xr.created,{target:s,expiration:o})},this.get=i=>{this.isInitialized();const n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){const n=this.formatTarget(i),s=this.getExpiration(n);this.expirations.delete(n),this.events.emit(xr.deleted,{target:n,expiration:s})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Qt(r,this.name)}get context(){return fr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Y8(e);if(typeof e=="number")return Z8(e);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(xr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:i}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return r}checkExpiry(e,r){const{expiry:i}=r;ue.toMiliseconds(i)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(xr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(es.pulse,()=>this.checkExpirations()),this.events.on(xr.created,e=>{const r=xr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(xr.expired,e=>{const r=xr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(xr.deleted,e=>{const r=xr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class QE extends A2{constructor(e,r,i){super(e,r,i),this.core=e,this.logger=r,this.store=i,this.name=G_,this.verifyUrlV3=Y_,this.storagePrefix=ti,this.version=Rg,this.init=async()=>{var n;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ue.toMiliseconds((n=this.publicKey)==null?void 0:n.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async n=>{if(!to()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=n,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const f=mn.getDocument(),h=this.startAbortTimer(ue.ONE_SECOND*5),g=await new Promise((w,S)=>{const E=()=>{window.removeEventListener("message",N),f.body.removeChild(I),S("attestation aborted")};this.abortController.signal.addEventListener("abort",E);const I=f.createElement("iframe");I.src=c,I.style.display="none",I.addEventListener("error",E,{signal:this.abortController.signal});const N=C=>{if(C.data&&typeof C.data=="string")try{const T=JSON.parse(C.data);if(T.type==="verify_attestation"){if(Dc(T.attestation).payload.id!==o)return;clearInterval(h),f.body.removeChild(I),this.abortController.signal.removeEventListener("abort",E),window.removeEventListener("message",N),w(T.attestation===null?"":T.attestation)}}catch(T){this.logger.warn(T)}};f.body.appendChild(I),window.addEventListener("message",N,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",g),g}catch(f){this.logger.warn(f)}return""},this.resolve=async n=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=n;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Dc(s).payload.id!==a)return;const f=await this.isValidJwtAttestation(s);if(f){if(!f.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return f}}if(!o)return;const c=this.getVerifyUrl(n==null?void 0:n.verifyUrl);return this.fetchAttestation(o,c)},this.fetchAttestation=async(n,s)=>{this.logger.debug(`resolving attestation: ${n} from url: ${s}`);const o=this.startAbortTimer(ue.ONE_SECOND*5),a=await fetch(`${s}/attestation/${n}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0},this.getVerifyUrl=n=>{let s=n||$s;return Z_.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${$s}`),s=$s),s},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const n=this.startAbortTimer(ue.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(n),await s.json()}catch(n){this.logger.warn(n)}},this.persistPublicKey=async n=>{this.logger.debug("persisting public key to local storage",n),await this.store.setItem(this.storeKey,n),this.publicKey=n},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async n=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(n,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(n,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const n=await this.fetchPromise;return this.fetchPromise=void 0,n},this.validateAttestation=(n,s)=>{const o=t7(n,s.publicKey),a={hasExpired:ue.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}},this.logger=Qt(r,this.name),this.abortController=new AbortController,this.isDevEnv=Su(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return fr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ue.toMiliseconds(e))}}class eS extends D2{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=X_,this.registerDeviceToken=async i=>{const{clientId:n,token:s,notificationType:o,enableEncrypted:a=!1}=i,c=`${Q_}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:o,token:s,always_raw:a})})},this.logger=Qt(r,this.context)}}var tS=Object.defineProperty,E0=Object.getOwnPropertySymbols,rS=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable,S0=(t,e,r)=>e in t?tS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xs=(t,e)=>{for(var r in e||(e={}))rS.call(e,r)&&S0(t,r,e[r]);if(E0)for(var r of E0(e))iS.call(e,r)&&S0(t,r,e[r]);return t};class nS extends O2{constructor(e,r,i=!0){super(e,r,i),this.core=e,this.logger=r,this.context=tx,this.storagePrefix=ti,this.storageVersion=ex,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!Su())try{const n={eventId:hd(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:G1(this.core.relayer.protocol,this.core.relayer.version,zc)}}};await this.sendEvent([n])}catch(n){this.logger.warn(n)}},this.createEvent=n=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=n,f=hd(),h=this.core.projectId||"",g=Date.now(),w=xs({eventId:f,timestamp:g,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:h,domain:this.getAppDomain()},this.setMethods(f));return this.telemetryEnabled&&(this.events.set(f,w),this.shouldPersist=!0),w},this.getEvent=n=>{const{eventId:s,topic:o}=n;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return xs(xs({},a),this.setMethods(a.eventId))},this.deleteEvent=n=>{const{eventId:s}=n;this.events.delete(s),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(es.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(n=>{ue.fromMiliseconds(Date.now())-ue.fromMiliseconds(n.timestamp)>rx&&(this.events.delete(n.eventId),this.shouldPersist=!0)})})},this.setMethods=n=>({addTrace:s=>this.addTrace(n,s),setError:s=>this.setError(n,s)}),this.addTrace=(n,s)=>{const o=this.events.get(n);o&&(o.props.properties.trace.push(s),this.events.set(n,o),this.shouldPersist=!0)},this.setError=(n,s)=>{const o=this.events.get(n);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(n,o),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const n=await this.core.storage.getItem(this.storageKey)||[];if(!n.length)return;n.forEach(s=>{this.events.set(s.eventId,xs(xs({},s),this.setMethods(s.eventId)))})}catch(n){this.logger.warn(n)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const n=[];for(const[s,o]of this.events)o.props.type&&n.push(o);if(n.length!==0)try{if((await this.sendEvent(n)).ok)for(const s of n)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}},this.sendEvent=async n=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${ix}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${zc}${s}`,{method:"POST",body:JSON.stringify(n)})},this.getAppDomain=()=>W1().url,this.logger=Qt(r,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var sS=Object.defineProperty,M0=Object.getOwnPropertySymbols,oS=Object.prototype.hasOwnProperty,aS=Object.prototype.propertyIsEnumerable,I0=(t,e,r)=>e in t?sS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A0=(t,e)=>{for(var r in e||(e={}))oS.call(e,r)&&I0(t,r,e[r]);if(M0)for(var r of M0(e))aS.call(e,r)&&I0(t,r,e[r]);return t};let fS=class Kg extends m2{constructor(e){var r;super(e),this.protocol=Og,this.version=Rg,this.name=Uc,this.events=new zr.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.dispatchEnvelope=({topic:o,message:a,sessionExists:c})=>{if(!o||!a)return;const f={topic:o,message:a,publishedAt:Date.now(),transportType:lt.link_mode};this.relayer.onLinkMessageEvent(f,{sessionExists:c})},this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Ng,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=cu({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:S_.logger,name:Uc}),{logger:n,chunkLoggerController:s}=y2({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Qt(n,this.name),this.heartbeat=new _m,this.crypto=new DE(this,this.logger,e==null?void 0:e.keychain),this.history=new ZE(this,this.logger),this.expirer=new XE(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new t2(A0(A0({},M_),e==null?void 0:e.storageOptions)),this.relayer=new HE({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new YE(this,this.logger),this.verify=new QE(this,this.logger,this.storage),this.echoClient=new eS(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new nS(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new Kg(e);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(q_,i),r}get context(){return fr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(n0,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(n0)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const ca=fS,Vg="wc",Hg=2,Wg="client",$u=`${Vg}@${Hg}:${Wg}:`,nc={name:Wg,logger:"error"},D0="WALLETCONNECT_DEEPLINK_CHOICE",cS="proposal",uS="Proposal expired",hS="session",Tn=ue.SEVEN_DAYS,lS="engine",Dt={wc_sessionPropose:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ue.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ue.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1119}}},sc={min:ue.FIVE_MINUTES,max:ue.SEVEN_DAYS},Hr={idle:"IDLE",active:"ACTIVE"},dS="request",pS=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],gS="wc",bS="auth",vS="authKeys",yS="pairingTopics",mS="requests",Fa=`${gS}@${1.5}:${bS}:`,Ko=`${Fa}:PUB_KEY`;var wS=Object.defineProperty,_S=Object.defineProperties,xS=Object.getOwnPropertyDescriptors,O0=Object.getOwnPropertySymbols,ES=Object.prototype.hasOwnProperty,SS=Object.prototype.propertyIsEnumerable,R0=(t,e,r)=>e in t?wS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mt=(t,e)=>{for(var r in e||(e={}))ES.call(e,r)&&R0(t,r,e[r]);if(O0)for(var r of O0(e))SS.call(e,r)&&R0(t,r,e[r]);return t},Tr=(t,e)=>_S(t,xS(e));class MS extends P2{constructor(e){super(e),this.name=lS,this.events=new Hp,this.initialized=!1,this.requestQueue={state:Hr.idle,queue:[]},this.sessionRequestQueue={state:Hr.idle,queue:[]},this.requestQueueDelay=ue.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Dt)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ue.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=Tr(mt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=i;let f=n,h,g=!1;try{if(f){const R=this.client.core.pairing.pairings.get(f);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),g=R.active}}catch(R){throw this.client.logger.error(`connect() -> pairing.get(${f}) failed`),R}if(!f||!g){const{topic:R,uri:$}=await this.client.core.pairing.create();f=R,h=$}if(!f){const{message:R}=de("NO_MATCHING_KEY",`connect() pairing topic: ${f}`);throw new Error(R)}const w=await this.client.core.crypto.generateKeyPair(),S=Dt.wc_sessionPropose.req.ttl||ue.FIVE_MINUTES,E=Mt(S),I=mt({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:Pg}],proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:f},a&&{sessionProperties:a}),{reject:N,resolve:C,done:T}=cn(S,uS);this.events.once(qe("session_connect"),async({error:R,session:$})=>{if(R)N(R);else if($){$.self.publicKey=w;const P=Tr(mt({},$),{pairingTopic:I.pairingTopic,requiredNamespaces:I.requiredNamespaces,optionalNamespaces:I.optionalNamespaces,transportType:lt.relay});await this.client.session.set($.topic,P),await this.setExpiry($.topic,$.expiry),f&&await this.client.core.pairing.updateMetadata({topic:f,metadata:$.peer.metadata}),this.cleanupDuplicatePairings(P),C(P)}});const L=await this.sendRequest({topic:f,method:"wc_sessionPropose",params:I,throwOnFailedPublish:!0});return await this.setProposal(L,mt({id:L},I)),{uri:h,approval:T}},this.pair=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async r=>{var i,n,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(i=r==null?void 0:r.id)==null?void 0:i.toString(),trace:[Cr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(k){throw o.setError(on.no_internet_connection),k}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(k){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(on.proposal_not_found),k}try{await this.isValidApprove(r)}catch(k){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(on.session_approve_namespace_validation_failure),k}const{id:a,relayProtocol:c,namespaces:f,sessionProperties:h,sessionConfig:g}=r,w=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:S,proposer:E,requiredNamespaces:I,optionalNamespaces:N}=w;let C=(n=this.client.core.eventClient)==null?void 0:n.getEvent({topic:S});C||(C=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Cr.session_approve_started,properties:{topic:S,trace:[Cr.session_approve_started,Cr.session_namespaces_validation_success]}}));const T=await this.client.core.crypto.generateKeyPair(),L=E.publicKey,R=await this.client.core.crypto.generateSharedKey(T,L),$=mt(mt({relay:{protocol:c??"irn"},namespaces:f,controller:{publicKey:T,metadata:this.client.metadata},expiry:Mt(Tn)},h&&{sessionProperties:h}),g&&{sessionConfig:g}),P=lt.relay;C.addTrace(Cr.subscribing_session_topic);try{await this.client.core.relayer.subscribe(R,{transportType:P})}catch(k){throw C.setError(on.subscribe_session_topic_failure),k}C.addTrace(Cr.subscribe_session_topic_success);const U=Tr(mt({},$),{topic:R,requiredNamespaces:I,optionalNamespaces:N,pairingTopic:S,acknowledged:!1,self:$.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:T,transportType:lt.relay});await this.client.session.set(R,U),C.addTrace(Cr.store_session);try{C.addTrace(Cr.publishing_session_settle),await this.sendRequest({topic:R,method:"wc_sessionSettle",params:$,throwOnFailedPublish:!0}).catch(k=>{throw C==null||C.setError(on.session_settle_publish_failure),k}),C.addTrace(Cr.session_settle_publish_success),C.addTrace(Cr.publishing_session_approve),await this.sendResult({id:a,topic:S,result:{relay:{protocol:c??"irn"},responderPublicKey:T},throwOnFailedPublish:!0}).catch(k=>{throw C==null||C.setError(on.session_approve_publish_failure),k}),C.addTrace(Cr.session_approve_publish_success)}catch(k){throw this.client.logger.error(k),this.client.session.delete(R,ut("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(R),k}return this.client.core.eventClient.deleteEvent({eventId:C.eventId}),await this.client.core.pairing.updateMetadata({topic:S,metadata:E.metadata}),await this.client.proposal.delete(a,ut("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:S}),await this.setExpiry(R,Mt(Tn)),{topic:R,acknowledged:()=>Promise.resolve(this.client.session.get(R))}},this.reject=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:i,reason:n}=r;let s;try{s=this.client.proposal.get(i).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),o}s&&(await this.sendError({id:i,topic:s,error:n,rpcOpts:Dt.wc_sessionPropose.reject}),await this.client.proposal.delete(i,ut("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(g){throw this.client.logger.error("update() -> isValidUpdate() failed"),g}const{topic:i,namespaces:n}=r,{done:s,resolve:o,reject:a}=cn(),c=Ei(),f=dn().toString(),h=this.client.session.get(i).namespaces;return this.events.once(qe("session_update",c),({error:g})=>{g?a(g):o()}),await this.client.session.update(i,{namespaces:n}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:f}).catch(g=>{this.client.logger.error(g),this.client.session.update(i,{namespaces:h}),a(g)}),{acknowledged:s}},this.extend=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:i}=r,n=Ei(),{done:s,resolve:o,reject:a}=cn();return this.events.once(qe("session_extend",n),({error:c})=>{c?a(c):o()}),await this.setExpiry(i,Mt(Tn)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}},this.request=async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(E){throw this.client.logger.error("request() -> isValidRequest() failed"),E}const{chainId:i,request:n,topic:s,expiry:o=Dt.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===lt.relay&&await this.confirmOnlineStateOrThrow();const c=Ei(),f=dn().toString(),{done:h,resolve:g,reject:w}=cn(o,"Request expired. Please try again.");this.events.once(qe("session_request",c),({error:E,result:I})=>{E?w(E):g(I)});const S=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);return S?(await this.sendRequest({clientRpcId:c,relayRpcId:f,topic:s,method:"wc_sessionRequest",params:{request:Tr(mt({},n),{expiryTimestamp:Mt(o)}),chainId:i},expiry:o,throwOnFailedPublish:!0,appLink:S}).catch(E=>w(E)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:c}),await h()):await Promise.all([new Promise(async E=>{await this.sendRequest({clientRpcId:c,relayRpcId:f,topic:s,method:"wc_sessionRequest",params:{request:Tr(mt({},n),{expiryTimestamp:Mt(o)}),chainId:i},expiry:o,throwOnFailedPublish:!0}).catch(I=>w(I)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:c}),E()}),new Promise(async E=>{var I;if(!((I=a.sessionConfig)!=null&&I.disableDeepLink)){const N=await t5(this.client.core.storage,D0);await X8({id:c,topic:s,wcDeepLink:N})}E()}),h()]).then(E=>E[2])},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:i,response:n}=r,{id:s}=n,o=this.client.session.get(i);o.transportType===lt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Jr(n)?await this.sendResult({id:s,topic:i,result:n.result,throwOnFailedPublish:!0,appLink:a}):Er(n)&&await this.sendError({id:s,topic:i,error:n.error,appLink:a}),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}const{topic:i}=r;if(this.client.session.keys.includes(i)){const n=Ei(),s=dn().toString(),{done:o,resolve:a,reject:c}=cn();this.events.once(qe("session_ping",n),({error:f})=>{f?c(f):a()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:n,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(i)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:i}))},this.emit=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:i,event:n,chainId:s}=r,o=dn().toString(),a=Ei();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:n,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})},this.disconnect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:i}=r;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:ut("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:n}=de("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(n)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>_7(i,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(r,i)=>{var n;this.isInitialized(),this.isValidAuthenticate(r);const s=i&&this.client.core.linkModeSupportedApps.includes(i)&&((n=this.client.metadata.redirect)==null?void 0:n.linkMode),o=s?lt.link_mode:lt.relay;o===lt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:f,domain:h,nonce:g,type:w,exp:S,nbf:E,methods:I=[],expiry:N}=r,C=[...r.resources||[]],{topic:T,uri:L}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:T,uri:L}});const R=await this.client.core.crypto.generateKeyPair(),$=jo(R);if(await Promise.all([this.client.auth.authKeys.set(Ko,{responseTopic:$,publicKey:R}),this.client.auth.pairingTopics.set($,{topic:$,pairingTopic:T})]),await this.client.core.relayer.subscribe($,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${T}`),I.length>0){const{namespace:M}=zo(a[0]);let _=V5(M,"request",I);ko(C)&&(_=W5(_,C.pop())),C.push(_)}const P=N&&N>Dt.wc_sessionAuthenticate.req.ttl?N:Dt.wc_sessionAuthenticate.req.ttl,U={authPayload:{type:w??"caip122",chains:a,statement:c,aud:f,domain:h,version:"1",nonce:g,iat:new Date().toISOString(),exp:S,nbf:E,resources:C},requester:{publicKey:R,metadata:this.client.metadata},expiryTimestamp:Mt(P)},k={eip155:{chains:a,methods:[...new Set(["personal_sign",...I])],events:["chainChanged","accountsChanged"]}},j={requiredNamespaces:{},optionalNamespaces:k,relays:[{protocol:"irn"}],pairingTopic:T,proposer:{publicKey:R,metadata:this.client.metadata},expiryTimestamp:Mt(Dt.wc_sessionPropose.req.ttl)},{done:G,resolve:O,reject:p}=cn(P,"Request expired"),d=async({error:M,session:_})=>{if(this.events.off(qe("session_request",l),u),M)p(M);else if(_){_.self.publicKey=R,await this.client.session.set(_.topic,_),await this.setExpiry(_.topic,_.expiry),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:_.peer.metadata});const b=this.client.session.get(_.topic);await this.deleteProposal(v),O({session:b})}},u=async M=>{var _,b,x;if(await this.deletePendingAuthRequest(l,{message:"fulfilled",code:0}),M.error){const Y=ut("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===Y.code?void 0:(this.events.off(qe("session_connect"),d),p(M.error.message))}await this.deleteProposal(v),this.events.off(qe("session_connect"),d);const{cacaos:y,responder:D}=M.result,J=[],A=[];for(const Y of y){await md({cacao:Y,projectId:this.client.core.projectId})||(this.client.logger.error(Y,"Signature verification failed"),p(ut("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:X}=Y,ae=ko(X.resources),fe=[Nc(X.iss)],F=oa(X.iss);if(ae){const B=wd(ae),K=_d(ae);J.push(...B),fe.push(...K)}for(const B of fe)A.push(`${B}:${F}`)}const z=await this.client.core.crypto.generateSharedKey(R,D.publicKey);let H;J.length>0&&(H={topic:z,acknowledged:!0,self:{publicKey:R,metadata:this.client.metadata},peer:D,controller:D.publicKey,expiry:Mt(Tn),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:T,namespaces:jd([...new Set(J)],[...new Set(A)]),transportType:o},await this.client.core.relayer.subscribe(z,{transportType:o}),await this.client.session.set(z,H),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:D.metadata}),H=this.client.session.get(z)),(_=this.client.metadata.redirect)!=null&&_.linkMode&&(b=D.metadata.redirect)!=null&&b.linkMode&&(x=D.metadata.redirect)!=null&&x.universal&&i&&(this.client.core.addLinkModeSupportedApp(D.metadata.redirect.universal),this.client.session.update(z,{transportType:lt.link_mode})),O({auths:y,session:H})},l=Ei(),v=Ei();this.events.once(qe("session_connect"),d),this.events.once(qe("session_request",l),u);let m;try{if(s){const M=pn("wc_sessionAuthenticate",U,l);this.client.core.history.set(T,M);const _=await this.client.core.crypto.encode("",M,{type:so,encoding:vs});m=Ao(i,T,_)}else await Promise.all([this.sendRequest({topic:T,method:"wc_sessionAuthenticate",params:U,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:l}),this.sendRequest({topic:T,method:"wc_sessionPropose",params:j,expiry:Dt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:v})])}catch(M){throw this.events.off(qe("session_connect"),d),this.events.off(qe("session_request",l),u),M}return await this.setProposal(v,mt({id:v},j)),await this.setAuthRequest(l,{request:Tr(mt({},U),{verifyContext:{}}),pairingTopic:T,transportType:o}),{uri:m??L,response:G}},this.approveSessionAuthenticate=async r=>{const{id:i,auths:n}=r,s=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[an.authenticated_session_approve_started]}});try{this.isInitialized()}catch(N){throw s.setError(ws.no_internet_connection),N}const o=this.getPendingAuthRequest(i);if(!o)throw s.setError(ws.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const a=o.transportType||lt.relay;a===lt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,f=await this.client.core.crypto.generateKeyPair(),h=jo(c),g={type:Di,receiverPublicKey:c,senderPublicKey:f},w=[],S=[];for(const N of n){if(!await md({cacao:N,projectId:this.client.core.projectId})){s.setError(ws.invalid_cacao);const $=ut("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:h,error:$,encodeOpts:g}),new Error($.message)}s.addTrace(an.cacaos_verified);const{p:C}=N,T=ko(C.resources),L=[Nc(C.iss)],R=oa(C.iss);if(T){const $=wd(T),P=_d(T);w.push(...$),L.push(...P)}for(const $ of L)S.push(`${$}:${R}`)}const E=await this.client.core.crypto.generateSharedKey(f,c);s.addTrace(an.create_authenticated_session_topic);let I;if((w==null?void 0:w.length)>0){I={topic:E,acknowledged:!0,self:{publicKey:f,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Mt(Tn),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:jd([...new Set(w)],[...new Set(S)]),transportType:a},s.addTrace(an.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:a})}catch(N){throw s.setError(ws.subscribe_authenticated_session_topic_failure),N}s.addTrace(an.subscribe_authenticated_session_topic_success),await this.client.session.set(E,I),s.addTrace(an.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(an.publishing_authenticated_session_approve);try{await this.sendResult({topic:h,id:i,result:{cacaos:n,responder:{publicKey:f,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(N){throw s.setError(ws.authenticated_session_approve_publish_failure),N}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:I}},this.rejectSessionAuthenticate=async r=>{this.isInitialized();const{id:i,reason:n}=r,s=this.getPendingAuthRequest(i);if(!s)throw new Error(`Could not find pending auth request with id ${i}`);s.transportType===lt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=jo(o),f={type:Di,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:i,topic:c,error:n,encodeOpts:f,rpcOpts:Dt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,ut("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();const{request:i,iss:n}=r;return ag(i,n)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const i=this.client.core.pairing.pairings.get(r.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async r=>{var i;const{topic:n,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,ut("USER_DISCONNECTED")),this.addToRecentlyDeleted(n,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),s||this.client.core.expirer.del(n),this.client.core.storage.removeItem(D0).catch(f=>this.client.logger.warn(f)),this.getPendingSessionRequests().forEach(f=>{f.topic===n&&this.deletePendingSessionRequest(f.id,ut("USER_DISCONNECTED"))}),n===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=Hr.idle),o&&this.client.events.emit("session_delete",{id:a,topic:n})},this.deleteProposal=async(r,i)=>{if(i)try{const n=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:n.pairingTopic});s==null||s.setError(on.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,ut("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),n&&(this.sessionRequestQueue.state=Hr.idle,this.client.events.emit("session_request_expire",{id:r}))},this.deletePendingAuthRequest=async(r,i,n=!1)=>{await Promise.all([this.client.auth.requests.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,i),await this.client.session.update(r,{expiry:i}))},this.setProposal=async(r,i)=>{this.client.core.expirer.set(r,Mt(Dt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,i)},this.setAuthRequest=async(r,i)=>{const{request:n,pairingTopic:s,transportType:o=lt.relay}=i;this.client.core.expirer.set(r,n.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:n.authPayload,requester:n.requester,expiryTimestamp:n.expiryTimestamp,id:r,pairingTopic:s,verifyContext:n.verifyContext,transportType:o})},this.setPendingSessionRequest=async r=>{const{id:i,topic:n,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Mt(Dt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,a),await this.client.pendingRequest.set(i,{id:i,topic:n,params:s,verifyContext:o})},this.sendRequest=async r=>{const{topic:i,method:n,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:f,appLink:h}=r,g=pn(n,s,c);let w;const S=!!h;try{const N=S?vs:ji;w=await this.client.core.crypto.encode(i,g,{encoding:N})}catch(N){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),N}let E;if(pS.includes(n)){const N=Si(JSON.stringify(g)),C=Si(w);E=await this.client.core.verify.register({id:C,decryptedId:N})}const I=Dt[n].req;if(I.attestation=E,o&&(I.ttl=o),a&&(I.id=a),this.client.core.history.set(i,g),S){const N=Ao(h,i,w);await global.Linking.openURL(N,this.client.name)}else{const N=Dt[n].req;o&&(N.ttl=o),a&&(N.id=a),f?(N.internal=Tr(mt({},N.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,w,N)):this.client.core.relayer.publish(i,w,N).catch(C=>this.client.logger.error(C))}return g.id},this.sendResult=async r=>{const{id:i,topic:n,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,f=Cu(i,s);let h;const g=c&&typeof(global==null?void 0:global.Linking)<"u";try{const S=g?vs:ji;h=await this.client.core.crypto.encode(n,f,Tr(mt({},a||{}),{encoding:S}))}catch(S){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),S}let w;try{w=await this.client.core.history.get(n,i)}catch(S){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${i}) failed`),S}if(g){const S=Ao(c,n,h);await global.Linking.openURL(S,this.client.name)}else{const S=Dt[w.request.method].res;o?(S.internal=Tr(mt({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,h,S)):this.client.core.relayer.publish(n,h,S).catch(E=>this.client.logger.error(E))}await this.client.core.history.resolve(f)},this.sendError=async r=>{const{id:i,topic:n,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,f=Tu(i,s);let h;const g=c&&typeof(global==null?void 0:global.Linking)<"u";try{const S=g?vs:ji;h=await this.client.core.crypto.encode(n,f,Tr(mt({},o||{}),{encoding:S}))}catch(S){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),S}let w;try{w=await this.client.core.history.get(n,i)}catch(S){throw this.client.logger.error(`sendError() -> history.get(${n}, ${i}) failed`),S}if(g){const S=Ao(c,n,h);await global.Linking.openURL(S,this.client.name)}else{const S=a||Dt[w.request.method].res;this.client.core.relayer.publish(n,h,S)}await this.client.core.history.resolve(f)},this.cleanup=async()=>{const r=[],i=[];this.client.session.getAll().forEach(n=>{let s=!1;Ui(n.expiry)&&(s=!0),this.client.core.crypto.keychain.has(n.topic)||(s=!0),s&&r.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{Ui(n.expiryTimestamp)&&i.push(n.id)}),await Promise.all([...r.map(n=>this.deleteSession({topic:n})),...i.map(n=>this.deleteProposal(n))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Hr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Hr.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=Hr.idle},this.processRequest=async r=>{const{topic:i,payload:n,attestation:s,transportType:o,encryptedId:a}=r,c=n.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:n,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,n);case"wc_sessionPing":return await this.onSessionPingRequest(i,n);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(i,n);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async r=>{const{topic:i,payload:n,transportType:s}=r,o=(await this.client.core.history.get(i,n.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:i}=r,{message:n}=de("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.shouldIgnorePairingRequest=r=>{const{topic:i,requestMethod:n}=r,s=this.expectedPairingMethodMap.get(i);return!s||s.includes(n)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async r=>{const{topic:i,payload:n,attestation:s,encryptedId:o}=r,{params:a,id:c}=n;try{const f=this.client.core.eventClient.getEvent({topic:i});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),f==null||f.setError(_i.proposal_listener_not_found)),this.isValidConnect(mt({},n.params));const h=a.expiryTimestamp||Mt(Dt.wc_sessionPropose.req.ttl),g=mt({id:c,pairingTopic:i,expiryTimestamp:h},a);await this.setProposal(c,g);const w=await this.getVerifyContext({attestationId:s,hash:Si(JSON.stringify(n)),encryptedId:o,metadata:g.proposer.metadata});f==null||f.addTrace(Wr.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:g,verifyContext:w})}catch(f){await this.sendError({id:c,topic:i,error:f,rpcOpts:Dt.wc_sessionPropose.autoReject}),this.client.logger.error(f)}},this.onSessionProposeResponse=async(r,i,n)=>{const{id:s}=i;if(Jr(i)){const{result:o}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const f=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const h=await this.client.core.crypto.generateSharedKey(c,f);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});const g=await this.client.core.relayer.subscribe(h,{transportType:n});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:r})}else if(Er(i)){await this.client.proposal.delete(s,ut("USER_DISCONNECTED"));const o=qe("session_connect");if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(qe("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(r,i)=>{const{id:n,params:s}=i;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:f,sessionProperties:h,sessionConfig:g}=i.params,w=Tr(mt(mt({topic:r,relay:o,expiry:c,namespaces:f,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},h&&{sessionProperties:h}),g&&{sessionConfig:g}),{transportType:lt.relay}),S=qe("session_connect");if(this.events.listenerCount(S)===0)throw new Error(`emitting ${S} without any listeners 997`);this.events.emit(qe("session_connect"),{session:w}),await this.sendResult({id:i.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,i)=>{const{id:n}=i;Jr(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(qe("session_approve",n),{})):Er(i)&&(await this.client.session.delete(r,ut("USER_DISCONNECTED")),this.events.emit(qe("session_approve",n),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{const{params:n,id:s}=i;try{const o=`${r}_session_update`,a=ys.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:ut("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(mt({topic:r},n));try{ys.set(o,s),await this.client.session.update(r,{namespaces:n.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw ys.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:n})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,i)=>i.toString().slice(0,-3)<r.toString().slice(0,-3),this.onSessionUpdateResponse=(r,i)=>{const{id:n}=i,s=qe("session_update",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Jr(i)?this.events.emit(qe("session_update",n),{}):Er(i)&&this.events.emit(qe("session_update",n),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{const{id:n}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Mt(Tn)),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,i)=>{const{id:n}=i,s=qe("session_extend",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Jr(i)?this.events.emit(qe("session_extend",n),{}):Er(i)&&this.events.emit(qe("session_extend",n),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{const{id:n}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(r,i)=>{const{id:n}=i,s=qe("session_ping",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{Jr(i)?this.events.emit(qe("session_ping",n),{}):Er(i)&&this.events.emit(qe("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Pt.publish,async()=>{s(await this.deleteSession({topic:r,id:n}))})}),this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:ut("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async r=>{var i,n,s;const{topic:o,payload:a,attestation:c,encryptedId:f,transportType:h}=r,{id:g,params:w}=a;try{await this.isValidRequest(mt({topic:o},w));const S=this.client.session.get(o),E=await this.getVerifyContext({attestationId:c,hash:Si(JSON.stringify(pn("wc_sessionRequest",w,g))),encryptedId:f,metadata:S.peer.metadata,transportType:h}),I={id:g,topic:o,params:w,verifyContext:E};await this.setPendingSessionRequest(I),h===lt.link_mode&&(i=S.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((n=S.peer.metadata.redirect)==null?void 0:n.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(I):(this.addSessionRequestToSessionRequestQueue(I),this.processSessionRequestQueue())}catch(S){await this.sendError({id:g,topic:o,error:S}),this.client.logger.error(S)}},this.onSessionRequestResponse=(r,i)=>{const{id:n}=i,s=qe("session_request",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Jr(i)?this.events.emit(qe("session_request",n),{result:i.result}):Er(i)&&this.events.emit(qe("session_request",n),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{const{id:n,params:s}=i;try{const o=`${r}_session_event_${s.event.name}`,a=ys.get(o);if(a&&this.isRequestOutOfSync(a,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(mt({topic:r},s)),this.client.events.emit("session_event",{id:n,topic:r,params:s}),ys.set(o,n)}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionAuthenticateResponse=(r,i)=>{const{id:n}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:i}),Jr(i)?this.events.emit(qe("session_request",n),{result:i.result}):Er(i)&&this.events.emit(qe("session_request",n),{error:i.error})},this.onSessionAuthenticateRequest=async r=>{var i;const{topic:n,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:f,authPayload:h,expiryTimestamp:g}=s.params,w=await this.getVerifyContext({attestationId:o,hash:Si(JSON.stringify(s)),encryptedId:a,metadata:f.metadata,transportType:c}),S={requester:f,pairingTopic:n,id:s.id,authPayload:h,verifyContext:w,expiryTimestamp:g};await this.setAuthRequest(s.id,{request:S,pairingTopic:n,transportType:c}),c===lt.link_mode&&(i=f.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(f.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:n,params:s.params,id:s.id,verifyContext:w})}catch(f){this.client.logger.error(f);const h=s.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),w=this.getAppLinkIfEnabled(s.params.requester.metadata,c),S={type:Di,receiverPublicKey:h,senderPublicKey:g};await this.sendError({id:s.id,topic:n,error:f,encodeOpts:S,rpcOpts:Dt.wc_sessionAuthenticate.autoReject,appLink:w})}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Hr.idle,this.processSessionRequestQueue()},ue.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:i})=>{const n=this.client.core.history.pending;n.length>0&&n.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=qe("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(qe("session_request",s.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Hr.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Hr.active,this.emitSessionRequest(r)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const i=this.client.proposal.getAll().find(n=>n.pairingTopic===r.topic);i&&this.onSessionProposeRequest({topic:r.topic,payload:pn("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async r=>{if(!or(r)){const{message:c}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Jt(i)||await this.isValidPairingTopic(i),!C7(a)){const{message:c}=de("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!Jt(n)&&Hs(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!Jt(s)&&Hs(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Jt(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,i)=>{const n=N7(r,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=async r=>{if(!or(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:i,namespaces:n,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const a=this.client.proposal.get(i),c=Qf(n,"approve()");if(c)throw new Error(c.message);const f=Bc(a.requiredNamespaces,n,"approve()");if(f)throw new Error(f.message);if(!_t(s,!0)){const{message:h}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}Jt(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!or(r)){const{message:s}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:i,reason:n}=r;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!F7(n)){const{message:s}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!or(r)){const{message:f}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(f)}const{relay:i,controller:n,namespaces:s,expiry:o}=r;if(!Mg(i)){const{message:f}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const a=I7(n,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Qf(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ui(o)){const{message:f}=de("EXPIRED","onSessionSettleRequest()");throw new Error(f)}},this.isValidUpdate=async r=>{if(!or(r)){const{message:c}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:i,namespaces:n}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const s=this.client.session.get(i),o=Qf(n,"update()");if(o)throw new Error(o.message);const a=Bc(s.requiredNamespaces,n,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!or(r)){const{message:n}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(n)}const{topic:i}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!or(r)){const{message:c}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:i,request:n,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:a}=this.client.session.get(i);if(!Vd(a,s)){const{message:c}=de("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!$7(n)){const{message:c}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(c)}if(!B7(a,s,n.method)){const{message:c}=de("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(c)}if(o&&!j7(o,sc)){const{message:c}=de("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${sc.min} and ${sc.max}`);throw new Error(c)}},this.isValidRespond=async r=>{var i;if(!or(r)){const{message:o}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:n,response:s}=r;try{await this.isValidSessionTopic(n)}catch(o){throw(i=r==null?void 0:r.response)!=null&&i.id&&this.cleanupAfterResponse(r),o}if(!L7(s)){const{message:o}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!or(r)){const{message:n}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!or(r)){const{message:a}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:i,event:n,chainId:s}=r;await this.isValidSessionTopic(i);const{namespaces:o}=this.client.session.get(i);if(!Vd(o,s)){const{message:a}=de("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!q7(n)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}if(!U7(o,s,n.name)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!or(r)){const{message:n}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=r=>{const{chains:i,uri:n,domain:s,nonce:o}=r;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!_t(n,!1))throw new Error("uri is required parameter");if(!_t(s,!1))throw new Error("domain is required parameter");if(!_t(o,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(c=>zo(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=zo(i[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async r=>{const{attestationId:i,hash:n,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||$s,validation:"UNKNOWN",origin:o.url||""}};try{if(a===lt.link_mode){const h=this.getAppLinkIfEnabled(o,a);return c.verified.validation=h&&new URL(h).origin===new URL(o.url).origin?"VALID":"INVALID",c}const f=await this.client.core.verify.resolve({attestationId:i,hash:n,encryptedId:s,verifyUrl:o.verifyUrl});f&&(c.verified.origin=f.origin,c.verified.isScam=f.isScam,c.verified.validation=f.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(f){this.client.logger.warn(f)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(n=>{if(!_t(n,!1)){const{message:s}=de("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(s)}})},this.getPendingAuthRequest=r=>{const i=this.client.auth.requests.get(r);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(r,i)=>{if(this.recentlyDeletedMap.set(r,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let n=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(n++>=s)break;this.recentlyDeletedMap.delete(o)}}},this.checkRecentlyDeleted=r=>{const i=this.recentlyDeletedMap.get(r);if(i){const{message:n}=de("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${r}`);throw new Error(n)}},this.isLinkModeEnabled=(r,i)=>{var n,s,o,a,c,f,h,g,w;return!r||i!==lt.link_mode?!1:((s=(n=this.client.metadata)==null?void 0:n.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((f=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:f.universal)!==""&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==void 0&&((g=r==null?void 0:r.redirect)==null?void 0:g.universal)!==""&&((w=r==null?void 0:r.redirect)==null?void 0:w.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(r,i)=>{var n;return this.isLinkModeEnabled(r,i)?(n=r==null?void 0:r.redirect)==null?void 0:n.universal:void 0},this.handleLinkModeMessage=({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const i=ud(r,"topic")||"",n=decodeURIComponent(ud(r,"wc_ev")||""),s=this.client.session.keys.includes(i);s&&this.client.session.update(i,{transportType:lt.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:n,sessionExists:s})},this.registerLinkModeListeners=async()=>{var r;if(Su()||Zi()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const i=global==null?void 0:global.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const n=await i.getInitialURL();n&&setTimeout(()=>{this.handleLinkModeMessage({url:n})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Pt.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:r,message:i,attestation:n,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Ko)?this.client.auth.authKeys.get(Ko):{publicKey:void 0},a=await this.client.core.crypto.decode(r,i,{receiverPublicKey:o,encoding:s===lt.link_mode?vs:ji});try{Fu(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a,attestation:n,transportType:s,encryptedId:Si(i)})):Ca(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})}catch(c){this.client.logger.error(c)}}registerExpirerEvents(){this.client.core.expirer.on(xr.expired,async e=>{const{topic:r,id:i}=X1(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,de("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(hn.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(hn.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!_t(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Ui(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!_t(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Ui(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=de("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=de("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(_t(e,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!T7(e)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Ui(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=de("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class IS extends An{constructor(e,r){super(e,r,cS,$u),this.core=e,this.logger=r}}class Gg extends An{constructor(e,r){super(e,r,hS,$u),this.core=e,this.logger=r}}class AS extends An{constructor(e,r){super(e,r,dS,$u,i=>i.id),this.core=e,this.logger=r}}class DS extends An{constructor(e,r){super(e,r,vS,Fa,()=>Ko),this.core=e,this.logger=r}}class OS extends An{constructor(e,r){super(e,r,yS,Fa),this.core=e,this.logger=r}}class RS extends An{constructor(e,r){super(e,r,mS,Fa,i=>i.id),this.core=e,this.logger=r}}class PS{constructor(e,r){this.core=e,this.logger=r,this.authKeys=new DS(this.core,this.logger),this.pairingTopics=new OS(this.core,this.logger),this.requests=new RS(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class Lu extends R2{constructor(e){super(e),this.protocol=Vg,this.version=Hg,this.name=nc.name,this.events=new zr.EventEmitter,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}},this.update=async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}},this.request=async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}},this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async(i,n)=>{try{return await this.engine.authenticate(i,n)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(n){throw this.logger.error(n.message),n}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||nc.name,this.metadata=(e==null?void 0:e.metadata)||W1(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:wa(cu({level:(e==null?void 0:e.logger)||nc.logger}));this.core=(e==null?void 0:e.core)||new ca(e),this.logger=Qt(r,this.name),this.session=new Gg(this.core,this.logger),this.proposal=new IS(this.core,this.logger),this.pendingRequest=new AS(this.core,this.logger),this.engine=new MS(this),this.auth=new PS(this.core,this.logger)}static async init(e){const r=new Lu(e);return await r.initialize(),r}get context(){return fr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ue.toMiliseconds(ue.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const NS=Gg,CS=Lu;var Kc={exports:{}},Hn=typeof Reflect=="object"?Reflect:null,P0=Hn&&typeof Hn.apply=="function"?Hn.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},Vo;Hn&&typeof Hn.ownKeys=="function"?Vo=Hn.ownKeys:Object.getOwnPropertySymbols?Vo=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Vo=function(t){return Object.getOwnPropertyNames(t)};function TS(t){console&&console.warn&&console.warn(t)}var N0=Number.isNaN||function(t){return t!==t};function ft(){ft.init.call(this)}Kc.exports=ft,Kc.exports.once=qS,ft.EventEmitter=ft,ft.prototype._events=void 0,ft.prototype._eventsCount=0,ft.prototype._maxListeners=void 0;var C0=10;function Ho(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ft,"defaultMaxListeners",{enumerable:!0,get:function(){return C0},set:function(t){if(typeof t!="number"||t<0||N0(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");C0=t}}),ft.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ft.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||N0(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Jg(t){return t._maxListeners===void 0?ft.defaultMaxListeners:t._maxListeners}ft.prototype.getMaxListeners=function(){return Jg(this)},ft.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i=t==="error",n=this._events;if(n!==void 0)i=i&&n.error===void 0;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=n[t];if(a===void 0)return!1;if(typeof a=="function")P0(a,this,e);else for(var c=a.length,f=Yg(a,c),r=0;r<c;++r)P0(f[r],this,e);return!0};function T0(t,e,r,i){var n,s,o;if(Ho(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=Jg(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,TS(a)}return t}ft.prototype.addListener=function(t,e){return T0(this,t,e,!1)},ft.prototype.on=ft.prototype.addListener,ft.prototype.prependListener=function(t,e){return T0(this,t,e,!0)};function FS(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F0(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=FS.bind(i);return n.listener=r,i.wrapFn=n,n}ft.prototype.once=function(t,e){return Ho(e),this.on(t,F0(this,t,e)),this},ft.prototype.prependOnceListener=function(t,e){return Ho(e),this.prependListener(t,F0(this,t,e)),this},ft.prototype.removeListener=function(t,e){var r,i,n,s,o;if(Ho(e),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){o=r[s].listener,n=s;break}if(n<0)return this;n===0?r.shift():$S(r,n),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,o||e)}return this},ft.prototype.off=ft.prototype.removeListener,ft.prototype.removeAllListeners=function(t){var e,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var n=Object.keys(r),s;for(i=0;i<n.length;++i)s=n[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function $0(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?LS(n):Yg(n,n.length)}ft.prototype.listeners=function(t){return $0(this,t,!0)},ft.prototype.rawListeners=function(t){return $0(this,t,!1)},ft.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):L0.call(t,e)},ft.prototype.listenerCount=L0;function L0(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ft.prototype.eventNames=function(){return this._eventsCount>0?Vo(this._events):[]};function Yg(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function $S(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function LS(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function qS(t,e){return new Promise(function(r,i){function n(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}Zg(t,e,s,{once:!0}),e!=="error"&&BS(t,n,{once:!0})})}function BS(t,e,r){typeof t.on=="function"&&Zg(t,"error",e,r)}function Zg(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}const US="WalletKit";class zS{constructor(e){this.opts=e}}class kS{constructor(e){this.client=e}}var jS=Object.defineProperty,KS=Object.defineProperties,VS=Object.getOwnPropertyDescriptors,q0=Object.getOwnPropertySymbols,HS=Object.prototype.hasOwnProperty,WS=Object.prototype.propertyIsEnumerable,B0=(t,e,r)=>e in t?jS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,GS=(t,e)=>{for(var r in e||(e={}))HS.call(e,r)&&B0(t,r,e[r]);if(q0)for(var r of q0(e))WS.call(e,r)&&B0(t,r,e[r]);return t},JS=(t,e)=>KS(t,VS(e));class YS extends kS{constructor(e){super(e),this.init=async()=>{this.signClient=await CS.init({core:this.client.core,metadata:this.client.metadata,signConfig:this.client.signConfig}),this.signClient.core.eventClient.init().catch(r=>{this.client.logger.warn(r)})},this.pair=async r=>{await this.client.core.pairing.pair(r)},this.approveSession=async r=>{const{topic:i,acknowledged:n}=await this.signClient.approve(JS(GS({},r),{id:r.id,namespaces:r.namespaces,sessionProperties:r.sessionProperties,sessionConfig:r.sessionConfig}));return await n(),this.signClient.session.get(i)},this.rejectSession=async r=>await this.signClient.reject(r),this.updateSession=async r=>await this.signClient.update(r),this.extendSession=async r=>await this.signClient.extend(r),this.respondSessionRequest=async r=>await this.signClient.respond(r),this.disconnectSession=async r=>await this.signClient.disconnect(r),this.emitSessionEvent=async r=>await this.signClient.emit(r),this.getActiveSessions=()=>this.signClient.session.getAll().reduce((r,i)=>(r[i.topic]=i,r),{}),this.getPendingSessionProposals=()=>this.signClient.proposal.getAll(),this.getPendingSessionRequests=()=>this.signClient.getPendingSessionRequests(),this.approveSessionAuthenticate=async r=>await this.signClient.approveSessionAuthenticate(r),this.rejectSessionAuthenticate=async r=>await this.signClient.rejectSessionAuthenticate(r),this.formatAuthMessage=r=>this.signClient.formatAuthMessage(r),this.registerDeviceToken=r=>this.client.core.echoClient.registerDeviceToken(r),this.on=(r,i)=>(this.setEvent(r,"off"),this.setEvent(r,"on"),this.client.events.on(r,i)),this.once=(r,i)=>(this.setEvent(r,"off"),this.setEvent(r,"once"),this.client.events.once(r,i)),this.off=(r,i)=>(this.setEvent(r,"off"),this.client.events.off(r,i)),this.removeListener=(r,i)=>(this.setEvent(r,"removeListener"),this.client.events.removeListener(r,i)),this.onSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onSessionProposal=r=>{this.client.events.emit("session_proposal",r)},this.onSessionDelete=r=>{this.client.events.emit("session_delete",r)},this.onProposalExpire=r=>{this.client.events.emit("proposal_expire",r)},this.onSessionRequestExpire=r=>{this.client.events.emit("session_request_expire",r)},this.onSessionRequestAuthenticate=r=>{this.client.events.emit("session_authenticate",r)},this.setEvent=(r,i)=>{switch(r){case"session_request":this.signClient.events[i]("session_request",this.onSessionRequest);break;case"session_proposal":this.signClient.events[i]("session_proposal",this.onSessionProposal);break;case"session_delete":this.signClient.events[i]("session_delete",this.onSessionDelete);break;case"proposal_expire":this.signClient.events[i]("proposal_expire",this.onProposalExpire);break;case"session_request_expire":this.signClient.events[i]("session_request_expire",this.onSessionRequestExpire);break;case"session_authenticate":this.signClient.events[i]("session_authenticate",this.onSessionRequestAuthenticate);break}},this.signClient={}}}const ZS={decryptMessage:async t=>{const e={core:new ca({storageOptions:t.storageOptions,storage:t.storage})};await e.core.crypto.init();const r=e.core.crypto.decode(t.topic,t.encryptedMessage);return e.core=null,r},getMetadata:async t=>{const e={core:new ca({storageOptions:t.storageOptions,storage:t.storage}),sessionStore:null};e.sessionStore=new NS(e.core,e.core.logger),await e.sessionStore.init();const r=e.sessionStore.get(t.topic),i=r==null?void 0:r.peer.metadata;return e.core=null,e.sessionStore=null,i}},Xg=class extends zS{constructor(t){super(t),this.events=new Kc.exports,this.on=(e,r)=>this.engine.on(e,r),this.once=(e,r)=>this.engine.once(e,r),this.off=(e,r)=>this.engine.off(e,r),this.removeListener=(e,r)=>this.engine.removeListener(e,r),this.pair=async e=>{try{return await this.engine.pair(e)}catch(r){throw this.logger.error(r.message),r}},this.approveSession=async e=>{try{return await this.engine.approveSession(e)}catch(r){throw this.logger.error(r.message),r}},this.rejectSession=async e=>{try{return await this.engine.rejectSession(e)}catch(r){throw this.logger.error(r.message),r}},this.updateSession=async e=>{try{return await this.engine.updateSession(e)}catch(r){throw this.logger.error(r.message),r}},this.extendSession=async e=>{try{return await this.engine.extendSession(e)}catch(r){throw this.logger.error(r.message),r}},this.respondSessionRequest=async e=>{try{return await this.engine.respondSessionRequest(e)}catch(r){throw this.logger.error(r.message),r}},this.disconnectSession=async e=>{try{return await this.engine.disconnectSession(e)}catch(r){throw this.logger.error(r.message),r}},this.emitSessionEvent=async e=>{try{return await this.engine.emitSessionEvent(e)}catch(r){throw this.logger.error(r.message),r}},this.getActiveSessions=()=>{try{return this.engine.getActiveSessions()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionProposals=()=>{try{return this.engine.getPendingSessionProposals()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.registerDeviceToken=e=>{try{return this.engine.registerDeviceToken(e)}catch(r){throw this.logger.error(r.message),r}},this.approveSessionAuthenticate=e=>{try{return this.engine.approveSessionAuthenticate(e)}catch(r){throw this.logger.error(r.message),r}},this.rejectSessionAuthenticate=e=>{try{return this.engine.rejectSessionAuthenticate(e)}catch(r){throw this.logger.error(r.message),r}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(r){throw this.logger.error(r.message),r}},this.metadata=t.metadata,this.name=t.name||US,this.signConfig=t.signConfig,this.core=t.core,this.logger=this.core.logger,this.engine=new YS(this)}static async init(t){const e=new Xg(t);return await e.initialize(),e}async initialize(){this.logger.trace("Initialized");try{await this.engine.init(),this.logger.info("WalletKit Initialization Success")}catch(t){throw this.logger.info("WalletKit Initialization Failure"),this.logger.error(t.message),t}}};let Qg=Xg;Qg.notifications=ZS;const XS=Qg,QS=(t,e)=>{const r=t.__vccOpts||t;for(const[i,n]of e)r[i]=n;return r},eM={data(){return{walletKit:null,core:null,walletUri:"",walletConnected:!1,walletAddress:null,session:null,namespace:null,errorMessage:null,activeSessions:[]}},async created(){this.core=new ca({projectId:"4f88dfdcec8f22c4e7ea1368c35eba3b"});try{this.walletKit=await XS.init({core:this.core,metadata:{name:"My Vue App",description:"A Vue.js app with WalletConnect",url:"https://my-vue-app.com",icons:[]}}),this.walletKit.on("session_proposal",this.onSessionProposal),this.getActiveSessions()}catch(t){console.error("Error initializing WalletKit:",t),this.errorMessage="Failed to initialize WalletKit."}},methods:{async onSessionProposal({id:t,params:e}){try{const r=b7({proposal:e,supportedNamespaces:{eip155:{chains:["eip155:1","eip155:137"],methods:["eth_sendTransaction","personal_sign"],events:["accountsChanged","chainChanged"],accounts:["eip155:1:0x887b295ffE6CE717eF6F1496AbE818e0e84b1700","eip155:137:0x887b295ffE6CE717eF6F1496AbE818e0e84b1700"]}}}),i=await this.walletKit.approveSession({id:t,namespaces:r});this.updateSessionState(i)}catch(r){console.error("Error during session proposal handling:",r),this.errorMessage="Session proposal rejected or error occurred.",await this.walletKit.rejectSession({id:e.id,reason:ut("USER_REJECTED")})}},async connectWithUri(){try{if(!this.walletUri)return;const t=await this.walletKit.pair({uri:this.walletUri});this.getActiveSessions(),this.updateSessionState(t)}catch(t){console.error("Error connecting with URI:",t),this.errorMessage="Error while connecting with WalletConnect URI."}},async disconnectWallet(){try{const t=this.walletKit.getActiveSessions();if(t.length>0){const e=t[0];await this.walletKit.disconnectSession({topic:e.topic})}this.resetSessionState()}catch(t){console.error("Error disconnecting:",t)}},async disconnectSession(t){try{await this.walletKit.disconnectSession({topic:t}),this.getActiveSessions()}catch(e){console.error("Error disconnecting session:",e)}},async getActiveSessions(){try{this.activeSessions=this.walletKit.getActiveSessions()}catch(t){console.error("Error getting active sessions:",t)}},updateSessionState(t){t?(this.walletAddress=t.accounts?t.accounts[0]:null,this.namespace=t.namespaces,this.walletConnected=!0,this.session=t,this.errorMessage=null):this.errorMessage="Failed to establish session."},resetSessionState(){this.walletConnected=!1,this.walletAddress=null,this.session=null,this.namespace=null}}},tM={class:"container bg-green-900/20 w-screen max-w-3xl mx-auto p-8"},rM={class:"mb-6"},iM={class:"flex justify-center space-x-4 mb-8"},nM=["disabled"],sM={class:"w-full max-w-xl mx-auto p-6 border relative rounded-lg shadow-lg bg-white mb-8"},oM={class:"space-y-4 relative"},aM={class:"text-sm font-mono max-w-full font-medium text-blue-700"},fM={class:"text-gray-700"},cM=["onClick"],uM={key:0,class:"mt-6 text-red-500 text-center"};function hM(t,e,r,i,n,s){return $n(),cs("div",tM,[e[6]||(e[6]=Ht("h2",{class:"text-xl font-bold text-center mb-8 text-gray-200"},"Wallet Connect",-1)),Ht("div",rM,[hv(Ht("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.walletUri=o),placeholder:"Enter WalletConnect URI",class:"p-4 rounded-lg w-full bg-white opacity-50 focus:outline-none focus:ring focus:ring-blue-400 text-gray-800 backdrop-blur-sm"},null,512),[[qy,n.walletUri]])]),Ht("div",iM,[Ht("button",{onClick:e[1]||(e[1]=(...o)=>s.connectWithUri&&s.connectWithUri(...o)),disabled:!n.walletUri,class:"bg-blue-500 w-full text-white p-3 whitespace-nowrap rounded-lg hover:bg-blue-600 focus:outline-none disabled:bg-gray-500"}," Connect Wallet ",8,nM),n.walletConnected?($n(),cs("button",{key:0,onClick:e[2]||(e[2]=(...o)=>s.disconnectWallet&&s.disconnectWallet(...o)),class:"bg-red-500 text-white p-3 rounded-lg w-32 hover:bg-red-600 focus:outline-none"}," Disconnect ")):ah("",!0)]),Ht("div",sM,[e[4]||(e[4]=Ht("h3",{class:"text-2xl font-semibold mb-4 text-blue-600"},"Active Sessions:",-1)),Ht("ul",oM,[($n(!0),cs(Yr,null,Av(n.activeSessions,(o,a)=>($n(),cs("li",{key:a,class:"p-4 text-clip bg-gray-50 rounded-lg shadow-sm"},[Ht("p",aM,"Session ID: "+Oo(a),1),Ht("p",fM,[e[3]||(e[3]=Ht("span",{class:"font-semibold"},"Relay Protocol:",-1)),bc(" "+Oo(o.relay.protocol),1)]),Ht("button",{onClick:c=>s.disconnectSession(o.topic),class:"bg-red-500 text-white p-2 rounded-lg mt-4 hover:bg-red-600 focus:outline-none"}," Disconnect Session ",8,cM)]))),128))])]),n.errorMessage?($n(),cs("div",uM,[e[5]||(e[5]=Ht("span",{class:"font-medium"},"Error:",-1)),bc(" "+Oo(n.errorMessage),1)])):ah("",!0)])}const lM=QS(eM,[["render",hM],["__scopeId","data-v-40a1cd18"]]);zy(lM).mount("#app");

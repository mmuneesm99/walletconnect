(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Sl(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const Ot={},js=[],Gi=()=>{},vy=()=>!1,Pf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ml=e=>e.startsWith("onUpdate:"),Ir=Object.assign,Al=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},my=Object.prototype.hasOwnProperty,xt=(e,t)=>my.call(e,t),Je=Array.isArray,zs=e=>$f(e)==="[object Map]",Fg=e=>$f(e)==="[object Set]",Qe=e=>typeof e=="function",Xt=e=>typeof e=="string",mn=e=>typeof e=="symbol",Bt=e=>e!==null&&typeof e=="object",Lg=e=>(Bt(e)||Qe(e))&&Qe(e.then)&&Qe(e.catch),qg=Object.prototype.toString,$f=e=>qg.call(e),yy=e=>$f(e).slice(8,-1),Bg=e=>$f(e)==="[object Object]",Il=e=>Xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,To=Sl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rf=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},wy=/-(\w)/g,li=Rf(e=>e.replace(wy,(t,r)=>r?r.toUpperCase():"")),_y=/\B([A-Z])/g,gs=Rf(e=>e.replace(_y,"-$1").toLowerCase()),Cf=Rf(e=>e.charAt(0).toUpperCase()+e.slice(1)),vc=Rf(e=>e?`on${Cf(e)}`:""),Nn=(e,t)=>!Object.is(e,t),ja=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},Ug=(e,t,r,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:r})},qu=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ch;const Tf=()=>Ch||(Ch=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nf(e){if(Je(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=Xt(i)?My(i):Nf(i);if(n)for(const s in n)t[s]=n[s]}return t}else if(Xt(e)||Bt(e))return e}const xy=/;(?![^(]*\))/g,Ey=/:([^]+)/,Sy=/\/\*[^]*?\*\//g;function My(e){const t={};return e.replace(Sy,"").split(xy).forEach(r=>{if(r){const i=r.split(Ey);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Dl(e){let t="";if(Xt(e))t=e;else if(Je(e))for(let r=0;r<e.length;r++){const i=Dl(e[r]);i&&(t+=i+" ")}else if(Bt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const Ay="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Iy=Sl(Ay);function kg(e){return!!e||e===""}const jg=e=>!!(e&&e.__v_isRef===!0),za=e=>Xt(e)?e:e==null?"":Je(e)||Bt(e)&&(e.toString===qg||!Qe(e.toString))?jg(e)?za(e.value):JSON.stringify(e,zg,2):String(e),zg=(e,t)=>jg(t)?zg(e,t.value):zs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n],s)=>(r[mc(i,s)+" =>"]=n,r),{})}:Fg(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>mc(r))}:mn(t)?mc(t):Bt(t)&&!Je(t)&&!Bg(t)?String(t):t,mc=(e,t="")=>{var r;return mn(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Yr;class Dy{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Yr,!t&&Yr&&(this.index=(Yr.scopes||(Yr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=Yr;try{return Yr=this,t()}finally{Yr=r}}}on(){Yr=this}off(){Yr=this.parent}stop(t){if(this._active){this._active=!1;let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(this.effects.length=0,r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Oy(){return Yr}let $t;const yc=new WeakSet;class Kg{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Yr&&Yr.active&&Yr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yc.has(this)&&(yc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Hg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Th(this),Wg(this);const t=$t,r=$i;$t=this,$i=!0;try{return this.fn()}finally{Gg(this),$t=t,$i=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)$l(t);this.deps=this.depsTail=void 0,Th(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Bu(this)&&this.run()}get dirty(){return Bu(this)}}let Vg=0,No,Fo;function Hg(e,t=!1){if(e.flags|=8,t){e.next=Fo,Fo=e;return}e.next=No,No=e}function Ol(){Vg++}function Pl(){if(--Vg>0)return;if(Fo){let t=Fo;for(Fo=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;No;){let t=No;for(No=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=r}}if(e)throw e}function Wg(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Gg(e){let t,r=e.depsTail,i=r;for(;i;){const n=i.prevDep;i.version===-1?(i===r&&(r=n),$l(i),Py(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}e.deps=t,e.depsTail=r}function Bu(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Jg(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Jg(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===zo))return;e.globalVersion=zo;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Bu(e)){e.flags&=-3;return}const r=$t,i=$i;$t=e,$i=!0;try{Wg(e);const n=e.fn(e._value);(t.version===0||Nn(n,e._value))&&(e._value=n,t.version++)}catch(n){throw t.version++,n}finally{$t=r,$i=i,Gg(e),e.flags&=-3}}function $l(e,t=!1){const{dep:r,prevSub:i,nextSub:n}=e;if(i&&(i.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=i,e.nextSub=void 0),r.subs===e&&(r.subs=i,!i&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)$l(s,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function Py(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let $i=!0;const Yg=[];function kn(){Yg.push($i),$i=!1}function jn(){const e=Yg.pop();$i=e===void 0?!0:e}function Th(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=$t;$t=void 0;try{t()}finally{$t=r}}}let zo=0;class $y{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rl{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!$t||!$i||$t===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==$t)r=this.activeLink=new $y($t,this),$t.deps?(r.prevDep=$t.depsTail,$t.depsTail.nextDep=r,$t.depsTail=r):$t.deps=$t.depsTail=r,Zg(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=$t.depsTail,r.nextDep=void 0,$t.depsTail.nextDep=r,$t.depsTail=r,$t.deps===r&&($t.deps=i)}return r}trigger(t){this.version++,zo++,this.notify(t)}notify(t){Ol();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Pl()}}}function Zg(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Zg(i)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const Uu=new WeakMap,cs=Symbol(""),ku=Symbol(""),Ko=Symbol("");function _r(e,t,r){if($i&&$t){let i=Uu.get(e);i||Uu.set(e,i=new Map);let n=i.get(r);n||(i.set(r,n=new Rl),n.map=i,n.key=r),n.track()}}function pn(e,t,r,i,n,s){const o=Uu.get(e);if(!o){zo++;return}const a=f=>{f&&f.trigger()};if(Ol(),t==="clear")o.forEach(a);else{const f=Je(e),c=f&&Il(r);if(f&&r==="length"){const l=Number(i);o.forEach((h,w)=>{(w==="length"||w===Ko||!mn(w)&&w>=l)&&a(h)})}else switch((r!==void 0||o.has(void 0))&&a(o.get(r)),c&&a(o.get(Ko)),t){case"add":f?c&&a(o.get("length")):(a(o.get(cs)),zs(e)&&a(o.get(ku)));break;case"delete":f||(a(o.get(cs)),zs(e)&&a(o.get(ku)));break;case"set":zs(e)&&a(o.get(cs));break}}Pl()}function $s(e){const t=_t(e);return t===e?t:(_r(t,"iterate",Ko),ui(e)?t:t.map(xr))}function Ff(e){return _r(e=_t(e),"iterate",Ko),e}const Ry={__proto__:null,[Symbol.iterator](){return wc(this,Symbol.iterator,xr)},concat(...e){return $s(this).concat(...e.map(t=>Je(t)?$s(t):t))},entries(){return wc(this,"entries",e=>(e[1]=xr(e[1]),e))},every(e,t){return rn(this,"every",e,t,void 0,arguments)},filter(e,t){return rn(this,"filter",e,t,r=>r.map(xr),arguments)},find(e,t){return rn(this,"find",e,t,xr,arguments)},findIndex(e,t){return rn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return rn(this,"findLast",e,t,xr,arguments)},findLastIndex(e,t){return rn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return rn(this,"forEach",e,t,void 0,arguments)},includes(...e){return _c(this,"includes",e)},indexOf(...e){return _c(this,"indexOf",e)},join(e){return $s(this).join(e)},lastIndexOf(...e){return _c(this,"lastIndexOf",e)},map(e,t){return rn(this,"map",e,t,void 0,arguments)},pop(){return po(this,"pop")},push(...e){return po(this,"push",e)},reduce(e,...t){return Nh(this,"reduce",e,t)},reduceRight(e,...t){return Nh(this,"reduceRight",e,t)},shift(){return po(this,"shift")},some(e,t){return rn(this,"some",e,t,void 0,arguments)},splice(...e){return po(this,"splice",e)},toReversed(){return $s(this).toReversed()},toSorted(e){return $s(this).toSorted(e)},toSpliced(...e){return $s(this).toSpliced(...e)},unshift(...e){return po(this,"unshift",e)},values(){return wc(this,"values",xr)}};function wc(e,t,r){const i=Ff(e),n=i[t]();return i!==e&&!ui(e)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.value&&(s.value=r(s.value)),s}),n}const Cy=Array.prototype;function rn(e,t,r,i,n,s){const o=Ff(e),a=o!==e&&!ui(e),f=o[t];if(f!==Cy[t]){const h=f.apply(e,s);return a?xr(h):h}let c=r;o!==e&&(a?c=function(h,w){return r.call(this,xr(h),w,e)}:r.length>2&&(c=function(h,w){return r.call(this,h,w,e)}));const l=f.call(o,c,i);return a&&n?n(l):l}function Nh(e,t,r,i){const n=Ff(e);let s=r;return n!==e&&(ui(e)?r.length>3&&(s=function(o,a,f){return r.call(this,o,a,f,e)}):s=function(o,a,f){return r.call(this,o,xr(a),f,e)}),n[t](s,...i)}function _c(e,t,r){const i=_t(e);_r(i,"iterate",Ko);const n=i[t](...r);return(n===-1||n===!1)&&Fl(r[0])?(r[0]=_t(r[0]),i[t](...r)):n}function po(e,t,r=[]){kn(),Ol();const i=_t(e)[t].apply(e,r);return Pl(),jn(),i}const Ty=Sl("__proto__,__v_isRef,__isVue"),Xg=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(mn));function Ny(e){mn(e)||(e=String(e));const t=_t(this);return _r(t,"has",e),t.hasOwnProperty(e)}class Qg{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,i){if(r==="__v_skip")return t.__v_skip;const n=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return s;if(r==="__v_raw")return i===(n?s?Vy:i1:s?r1:t1).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=Je(t);if(!n){let f;if(o&&(f=Ry[r]))return f;if(r==="hasOwnProperty")return Ny}const a=Reflect.get(t,r,Sr(t)?t:i);return(mn(r)?Xg.has(r):Ty(r))||(n||_r(t,"get",r),s)?a:Sr(a)?o&&Il(r)?a:a.value:Bt(a)?n?n1(a):Tl(a):a}}class e1 extends Qg{constructor(t=!1){super(!1,t)}set(t,r,i,n){let s=t[r];if(!this._isShallow){const f=us(s);if(!ui(i)&&!us(i)&&(s=_t(s),i=_t(i)),!Je(t)&&Sr(s)&&!Sr(i))return f?!1:(s.value=i,!0)}const o=Je(t)&&Il(r)?Number(r)<t.length:xt(t,r),a=Reflect.set(t,r,i,Sr(t)?t:n);return t===_t(n)&&(o?Nn(i,s)&&pn(t,"set",r,i):pn(t,"add",r,i)),a}deleteProperty(t,r){const i=xt(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&i&&pn(t,"delete",r,void 0),n}has(t,r){const i=Reflect.has(t,r);return(!mn(r)||!Xg.has(r))&&_r(t,"has",r),i}ownKeys(t){return _r(t,"iterate",Je(t)?"length":cs),Reflect.ownKeys(t)}}class Fy extends Qg{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const Ly=new e1,qy=new Fy,By=new e1(!0);const ju=e=>e,Aa=e=>Reflect.getPrototypeOf(e);function Uy(e,t,r){return function(...i){const n=this.__v_raw,s=_t(n),o=zs(s),a=e==="entries"||e===Symbol.iterator&&o,f=e==="keys"&&o,c=n[e](...i),l=r?ju:t?zu:xr;return!t&&_r(s,"iterate",f?ku:cs),{next(){const{value:h,done:w}=c.next();return w?{value:h,done:w}:{value:a?[l(h[0]),l(h[1])]:l(h),done:w}},[Symbol.iterator](){return this}}}}function Ia(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ky(e,t){const r={get(n){const s=this.__v_raw,o=_t(s),a=_t(n);e||(Nn(n,a)&&_r(o,"get",n),_r(o,"get",a));const{has:f}=Aa(o),c=t?ju:e?zu:xr;if(f.call(o,n))return c(s.get(n));if(f.call(o,a))return c(s.get(a));s!==o&&s.get(n)},get size(){const n=this.__v_raw;return!e&&_r(_t(n),"iterate",cs),Reflect.get(n,"size",n)},has(n){const s=this.__v_raw,o=_t(s),a=_t(n);return e||(Nn(n,a)&&_r(o,"has",n),_r(o,"has",a)),n===a?s.has(n):s.has(n)||s.has(a)},forEach(n,s){const o=this,a=o.__v_raw,f=_t(a),c=t?ju:e?zu:xr;return!e&&_r(f,"iterate",cs),a.forEach((l,h)=>n.call(s,c(l),c(h),o))}};return Ir(r,e?{add:Ia("add"),set:Ia("set"),delete:Ia("delete"),clear:Ia("clear")}:{add(n){!t&&!ui(n)&&!us(n)&&(n=_t(n));const s=_t(this);return Aa(s).has.call(s,n)||(s.add(n),pn(s,"add",n,n)),this},set(n,s){!t&&!ui(s)&&!us(s)&&(s=_t(s));const o=_t(this),{has:a,get:f}=Aa(o);let c=a.call(o,n);c||(n=_t(n),c=a.call(o,n));const l=f.call(o,n);return o.set(n,s),c?Nn(s,l)&&pn(o,"set",n,s):pn(o,"add",n,s),this},delete(n){const s=_t(this),{has:o,get:a}=Aa(s);let f=o.call(s,n);f||(n=_t(n),f=o.call(s,n)),a&&a.call(s,n);const c=s.delete(n);return f&&pn(s,"delete",n,void 0),c},clear(){const n=_t(this),s=n.size!==0,o=n.clear();return s&&pn(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=Uy(n,e,t)}),r}function Cl(e,t){const r=ky(e,t);return(i,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(xt(r,n)&&n in i?r:i,n,s)}const jy={get:Cl(!1,!1)},zy={get:Cl(!1,!0)},Ky={get:Cl(!0,!1)};const t1=new WeakMap,r1=new WeakMap,i1=new WeakMap,Vy=new WeakMap;function Hy(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Wy(e){return e.__v_skip||!Object.isExtensible(e)?0:Hy(yy(e))}function Tl(e){return us(e)?e:Nl(e,!1,Ly,jy,t1)}function Gy(e){return Nl(e,!1,By,zy,r1)}function n1(e){return Nl(e,!0,qy,Ky,i1)}function Nl(e,t,r,i,n){if(!Bt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const o=Wy(e);if(o===0)return e;const a=new Proxy(e,o===2?i:r);return n.set(e,a),a}function Ks(e){return us(e)?Ks(e.__v_raw):!!(e&&e.__v_isReactive)}function us(e){return!!(e&&e.__v_isReadonly)}function ui(e){return!!(e&&e.__v_isShallow)}function Fl(e){return e?!!e.__v_raw:!1}function _t(e){const t=e&&e.__v_raw;return t?_t(t):e}function Jy(e){return!xt(e,"__v_skip")&&Object.isExtensible(e)&&Ug(e,"__v_skip",!0),e}const xr=e=>Bt(e)?Tl(e):e,zu=e=>Bt(e)?n1(e):e;function Sr(e){return e?e.__v_isRef===!0:!1}function Gn(e){return Yy(e,!1)}function Yy(e,t){return Sr(e)?e:new Zy(e,t)}class Zy{constructor(t,r){this.dep=new Rl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:_t(t),this._value=r?t:xr(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,i=this.__v_isShallow||ui(t)||us(t);t=i?t:_t(t),Nn(t,r)&&(this._rawValue=t,this._value=i?t:xr(t),this.dep.trigger())}}function Xy(e){return Sr(e)?e.value:e}const Qy={get:(e,t,r)=>t==="__v_raw"?e:Xy(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return Sr(n)&&!Sr(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function s1(e){return Ks(e)?e:new Proxy(e,Qy)}class e2{constructor(t,r,i){this.fn=t,this.setter=r,this._value=void 0,this.dep=new Rl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&$t!==this)return Hg(this,!0),!0}get value(){const t=this.dep.track();return Jg(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function t2(e,t,r=!1){let i,n;return Qe(e)?i=e:(i=e.get,n=e.set),new e2(i,n,r)}const Da={},lf=new WeakMap;let rs;function r2(e,t=!1,r=rs){if(r){let i=lf.get(r);i||lf.set(r,i=[]),i.push(e)}}function i2(e,t,r=Ot){const{immediate:i,deep:n,once:s,scheduler:o,augmentJob:a,call:f}=r,c=P=>n?P:ui(P)||n===!1||n===0?gn(P,1):gn(P);let l,h,w,E,_=!1,A=!1;if(Sr(e)?(h=()=>e.value,_=ui(e)):Ks(e)?(h=()=>c(e),_=!0):Je(e)?(A=!0,_=e.some(P=>Ks(P)||ui(P)),h=()=>e.map(P=>{if(Sr(P))return P.value;if(Ks(P))return c(P);if(Qe(P))return f?f(P,2):P()})):Qe(e)?t?h=f?()=>f(e,2):e:h=()=>{if(w){kn();try{w()}finally{jn()}}const P=rs;rs=l;try{return f?f(e,3,[E]):e(E)}finally{rs=P}}:h=Gi,t&&n){const P=h,F=n===!0?1/0:n;h=()=>gn(P(),F)}const R=Oy(),N=()=>{l.stop(),R&&R.active&&Al(R.effects,l)};if(s&&t){const P=t;t=(...F)=>{P(...F),N()}}let q=A?new Array(e.length).fill(Da):Da;const U=P=>{if(!(!(l.flags&1)||!l.dirty&&!P))if(t){const F=l.run();if(n||_||(A?F.some((L,K)=>Nn(L,q[K])):Nn(F,q))){w&&w();const L=rs;rs=l;try{const K=[F,q===Da?void 0:A&&q[0]===Da?[]:q,E];f?f(t,3,K):t(...K),q=F}finally{rs=L}}}else l.run()};return a&&a(U),l=new Kg(h),l.scheduler=o?()=>o(U,!1):U,E=P=>r2(P,!1,l),w=l.onStop=()=>{const P=lf.get(l);if(P){if(f)f(P,4);else for(const F of P)F();lf.delete(l)}},t?i?U(!0):q=l.run():o?o(U.bind(null,!0),!0):l.run(),N.pause=l.pause.bind(l),N.resume=l.resume.bind(l),N.stop=N,N}function gn(e,t=1/0,r){if(t<=0||!Bt(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,Sr(e))gn(e.value,t,r);else if(Je(e))for(let i=0;i<e.length;i++)gn(e[i],t,r);else if(Fg(e)||zs(e))e.forEach(i=>{gn(i,t,r)});else if(Bg(e)){for(const i in e)gn(e[i],t,r);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&gn(e[i],t,r)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qo(e,t,r,i){try{return i?e(...i):e()}catch(n){Lf(n,t,r)}}function Yi(e,t,r,i){if(Qe(e)){const n=Qo(e,t,r,i);return n&&Lg(n)&&n.catch(s=>{Lf(s,t,r)}),n}if(Je(e)){const n=[];for(let s=0;s<e.length;s++)n.push(Yi(e[s],t,r,i));return n}}function Lf(e,t,r,i=!0){const n=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ot;if(t){let a=t.parent;const f=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const l=a.ec;if(l){for(let h=0;h<l.length;h++)if(l[h](e,f,c)===!1)return}a=a.parent}if(s){kn(),Qo(s,null,10,[e,f,c]),jn();return}}n2(e,r,n,i,o)}function n2(e,t,r,i=!0,n=!1){if(n)throw e;console.error(e)}const $r=[];let Vi=-1;const Vs=[];let An=null,Ls=0;const o1=Promise.resolve();let hf=null;function s2(e){const t=hf||o1;return e?t.then(this?e.bind(this):e):t}function o2(e){let t=Vi+1,r=$r.length;for(;t<r;){const i=t+r>>>1,n=$r[i],s=Vo(n);s<e||s===e&&n.flags&2?t=i+1:r=i}return t}function Ll(e){if(!(e.flags&1)){const t=Vo(e),r=$r[$r.length-1];!r||!(e.flags&2)&&t>=Vo(r)?$r.push(e):$r.splice(o2(t),0,e),e.flags|=1,a1()}}function a1(){hf||(hf=o1.then(c1))}function a2(e){Je(e)?Vs.push(...e):An&&e.id===-1?An.splice(Ls+1,0,e):e.flags&1||(Vs.push(e),e.flags|=1),a1()}function Fh(e,t,r=Vi+1){for(;r<$r.length;r++){const i=$r[r];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;$r.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function f1(e){if(Vs.length){const t=[...new Set(Vs)].sort((r,i)=>Vo(r)-Vo(i));if(Vs.length=0,An){An.push(...t);return}for(An=t,Ls=0;Ls<An.length;Ls++){const r=An[Ls];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}An=null,Ls=0}}const Vo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function c1(e){try{for(Vi=0;Vi<$r.length;Vi++){const t=$r[Vi];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Qo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Vi<$r.length;Vi++){const t=$r[Vi];t&&(t.flags&=-2)}Vi=-1,$r.length=0,f1(),hf=null,($r.length||Vs.length)&&c1()}}let pr=null,u1=null;function df(e){const t=pr;return pr=e,u1=e&&e.type.__scopeId||null,t}function f2(e,t=pr,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&Hh(-1);const s=df(t);let o;try{o=e(...n)}finally{df(s),i._d&&Hh(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function l1(e,t){if(pr===null)return e;const r=kf(pr),i=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[s,o,a,f=Ot]=t[n];s&&(Qe(s)&&(s={mounted:s,updated:s}),s.deep&&gn(o),i.push({dir:s,instance:r,value:o,oldValue:void 0,arg:a,modifiers:f}))}return e}function Jn(e,t,r,i){const n=e.dirs,s=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let f=a.dir[i];f&&(kn(),Yi(f,r,8,[e.el,a,e,t]),jn())}}const c2=Symbol("_vte"),u2=e=>e.__isTeleport;function ql(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ql(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function l2(e,t){return Qe(e)?Ir({name:e.name},t,{setup:e}):e}function h1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function pf(e,t,r,i,n=!1){if(Je(e)){e.forEach((_,A)=>pf(_,t&&(Je(t)?t[A]:t),r,i,n));return}if(Hs(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&pf(e,t,r,i.component.subTree);return}const s=i.shapeFlag&4?kf(i.component):i.el,o=n?null:s,{i:a,r:f}=e,c=t&&t.r,l=a.refs===Ot?a.refs={}:a.refs,h=a.setupState,w=_t(h),E=h===Ot?()=>!1:_=>xt(w,_);if(c!=null&&c!==f&&(Xt(c)?(l[c]=null,E(c)&&(h[c]=null)):Sr(c)&&(c.value=null)),Qe(f))Qo(f,a,12,[o,l]);else{const _=Xt(f),A=Sr(f);if(_||A){const R=()=>{if(e.f){const N=_?E(f)?h[f]:l[f]:f.value;n?Je(N)&&Al(N,s):Je(N)?N.includes(s)||N.push(s):_?(l[f]=[s],E(f)&&(h[f]=l[f])):(f.value=[s],e.k&&(l[e.k]=f.value))}else _?(l[f]=o,E(f)&&(h[f]=o)):A&&(f.value=o,e.k&&(l[e.k]=o))};o?(R.id=-1,Gr(R,r)):R()}}}Tf().requestIdleCallback;Tf().cancelIdleCallback;const Hs=e=>!!e.type.__asyncLoader,d1=e=>e.type.__isKeepAlive;function h2(e,t){p1(e,"a",t)}function d2(e,t){p1(e,"da",t)}function p1(e,t,r=Er){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(qf(t,i,r),r){let n=r.parent;for(;n&&n.parent;)d1(n.parent.vnode)&&p2(i,t,r,n),n=n.parent}}function p2(e,t,r,i){const n=qf(t,e,i,!0);Bl(()=>{Al(i[t],n)},r)}function qf(e,t,r=Er,i=!1){if(r){const n=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...o)=>{kn();const a=ea(r),f=Yi(t,r,e,o);return a(),jn(),f});return i?n.unshift(s):n.push(s),s}}const yn=e=>(t,r=Er)=>{(!Wo||e==="sp")&&qf(e,(...i)=>t(...i),r)},g2=yn("bm"),g1=yn("m"),b2=yn("bu"),v2=yn("u"),m2=yn("bum"),Bl=yn("um"),y2=yn("sp"),w2=yn("rtg"),_2=yn("rtc");function x2(e,t=Er){qf("ec",e,t)}const E2="components";function S2(e,t){return A2(E2,e,!0,t)||e}const M2=Symbol.for("v-ndc");function A2(e,t,r=!0,i=!1){const n=pr||Er;if(n){const s=n.type;{const a=gw(s,!1);if(a&&(a===t||a===li(t)||a===Cf(li(t))))return s}const o=Lh(n[e]||s[e],t)||Lh(n.appContext[e],t);return!o&&i?s:o}}function Lh(e,t){return e&&(e[t]||e[li(t)]||e[Cf(li(t))])}function I2(e,t,r,i){let n;const s=r,o=Je(e);if(o||Xt(e)){const a=o&&Ks(e);let f=!1;a&&(f=!ui(e),e=Ff(e)),n=new Array(e.length);for(let c=0,l=e.length;c<l;c++)n[c]=t(f?xr(e[c]):e[c],c,void 0,s)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,s)}else if(Bt(e))if(e[Symbol.iterator])n=Array.from(e,(a,f)=>t(a,f,void 0,s));else{const a=Object.keys(e);n=new Array(a.length);for(let f=0,c=a.length;f<c;f++){const l=a[f];n[f]=t(e[l],l,f,s)}}else n=[];return n}function D2(e,t,r={},i,n){if(pr.ce||pr.parent&&Hs(pr.parent)&&pr.parent.ce)return bn(),Gu(Qr,null,[Ri("slot",r,i)],64);let s=e[t];s&&s._c&&(s._d=!1),bn();const o=s&&b1(s(r)),a=r.key||o&&o.key,f=Gu(Qr,{key:(a&&!mn(a)?a:`_${t}`)+""},o||[],o&&e._===1?64:-2);return f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),s&&s._c&&(s._d=!0),f}function b1(e){return e.some(t=>kl(t)?!(t.type===Ln||t.type===Qr&&!b1(t.children)):!0)?e:null}const Ku=e=>e?L1(e)?kf(e):Ku(e.parent):null,Lo=Ir(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ku(e.parent),$root:e=>Ku(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>m1(e),$forceUpdate:e=>e.f||(e.f=()=>{Ll(e.update)}),$nextTick:e=>e.n||(e.n=s2.bind(e.proxy)),$watch:e=>Y2.bind(e)}),xc=(e,t)=>e!==Ot&&!e.__isScriptSetup&&xt(e,t),O2={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:i,data:n,props:s,accessCache:o,type:a,appContext:f}=e;let c;if(t[0]!=="$"){const E=o[t];if(E!==void 0)switch(E){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return s[t]}else{if(xc(i,t))return o[t]=1,i[t];if(n!==Ot&&xt(n,t))return o[t]=2,n[t];if((c=e.propsOptions[0])&&xt(c,t))return o[t]=3,s[t];if(r!==Ot&&xt(r,t))return o[t]=4,r[t];Vu&&(o[t]=0)}}const l=Lo[t];let h,w;if(l)return t==="$attrs"&&_r(e.attrs,"get",""),l(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(r!==Ot&&xt(r,t))return o[t]=4,r[t];if(w=f.config.globalProperties,xt(w,t))return w[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:s}=e;return xc(n,t)?(n[t]=r,!0):i!==Ot&&xt(i,t)?(i[t]=r,!0):xt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:s}},o){let a;return!!r[o]||e!==Ot&&xt(e,o)||xc(t,o)||(a=s[0])&&xt(a,o)||xt(i,o)||xt(Lo,o)||xt(n.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:xt(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function qh(e){return Je(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let Vu=!0;function P2(e){const t=m1(e),r=e.proxy,i=e.ctx;Vu=!1,t.beforeCreate&&Bh(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:o,watch:a,provide:f,inject:c,created:l,beforeMount:h,mounted:w,beforeUpdate:E,updated:_,activated:A,deactivated:R,beforeDestroy:N,beforeUnmount:q,destroyed:U,unmounted:P,render:F,renderTracked:L,renderTriggered:K,errorCaptured:V,serverPrefetch:W,expose:Q,inheritAttrs:C,components:g,directives:p,filters:u}=t;if(c&&$2(c,i,null),o)for(const y in o){const M=o[y];Qe(M)&&(i[y]=M.bind(r))}if(n){const y=n.call(r,r);Bt(y)&&(e.data=Tl(y))}if(Vu=!0,s)for(const y in s){const M=s[y],x=Qe(M)?M.bind(r,r):Qe(M.get)?M.get.bind(r,r):Gi,b=!Qe(M)&&Qe(M.set)?M.set.bind(r):Gi,S=Ha({get:x,set:b});Object.defineProperty(i,y,{enumerable:!0,configurable:!0,get:()=>S.value,set:m=>S.value=m})}if(a)for(const y in a)v1(a[y],i,r,y);if(f){const y=Qe(f)?f.call(r):f;Reflect.ownKeys(y).forEach(M=>{L2(M,y[M])})}l&&Bh(l,e,"c");function v(y,M){Je(M)?M.forEach(x=>y(x.bind(r))):M&&y(M.bind(r))}if(v(g2,h),v(g1,w),v(b2,E),v(v2,_),v(h2,A),v(d2,R),v(x2,V),v(_2,L),v(w2,K),v(m2,q),v(Bl,P),v(y2,W),Je(Q))if(Q.length){const y=e.exposed||(e.exposed={});Q.forEach(M=>{Object.defineProperty(y,M,{get:()=>r[M],set:x=>r[M]=x})})}else e.exposed||(e.exposed={});F&&e.render===Gi&&(e.render=F),C!=null&&(e.inheritAttrs=C),g&&(e.components=g),p&&(e.directives=p),W&&h1(e)}function $2(e,t,r=Gi){Je(e)&&(e=Hu(e));for(const i in e){const n=e[i];let s;Bt(n)?"default"in n?s=Ka(n.from||i,n.default,!0):s=Ka(n.from||i):s=Ka(n),Sr(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function Bh(e,t,r){Yi(Je(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function v1(e,t,r,i){let n=i.includes(".")?R1(r,i):()=>r[i];if(Xt(e)){const s=t[e];Qe(s)&&Pn(n,s)}else if(Qe(e))Pn(n,e.bind(r));else if(Bt(e))if(Je(e))e.forEach(s=>v1(s,t,r,i));else{const s=Qe(e.handler)?e.handler.bind(r):t[e.handler];Qe(s)&&Pn(n,s,e)}}function m1(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let f;return a?f=a:!n.length&&!r&&!i?f=t:(f={},n.length&&n.forEach(c=>gf(f,c,o,!0)),gf(f,t,o)),Bt(t)&&s.set(t,f),f}function gf(e,t,r,i=!1){const{mixins:n,extends:s}=t;s&&gf(e,s,r,!0),n&&n.forEach(o=>gf(e,o,r,!0));for(const o in t)if(!(i&&o==="expose")){const a=R2[o]||r&&r[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const R2={data:Uh,props:kh,emits:kh,methods:Oo,computed:Oo,beforeCreate:Pr,created:Pr,beforeMount:Pr,mounted:Pr,beforeUpdate:Pr,updated:Pr,beforeDestroy:Pr,beforeUnmount:Pr,destroyed:Pr,unmounted:Pr,activated:Pr,deactivated:Pr,errorCaptured:Pr,serverPrefetch:Pr,components:Oo,directives:Oo,watch:T2,provide:Uh,inject:C2};function Uh(e,t){return t?e?function(){return Ir(Qe(e)?e.call(this,this):e,Qe(t)?t.call(this,this):t)}:t:e}function C2(e,t){return Oo(Hu(e),Hu(t))}function Hu(e){if(Je(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Pr(e,t){return e?[...new Set([].concat(e,t))]:t}function Oo(e,t){return e?Ir(Object.create(null),e,t):t}function kh(e,t){return e?Je(e)&&Je(t)?[...new Set([...e,...t])]:Ir(Object.create(null),qh(e),qh(t??{})):t}function T2(e,t){if(!e)return t;if(!t)return e;const r=Ir(Object.create(null),e);for(const i in t)r[i]=Pr(e[i],t[i]);return r}function y1(){return{app:null,config:{isNativeTag:vy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let N2=0;function F2(e,t){return function(i,n=null){Qe(i)||(i=Ir({},i)),n!=null&&!Bt(n)&&(n=null);const s=y1(),o=new WeakSet,a=[];let f=!1;const c=s.app={_uid:N2++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:vw,get config(){return s.config},set config(l){},use(l,...h){return o.has(l)||(l&&Qe(l.install)?(o.add(l),l.install(c,...h)):Qe(l)&&(o.add(l),l(c,...h))),c},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),c},component(l,h){return h?(s.components[l]=h,c):s.components[l]},directive(l,h){return h?(s.directives[l]=h,c):s.directives[l]},mount(l,h,w){if(!f){const E=c._ceVNode||Ri(i,n);return E.appContext=s,w===!0?w="svg":w===!1&&(w=void 0),e(E,l,w),f=!0,c._container=l,l.__vue_app__=c,kf(E.component)}},onUnmount(l){a.push(l)},unmount(){f&&(Yi(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(l,h){return s.provides[l]=h,c},runWithContext(l){const h=Ws;Ws=c;try{return l()}finally{Ws=h}}};return c}}let Ws=null;function L2(e,t){if(Er){let r=Er.provides;const i=Er.parent&&Er.parent.provides;i===r&&(r=Er.provides=Object.create(i)),r[e]=t}}function Ka(e,t,r=!1){const i=Er||pr;if(i||Ws){const n=Ws?Ws._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return r&&Qe(t)?t.call(i&&i.proxy):t}}const w1={},_1=()=>Object.create(w1),x1=e=>Object.getPrototypeOf(e)===w1;function q2(e,t,r,i=!1){const n={},s=_1();e.propsDefaults=Object.create(null),E1(e,t,n,s);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);r?e.props=i?n:Gy(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function B2(e,t,r,i){const{props:n,attrs:s,vnode:{patchFlag:o}}=e,a=_t(n),[f]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const l=e.vnode.dynamicProps;for(let h=0;h<l.length;h++){let w=l[h];if(Bf(e.emitsOptions,w))continue;const E=t[w];if(f)if(xt(s,w))E!==s[w]&&(s[w]=E,c=!0);else{const _=li(w);n[_]=Wu(f,a,_,E,e,!1)}else E!==s[w]&&(s[w]=E,c=!0)}}}else{E1(e,t,n,s)&&(c=!0);let l;for(const h in a)(!t||!xt(t,h)&&((l=gs(h))===h||!xt(t,l)))&&(f?r&&(r[h]!==void 0||r[l]!==void 0)&&(n[h]=Wu(f,a,h,void 0,e,!0)):delete n[h]);if(s!==a)for(const h in s)(!t||!xt(t,h))&&(delete s[h],c=!0)}c&&pn(e.attrs,"set","")}function E1(e,t,r,i){const[n,s]=e.propsOptions;let o=!1,a;if(t)for(let f in t){if(To(f))continue;const c=t[f];let l;n&&xt(n,l=li(f))?!s||!s.includes(l)?r[l]=c:(a||(a={}))[l]=c:Bf(e.emitsOptions,f)||(!(f in i)||c!==i[f])&&(i[f]=c,o=!0)}if(s){const f=_t(r),c=a||Ot;for(let l=0;l<s.length;l++){const h=s[l];r[h]=Wu(n,f,h,c[h],e,!xt(c,h))}}return o}function Wu(e,t,r,i,n,s){const o=e[r];if(o!=null){const a=xt(o,"default");if(a&&i===void 0){const f=o.default;if(o.type!==Function&&!o.skipFactory&&Qe(f)){const{propsDefaults:c}=n;if(r in c)i=c[r];else{const l=ea(n);i=c[r]=f.call(null,t),l()}}else i=f;n.ce&&n.ce._setProp(r,i)}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===gs(r))&&(i=!0))}return i}const U2=new WeakMap;function S1(e,t,r=!1){const i=r?U2:t.propsCache,n=i.get(e);if(n)return n;const s=e.props,o={},a=[];let f=!1;if(!Qe(e)){const l=h=>{f=!0;const[w,E]=S1(h,t,!0);Ir(o,w),E&&a.push(...E)};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!s&&!f)return Bt(e)&&i.set(e,js),js;if(Je(s))for(let l=0;l<s.length;l++){const h=li(s[l]);jh(h)&&(o[h]=Ot)}else if(s)for(const l in s){const h=li(l);if(jh(h)){const w=s[l],E=o[h]=Je(w)||Qe(w)?{type:w}:Ir({},w),_=E.type;let A=!1,R=!0;if(Je(_))for(let N=0;N<_.length;++N){const q=_[N],U=Qe(q)&&q.name;if(U==="Boolean"){A=!0;break}else U==="String"&&(R=!1)}else A=Qe(_)&&_.name==="Boolean";E[0]=A,E[1]=R,(A||xt(E,"default"))&&a.push(h)}}const c=[o,a];return Bt(e)&&i.set(e,c),c}function jh(e){return e[0]!=="$"&&!To(e)}const M1=e=>e[0]==="_"||e==="$stable",Ul=e=>Je(e)?e.map(Wi):[Wi(e)],k2=(e,t,r)=>{if(t._n)return t;const i=f2((...n)=>Ul(t(...n)),r);return i._c=!1,i},A1=(e,t,r)=>{const i=e._ctx;for(const n in e){if(M1(n))continue;const s=e[n];if(Qe(s))t[n]=k2(n,s,i);else if(s!=null){const o=Ul(s);t[n]=()=>o}}},I1=(e,t)=>{const r=Ul(t);e.slots.default=()=>r},D1=(e,t,r)=>{for(const i in t)(r||i!=="_")&&(e[i]=t[i])},j2=(e,t,r)=>{const i=e.slots=_1();if(e.vnode.shapeFlag&32){const n=t._;n?(D1(i,t,r),r&&Ug(i,"_",n,!0)):A1(t,i)}else t&&I1(e,t)},z2=(e,t,r)=>{const{vnode:i,slots:n}=e;let s=!0,o=Ot;if(i.shapeFlag&32){const a=t._;a?r&&a===1?s=!1:D1(n,t,r):(s=!t.$stable,A1(t,n)),o=t}else t&&(I1(e,t),o={default:1});if(s)for(const a in n)!M1(a)&&o[a]==null&&delete n[a]},Gr=iw;function K2(e){return V2(e)}function V2(e,t){const r=Tf();r.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:o,createText:a,createComment:f,setText:c,setElementText:l,parentNode:h,nextSibling:w,setScopeId:E=Gi,insertStaticContent:_}=e,A=(B,z,G,Z=null,oe=null,ae=null,ce=void 0,ue=null,le=!!z.dynamicChildren)=>{if(B===z)return;B&&!go(B,z)&&(Z=X(B),m(B,oe,ae,!0),B=null),z.patchFlag===-2&&(le=!1,z.dynamicChildren=null);const{type:ie,ref:ye,shapeFlag:pe}=z;switch(ie){case Uf:R(B,z,G,Z);break;case Ln:N(B,z,G,Z);break;case Sc:B==null&&q(z,G,Z,ce);break;case Qr:g(B,z,G,Z,oe,ae,ce,ue,le);break;default:pe&1?F(B,z,G,Z,oe,ae,ce,ue,le):pe&6?p(B,z,G,Z,oe,ae,ce,ue,le):(pe&64||pe&128)&&ie.process(B,z,G,Z,oe,ae,ce,ue,le,ge)}ye!=null&&oe&&pf(ye,B&&B.ref,ae,z||B,!z)},R=(B,z,G,Z)=>{if(B==null)i(z.el=a(z.children),G,Z);else{const oe=z.el=B.el;z.children!==B.children&&c(oe,z.children)}},N=(B,z,G,Z)=>{B==null?i(z.el=f(z.children||""),G,Z):z.el=B.el},q=(B,z,G,Z)=>{[B.el,B.anchor]=_(B.children,z,G,Z,B.el,B.anchor)},U=({el:B,anchor:z},G,Z)=>{let oe;for(;B&&B!==z;)oe=w(B),i(B,G,Z),B=oe;i(z,G,Z)},P=({el:B,anchor:z})=>{let G;for(;B&&B!==z;)G=w(B),n(B),B=G;n(z)},F=(B,z,G,Z,oe,ae,ce,ue,le)=>{z.type==="svg"?ce="svg":z.type==="math"&&(ce="mathml"),B==null?L(z,G,Z,oe,ae,ce,ue,le):W(B,z,oe,ae,ce,ue,le)},L=(B,z,G,Z,oe,ae,ce,ue)=>{let le,ie;const{props:ye,shapeFlag:pe,transition:he,dirs:_e}=B;if(le=B.el=o(B.type,ae,ye&&ye.is,ye),pe&8?l(le,B.children):pe&16&&V(B.children,le,null,Z,oe,Ec(B,ae),ce,ue),_e&&Jn(B,null,Z,"created"),K(le,B,B.scopeId,ce,Z),ye){for(const we in ye)we!=="value"&&!To(we)&&s(le,we,null,ye[we],ae,Z);"value"in ye&&s(le,"value",null,ye.value,ae),(ie=ye.onVnodeBeforeMount)&&qi(ie,Z,B)}_e&&Jn(B,null,Z,"beforeMount");const Ae=H2(oe,he);Ae&&he.beforeEnter(le),i(le,z,G),((ie=ye&&ye.onVnodeMounted)||Ae||_e)&&Gr(()=>{ie&&qi(ie,Z,B),Ae&&he.enter(le),_e&&Jn(B,null,Z,"mounted")},oe)},K=(B,z,G,Z,oe)=>{if(G&&E(B,G),Z)for(let ae=0;ae<Z.length;ae++)E(B,Z[ae]);if(oe){let ae=oe.subTree;if(z===ae||T1(ae.type)&&(ae.ssContent===z||ae.ssFallback===z)){const ce=oe.vnode;K(B,ce,ce.scopeId,ce.slotScopeIds,oe.parent)}}},V=(B,z,G,Z,oe,ae,ce,ue,le=0)=>{for(let ie=le;ie<B.length;ie++){const ye=B[ie]=ue?In(B[ie]):Wi(B[ie]);A(null,ye,z,G,Z,oe,ae,ce,ue)}},W=(B,z,G,Z,oe,ae,ce)=>{const ue=z.el=B.el;let{patchFlag:le,dynamicChildren:ie,dirs:ye}=z;le|=B.patchFlag&16;const pe=B.props||Ot,he=z.props||Ot;let _e;if(G&&Yn(G,!1),(_e=he.onVnodeBeforeUpdate)&&qi(_e,G,z,B),ye&&Jn(z,B,G,"beforeUpdate"),G&&Yn(G,!0),(pe.innerHTML&&he.innerHTML==null||pe.textContent&&he.textContent==null)&&l(ue,""),ie?Q(B.dynamicChildren,ie,ue,G,Z,Ec(z,oe),ae):ce||M(B,z,ue,null,G,Z,Ec(z,oe),ae,!1),le>0){if(le&16)C(ue,pe,he,G,oe);else if(le&2&&pe.class!==he.class&&s(ue,"class",null,he.class,oe),le&4&&s(ue,"style",pe.style,he.style,oe),le&8){const Ae=z.dynamicProps;for(let we=0;we<Ae.length;we++){const De=Ae[we],Fe=pe[De],Se=he[De];(Se!==Fe||De==="value")&&s(ue,De,Fe,Se,oe,G)}}le&1&&B.children!==z.children&&l(ue,z.children)}else!ce&&ie==null&&C(ue,pe,he,G,oe);((_e=he.onVnodeUpdated)||ye)&&Gr(()=>{_e&&qi(_e,G,z,B),ye&&Jn(z,B,G,"updated")},Z)},Q=(B,z,G,Z,oe,ae,ce)=>{for(let ue=0;ue<z.length;ue++){const le=B[ue],ie=z[ue],ye=le.el&&(le.type===Qr||!go(le,ie)||le.shapeFlag&70)?h(le.el):G;A(le,ie,ye,null,Z,oe,ae,ce,!0)}},C=(B,z,G,Z,oe)=>{if(z!==G){if(z!==Ot)for(const ae in z)!To(ae)&&!(ae in G)&&s(B,ae,z[ae],null,oe,Z);for(const ae in G){if(To(ae))continue;const ce=G[ae],ue=z[ae];ce!==ue&&ae!=="value"&&s(B,ae,ue,ce,oe,Z)}"value"in G&&s(B,"value",z.value,G.value,oe)}},g=(B,z,G,Z,oe,ae,ce,ue,le)=>{const ie=z.el=B?B.el:a(""),ye=z.anchor=B?B.anchor:a("");let{patchFlag:pe,dynamicChildren:he,slotScopeIds:_e}=z;_e&&(ue=ue?ue.concat(_e):_e),B==null?(i(ie,G,Z),i(ye,G,Z),V(z.children||[],G,ye,oe,ae,ce,ue,le)):pe>0&&pe&64&&he&&B.dynamicChildren?(Q(B.dynamicChildren,he,G,oe,ae,ce,ue),(z.key!=null||oe&&z===oe.subTree)&&O1(B,z,!0)):M(B,z,G,ye,oe,ae,ce,ue,le)},p=(B,z,G,Z,oe,ae,ce,ue,le)=>{z.slotScopeIds=ue,B==null?z.shapeFlag&512?oe.ctx.activate(z,G,Z,ce,le):u(z,G,Z,oe,ae,ce,le):d(B,z,le)},u=(B,z,G,Z,oe,ae,ce)=>{const ue=B.component=uw(B,Z,oe);if(d1(B)&&(ue.ctx.renderer=ge),lw(ue,!1,ce),ue.asyncDep){if(oe&&oe.registerDep(ue,v,ce),!B.el){const le=ue.subTree=Ri(Ln);N(null,le,z,G)}}else v(ue,B,z,G,oe,ae,ce)},d=(B,z,G)=>{const Z=z.component=B.component;if(tw(B,z,G))if(Z.asyncDep&&!Z.asyncResolved){y(Z,z,G);return}else Z.next=z,Z.update();else z.el=B.el,Z.vnode=z},v=(B,z,G,Z,oe,ae,ce)=>{const ue=()=>{if(B.isMounted){let{next:pe,bu:he,u:_e,parent:Ae,vnode:we}=B;{const We=P1(B);if(We){pe&&(pe.el=we.el,y(B,pe,ce)),We.asyncDep.then(()=>{B.isUnmounted||ue()});return}}let De=pe,Fe;Yn(B,!1),pe?(pe.el=we.el,y(B,pe,ce)):pe=we,he&&ja(he),(Fe=pe.props&&pe.props.onVnodeBeforeUpdate)&&qi(Fe,Ae,pe,we),Yn(B,!0);const Se=Kh(B),Ke=B.subTree;B.subTree=Se,A(Ke,Se,h(Ke.el),X(Ke),B,oe,ae),pe.el=Se.el,De===null&&rw(B,Se.el),_e&&Gr(_e,oe),(Fe=pe.props&&pe.props.onVnodeUpdated)&&Gr(()=>qi(Fe,Ae,pe,we),oe)}else{let pe;const{el:he,props:_e}=z,{bm:Ae,m:we,parent:De,root:Fe,type:Se}=B,Ke=Hs(z);Yn(B,!1),Ae&&ja(Ae),!Ke&&(pe=_e&&_e.onVnodeBeforeMount)&&qi(pe,De,z),Yn(B,!0);{Fe.ce&&Fe.ce._injectChildStyle(Se);const We=B.subTree=Kh(B);A(null,We,G,Z,B,oe,ae),z.el=We.el}if(we&&Gr(we,oe),!Ke&&(pe=_e&&_e.onVnodeMounted)){const We=z;Gr(()=>qi(pe,De,We),oe)}(z.shapeFlag&256||De&&Hs(De.vnode)&&De.vnode.shapeFlag&256)&&B.a&&Gr(B.a,oe),B.isMounted=!0,z=G=Z=null}};B.scope.on();const le=B.effect=new Kg(ue);B.scope.off();const ie=B.update=le.run.bind(le),ye=B.job=le.runIfDirty.bind(le);ye.i=B,ye.id=B.uid,le.scheduler=()=>Ll(ye),Yn(B,!0),ie()},y=(B,z,G)=>{z.component=B;const Z=B.vnode.props;B.vnode=z,B.next=null,B2(B,z.props,Z,G),z2(B,z.children,G),kn(),Fh(B),jn()},M=(B,z,G,Z,oe,ae,ce,ue,le=!1)=>{const ie=B&&B.children,ye=B?B.shapeFlag:0,pe=z.children,{patchFlag:he,shapeFlag:_e}=z;if(he>0){if(he&128){b(ie,pe,G,Z,oe,ae,ce,ue,le);return}else if(he&256){x(ie,pe,G,Z,oe,ae,ce,ue,le);return}}_e&8?(ye&16&&H(ie,oe,ae),pe!==ie&&l(G,pe)):ye&16?_e&16?b(ie,pe,G,Z,oe,ae,ce,ue,le):H(ie,oe,ae,!0):(ye&8&&l(G,""),_e&16&&V(pe,G,Z,oe,ae,ce,ue,le))},x=(B,z,G,Z,oe,ae,ce,ue,le)=>{B=B||js,z=z||js;const ie=B.length,ye=z.length,pe=Math.min(ie,ye);let he;for(he=0;he<pe;he++){const _e=z[he]=le?In(z[he]):Wi(z[he]);A(B[he],_e,G,null,oe,ae,ce,ue,le)}ie>ye?H(B,oe,ae,!0,!1,pe):V(z,G,Z,oe,ae,ce,ue,le,pe)},b=(B,z,G,Z,oe,ae,ce,ue,le)=>{let ie=0;const ye=z.length;let pe=B.length-1,he=ye-1;for(;ie<=pe&&ie<=he;){const _e=B[ie],Ae=z[ie]=le?In(z[ie]):Wi(z[ie]);if(go(_e,Ae))A(_e,Ae,G,null,oe,ae,ce,ue,le);else break;ie++}for(;ie<=pe&&ie<=he;){const _e=B[pe],Ae=z[he]=le?In(z[he]):Wi(z[he]);if(go(_e,Ae))A(_e,Ae,G,null,oe,ae,ce,ue,le);else break;pe--,he--}if(ie>pe){if(ie<=he){const _e=he+1,Ae=_e<ye?z[_e].el:Z;for(;ie<=he;)A(null,z[ie]=le?In(z[ie]):Wi(z[ie]),G,Ae,oe,ae,ce,ue,le),ie++}}else if(ie>he)for(;ie<=pe;)m(B[ie],oe,ae,!0),ie++;else{const _e=ie,Ae=ie,we=new Map;for(ie=Ae;ie<=he;ie++){const ze=z[ie]=le?In(z[ie]):Wi(z[ie]);ze.key!=null&&we.set(ze.key,ie)}let De,Fe=0;const Se=he-Ae+1;let Ke=!1,We=0;const Ce=new Array(Se);for(ie=0;ie<Se;ie++)Ce[ie]=0;for(ie=_e;ie<=pe;ie++){const ze=B[ie];if(Fe>=Se){m(ze,oe,ae,!0);continue}let Re;if(ze.key!=null)Re=we.get(ze.key);else for(De=Ae;De<=he;De++)if(Ce[De-Ae]===0&&go(ze,z[De])){Re=De;break}Re===void 0?m(ze,oe,ae,!0):(Ce[Re-Ae]=ie+1,Re>=We?We=Re:Ke=!0,A(ze,z[Re],G,null,oe,ae,ce,ue,le),Fe++)}const et=Ke?W2(Ce):js;for(De=et.length-1,ie=Se-1;ie>=0;ie--){const ze=Ae+ie,Re=z[ze],at=ze+1<ye?z[ze+1].el:Z;Ce[ie]===0?A(null,Re,G,at,oe,ae,ce,ue,le):Ke&&(De<0||ie!==et[De]?S(Re,G,at,2):De--)}}},S=(B,z,G,Z,oe=null)=>{const{el:ae,type:ce,transition:ue,children:le,shapeFlag:ie}=B;if(ie&6){S(B.component.subTree,z,G,Z);return}if(ie&128){B.suspense.move(z,G,Z);return}if(ie&64){ce.move(B,z,G,ge);return}if(ce===Qr){i(ae,z,G);for(let pe=0;pe<le.length;pe++)S(le[pe],z,G,Z);i(B.anchor,z,G);return}if(ce===Sc){U(B,z,G);return}if(Z!==2&&ie&1&&ue)if(Z===0)ue.beforeEnter(ae),i(ae,z,G),Gr(()=>ue.enter(ae),oe);else{const{leave:pe,delayLeave:he,afterLeave:_e}=ue,Ae=()=>i(ae,z,G),we=()=>{pe(ae,()=>{Ae(),_e&&_e()})};he?he(ae,Ae,we):we()}else i(ae,z,G)},m=(B,z,G,Z=!1,oe=!1)=>{const{type:ae,props:ce,ref:ue,children:le,dynamicChildren:ie,shapeFlag:ye,patchFlag:pe,dirs:he,cacheIndex:_e}=B;if(pe===-2&&(oe=!1),ue!=null&&pf(ue,null,G,B,!0),_e!=null&&(z.renderCache[_e]=void 0),ye&256){z.ctx.deactivate(B);return}const Ae=ye&1&&he,we=!Hs(B);let De;if(we&&(De=ce&&ce.onVnodeBeforeUnmount)&&qi(De,z,B),ye&6)O(B.component,G,Z);else{if(ye&128){B.suspense.unmount(G,Z);return}Ae&&Jn(B,null,z,"beforeUnmount"),ye&64?B.type.remove(B,z,G,ge,Z):ie&&!ie.hasOnce&&(ae!==Qr||pe>0&&pe&64)?H(ie,z,G,!1,!0):(ae===Qr&&pe&384||!oe&&ye&16)&&H(le,z,G),Z&&$(B)}(we&&(De=ce&&ce.onVnodeUnmounted)||Ae)&&Gr(()=>{De&&qi(De,z,B),Ae&&Jn(B,null,z,"unmounted")},G)},$=B=>{const{type:z,el:G,anchor:Z,transition:oe}=B;if(z===Qr){ee(G,Z);return}if(z===Sc){P(B);return}const ae=()=>{n(G),oe&&!oe.persisted&&oe.afterLeave&&oe.afterLeave()};if(B.shapeFlag&1&&oe&&!oe.persisted){const{leave:ce,delayLeave:ue}=oe,le=()=>ce(G,ae);ue?ue(B.el,ae,le):le()}else ae()},ee=(B,z)=>{let G;for(;B!==z;)G=w(B),n(B),B=G;n(z)},O=(B,z,G)=>{const{bum:Z,scope:oe,job:ae,subTree:ce,um:ue,m:le,a:ie}=B;zh(le),zh(ie),Z&&ja(Z),oe.stop(),ae&&(ae.flags|=8,m(ce,B,z,G)),ue&&Gr(ue,z),Gr(()=>{B.isUnmounted=!0},z),z&&z.pendingBranch&&!z.isUnmounted&&B.asyncDep&&!B.asyncResolved&&B.suspenseId===z.pendingId&&(z.deps--,z.deps===0&&z.resolve())},H=(B,z,G,Z=!1,oe=!1,ae=0)=>{for(let ce=ae;ce<B.length;ce++)m(B[ce],z,G,Z,oe)},X=B=>{if(B.shapeFlag&6)return X(B.component.subTree);if(B.shapeFlag&128)return B.suspense.next();const z=w(B.anchor||B.el),G=z&&z[c2];return G?w(G):z};let te=!1;const ne=(B,z,G)=>{B==null?z._vnode&&m(z._vnode,null,null,!0):A(z._vnode||null,B,z,null,null,null,G),z._vnode=B,te||(te=!0,Fh(),f1(),te=!1)},ge={p:A,um:m,m:S,r:$,mt:u,mc:V,pc:M,pbc:Q,n:X,o:e};return{render:ne,hydrate:void 0,createApp:F2(ne)}}function Ec({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Yn({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function H2(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function O1(e,t,r=!1){const i=e.children,n=t.children;if(Je(i)&&Je(n))for(let s=0;s<i.length;s++){const o=i[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=In(n[s]),a.el=o.el),!r&&a.patchFlag!==-2&&O1(o,a)),a.type===Uf&&(a.el=o.el)}}function W2(e){const t=e.slice(),r=[0];let i,n,s,o,a;const f=e.length;for(i=0;i<f;i++){const c=e[i];if(c!==0){if(n=r[r.length-1],e[n]<c){t[i]=n,r.push(i);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,e[r[a]]<c?s=a+1:o=a;c<e[r[s]]&&(s>0&&(t[i]=r[s-1]),r[s]=i)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=t[o];return r}function P1(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:P1(t)}function zh(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const G2=Symbol.for("v-scx"),J2=()=>Ka(G2);function Pn(e,t,r){return $1(e,t,r)}function $1(e,t,r=Ot){const{immediate:i,deep:n,flush:s,once:o}=r,a=Ir({},r),f=t&&i||!t&&s!=="post";let c;if(Wo){if(s==="sync"){const E=J2();c=E.__watcherHandles||(E.__watcherHandles=[])}else if(!f){const E=()=>{};return E.stop=Gi,E.resume=Gi,E.pause=Gi,E}}const l=Er;a.call=(E,_,A)=>Yi(E,l,_,A);let h=!1;s==="post"?a.scheduler=E=>{Gr(E,l&&l.suspense)}:s!=="sync"&&(h=!0,a.scheduler=(E,_)=>{_?E():Ll(E)}),a.augmentJob=E=>{t&&(E.flags|=4),h&&(E.flags|=2,l&&(E.id=l.uid,E.i=l))};const w=i2(e,t,a);return Wo&&(c?c.push(w):f&&w()),w}function Y2(e,t,r){const i=this.proxy,n=Xt(e)?e.includes(".")?R1(i,e):()=>i[e]:e.bind(i,i);let s;Qe(t)?s=t:(s=t.handler,r=t);const o=ea(this),a=$1(n,s.bind(i),r);return o(),a}function R1(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}const Z2=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${li(t)}Modifiers`]||e[`${gs(t)}Modifiers`];function X2(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||Ot;let n=r;const s=t.startsWith("update:"),o=s&&Z2(i,t.slice(7));o&&(o.trim&&(n=r.map(l=>Xt(l)?l.trim():l)),o.number&&(n=r.map(qu)));let a,f=i[a=vc(t)]||i[a=vc(li(t))];!f&&s&&(f=i[a=vc(gs(t))]),f&&Yi(f,e,6,n);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Yi(c,e,6,n)}}function C1(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const s=e.emits;let o={},a=!1;if(!Qe(e)){const f=c=>{const l=C1(c,t,!0);l&&(a=!0,Ir(o,l))};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!s&&!a?(Bt(e)&&i.set(e,null),null):(Je(s)?s.forEach(f=>o[f]=null):Ir(o,s),Bt(e)&&i.set(e,o),o)}function Bf(e,t){return!e||!Pf(t)?!1:(t=t.slice(2).replace(/Once$/,""),xt(e,t[0].toLowerCase()+t.slice(1))||xt(e,gs(t))||xt(e,t))}function Kh(e){const{type:t,vnode:r,proxy:i,withProxy:n,propsOptions:[s],slots:o,attrs:a,emit:f,render:c,renderCache:l,props:h,data:w,setupState:E,ctx:_,inheritAttrs:A}=e,R=df(e);let N,q;try{if(r.shapeFlag&4){const P=n||i,F=P;N=Wi(c.call(F,P,l,h,E,w,_)),q=a}else{const P=t;N=Wi(P.length>1?P(h,{attrs:a,slots:o,emit:f}):P(h,null)),q=t.props?a:Q2(a)}}catch(P){qo.length=0,Lf(P,e,1),N=Ri(Ln)}let U=N;if(q&&A!==!1){const P=Object.keys(q),{shapeFlag:F}=U;P.length&&F&7&&(s&&P.some(Ml)&&(q=ew(q,s)),U=Xs(U,q,!1,!0))}return r.dirs&&(U=Xs(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(r.dirs):r.dirs),r.transition&&ql(U,r.transition),N=U,df(R),N}const Q2=e=>{let t;for(const r in e)(r==="class"||r==="style"||Pf(r))&&((t||(t={}))[r]=e[r]);return t},ew=(e,t)=>{const r={};for(const i in e)(!Ml(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function tw(e,t,r){const{props:i,children:n,component:s}=e,{props:o,children:a,patchFlag:f}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&f>=0){if(f&1024)return!0;if(f&16)return i?Vh(i,o,c):!!o;if(f&8){const l=t.dynamicProps;for(let h=0;h<l.length;h++){const w=l[h];if(o[w]!==i[w]&&!Bf(c,w))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Vh(i,o,c):!0:!!o;return!1}function Vh(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(t[s]!==e[s]&&!Bf(r,s))return!0}return!1}function rw({vnode:e,parent:t},r){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=r,t=t.parent;else break}}const T1=e=>e.__isSuspense;function iw(e,t){t&&t.pendingBranch?Je(e)?t.effects.push(...e):t.effects.push(e):a2(e)}const Qr=Symbol.for("v-fgt"),Uf=Symbol.for("v-txt"),Ln=Symbol.for("v-cmt"),Sc=Symbol.for("v-stc"),qo=[];let ei=null;function bn(e=!1){qo.push(ei=e?null:[])}function nw(){qo.pop(),ei=qo[qo.length-1]||null}let Ho=1;function Hh(e,t=!1){Ho+=e,e<0&&ei&&t&&(ei.hasOnce=!0)}function N1(e){return e.dynamicChildren=Ho>0?ei||js:null,nw(),Ho>0&&ei&&ei.push(e),e}function qs(e,t,r,i,n,s){return N1(Zt(e,t,r,i,n,s,!0))}function Gu(e,t,r,i,n){return N1(Ri(e,t,r,i,n,!0))}function kl(e){return e?e.__v_isVNode===!0:!1}function go(e,t){return e.type===t.type&&e.key===t.key}const F1=({key:e})=>e??null,Va=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Xt(e)||Sr(e)||Qe(e)?{i:pr,r:e,k:t,f:!!r}:e:null);function Zt(e,t=null,r=null,i=0,n=null,s=e===Qr?0:1,o=!1,a=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&F1(t),ref:t&&Va(t),scopeId:u1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:pr};return a?(jl(f,r),s&128&&e.normalize(f)):r&&(f.shapeFlag|=Xt(r)?8:16),Ho>0&&!o&&ei&&(f.patchFlag>0||s&6)&&f.patchFlag!==32&&ei.push(f),f}const Ri=sw;function sw(e,t=null,r=null,i=0,n=null,s=!1){if((!e||e===M2)&&(e=Ln),kl(e)){const a=Xs(e,t,!0);return r&&jl(a,r),Ho>0&&!s&&ei&&(a.shapeFlag&6?ei[ei.indexOf(e)]=a:ei.push(a)),a.patchFlag=-2,a}if(bw(e)&&(e=e.__vccOpts),t){t=ow(t);let{class:a,style:f}=t;a&&!Xt(a)&&(t.class=Dl(a)),Bt(f)&&(Fl(f)&&!Je(f)&&(f=Ir({},f)),t.style=Nf(f))}const o=Xt(e)?1:T1(e)?128:u2(e)?64:Bt(e)?4:Qe(e)?2:0;return Zt(e,t,r,i,n,o,s,!0)}function ow(e){return e?Fl(e)||x1(e)?Ir({},e):e:null}function Xs(e,t,r=!1,i=!1){const{props:n,ref:s,patchFlag:o,children:a,transition:f}=e,c=t?aw(n||{},t):n,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&F1(c),ref:t&&t.ref?r&&s?Je(s)?s.concat(Va(t)):[s,Va(t)]:Va(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Qr?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Xs(e.ssContent),ssFallback:e.ssFallback&&Xs(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&i&&ql(l,f.clone(l)),l}function Ju(e=" ",t=0){return Ri(Uf,null,e,t)}function Wh(e="",t=!1){return t?(bn(),Gu(Ln,null,e)):Ri(Ln,null,e)}function Wi(e){return e==null||typeof e=="boolean"?Ri(Ln):Je(e)?Ri(Qr,null,e.slice()):kl(e)?In(e):Ri(Uf,null,String(e))}function In(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Xs(e)}function jl(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Je(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),jl(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!x1(t)?t._ctx=pr:n===3&&pr&&(pr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Qe(t)?(t={default:t,_ctx:pr},r=32):(t=String(t),i&64?(r=16,t=[Ju(t)]):r=8);e.children=t,e.shapeFlag|=r}function aw(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=Dl([t.class,i.class]));else if(n==="style")t.style=Nf([t.style,i.style]);else if(Pf(n)){const s=t[n],o=i[n];o&&s!==o&&!(Je(s)&&s.includes(o))&&(t[n]=s?[].concat(s,o):o)}else n!==""&&(t[n]=i[n])}return t}function qi(e,t,r,i=null){Yi(e,t,7,[r,i])}const fw=y1();let cw=0;function uw(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||fw,s={uid:cw++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Dy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:S1(i,n),emitsOptions:C1(i,n),emit:null,emitted:null,propsDefaults:Ot,inheritAttrs:i.inheritAttrs,ctx:Ot,data:Ot,props:Ot,attrs:Ot,slots:Ot,refs:Ot,setupState:Ot,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=X2.bind(null,s),e.ce&&e.ce(s),s}let Er=null,bf,Yu;{const e=Tf(),t=(r,i)=>{let n;return(n=e[r])||(n=e[r]=[]),n.push(i),s=>{n.length>1?n.forEach(o=>o(s)):n[0](s)}};bf=t("__VUE_INSTANCE_SETTERS__",r=>Er=r),Yu=t("__VUE_SSR_SETTERS__",r=>Wo=r)}const ea=e=>{const t=Er;return bf(e),e.scope.on(),()=>{e.scope.off(),bf(t)}},Gh=()=>{Er&&Er.scope.off(),bf(null)};function L1(e){return e.vnode.shapeFlag&4}let Wo=!1;function lw(e,t=!1,r=!1){t&&Yu(t);const{props:i,children:n}=e.vnode,s=L1(e);q2(e,i,s,t),j2(e,n,r);const o=s?hw(e,t):void 0;return t&&Yu(!1),o}function hw(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,O2);const{setup:i}=r;if(i){kn();const n=e.setupContext=i.length>1?pw(e):null,s=ea(e),o=Qo(i,e,0,[e.props,n]),a=Lg(o);if(jn(),s(),(a||e.sp)&&!Hs(e)&&h1(e),a){if(o.then(Gh,Gh),t)return o.then(f=>{Jh(e,f)}).catch(f=>{Lf(f,e,0)});e.asyncDep=o}else Jh(e,o)}else q1(e)}function Jh(e,t,r){Qe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Bt(t)&&(e.setupState=s1(t)),q1(e)}function q1(e,t,r){const i=e.type;e.render||(e.render=i.render||Gi);{const n=ea(e);kn();try{P2(e)}finally{jn(),n()}}}const dw={get(e,t){return _r(e,"get",""),e[t]}};function pw(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,dw),slots:e.slots,emit:e.emit,expose:t}}function kf(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(s1(Jy(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Lo)return Lo[r](e)},has(t,r){return r in t||r in Lo}})):e.proxy}function gw(e,t=!0){return Qe(e)?e.displayName||e.name:e.name||t&&e.__name}function bw(e){return Qe(e)&&"__vccOpts"in e}const Ha=(e,t)=>t2(e,t,Wo),vw="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zu;const Yh=typeof window<"u"&&window.trustedTypes;if(Yh)try{Zu=Yh.createPolicy("vue",{createHTML:e=>e})}catch{}const B1=Zu?e=>Zu.createHTML(e):e=>e,mw="http://www.w3.org/2000/svg",yw="http://www.w3.org/1998/Math/MathML",ln=typeof document<"u"?document:null,Zh=ln&&ln.createElement("template"),ww={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t==="svg"?ln.createElementNS(mw,e):t==="mathml"?ln.createElementNS(yw,e):r?ln.createElement(e,{is:r}):ln.createElement(e);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>ln.createTextNode(e),createComment:e=>ln.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ln.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,i,n,s){const o=r?r.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{Zh.innerHTML=B1(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const a=Zh.content;if(i==="svg"||i==="mathml"){const f=a.firstChild;for(;f.firstChild;)a.appendChild(f.firstChild);a.removeChild(f)}t.insertBefore(a,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},_w=Symbol("_vtc");function xw(e,t,r){const i=e[_w];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const vf=Symbol("_vod"),U1=Symbol("_vsh"),Ew={beforeMount(e,{value:t},{transition:r}){e[vf]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):bo(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:i}){!t!=!r&&(i?t?(i.beforeEnter(e),bo(e,!0),i.enter(e)):i.leave(e,()=>{bo(e,!1)}):bo(e,t))},beforeUnmount(e,{value:t}){bo(e,t)}};function bo(e,t){e.style.display=t?e[vf]:"none",e[U1]=!t}const Sw=Symbol(""),Mw=/(^|;)\s*display\s*:/;function Aw(e,t,r){const i=e.style,n=Xt(r);let s=!1;if(r&&!n){if(t)if(Xt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&Wa(i,a,"")}else for(const o in t)r[o]==null&&Wa(i,o,"");for(const o in r)o==="display"&&(s=!0),Wa(i,o,r[o])}else if(n){if(t!==r){const o=i[Sw];o&&(r+=";"+o),i.cssText=r,s=Mw.test(r)}}else t&&e.removeAttribute("style");vf in e&&(e[vf]=s?i.display:"",e[U1]&&(i.display="none"))}const Xh=/\s*!important$/;function Wa(e,t,r){if(Je(r))r.forEach(i=>Wa(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=Iw(e,t);Xh.test(r)?e.setProperty(gs(i),r.replace(Xh,""),"important"):e[i]=r}}const Qh=["Webkit","Moz","ms"],Mc={};function Iw(e,t){const r=Mc[t];if(r)return r;let i=li(t);if(i!=="filter"&&i in e)return Mc[t]=i;i=Cf(i);for(let n=0;n<Qh.length;n++){const s=Qh[n]+i;if(s in e)return Mc[t]=s}return t}const ed="http://www.w3.org/1999/xlink";function td(e,t,r,i,n,s=Iy(t)){i&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(ed,t.slice(6,t.length)):e.setAttributeNS(ed,t,r):r==null||s&&!kg(r)?e.removeAttribute(t):e.setAttribute(t,s?"":mn(r)?String(r):r)}function rd(e,t,r,i,n){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?B1(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,f=r==null?e.type==="checkbox"?"on":"":String(r);(a!==f||!("_value"in e))&&(e.value=f),r==null&&e.removeAttribute(t),e._value=r;return}let o=!1;if(r===""||r==null){const a=typeof e[t];a==="boolean"?r=kg(r):r==null&&a==="string"?(r="",o=!0):a==="number"&&(r=0,o=!0)}try{e[t]=r}catch{}o&&e.removeAttribute(n||t)}function Bs(e,t,r,i){e.addEventListener(t,r,i)}function Dw(e,t,r,i){e.removeEventListener(t,r,i)}const id=Symbol("_vei");function Ow(e,t,r,i,n=null){const s=e[id]||(e[id]={}),o=s[t];if(i&&o)o.value=i;else{const[a,f]=Pw(t);if(i){const c=s[t]=Cw(i,n);Bs(e,a,c,f)}else o&&(Dw(e,a,o,f),s[t]=void 0)}}const nd=/(?:Once|Passive|Capture)$/;function Pw(e){let t;if(nd.test(e)){t={};let i;for(;i=e.match(nd);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):gs(e.slice(2)),t]}let Ac=0;const $w=Promise.resolve(),Rw=()=>Ac||($w.then(()=>Ac=0),Ac=Date.now());function Cw(e,t){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;Yi(Tw(i,r.value),t,5,[i])};return r.value=e,r.attached=Rw(),r}function Tw(e,t){if(Je(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const sd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Nw=(e,t,r,i,n,s)=>{const o=n==="svg";t==="class"?xw(e,i,o):t==="style"?Aw(e,r,i):Pf(t)?Ml(t)||Ow(e,t,r,i,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Fw(e,t,i,o))?(rd(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&td(e,t,i,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Xt(i))?rd(e,li(t),i,s,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),td(e,t,i,o))};function Fw(e,t,r,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&sd(t)&&Qe(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return sd(t)&&Xt(r)?!1:t in e}const od=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Je(t)?r=>ja(t,r):t};function Lw(e){e.target.composing=!0}function ad(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ic=Symbol("_assign"),qw={created(e,{modifiers:{lazy:t,trim:r,number:i}},n){e[Ic]=od(n);const s=i||n.props&&n.props.type==="number";Bs(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;r&&(a=a.trim()),s&&(a=qu(a)),e[Ic](a)}),r&&Bs(e,"change",()=>{e.value=e.value.trim()}),t||(Bs(e,"compositionstart",Lw),Bs(e,"compositionend",ad),Bs(e,"change",ad))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:i,trim:n,number:s}},o){if(e[Ic]=od(o),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?qu(e.value):e.value,f=t??"";a!==f&&(document.activeElement===e&&e.type!=="range"&&(i&&t===r||n&&e.value.trim()===f)||(e.value=f))}},Bw=Ir({patchProp:Nw},ww);let fd;function Uw(){return fd||(fd=K2(Bw))}const kw=(...e)=>{const t=Uw().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=zw(i);if(!n)return;const s=t._component;!Qe(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=r(n,!1,jw(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function jw(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function zw(e){return Xt(e)?document.querySelector(e):e}var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function no(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function k1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),r}var Oa={exports:{}},cd;function Kw(){if(cd)return Oa.exports;cd=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(F,L,K){return Function.prototype.apply.call(F,L,K)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(F){return Object.getOwnPropertyNames(F).concat(Object.getOwnPropertySymbols(F))}:r=function(F){return Object.getOwnPropertyNames(F)};function i(P){console&&console.warn&&console.warn(P)}var n=Number.isNaN||function(F){return F!==F};function s(){s.init.call(this)}Oa.exports=s,Oa.exports.once=N,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(P){if(typeof P!="number"||P<0||n(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");o=P}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(F){if(typeof F!="number"||F<0||n(F))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+F+".");return this._maxListeners=F,this};function f(P){return P._maxListeners===void 0?s.defaultMaxListeners:P._maxListeners}s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(F){for(var L=[],K=1;K<arguments.length;K++)L.push(arguments[K]);var V=F==="error",W=this._events;if(W!==void 0)V=V&&W.error===void 0;else if(!V)return!1;if(V){var Q;if(L.length>0&&(Q=L[0]),Q instanceof Error)throw Q;var C=new Error("Unhandled error."+(Q?" ("+Q.message+")":""));throw C.context=Q,C}var g=W[F];if(g===void 0)return!1;if(typeof g=="function")t(g,this,L);else for(var p=g.length,u=_(g,p),K=0;K<p;++K)t(u[K],this,L);return!0};function c(P,F,L,K){var V,W,Q;if(a(L),W=P._events,W===void 0?(W=P._events=Object.create(null),P._eventsCount=0):(W.newListener!==void 0&&(P.emit("newListener",F,L.listener?L.listener:L),W=P._events),Q=W[F]),Q===void 0)Q=W[F]=L,++P._eventsCount;else if(typeof Q=="function"?Q=W[F]=K?[L,Q]:[Q,L]:K?Q.unshift(L):Q.push(L),V=f(P),V>0&&Q.length>V&&!Q.warned){Q.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(F)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=P,C.type=F,C.count=Q.length,i(C)}return P}s.prototype.addListener=function(F,L){return c(this,F,L,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(F,L){return c(this,F,L,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(P,F,L){var K={fired:!1,wrapFn:void 0,target:P,type:F,listener:L},V=l.bind(K);return V.listener=L,K.wrapFn=V,V}s.prototype.once=function(F,L){return a(L),this.on(F,h(this,F,L)),this},s.prototype.prependOnceListener=function(F,L){return a(L),this.prependListener(F,h(this,F,L)),this},s.prototype.removeListener=function(F,L){var K,V,W,Q,C;if(a(L),V=this._events,V===void 0)return this;if(K=V[F],K===void 0)return this;if(K===L||K.listener===L)--this._eventsCount===0?this._events=Object.create(null):(delete V[F],V.removeListener&&this.emit("removeListener",F,K.listener||L));else if(typeof K!="function"){for(W=-1,Q=K.length-1;Q>=0;Q--)if(K[Q]===L||K[Q].listener===L){C=K[Q].listener,W=Q;break}if(W<0)return this;W===0?K.shift():A(K,W),K.length===1&&(V[F]=K[0]),V.removeListener!==void 0&&this.emit("removeListener",F,C||L)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(F){var L,K,V;if(K=this._events,K===void 0)return this;if(K.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):K[F]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete K[F]),this;if(arguments.length===0){var W=Object.keys(K),Q;for(V=0;V<W.length;++V)Q=W[V],Q!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=K[F],typeof L=="function")this.removeListener(F,L);else if(L!==void 0)for(V=L.length-1;V>=0;V--)this.removeListener(F,L[V]);return this};function w(P,F,L){var K=P._events;if(K===void 0)return[];var V=K[F];return V===void 0?[]:typeof V=="function"?L?[V.listener||V]:[V]:L?R(V):_(V,V.length)}s.prototype.listeners=function(F){return w(this,F,!0)},s.prototype.rawListeners=function(F){return w(this,F,!1)},s.listenerCount=function(P,F){return typeof P.listenerCount=="function"?P.listenerCount(F):E.call(P,F)},s.prototype.listenerCount=E;function E(P){var F=this._events;if(F!==void 0){var L=F[P];if(typeof L=="function")return 1;if(L!==void 0)return L.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function _(P,F){for(var L=new Array(F),K=0;K<F;++K)L[K]=P[K];return L}function A(P,F){for(;F+1<P.length;F++)P[F]=P[F+1];P.pop()}function R(P){for(var F=new Array(P.length),L=0;L<F.length;++L)F[L]=P[L].listener||P[L];return F}function N(P,F){return new Promise(function(L,K){function V(Q){P.removeListener(F,W),K(Q)}function W(){typeof P.removeListener=="function"&&P.removeListener("error",V),L([].slice.call(arguments))}U(P,F,W,{once:!0}),F!=="error"&&q(P,V,{once:!0})})}function q(P,F,L){typeof P.on=="function"&&U(P,"error",F,L)}function U(P,F,L,K){if(typeof P.on=="function")K.once?P.once(F,L):P.on(F,L);else if(typeof P.addEventListener=="function")P.addEventListener(F,function V(W){K.once&&P.removeEventListener(F,V),L(W)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P)}return Oa.exports}var Ci=Kw();const j1=no(Ci);var Dc={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xu=function(e,t){return Xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Xu(e,t)};function Vw(e,t){Xu(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Qu=function(){return Qu=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Qu.apply(this,arguments)};function Hw(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function Ww(e,t,r,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n<3?o(s):n>3?o(t,r,s):o(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s}function Gw(e,t){return function(r,i){t(r,i,e)}}function Jw(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Yw(e,t,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(i.next(l))}catch(h){o(h)}}function f(l){try{c(i.throw(l))}catch(h){o(h)}}function c(l){l.done?s(l.value):n(l.value).then(a,f)}c((i=i.apply(e,t||[])).next())})}function Zw(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return f([c,l])}}function f(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],n=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Xw(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}function Qw(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function el(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function z1(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,s=[],o;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function e3(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(z1(arguments[t]));return e}function t3(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function Go(e){return this instanceof Go?(this.v=e,this):new Go(e)}function r3(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(w){i[w]&&(n[w]=function(E){return new Promise(function(_,A){s.push([w,E,_,A])>1||a(w,E)})})}function a(w,E){try{f(i[w](E))}catch(_){h(s[0][3],_)}}function f(w){w.value instanceof Go?Promise.resolve(w.value.v).then(c,l):h(s[0][2],w)}function c(w){a("next",w)}function l(w){a("throw",w)}function h(w,E){w(E),s.shift(),s.length&&a(s[0][0],s[0][1])}}function i3(e){var t,r;return t={},i("next"),i("throw",function(n){throw n}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(n,s){t[n]=e[n]?function(o){return(r=!r)?{value:Go(e[n](o)),done:n==="return"}:s?s(o):o}:s}}function n3(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof el=="function"?el(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=e[s]&&function(o){return new Promise(function(a,f){o=e[s](o),n(a,f,o.done,o.value)})}}function n(s,o,a,f){Promise.resolve(f).then(function(c){s({value:c,done:a})},o)}}function s3(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function o3(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a3(e){return e&&e.__esModule?e:{default:e}}function f3(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function c3(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const u3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Qu},__asyncDelegator:i3,__asyncGenerator:r3,__asyncValues:n3,__await:Go,__awaiter:Yw,__classPrivateFieldGet:f3,__classPrivateFieldSet:c3,__createBinding:Xw,__decorate:Ww,__exportStar:Qw,__extends:Vw,__generator:Zw,__importDefault:a3,__importStar:o3,__makeTemplateObject:s3,__metadata:Jw,__param:Gw,__read:z1,__rest:Hw,__spread:e3,__spreadArrays:t3,__values:el},Symbol.toStringTag,{value:"Module"})),ta=k1(u3);var Oc={},vo={},ud;function l3(){if(ud)return vo;ud=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return vo.delay=e,vo}var Zn={},Pc={},Xn={},ld;function h3(){return ld||(ld=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.ONE_THOUSAND=Xn.ONE_HUNDRED=void 0,Xn.ONE_HUNDRED=100,Xn.ONE_THOUSAND=1e3),Xn}var $c={},hd;function d3(){return hd||(hd=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}($c)),$c}var dd;function K1(){return dd||(dd=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ta;t.__exportStar(h3(),e),t.__exportStar(d3(),e)}(Pc)),Pc}var pd;function p3(){if(pd)return Zn;pd=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.fromMiliseconds=Zn.toMiliseconds=void 0;const e=K1();function t(i){return i*e.ONE_THOUSAND}Zn.toMiliseconds=t;function r(i){return Math.floor(i/e.ONE_THOUSAND)}return Zn.fromMiliseconds=r,Zn}var gd;function g3(){return gd||(gd=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ta;t.__exportStar(l3(),e),t.__exportStar(p3(),e)}(Oc)),Oc}var Rs={},bd;function b3(){if(bd)return Rs;bd=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const n=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:n})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return Rs.Watch=e,Rs.default=e,Rs}var Rc={},mo={},vd;function v3(){if(vd)return mo;vd=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.IWatch=void 0;class e{}return mo.IWatch=e,mo}var md;function m3(){return md||(md=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),ta.__exportStar(v3(),e)}(Rc)),Rc}var yd;function y3(){return yd||(yd=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ta;t.__exportStar(g3(),e),t.__exportStar(b3(),e),t.__exportStar(m3(),e),t.__exportStar(K1(),e)}(Dc)),Dc}var Ee=y3();class bs{}let w3=class extends bs{constructor(t){super()}};const wd=Ee.FIVE_SECONDS,so={pulse:"heartbeat_pulse"};let _3=class V1 extends w3{constructor(t){super(t),this.events=new Ci.EventEmitter,this.interval=wd,this.interval=(t==null?void 0:t.interval)||wd}static async init(t){const r=new V1(t);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ee.toMiliseconds(this.interval))}pulse(){this.events.emit(so.pulse)}};const x3=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,E3=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,S3=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function M3(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){A3(e);return}return t}function A3(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Pa(e,t={}){if(typeof e!="string")return e;const r=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!S3.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(x3.test(e)||E3.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,M3)}return JSON.parse(e)}catch(i){if(t.strict)throw i;return e}}function I3(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function fr(e,...t){try{return I3(e(...t))}catch(r){return Promise.reject(r)}}function D3(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function O3(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Ga(e){if(D3(e))return String(e);if(O3(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Ga(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const tl="base64:";function P3(e){return typeof e=="string"?e:tl+C3(e)}function $3(e){return typeof e!="string"||!e.startsWith(tl)?e:R3(e.slice(tl.length))}function R3(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function C3(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function Ur(e){var t;return e&&((t=e.split("?")[0])==null?void 0:t.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function T3(...e){return Ur(e.join(":"))}function $a(e){return e=Ur(e),e?e+":":""}const N3="memory",F3=()=>{const e=new Map;return{name:N3,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function L3(e={}){const t={mounts:{"":e.driver||F3()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=c=>{for(const l of t.mountpoints)if(c.startsWith(l))return{base:l,relativeKey:c.slice(l.length),driver:t.mounts[l]};return{base:"",relativeKey:c,driver:t.mounts[""]}},i=(c,l)=>t.mountpoints.filter(h=>h.startsWith(c)||l&&c.startsWith(h)).map(h=>({relativeBase:c.length>h.length?c.slice(h.length):void 0,mountpoint:h,driver:t.mounts[h]})),n=(c,l)=>{if(t.watching){l=Ur(l);for(const h of t.watchListeners)h(c,l)}},s=async()=>{if(!t.watching){t.watching=!0;for(const c in t.mounts)t.unwatch[c]=await _d(t.mounts[c],n,c)}},o=async()=>{if(t.watching){for(const c in t.unwatch)await t.unwatch[c]();t.unwatch={},t.watching=!1}},a=(c,l,h)=>{const w=new Map,E=_=>{let A=w.get(_.base);return A||(A={driver:_.driver,base:_.base,items:[]},w.set(_.base,A)),A};for(const _ of c){const A=typeof _=="string",R=Ur(A?_:_.key),N=A?void 0:_.value,q=A||!_.options?l:{...l,..._.options},U=r(R);E(U).items.push({key:R,value:N,relativeKey:U.relativeKey,options:q})}return Promise.all([...w.values()].map(_=>h(_))).then(_=>_.flat())},f={hasItem(c,l={}){c=Ur(c);const{relativeKey:h,driver:w}=r(c);return fr(w.hasItem,h,l)},getItem(c,l={}){c=Ur(c);const{relativeKey:h,driver:w}=r(c);return fr(w.getItem,h,l).then(E=>Pa(E))},getItems(c,l={}){return a(c,l,h=>h.driver.getItems?fr(h.driver.getItems,h.items.map(w=>({key:w.relativeKey,options:w.options})),l).then(w=>w.map(E=>({key:T3(h.base,E.key),value:Pa(E.value)}))):Promise.all(h.items.map(w=>fr(h.driver.getItem,w.relativeKey,w.options).then(E=>({key:w.key,value:Pa(E)})))))},getItemRaw(c,l={}){c=Ur(c);const{relativeKey:h,driver:w}=r(c);return w.getItemRaw?fr(w.getItemRaw,h,l):fr(w.getItem,h,l).then(E=>$3(E))},async setItem(c,l,h={}){if(l===void 0)return f.removeItem(c);c=Ur(c);const{relativeKey:w,driver:E}=r(c);E.setItem&&(await fr(E.setItem,w,Ga(l),h),E.watch||n("update",c))},async setItems(c,l){await a(c,l,async h=>{if(h.driver.setItems)return fr(h.driver.setItems,h.items.map(w=>({key:w.relativeKey,value:Ga(w.value),options:w.options})),l);h.driver.setItem&&await Promise.all(h.items.map(w=>fr(h.driver.setItem,w.relativeKey,Ga(w.value),w.options)))})},async setItemRaw(c,l,h={}){if(l===void 0)return f.removeItem(c,h);c=Ur(c);const{relativeKey:w,driver:E}=r(c);if(E.setItemRaw)await fr(E.setItemRaw,w,l,h);else if(E.setItem)await fr(E.setItem,w,P3(l),h);else return;E.watch||n("update",c)},async removeItem(c,l={}){typeof l=="boolean"&&(l={removeMeta:l}),c=Ur(c);const{relativeKey:h,driver:w}=r(c);w.removeItem&&(await fr(w.removeItem,h,l),(l.removeMeta||l.removeMata)&&await fr(w.removeItem,h+"$",l),w.watch||n("remove",c))},async getMeta(c,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),c=Ur(c);const{relativeKey:h,driver:w}=r(c),E=Object.create(null);if(w.getMeta&&Object.assign(E,await fr(w.getMeta,h,l)),!l.nativeOnly){const _=await fr(w.getItem,h+"$",l).then(A=>Pa(A));_&&typeof _=="object"&&(typeof _.atime=="string"&&(_.atime=new Date(_.atime)),typeof _.mtime=="string"&&(_.mtime=new Date(_.mtime)),Object.assign(E,_))}return E},setMeta(c,l,h={}){return this.setItem(c+"$",l,h)},removeMeta(c,l={}){return this.removeItem(c+"$",l)},async getKeys(c,l={}){c=$a(c);const h=i(c,!0);let w=[];const E=[];for(const _ of h){const A=await fr(_.driver.getKeys,_.relativeBase,l);for(const R of A){const N=_.mountpoint+Ur(R);w.some(q=>N.startsWith(q))||E.push(N)}w=[_.mountpoint,...w.filter(R=>!R.startsWith(_.mountpoint))]}return c?E.filter(_=>_.startsWith(c)&&_[_.length-1]!=="$"):E.filter(_=>_[_.length-1]!=="$")},async clear(c,l={}){c=$a(c),await Promise.all(i(c,!1).map(async h=>{if(h.driver.clear)return fr(h.driver.clear,h.relativeBase,l);if(h.driver.removeItem){const w=await h.driver.getKeys(h.relativeBase||"",l);return Promise.all(w.map(E=>h.driver.removeItem(E,l)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(c=>xd(c)))},async watch(c){return await s(),t.watchListeners.push(c),async()=>{t.watchListeners=t.watchListeners.filter(l=>l!==c),t.watchListeners.length===0&&await o()}},async unwatch(){t.watchListeners=[],await o()},mount(c,l){if(c=$a(c),c&&t.mounts[c])throw new Error(`already mounted at ${c}`);return c&&(t.mountpoints.push(c),t.mountpoints.sort((h,w)=>w.length-h.length)),t.mounts[c]=l,t.watching&&Promise.resolve(_d(l,n,c)).then(h=>{t.unwatch[c]=h}).catch(console.error),f},async unmount(c,l=!0){var h,w;c=$a(c),!(!c||!t.mounts[c])&&(t.watching&&c in t.unwatch&&((w=(h=t.unwatch)[c])==null||w.call(h),delete t.unwatch[c]),l&&await xd(t.mounts[c]),t.mountpoints=t.mountpoints.filter(E=>E!==c),delete t.mounts[c])},getMount(c=""){c=Ur(c)+":";const l=r(c);return{driver:l.driver,base:l.base}},getMounts(c="",l={}){return c=Ur(c),i(c,l.parents).map(w=>({driver:w.driver,base:w.mountpoint}))},keys:(c,l={})=>f.getKeys(c,l),get:(c,l={})=>f.getItem(c,l),set:(c,l,h={})=>f.setItem(c,l,h),has:(c,l={})=>f.hasItem(c,l),del:(c,l={})=>f.removeItem(c,l),remove:(c,l={})=>f.removeItem(c,l)};return f}function _d(e,t,r){return e.watch?e.watch((i,n)=>t(i,r+n)):()=>{}}async function xd(e){typeof e.dispose=="function"&&await fr(e.dispose)}function vs(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function H1(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const i=vs(r);return(n,s)=>i.then(o=>s(o.transaction(t,n).objectStore(t)))}let Cc;function ra(){return Cc||(Cc=H1("keyval-store","keyval")),Cc}function Ed(e,t=ra()){return t("readonly",r=>vs(r.get(e)))}function q3(e,t,r=ra()){return r("readwrite",i=>(i.put(t,e),vs(i.transaction)))}function B3(e,t=ra()){return t("readwrite",r=>(r.delete(e),vs(r.transaction)))}function U3(e=ra()){return e("readwrite",t=>(t.clear(),vs(t.transaction)))}function k3(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},vs(e.transaction)}function j3(e=ra()){return e("readonly",t=>{if(t.getAllKeys)return vs(t.getAllKeys());const r=[];return k3(t,i=>r.push(i.key)).then(()=>r)})}const z3=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),K3=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function Qs(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return K3(e)}catch{return e}}function ls(e){return typeof e=="string"?e:z3(e)||""}const V3="idb-keyval";var H3=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=n=>t+n;let i;return e.dbName&&e.storeName&&(i=H1(e.dbName,e.storeName)),{name:V3,options:e,async hasItem(n){return!(typeof await Ed(r(n),i)>"u")},async getItem(n){return await Ed(r(n),i)??null},setItem(n,s){return q3(r(n),s,i)},removeItem(n){return B3(r(n),i)},getKeys(){return j3(i)},clear(){return U3(i)}}};const W3="WALLET_CONNECT_V2_INDEXED_DB",G3="keyvaluestorage";let J3=class{constructor(){this.indexedDb=L3({driver:H3({dbName:W3,storeName:G3})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const r=await this.indexedDb.getItem(t);if(r!==null)return r}async setItem(t,r){await this.indexedDb.setItem(t,ls(r))}async removeItem(t){await this.indexedDb.removeItem(t)}};var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ja={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},e.prototype.setItem=function(r,i){this[r]=String(i)},e.prototype.removeItem=function(r){delete this[r]},e.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},e.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Tc<"u"&&Tc.localStorage?Ja.exports=Tc.localStorage:typeof window<"u"&&window.localStorage?Ja.exports=window.localStorage:Ja.exports=new t})();function Y3(e){var t;return[e[0],Qs((t=e[1])!=null?t:"")]}let Z3=class{constructor(){this.localStorage=Ja.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Y3)}async getItem(t){const r=this.localStorage.getItem(t);if(r!==null)return Qs(r)}async setItem(t,r){this.localStorage.setItem(t,ls(r))}async removeItem(t){this.localStorage.removeItem(t)}};const X3="wc_storage_version",Sd=1,Q3=async(e,t,r)=>{const i=X3,n=await t.getItem(i);if(n&&n>=Sd){r(t);return}const s=await e.getKeys();if(!s.length){r(t);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const f=a.toLowerCase();if(f.includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect")){const c=await e.getItem(a);await t.setItem(a,c),o.push(a)}}await t.setItem(i,Sd),r(t),e6(e,o)},e6=async(e,t)=>{t.length&&t.forEach(async r=>{await e.removeItem(r)})};let t6=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const t=new Z3;this.storage=t;try{const r=new J3;Q3(t,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,r){return await this.initialize(),this.storage.setItem(t,r)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),t())},20)})}};var Nc,Md;function r6(){if(Md)return Nc;Md=1;function e(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Nc=t;function t(r,i,n){var s=n&&n.stringify||e,o=1;if(typeof r=="object"&&r!==null){var a=i.length+o;if(a===1)return r;var f=new Array(a);f[0]=s(r);for(var c=1;c<a;c++)f[c]=s(i[c]);return f.join(" ")}if(typeof r!="string")return r;var l=i.length;if(l===0)return r;for(var h="",w=1-o,E=-1,_=r&&r.length||0,A=0;A<_;){if(r.charCodeAt(A)===37&&A+1<_){switch(E=E>-1?E:0,r.charCodeAt(A+1)){case 100:case 102:if(w>=l||i[w]==null)break;E<A&&(h+=r.slice(E,A)),h+=Number(i[w]),E=A+2,A++;break;case 105:if(w>=l||i[w]==null)break;E<A&&(h+=r.slice(E,A)),h+=Math.floor(Number(i[w])),E=A+2,A++;break;case 79:case 111:case 106:if(w>=l||i[w]===void 0)break;E<A&&(h+=r.slice(E,A));var R=typeof i[w];if(R==="string"){h+="'"+i[w]+"'",E=A+2,A++;break}if(R==="function"){h+=i[w].name||"<anonymous>",E=A+2,A++;break}h+=s(i[w]),E=A+2,A++;break;case 115:if(w>=l)break;E<A&&(h+=r.slice(E,A)),h+=String(i[w]),E=A+2,A++;break;case 37:E<A&&(h+=r.slice(E,A)),h+="%",E=A+2,A++,w--;break}++w}++A}return E===-1?r:(E<_&&(h+=r.slice(E)),h)}return Nc}var Fc,Ad;function i6(){if(Ad)return Fc;Ad=1;const e=r6();Fc=n;const t=F().console||{},r={mapHttpRequest:_,mapHttpResponse:_,wrapRequestSerializer:A,wrapResponseSerializer:A,wrapErrorSerializer:A,req:_,res:_,err:w};function i(L,K){return Array.isArray(L)?L.filter(function(W){return W!=="!stdSerializers.err"}):L===!0?Object.keys(K):!1}function n(L){L=L||{},L.browser=L.browser||{};const K=L.browser.transmit;if(K&&typeof K.send!="function")throw Error("pino: transmit option must have a send function");const V=L.browser.write||t;L.browser.write&&(L.browser.asObject=!0);const W=L.serializers||{},Q=i(L.browser.serialize,W);let C=L.browser.serialize;Array.isArray(L.browser.serialize)&&L.browser.serialize.indexOf("!stdSerializers.err")>-1&&(C=!1);const g=["error","fatal","warn","info","debug","trace"];typeof V=="function"&&(V.error=V.fatal=V.warn=V.info=V.debug=V.trace=V),L.enabled===!1&&(L.level="silent");const p=L.level||"info",u=Object.create(V);u.log||(u.log=R),Object.defineProperty(u,"levelVal",{get:v}),Object.defineProperty(u,"level",{get:y,set:M});const d={transmit:K,serialize:Q,asObject:L.browser.asObject,levels:g,timestamp:E(L)};u.levels=n.levels,u.level=p,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=R,u.serializers=W,u._serialize=Q,u._stdErrSerialize=C,u.child=x,K&&(u._logEvent=h());function v(){return this.level==="silent"?1/0:this.levels.values[this.level]}function y(){return this._level}function M(b){if(b!=="silent"&&!this.levels.values[b])throw Error("unknown level "+b);this._level=b,s(d,u,"error","log"),s(d,u,"fatal","error"),s(d,u,"warn","error"),s(d,u,"info","log"),s(d,u,"debug","log"),s(d,u,"trace","log")}function x(b,S){if(!b)throw new Error("missing bindings for child Pino");S=S||{},Q&&b.serializers&&(S.serializers=b.serializers);const m=S.serializers;if(Q&&m){var $=Object.assign({},W,m),ee=L.browser.serialize===!0?Object.keys($):Q;delete b.serializers,f([b],ee,$,this._stdErrSerialize)}function O(H){this._childLevel=(H._childLevel|0)+1,this.error=c(H,b,"error"),this.fatal=c(H,b,"fatal"),this.warn=c(H,b,"warn"),this.info=c(H,b,"info"),this.debug=c(H,b,"debug"),this.trace=c(H,b,"trace"),$&&(this.serializers=$,this._serialize=ee),K&&(this._logEvent=h([].concat(H._logEvent.bindings,b)))}return O.prototype=this,new O(this)}return u}n.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},n.stdSerializers=r,n.stdTimeFunctions=Object.assign({},{nullTime:N,epochTime:q,unixTime:U,isoTime:P});function s(L,K,V,W){const Q=Object.getPrototypeOf(K);K[V]=K.levelVal>K.levels.values[V]?R:Q[V]?Q[V]:t[V]||t[W]||R,o(L,K,V)}function o(L,K,V){!L.transmit&&K[V]===R||(K[V]=function(W){return function(){const C=L.timestamp(),g=new Array(arguments.length),p=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var u=0;u<g.length;u++)g[u]=arguments[u];if(L.serialize&&!L.asObject&&f(g,this._serialize,this.serializers,this._stdErrSerialize),L.asObject?W.call(p,a(this,V,g,C)):W.apply(p,g),L.transmit){const d=L.transmit.level||K.level,v=n.levels.values[d],y=n.levels.values[V];if(y<v)return;l(this,{ts:C,methodLevel:V,methodValue:y,transmitValue:n.levels.values[L.transmit.level||K.level],send:L.transmit.send,val:K.levelVal},g)}}}(K[V]))}function a(L,K,V,W){L._serialize&&f(V,L._serialize,L.serializers,L._stdErrSerialize);const Q=V.slice();let C=Q[0];const g={};W&&(g.time=W),g.level=n.levels.values[K];let p=(L._childLevel|0)+1;if(p<1&&(p=1),C!==null&&typeof C=="object"){for(;p--&&typeof Q[0]=="object";)Object.assign(g,Q.shift());C=Q.length?e(Q.shift(),Q):void 0}else typeof C=="string"&&(C=e(Q.shift(),Q));return C!==void 0&&(g.msg=C),g}function f(L,K,V,W){for(const Q in L)if(W&&L[Q]instanceof Error)L[Q]=n.stdSerializers.err(L[Q]);else if(typeof L[Q]=="object"&&!Array.isArray(L[Q]))for(const C in L[Q])K&&K.indexOf(C)>-1&&C in V&&(L[Q][C]=V[C](L[Q][C]))}function c(L,K,V){return function(){const W=new Array(1+arguments.length);W[0]=K;for(var Q=1;Q<W.length;Q++)W[Q]=arguments[Q-1];return L[V].apply(this,W)}}function l(L,K,V){const W=K.send,Q=K.ts,C=K.methodLevel,g=K.methodValue,p=K.val,u=L._logEvent.bindings;f(V,L._serialize||Object.keys(L.serializers),L.serializers,L._stdErrSerialize===void 0?!0:L._stdErrSerialize),L._logEvent.ts=Q,L._logEvent.messages=V.filter(function(d){return u.indexOf(d)===-1}),L._logEvent.level.label=C,L._logEvent.level.value=g,W(C,L._logEvent,p),L._logEvent=h(u)}function h(L){return{ts:0,messages:[],bindings:L||[],level:{label:"",value:0}}}function w(L){const K={type:L.constructor.name,msg:L.message,stack:L.stack};for(const V in L)K[V]===void 0&&(K[V]=L[V]);return K}function E(L){return typeof L.timestamp=="function"?L.timestamp:L.timestamp===!1?N:q}function _(){return{}}function A(L){return L}function R(){}function N(){return!1}function q(){return Date.now()}function U(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function F(){function L(K){return typeof K<"u"&&K}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return L(self)||L(window)||L(this)||{}}}return Fc}var Us=i6();const jf=no(Us),n6={level:"info"},ia="custom_context",zl=1e3*1024;let s6=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Id=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const r=new s6(t);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let r=this.head;for(;r!==null;)t.push(r.value),r=r.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const r=t.value;return t=t.next,{done:!1,value:r}}}}},W1=class{constructor(t,r=zl){this.level=t??"error",this.levelValue=Us.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Id(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,r){r===Us.levels.values.error?console.error(t):r===Us.levels.values.warn?console.warn(t):r===Us.levels.values.debug?console.debug(t):r===Us.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(ls({timestamp:new Date().toISOString(),log:t}));const r=typeof t=="string"?JSON.parse(t).level:t.level;r>=this.levelValue&&this.forwardToConsole(t,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Id(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const r=this.getLogArray();return r.push(ls({extraMetadata:t})),new Blob(r,{type:"application/json"})}};class o6{constructor(t,r=zl){this.baseChunkLogger=new W1(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const r=URL.createObjectURL(this.logsToBlob(t)),i=document.createElement("a");i.href=r,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}}let a6=class{constructor(t,r=zl){this.baseChunkLogger=new W1(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}};var f6=Object.defineProperty,c6=Object.defineProperties,u6=Object.getOwnPropertyDescriptors,Dd=Object.getOwnPropertySymbols,l6=Object.prototype.hasOwnProperty,h6=Object.prototype.propertyIsEnumerable,Od=(e,t,r)=>t in e?f6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mf=(e,t)=>{for(var r in t||(t={}))l6.call(t,r)&&Od(e,r,t[r]);if(Dd)for(var r of Dd(t))h6.call(t,r)&&Od(e,r,t[r]);return e},yf=(e,t)=>c6(e,u6(t));function Kl(e){return yf(mf({},e),{level:(e==null?void 0:e.level)||n6.level})}function d6(e,t=ia){return e[t]||""}function p6(e,t,r=ia){return e[r]=t,e}function jr(e,t=ia){let r="";return typeof e.bindings>"u"?r=d6(e,t):r=e.bindings().context||"",r}function g6(e,t,r=ia){const i=jr(e,r);return i.trim()?`${i}/${t}`:t}function Tr(e,t,r=ia){const i=g6(e,t,r),n=e.child({context:i});return p6(n,i,r)}function b6(e){var t,r;const i=new o6((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:jf(yf(mf({},e.opts),{level:"trace",browser:yf(mf({},(r=e.opts)==null?void 0:r.browser),{write:n=>i.write(n)})})),chunkLoggerController:i}}function v6(e){var t;const r=new a6((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:jf(yf(mf({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}function m6(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?b6(e):v6(e)}let y6=class extends bs{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}},w6=class extends bs{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}};class _6{constructor(t,r){this.logger=t,this.core=r}}let x6=class extends bs{constructor(t,r){super(),this.relayer=t,this.logger=r}};class E6 extends bs{constructor(t){super()}}let S6=class{constructor(t,r,i,n){this.core=t,this.logger=r,this.name=i}},M6=class extends bs{constructor(t,r){super(),this.relayer=t,this.logger=r}},A6=class extends bs{constructor(t,r){super(),this.core=t,this.logger=r}},I6=class{constructor(t,r,i){this.core=t,this.logger=r,this.store=i}},D6=class{constructor(t,r){this.projectId=t,this.logger=r}},O6=class{constructor(t,r,i){this.core=t,this.logger=r,this.telemetryEnabled=i}},P6=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},$6=class{constructor(t){this.client=t}};function R6(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function G1(e,...t){if(!R6(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Pd(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function C6(e,t){G1(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Cs=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lc=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function T6(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function J1(e){return typeof e=="string"&&(e=T6(e)),G1(e),e}let N6=class{clone(){return this._cloneInto()}};function F6(e){const t=i=>e().update(J1(i)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Y1(e=32){if(Cs&&typeof Cs.getRandomValues=="function")return Cs.getRandomValues(new Uint8Array(e));if(Cs&&typeof Cs.randomBytes=="function")return Cs.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function L6(e,t,r,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),f=i?4:0,c=i?0:4;e.setUint32(t+f,o,i),e.setUint32(t+c,a,i)}class q6 extends N6{constructor(t,r,i,n){super(),this.blockLen=t,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Lc(this.buffer)}update(t){Pd(this);const{view:r,buffer:i,blockLen:n}=this;t=J1(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);if(a===n){const f=Lc(t);for(;n<=s-o;o+=n)this.process(f,o);continue}i.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Pd(this),C6(t,this),this.finished=!0;const{buffer:r,view:i,blockLen:n,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let h=o;h<n;h++)r[h]=0;L6(i,n-8,BigInt(this.length*8),s),this.process(i,0);const a=Lc(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=f/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,l[h],s)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return t.length=n,t.pos=a,t.finished=s,t.destroyed=o,n%r&&t.buffer.set(i),t}}const Ra=BigInt(2**32-1),rl=BigInt(32);function Z1(e,t=!1){return t?{h:Number(e&Ra),l:Number(e>>rl&Ra)}:{h:Number(e>>rl&Ra)|0,l:Number(e&Ra)|0}}function B6(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:s,l:o}=Z1(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}const U6=(e,t)=>BigInt(e>>>0)<<rl|BigInt(t>>>0),k6=(e,t,r)=>e>>>r,j6=(e,t,r)=>e<<32-r|t>>>r,z6=(e,t,r)=>e>>>r|t<<32-r,K6=(e,t,r)=>e<<32-r|t>>>r,V6=(e,t,r)=>e<<64-r|t>>>r-32,H6=(e,t,r)=>e>>>r-32|t<<64-r,W6=(e,t)=>t,G6=(e,t)=>e,J6=(e,t,r)=>e<<r|t>>>32-r,Y6=(e,t,r)=>t<<r|e>>>32-r,Z6=(e,t,r)=>t<<r-32|e>>>64-r,X6=(e,t,r)=>e<<r-32|t>>>64-r;function Q6(e,t,r,i){const n=(t>>>0)+(i>>>0);return{h:e+r+(n/2**32|0)|0,l:n|0}}const e4=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),t4=(e,t,r,i)=>t+r+i+(e/2**32|0)|0,r4=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),i4=(e,t,r,i,n)=>t+r+i+n+(e/2**32|0)|0,n4=(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0),s4=(e,t,r,i,n,s)=>t+r+i+n+s+(e/2**32|0)|0,nt={fromBig:Z1,split:B6,toBig:U6,shrSH:k6,shrSL:j6,rotrSH:z6,rotrSL:K6,rotrBH:V6,rotrBL:H6,rotr32H:W6,rotr32L:G6,rotlSH:J6,rotlSL:Y6,rotlBH:Z6,rotlBL:X6,add:Q6,add3L:e4,add3H:t4,add4L:r4,add4H:i4,add5H:s4,add5L:n4},[o4,a4]=nt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),xn=new Uint32Array(80),En=new Uint32Array(80);let f4=class extends q6{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:r,Bh:i,Bl:n,Ch:s,Cl:o,Dh:a,Dl:f,Eh:c,El:l,Fh:h,Fl:w,Gh:E,Gl:_,Hh:A,Hl:R}=this;return[t,r,i,n,s,o,a,f,c,l,h,w,E,_,A,R]}set(t,r,i,n,s,o,a,f,c,l,h,w,E,_,A,R){this.Ah=t|0,this.Al=r|0,this.Bh=i|0,this.Bl=n|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=f|0,this.Eh=c|0,this.El=l|0,this.Fh=h|0,this.Fl=w|0,this.Gh=E|0,this.Gl=_|0,this.Hh=A|0,this.Hl=R|0}process(t,r){for(let U=0;U<16;U++,r+=4)xn[U]=t.getUint32(r),En[U]=t.getUint32(r+=4);for(let U=16;U<80;U++){const P=xn[U-15]|0,F=En[U-15]|0,L=nt.rotrSH(P,F,1)^nt.rotrSH(P,F,8)^nt.shrSH(P,F,7),K=nt.rotrSL(P,F,1)^nt.rotrSL(P,F,8)^nt.shrSL(P,F,7),V=xn[U-2]|0,W=En[U-2]|0,Q=nt.rotrSH(V,W,19)^nt.rotrBH(V,W,61)^nt.shrSH(V,W,6),C=nt.rotrSL(V,W,19)^nt.rotrBL(V,W,61)^nt.shrSL(V,W,6),g=nt.add4L(K,C,En[U-7],En[U-16]),p=nt.add4H(g,L,Q,xn[U-7],xn[U-16]);xn[U]=p|0,En[U]=g|0}let{Ah:i,Al:n,Bh:s,Bl:o,Ch:a,Cl:f,Dh:c,Dl:l,Eh:h,El:w,Fh:E,Fl:_,Gh:A,Gl:R,Hh:N,Hl:q}=this;for(let U=0;U<80;U++){const P=nt.rotrSH(h,w,14)^nt.rotrSH(h,w,18)^nt.rotrBH(h,w,41),F=nt.rotrSL(h,w,14)^nt.rotrSL(h,w,18)^nt.rotrBL(h,w,41),L=h&E^~h&A,K=w&_^~w&R,V=nt.add5L(q,F,K,a4[U],En[U]),W=nt.add5H(V,N,P,L,o4[U],xn[U]),Q=V|0,C=nt.rotrSH(i,n,28)^nt.rotrBH(i,n,34)^nt.rotrBH(i,n,39),g=nt.rotrSL(i,n,28)^nt.rotrBL(i,n,34)^nt.rotrBL(i,n,39),p=i&s^i&a^s&a,u=n&o^n&f^o&f;N=A|0,q=R|0,A=E|0,R=_|0,E=h|0,_=w|0,{h,l:w}=nt.add(c|0,l|0,W|0,Q|0),c=a|0,l=f|0,a=s|0,f=o|0,s=i|0,o=n|0;const d=nt.add3L(Q,g,u);i=nt.add3H(d,W,C,p),n=d|0}({h:i,l:n}=nt.add(this.Ah|0,this.Al|0,i|0,n|0)),{h:s,l:o}=nt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:f}=nt.add(this.Ch|0,this.Cl|0,a|0,f|0),{h:c,l}=nt.add(this.Dh|0,this.Dl|0,c|0,l|0),{h,l:w}=nt.add(this.Eh|0,this.El|0,h|0,w|0),{h:E,l:_}=nt.add(this.Fh|0,this.Fl|0,E|0,_|0),{h:A,l:R}=nt.add(this.Gh|0,this.Gl|0,A|0,R|0),{h:N,l:q}=nt.add(this.Hh|0,this.Hl|0,N|0,q|0),this.set(i,n,s,o,a,f,c,l,h,w,E,_,A,R,N,q)}roundClean(){xn.fill(0),En.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const c4=F6(()=>new f4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vl=BigInt(0),X1=BigInt(1),u4=BigInt(2);function Hl(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Wl(e){if(!Hl(e))throw new Error("Uint8Array expected")}function qc(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const l4=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Gl(e){Wl(e);let t="";for(let r=0;r<e.length;r++)t+=l4[e[r]];return t}function Q1(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Vl:BigInt("0x"+e)}const nn={_0:48,_9:57,A:65,F:70,a:97,f:102};function $d(e){if(e>=nn._0&&e<=nn._9)return e-nn._0;if(e>=nn.A&&e<=nn.F)return e-(nn.A-10);if(e>=nn.a&&e<=nn.f)return e-(nn.a-10)}function eb(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){const o=$d(e.charCodeAt(s)),a=$d(e.charCodeAt(s+1));if(o===void 0||a===void 0){const f=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+s)}i[n]=o*16+a}return i}function h4(e){return Q1(Gl(e))}function Ya(e){return Wl(e),Q1(Gl(Uint8Array.from(e).reverse()))}function tb(e,t){return eb(e.toString(16).padStart(t*2,"0"))}function il(e,t){return tb(e,t).reverse()}function sn(e,t,r){let i;if(typeof t=="string")try{i=eb(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(Hl(t))i=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const n=i.length;if(typeof r=="number"&&n!==r)throw new Error(e+" of length "+r+" expected, got "+n);return i}function Rd(...e){let t=0;for(let i=0;i<e.length;i++){const n=e[i];Wl(n),t+=n.length}const r=new Uint8Array(t);for(let i=0,n=0;i<e.length;i++){const s=e[i];r.set(s,n),n+=s.length}return r}const Bc=e=>typeof e=="bigint"&&Vl<=e;function d4(e,t,r){return Bc(e)&&Bc(t)&&Bc(r)&&t<=e&&e<r}function yo(e,t,r,i){if(!d4(t,r,i))throw new Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}function p4(e){let t;for(t=0;e>Vl;e>>=X1,t+=1);return t}const g4=e=>(u4<<BigInt(e-1))-X1,b4={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Hl(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Jl(e,t,r={}){const i=(n,s,o)=>{const a=b4[s];if(typeof a!="function")throw new Error("invalid validator function");const f=e[n];if(!(o&&f===void 0)&&!a(f,e))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+f)};for(const[n,s]of Object.entries(t))i(n,s,!1);for(const[n,s]of Object.entries(r))i(n,s,!0);return e}function Cd(e){const t=new WeakMap;return(r,...i)=>{const n=t.get(r);if(n!==void 0)return n;const s=e(r,...i);return t.set(r,s),s}}const lr=BigInt(0),Gt=BigInt(1),ns=BigInt(2),v4=BigInt(3),nl=BigInt(4),Td=BigInt(5),Nd=BigInt(8);function ir(e,t){const r=e%t;return r>=lr?r:t+r}function m4(e,t,r){if(t<lr)throw new Error("invalid exponent, negatives unsupported");if(r<=lr)throw new Error("invalid modulus");if(r===Gt)return lr;let i=Gt;for(;t>lr;)t&Gt&&(i=i*e%r),e=e*e%r,t>>=Gt;return i}function Bi(e,t,r){let i=e;for(;t-- >lr;)i*=i,i%=r;return i}function Fd(e,t){if(e===lr)throw new Error("invert: expected non-zero number");if(t<=lr)throw new Error("invert: expected positive modulus, got "+t);let r=ir(e,t),i=t,n=lr,s=Gt;for(;r!==lr;){const o=i/r,a=i%r,f=n-s*o;i=r,r=a,n=s,s=f}if(i!==Gt)throw new Error("invert: does not exist");return ir(n,t)}function y4(e){const t=(e-Gt)/ns;let r,i,n;for(r=e-Gt,i=0;r%ns===lr;r/=ns,i++);for(n=ns;n<e&&m4(n,t,e)!==e-Gt;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){const o=(e+Gt)/nl;return function(a,f){const c=a.pow(f,o);if(!a.eql(a.sqr(c),f))throw new Error("Cannot find square root");return c}}const s=(r+Gt)/ns;return function(o,a){if(o.pow(a,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let f=i,c=o.pow(o.mul(o.ONE,n),r),l=o.pow(a,s),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let w=1;for(let _=o.sqr(h);w<f&&!o.eql(_,o.ONE);w++)_=o.sqr(_);const E=o.pow(c,Gt<<BigInt(f-w-1));c=o.sqr(E),l=o.mul(l,E),h=o.mul(h,c),f=w}return l}}function w4(e){if(e%nl===v4){const t=(e+Gt)/nl;return function(r,i){const n=r.pow(i,t);if(!r.eql(r.sqr(n),i))throw new Error("Cannot find square root");return n}}if(e%Nd===Td){const t=(e-Td)/Nd;return function(r,i){const n=r.mul(i,ns),s=r.pow(n,t),o=r.mul(i,s),a=r.mul(r.mul(o,ns),s),f=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(f),i))throw new Error("Cannot find square root");return f}}return y4(e)}const _4=(e,t)=>(ir(e,t)&Gt)===Gt,x4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function E4(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=x4.reduce((i,n)=>(i[n]="function",i),t);return Jl(e,r)}function S4(e,t,r){if(r<lr)throw new Error("invalid exponent, negatives unsupported");if(r===lr)return e.ONE;if(r===Gt)return t;let i=e.ONE,n=t;for(;r>lr;)r&Gt&&(i=e.mul(i,n)),n=e.sqr(n),r>>=Gt;return i}function M4(e,t){const r=new Array(t.length),i=t.reduce((s,o,a)=>e.is0(o)?s:(r[a]=s,e.mul(s,o)),e.ONE),n=e.inv(i);return t.reduceRight((s,o,a)=>e.is0(o)?s:(r[a]=e.mul(s,r[a]),e.mul(s,o)),n),r}function rb(e,t){const r=t!==void 0?t:e.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function ib(e,t,r=!1,i={}){if(e<=lr)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:n,nByteLength:s}=rb(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:n,BYTES:s,MASK:g4(n),ZERO:lr,ONE:Gt,create:f=>ir(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return lr<=f&&f<e},is0:f=>f===lr,isOdd:f=>(f&Gt)===Gt,neg:f=>ir(-f,e),eql:(f,c)=>f===c,sqr:f=>ir(f*f,e),add:(f,c)=>ir(f+c,e),sub:(f,c)=>ir(f-c,e),mul:(f,c)=>ir(f*c,e),pow:(f,c)=>S4(a,f,c),div:(f,c)=>ir(f*Fd(c,e),e),sqrN:f=>f*f,addN:(f,c)=>f+c,subN:(f,c)=>f-c,mulN:(f,c)=>f*c,inv:f=>Fd(f,e),sqrt:i.sqrt||(f=>(o||(o=w4(e)),o(a,f))),invertBatch:f=>M4(a,f),cmov:(f,c,l)=>l?c:f,toBytes:f=>r?il(f,s):tb(f,s),fromBytes:f=>{if(f.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+f.length);return r?Ya(f):h4(f)}});return Object.freeze(a)}const Ld=BigInt(0),Ca=BigInt(1);function Uc(e,t){const r=t.negate();return e?r:t}function nb(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function kc(e,t){nb(e,t);const r=Math.ceil(t/e)+1,i=2**(e-1);return{windows:r,windowSize:i}}function A4(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,i)=>{if(!(r instanceof t))throw new Error("invalid point at index "+i)})}function I4(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,i)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+i)})}const jc=new WeakMap,sb=new WeakMap;function zc(e){return sb.get(e)||1}function D4(e,t){return{constTimeNegate:Uc,hasPrecomputes(r){return zc(r)!==1},unsafeLadder(r,i,n=e.ZERO){let s=r;for(;i>Ld;)i&Ca&&(n=n.add(s)),s=s.double(),i>>=Ca;return n},precomputeWindow(r,i){const{windows:n,windowSize:s}=kc(i,t),o=[];let a=r,f=a;for(let c=0;c<n;c++){f=a,o.push(f);for(let l=1;l<s;l++)f=f.add(a),o.push(f);a=f.double()}return o},wNAF(r,i,n){const{windows:s,windowSize:o}=kc(r,t);let a=e.ZERO,f=e.BASE;const c=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let w=0;w<s;w++){const E=w*o;let _=Number(n&c);n>>=h,_>o&&(_-=l,n+=Ca);const A=E,R=E+Math.abs(_)-1,N=w%2!==0,q=_<0;_===0?f=f.add(Uc(N,i[A])):a=a.add(Uc(q,i[R]))}return{p:a,f}},wNAFUnsafe(r,i,n,s=e.ZERO){const{windows:o,windowSize:a}=kc(r,t),f=BigInt(2**r-1),c=2**r,l=BigInt(r);for(let h=0;h<o;h++){const w=h*a;if(n===Ld)break;let E=Number(n&f);if(n>>=l,E>a&&(E-=c,n+=Ca),E===0)continue;let _=i[w+Math.abs(E)-1];E<0&&(_=_.negate()),s=s.add(_)}return s},getPrecomputes(r,i,n){let s=jc.get(i);return s||(s=this.precomputeWindow(i,r),r!==1&&jc.set(i,n(s))),s},wNAFCached(r,i,n){const s=zc(r);return this.wNAF(s,this.getPrecomputes(s,r,n),i)},wNAFCachedUnsafe(r,i,n,s){const o=zc(r);return o===1?this.unsafeLadder(r,i,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,n),i,s)},setWindowSize(r,i){nb(i,t),sb.set(r,i),jc.delete(r)}}}function O4(e,t,r,i){if(A4(r,e),I4(i,t),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const n=e.ZERO,s=p4(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,f=new Array(a+1).fill(n),c=Math.floor((t.BITS-1)/o)*o;let l=n;for(let h=c;h>=0;h-=o){f.fill(n);for(let E=0;E<i.length;E++){const _=i[E],A=Number(_>>BigInt(h)&BigInt(a));f[A]=f[A].add(r[E])}let w=n;for(let E=f.length-1,_=n;E>0;E--)_=_.add(f[E]),w=w.add(_);if(l=l.add(w),h!==0)for(let E=0;E<o;E++)l=l.double()}return l}function P4(e){return E4(e.Fp),Jl(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rb(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const Ei=BigInt(0),Br=BigInt(1),Ta=BigInt(2),$4=BigInt(8),R4={zip215:!0};function C4(e){const t=P4(e);return Jl(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function T4(e){const t=C4(e),{Fp:r,n:i,prehash:n,hash:s,randomBytes:o,nByteLength:a,h:f}=t,c=Ta<<BigInt(a*8)-Br,l=r.create,h=ib(t.n,t.nBitLength),w=t.uvRatio||((d,v)=>{try{return{isValid:!0,value:r.sqrt(d*r.inv(v))}}catch{return{isValid:!1,value:Ei}}}),E=t.adjustScalarBytes||(d=>d),_=t.domain||((d,v,y)=>{if(qc("phflag",y),v.length||y)throw new Error("Contexts/pre-hash are not supported");return d});function A(d,v){yo("coordinate "+d,v,Ei,c)}function R(d){if(!(d instanceof U))throw new Error("ExtendedPoint expected")}const N=Cd((d,v)=>{const{ex:y,ey:M,ez:x}=d,b=d.is0();v==null&&(v=b?$4:r.inv(x));const S=l(y*v),m=l(M*v),$=l(x*v);if(b)return{x:Ei,y:Br};if($!==Br)throw new Error("invZ was invalid");return{x:S,y:m}}),q=Cd(d=>{const{a:v,d:y}=t;if(d.is0())throw new Error("bad point: ZERO");const{ex:M,ey:x,ez:b,et:S}=d,m=l(M*M),$=l(x*x),ee=l(b*b),O=l(ee*ee),H=l(m*v),X=l(ee*l(H+$)),te=l(O+l(y*l(m*$)));if(X!==te)throw new Error("bad point: equation left != right (1)");const ne=l(M*x),ge=l(b*S);if(ne!==ge)throw new Error("bad point: equation left != right (2)");return!0});class U{constructor(v,y,M,x){this.ex=v,this.ey=y,this.ez=M,this.et=x,A("x",v),A("y",y),A("z",M),A("t",x),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof U)throw new Error("extended point not allowed");const{x:y,y:M}=v||{};return A("x",y),A("y",M),new U(y,M,Br,l(y*M))}static normalizeZ(v){const y=r.invertBatch(v.map(M=>M.ez));return v.map((M,x)=>M.toAffine(y[x])).map(U.fromAffine)}static msm(v,y){return O4(U,h,v,y)}_setWindowSize(v){L.setWindowSize(this,v)}assertValidity(){q(this)}equals(v){R(v);const{ex:y,ey:M,ez:x}=this,{ex:b,ey:S,ez:m}=v,$=l(y*m),ee=l(b*x),O=l(M*m),H=l(S*x);return $===ee&&O===H}is0(){return this.equals(U.ZERO)}negate(){return new U(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:v}=t,{ex:y,ey:M,ez:x}=this,b=l(y*y),S=l(M*M),m=l(Ta*l(x*x)),$=l(v*b),ee=y+M,O=l(l(ee*ee)-b-S),H=$+S,X=H-m,te=$-S,ne=l(O*X),ge=l(H*te),ve=l(O*te),B=l(X*H);return new U(ne,ge,B,ve)}add(v){R(v);const{a:y,d:M}=t,{ex:x,ey:b,ez:S,et:m}=this,{ex:$,ey:ee,ez:O,et:H}=v;if(y===BigInt(-1)){const ue=l((b-x)*(ee+$)),le=l((b+x)*(ee-$)),ie=l(le-ue);if(ie===Ei)return this.double();const ye=l(S*Ta*H),pe=l(m*Ta*O),he=pe+ye,_e=le+ue,Ae=pe-ye,we=l(he*ie),De=l(_e*Ae),Fe=l(he*Ae),Se=l(ie*_e);return new U(we,De,Se,Fe)}const X=l(x*$),te=l(b*ee),ne=l(m*M*H),ge=l(S*O),ve=l((x+b)*($+ee)-X-te),B=ge-ne,z=ge+ne,G=l(te-y*X),Z=l(ve*B),oe=l(z*G),ae=l(ve*G),ce=l(B*z);return new U(Z,oe,ce,ae)}subtract(v){return this.add(v.negate())}wNAF(v){return L.wNAFCached(this,v,U.normalizeZ)}multiply(v){const y=v;yo("scalar",y,Br,i);const{p:M,f:x}=this.wNAF(y);return U.normalizeZ([M,x])[0]}multiplyUnsafe(v,y=U.ZERO){const M=v;return yo("scalar",M,Ei,i),M===Ei?F:this.is0()||M===Br?this:L.wNAFCachedUnsafe(this,M,U.normalizeZ,y)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return L.unsafeLadder(this,i).is0()}toAffine(v){return N(this,v)}clearCofactor(){const{h:v}=t;return v===Br?this:this.multiplyUnsafe(v)}static fromHex(v,y=!1){const{d:M,a:x}=t,b=r.BYTES;v=sn("pointHex",v,b),qc("zip215",y);const S=v.slice(),m=v[b-1];S[b-1]=m&-129;const $=Ya(S),ee=y?c:r.ORDER;yo("pointHex.y",$,Ei,ee);const O=l($*$),H=l(O-Br),X=l(M*O-x);let{isValid:te,value:ne}=w(H,X);if(!te)throw new Error("Point.fromHex: invalid y coordinate");const ge=(ne&Br)===Br,ve=(m&128)!==0;if(!y&&ne===Ei&&ve)throw new Error("Point.fromHex: x=0 and x_0=1");return ve!==ge&&(ne=l(-ne)),U.fromAffine({x:ne,y:$})}static fromPrivateKey(v){return W(v).point}toRawBytes(){const{x:v,y}=this.toAffine(),M=il(y,r.BYTES);return M[M.length-1]|=v&Br?128:0,M}toHex(){return Gl(this.toRawBytes())}}U.BASE=new U(t.Gx,t.Gy,Br,l(t.Gx*t.Gy)),U.ZERO=new U(Ei,Br,Br,Ei);const{BASE:P,ZERO:F}=U,L=D4(U,a*8);function K(d){return ir(d,i)}function V(d){return K(Ya(d))}function W(d){const v=r.BYTES;d=sn("private key",d,v);const y=sn("hashed private key",s(d),2*v),M=E(y.slice(0,v)),x=y.slice(v,2*v),b=V(M),S=P.multiply(b),m=S.toRawBytes();return{head:M,prefix:x,scalar:b,point:S,pointBytes:m}}function Q(d){return W(d).pointBytes}function C(d=new Uint8Array,...v){const y=Rd(...v);return V(s(_(y,sn("context",d),!!n)))}function g(d,v,y={}){d=sn("message",d),n&&(d=n(d));const{prefix:M,scalar:x,pointBytes:b}=W(v),S=C(y.context,M,d),m=P.multiply(S).toRawBytes(),$=C(y.context,m,b,d),ee=K(S+$*x);yo("signature.s",ee,Ei,i);const O=Rd(m,il(ee,r.BYTES));return sn("result",O,r.BYTES*2)}const p=R4;function u(d,v,y,M=p){const{context:x,zip215:b}=M,S=r.BYTES;d=sn("signature",d,2*S),v=sn("message",v),y=sn("publicKey",y,S),b!==void 0&&qc("zip215",b),n&&(v=n(v));const m=Ya(d.slice(S,2*S));let $,ee,O;try{$=U.fromHex(y,b),ee=U.fromHex(d.slice(0,S),b),O=P.multiplyUnsafe(m)}catch{return!1}if(!b&&$.isSmallOrder())return!1;const H=C(x,ee.toRawBytes(),$.toRawBytes(),v);return ee.add($.multiplyUnsafe(H)).subtract(O).clearCofactor().equals(U.ZERO)}return P._setWindowSize(8),{CURVE:t,getPublicKey:Q,sign:g,verify:u,ExtendedPoint:U,utils:{getExtendedPublicKey:W,randomPrivateKey:()=>o(r.BYTES),precompute(d=8,v=U.BASE){return v._setWindowSize(d),v.multiply(BigInt(3)),v}}}}BigInt(0),BigInt(1);const Yl=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),qd=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const N4=BigInt(1),Bd=BigInt(2);BigInt(3);const F4=BigInt(5),L4=BigInt(8);function q4(e){const t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=Yl,o=e*e%s*e%s,a=Bi(o,Bd,s)*o%s,f=Bi(a,N4,s)*e%s,c=Bi(f,F4,s)*f%s,l=Bi(c,t,s)*c%s,h=Bi(l,r,s)*l%s,w=Bi(h,i,s)*h%s,E=Bi(w,n,s)*w%s,_=Bi(E,n,s)*w%s,A=Bi(_,t,s)*c%s;return{pow_p_5_8:Bi(A,Bd,s)*e%s,b2:o}}function B4(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function U4(e,t){const r=Yl,i=ir(t*t*t,r),n=ir(i*i*t,r),s=q4(e*n).pow_p_5_8;let o=ir(e*i*s,r);const a=ir(t*o*o,r),f=o,c=ir(o*qd,r),l=a===e,h=a===ir(-e,r),w=a===ir(-e*qd,r);return l&&(o=f),(h||w)&&(o=c),_4(o,r)&&(o=ir(-o,r)),{isValid:l||h,value:o}}const k4=ib(Yl,void 0,!0),j4={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:k4,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:L4,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:c4,randomBytes:Y1,adjustScalarBytes:B4,uvRatio:U4},ob=T4(j4),z4="EdDSA",K4="JWT",wf=".",zf="base64url",ab="utf8",fb="utf8",V4=":",H4="did",W4="key",Ud="base58btc",G4="z",J4="K36",Y4=32;function Zl(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function cb(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Zl(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ub(e,t){t||(t=e.reduce((n,s)=>n+s.length,0));const r=cb(t);let i=0;for(const n of e)r.set(n,i),i+=n.length;return Zl(r)}function Z4(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=e.length,f=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var A=0,R=0,N=0,q=_.length;N!==q&&_[N]===0;)N++,A++;for(var U=(q-N)*l+1>>>0,P=new Uint8Array(U);N!==q;){for(var F=_[N],L=0,K=U-1;(F!==0||L<R)&&K!==-1;K--,L++)F+=256*P[K]>>>0,P[K]=F%a>>>0,F=F/a>>>0;if(F!==0)throw new Error("Non-zero carry");R=L,N++}for(var V=U-R;V!==U&&P[V]===0;)V++;for(var W=f.repeat(A);V<U;++V)W+=e.charAt(P[V]);return W}function w(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var A=0;if(_[A]!==" "){for(var R=0,N=0;_[A]===f;)R++,A++;for(var q=(_.length-A)*c+1>>>0,U=new Uint8Array(q);_[A];){var P=r[_.charCodeAt(A)];if(P===255)return;for(var F=0,L=q-1;(P!==0||F<N)&&L!==-1;L--,F++)P+=a*U[L]>>>0,U[L]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");N=F,A++}if(_[A]!==" "){for(var K=q-N;K!==q&&U[K]===0;)K++;for(var V=new Uint8Array(R+(q-K)),W=R;K!==q;)V[W++]=U[K++];return V}}}function E(_){var A=w(_);if(A)return A;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:w,decode:E}}var X4=Z4,Q4=X4;const lb=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},e8=e=>new TextEncoder().encode(e),t8=e=>new TextDecoder().decode(e);let r8=class{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},i8=class{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return hb(this,t)}},n8=class{constructor(t){this.decoders=t}or(t){return hb(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const hb=(e,t)=>new n8({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let s8=class{constructor(t,r,i,n){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new r8(t,r,i),this.decoder=new i8(t,r,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const Kf=({name:e,prefix:t,encode:r,decode:i})=>new s8(e,t,r,i),na=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=Q4(r,t);return Kf({prefix:e,name:t,encode:i,decode:s=>lb(n(s))})},o8=(e,t,r,i)=>{const n={};for(let l=0;l<t.length;++l)n[t[l]]=l;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,f=0,c=0;for(let l=0;l<s;++l){const h=n[e[l]];if(h===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&f>>a)}if(a>=r||255&f<<8-a)throw new SyntaxError("Unexpected end of data");return o},a8=(e,t,r)=>{const i=t[t.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let f=0;f<e.length;++f)for(a=a<<8|e[f],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},gr=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>Kf({prefix:t,name:e,encode(n){return a8(n,i,r)},decode(n){return o8(n,i,r,e)}}),f8=Kf({prefix:"\0",name:"identity",encode:e=>t8(e),decode:e=>e8(e)});var c8=Object.freeze({__proto__:null,identity:f8});const u8=gr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var l8=Object.freeze({__proto__:null,base2:u8});const h8=gr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var d8=Object.freeze({__proto__:null,base8:h8});const p8=na({prefix:"9",name:"base10",alphabet:"0123456789"});var g8=Object.freeze({__proto__:null,base10:p8});const b8=gr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),v8=gr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var m8=Object.freeze({__proto__:null,base16:b8,base16upper:v8});const y8=gr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),w8=gr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_8=gr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),x8=gr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),E8=gr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),S8=gr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),M8=gr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),A8=gr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),I8=gr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var D8=Object.freeze({__proto__:null,base32:y8,base32upper:w8,base32pad:_8,base32padupper:x8,base32hex:E8,base32hexupper:S8,base32hexpad:M8,base32hexpadupper:A8,base32z:I8});const O8=na({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),P8=na({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $8=Object.freeze({__proto__:null,base36:O8,base36upper:P8});const R8=na({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),C8=na({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var T8=Object.freeze({__proto__:null,base58btc:R8,base58flickr:C8});const N8=gr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),F8=gr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),L8=gr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),q8=gr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var B8=Object.freeze({__proto__:null,base64:N8,base64pad:F8,base64url:L8,base64urlpad:q8});const db=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),U8=db.reduce((e,t,r)=>(e[r]=t,e),[]),k8=db.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function j8(e){return e.reduce((t,r)=>(t+=U8[r],t),"")}function z8(e){const t=[];for(const r of e){const i=k8[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const K8=Kf({prefix:"🚀",name:"base256emoji",encode:j8,decode:z8});var V8=Object.freeze({__proto__:null,base256emoji:K8}),H8=pb,kd=128,W8=-128,G8=Math.pow(2,31);function pb(e,t,r){t=t||[],r=r||0;for(var i=r;e>=G8;)t[r++]=e&255|kd,e/=128;for(;e&W8;)t[r++]=e&255|kd,e>>>=7;return t[r]=e|0,pb.bytes=r-i+1,t}var J8=sl,Y8=128,jd=127;function sl(e,i){var r=0,i=i||0,n=0,s=i,o,a=e.length;do{if(s>=a)throw sl.bytes=0,new RangeError("Could not decode varint");o=e[s++],r+=n<28?(o&jd)<<n:(o&jd)*Math.pow(2,n),n+=7}while(o>=Y8);return sl.bytes=s-i,r}var Z8=Math.pow(2,7),X8=Math.pow(2,14),Q8=Math.pow(2,21),e5=Math.pow(2,28),t5=Math.pow(2,35),r5=Math.pow(2,42),i5=Math.pow(2,49),n5=Math.pow(2,56),s5=Math.pow(2,63),o5=function(e){return e<Z8?1:e<X8?2:e<Q8?3:e<e5?4:e<t5?5:e<r5?6:e<i5?7:e<n5?8:e<s5?9:10},a5={encode:H8,decode:J8,encodingLength:o5},gb=a5;const zd=(e,t,r=0)=>(gb.encode(e,t,r),t),Kd=e=>gb.encodingLength(e),ol=(e,t)=>{const r=t.byteLength,i=Kd(e),n=i+Kd(r),s=new Uint8Array(n+r);return zd(e,s,0),zd(r,s,i),s.set(t,n),new f5(e,r,t,s)};let f5=class{constructor(t,r,i,n){this.code=t,this.size=r,this.digest=i,this.bytes=n}};const bb=({name:e,code:t,encode:r})=>new c5(e,t,r);let c5=class{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?ol(this.code,r):r.then(i=>ol(this.code,i))}else throw Error("Unknown type, must be binary type")}};const vb=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),u5=bb({name:"sha2-256",code:18,encode:vb("SHA-256")}),l5=bb({name:"sha2-512",code:19,encode:vb("SHA-512")});var h5=Object.freeze({__proto__:null,sha256:u5,sha512:l5});const mb=0,d5="identity",yb=lb,p5=e=>ol(mb,yb(e)),g5={code:mb,name:d5,encode:yb,digest:p5};var b5=Object.freeze({__proto__:null,identity:g5});new TextEncoder,new TextDecoder;const Vd={...c8,...l8,...d8,...g8,...m8,...D8,...$8,...T8,...B8,...V8};({...h5,...b5});function wb(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const Hd=wb("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Kc=wb("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=cb(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),_b={utf8:Hd,"utf-8":Hd,hex:Vd.base16,latin1:Kc,ascii:Kc,binary:Kc,...Vd};function Vf(e,t="utf8"){const r=_b[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function oo(e,t="utf8"){const r=_b[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Zl(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function Wd(e){return Qs(Vf(oo(e,zf),ab))}function _f(e){return Vf(oo(ls(e),ab),zf)}function xb(e){const t=oo(J4,Ud),r=G4+Vf(ub([t,e]),Ud);return[H4,W4,r].join(V4)}function v5(e){return Vf(e,zf)}function m5(e){return oo(e,zf)}function y5(e){return oo([_f(e.header),_f(e.payload)].join(wf),fb)}function w5(e){return[_f(e.header),_f(e.payload),v5(e.signature)].join(wf)}function al(e){const t=e.split(wf),r=Wd(t[0]),i=Wd(t[1]),n=m5(t[2]),s=oo(t.slice(0,2).join(wf),fb);return{header:r,payload:i,signature:n,data:s}}function Gd(e=Y1(Y4)){const t=ob.getPublicKey(e);return{secretKey:ub([e,t]),publicKey:t}}async function _5(e,t,r,i,n=Ee.fromMiliseconds(Date.now())){const s={alg:z4,typ:K4},o=xb(i.publicKey),a=n+r,f={iss:o,sub:e,aud:t,iat:n,exp:a},c=y5({header:s,payload:f}),l=ob.sign(c,i.secretKey.slice(0,32));return w5({header:s,payload:f,signature:l})}var Jd=function(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,s;i<n;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))},x5=function(){function e(t,r,i){this.name=t,this.version=r,this.os=i,this.type="browser"}return e}(),E5=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),S5=function(){function e(t,r,i,n){this.name=t,this.version=r,this.os=i,this.bot=n,this.type="bot-device"}return e}(),M5=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),A5=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),I5=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,D5=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Yd=3,O5=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",I5]],Zd=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function P5(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new A5:typeof navigator<"u"?R5(navigator.userAgent):T5()}function $5(e){return e!==""&&O5.reduce(function(t,r){var i=r[0],n=r[1];if(t)return t;var s=n.exec(e);return!!s&&[i,s]},!1)}function R5(e){var t=$5(e);if(!t)return null;var r=t[0],i=t[1];if(r==="searchbot")return new M5;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<Yd&&(n=Jd(Jd([],n,!0),N5(Yd-n.length),!0)):n=[];var s=n.join("."),o=C5(e),a=D5.exec(e);return a&&a[1]?new S5(r,s,o,a[1]):new x5(r,s,o)}function C5(e){for(var t=0,r=Zd.length;t<r;t++){var i=Zd[t],n=i[0],s=i[1],o=s.exec(e);if(o)return n}return null}function T5(){var e=typeof process<"u"&&process.version;return e?new E5(process.version.slice(1)):null}function N5(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var It={},Xd;function Eb(){if(Xd)return It;Xd=1,Object.defineProperty(It,"__esModule",{value:!0}),It.getLocalStorage=It.getLocalStorageOrThrow=It.getCrypto=It.getCryptoOrThrow=It.getLocation=It.getLocationOrThrow=It.getNavigator=It.getNavigatorOrThrow=It.getDocument=It.getDocumentOrThrow=It.getFromWindowOrThrow=It.getFromWindow=void 0;function e(w){let E;return typeof window<"u"&&typeof window[w]<"u"&&(E=window[w]),E}It.getFromWindow=e;function t(w){const E=e(w);if(!E)throw new Error(`${w} is not defined in Window`);return E}It.getFromWindowOrThrow=t;function r(){return t("document")}It.getDocumentOrThrow=r;function i(){return e("document")}It.getDocument=i;function n(){return t("navigator")}It.getNavigatorOrThrow=n;function s(){return e("navigator")}It.getNavigator=s;function o(){return t("location")}It.getLocationOrThrow=o;function a(){return e("location")}It.getLocation=a;function f(){return t("crypto")}It.getCryptoOrThrow=f;function c(){return e("crypto")}It.getCrypto=c;function l(){return t("localStorage")}It.getLocalStorageOrThrow=l;function h(){return e("localStorage")}return It.getLocalStorage=h,It}var hs=Eb(),wo={},Qd;function F5(){if(Qd)return wo;Qd=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.getWindowMetadata=void 0;const e=Eb();function t(){let r,i;try{r=e.getDocumentOrThrow(),i=e.getLocationOrThrow()}catch{return null}function n(){const E=r.getElementsByTagName("link"),_=[];for(let A=0;A<E.length;A++){const R=E[A],N=R.getAttribute("rel");if(N&&N.toLowerCase().indexOf("icon")>-1){const q=R.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let U=i.protocol+"//"+i.host;if(q.indexOf("/")===0)U+=q;else{const P=i.pathname.split("/");P.pop();const F=P.join("/");U+=F+"/"+q}_.push(U)}else if(q.indexOf("//")===0){const U=i.protocol+q;_.push(U)}else _.push(q)}}return _}function s(...E){const _=r.getElementsByTagName("meta");for(let A=0;A<_.length;A++){const R=_[A],N=["itemprop","property","name"].map(q=>R.getAttribute(q)).filter(q=>q?E.includes(q):!1);if(N.length&&N){const q=R.getAttribute("content");if(q)return q}}return""}function o(){let E=s("name","og:site_name","og:title","twitter:title");return E||(E=r.title),E}function a(){return s("description","og:description","twitter:description","keywords")}const f=o(),c=a(),l=i.origin,h=n();return{description:c,url:l,icons:h,name:f}}return wo.getWindowMetadata=t,wo}var L5=F5();const q5="logger/5.7.0";let e0=!1,t0=!1;const Za={debug:1,default:2,info:2,warning:3,error:4,off:5};let r0=Za.default,Vc=null;function B5(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(e){return e.message}return null}const i0=B5();var fl;(function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"})(fl||(fl={}));var Di;(function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"})(Di||(Di={}));const n0="0123456789abcdef";class Ft{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,r){const i=t.toLowerCase();Za[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(r0>Za[i])&&console.log.apply(console,r)}debug(...t){this._log(Ft.levels.DEBUG,t)}info(...t){this._log(Ft.levels.INFO,t)}warn(...t){this._log(Ft.levels.WARNING,t)}makeError(t,r,i){if(t0)return this.makeError("censored error",r,{});r||(r=Ft.errors.UNKNOWN_ERROR),i||(i={});const n=[];Object.keys(i).forEach(f=>{const c=i[f];try{if(c instanceof Uint8Array){let l="";for(let h=0;h<c.length;h++)l+=n0[c[h]>>4],l+=n0[c[h]&15];n.push(f+"=Uint8Array(0x"+l+")")}else n.push(f+"="+JSON.stringify(c))}catch{n.push(f+"="+JSON.stringify(i[f].toString()))}}),n.push(`code=${r}`),n.push(`version=${this.version}`);const s=t;let o="";switch(r){case Di.NUMERIC_FAULT:{o="NUMERIC_FAULT";const f=t;switch(f){case"overflow":case"underflow":case"division-by-zero":o+="-"+f;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Di.CALL_EXCEPTION:case Di.INSUFFICIENT_FUNDS:case Di.MISSING_NEW:case Di.NONCE_EXPIRED:case Di.REPLACEMENT_UNDERPRICED:case Di.TRANSACTION_REPLACED:case Di.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(t+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(t+=" ("+n.join(", ")+")");const a=new Error(t);return a.reason=s,a.code=r,Object.keys(i).forEach(function(f){a[f]=i[f]}),a}throwError(t,r,i){throw this.makeError(t,r,i)}throwArgumentError(t,r,i){return this.throwError(t,Ft.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(t,r,i,n){t||this.throwError(r,i,n)}assertArgument(t,r,i,n){t||this.throwArgumentError(r,i,n)}checkNormalize(t){i0&&this.throwError("platform missing String.prototype.normalize",Ft.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:i0})}checkSafeUint53(t,r){typeof t=="number"&&(r==null&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,Ft.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,Ft.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,r,i){i?i=": "+i:i="",t<r&&this.throwError("missing argument"+i,Ft.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+i,Ft.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}checkNew(t,r){(t===Object||t==null)&&this.throwError("missing new",Ft.errors.MISSING_NEW,{name:r.name})}checkAbstract(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Ft.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",Ft.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Vc||(Vc=new Ft(q5)),Vc}static setCensorship(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Ft.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),e0){if(!t)return;this.globalLogger().throwError("error censorship permanent",Ft.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}t0=!!t,e0=!!r}static setLogLevel(t){const r=Za[t.toLowerCase()];if(r==null){Ft.globalLogger().warn("invalid log level - "+t);return}r0=r}static from(t){return new Ft(t)}}Ft.errors=Di;Ft.levels=fl;const U5="bytes/5.7.0",Ht=new Ft(U5);function Sb(e){return!!e.toHexString}function Bo(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Bo(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function k5(e){return Ji(e)&&!(e.length%2)||Xl(e)}function s0(e){return typeof e=="number"&&e==e&&e%1===0}function Xl(e){if(e==null)return!1;if(e.constructor===Uint8Array)return!0;if(typeof e=="string"||!s0(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!s0(r)||r<0||r>=256)return!1}return!0}function cr(e,t){if(t||(t={}),typeof e=="number"){Ht.checkSafeUint53(e,"invalid arrayify value");const r=[];for(;e;)r.unshift(e&255),e=parseInt(String(e/256));return r.length===0&&r.push(0),Bo(new Uint8Array(r))}if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),Sb(e)&&(e=e.toHexString()),Ji(e)){let r=e.substring(2);r.length%2&&(t.hexPad==="left"?r="0"+r:t.hexPad==="right"?r+="0":Ht.throwArgumentError("hex data is odd-length","value",e));const i=[];for(let n=0;n<r.length;n+=2)i.push(parseInt(r.substring(n,n+2),16));return Bo(new Uint8Array(i))}return Xl(e)?Bo(new Uint8Array(e)):Ht.throwArgumentError("invalid arrayify value","value",e)}function j5(e,t){e=cr(e),e.length>t&&Ht.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),Bo(r)}function Ji(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const Hc="0123456789abcdef";function Zr(e,t){if(t||(t={}),typeof e=="number"){Ht.checkSafeUint53(e,"invalid hexlify value");let r="";for(;e;)r=Hc[e&15]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof e=="bigint")return e=e.toString(16),e.length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),Sb(e))return e.toHexString();if(Ji(e))return e.length%2&&(t.hexPad==="left"?e="0x0"+e.substring(2):t.hexPad==="right"?e+="0":Ht.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Xl(e)){let r="0x";for(let i=0;i<e.length;i++){let n=e[i];r+=Hc[(n&240)>>4]+Hc[n&15]}return r}return Ht.throwArgumentError("invalid hexlify value","value",e)}function z5(e){if(typeof e!="string")e=Zr(e);else if(!Ji(e)||e.length%2)return null;return(e.length-2)/2}function o0(e,t,r){return typeof e!="string"?e=Zr(e):(!Ji(e)||e.length%2)&&Ht.throwArgumentError("invalid hexData","value",e),t=2+2*t,"0x"+e.substring(t)}function Gs(e,t){for(typeof e!="string"?e=Zr(e):Ji(e)||Ht.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Ht.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Mb(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(k5(e)){let r=cr(e);r.length===64?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Zr(r.slice(0,32)),t.s=Zr(r.slice(32,64))):r.length===65?(t.r=Zr(r.slice(0,32)),t.s=Zr(r.slice(32,64)),t.v=r[64]):Ht.throwArgumentError("invalid signature string","signature",e),t.v<27&&(t.v===0||t.v===1?t.v+=27:Ht.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Zr(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,t._vs!=null){const n=j5(cr(t._vs),32);t._vs=Zr(n);const s=n[0]>=128?1:0;t.recoveryParam==null?t.recoveryParam=s:t.recoveryParam!==s&&Ht.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),n[0]&=127;const o=Zr(n);t.s==null?t.s=o:t.s!==o&&Ht.throwArgumentError("signature v mismatch _vs","signature",e)}if(t.recoveryParam==null)t.v==null?Ht.throwArgumentError("signature missing v and recoveryParam","signature",e):t.v===0||t.v===1?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(t.v==null)t.v=27+t.recoveryParam;else{const n=t.v===0||t.v===1?t.v:1-t.v%2;t.recoveryParam!==n&&Ht.throwArgumentError("signature recoveryParam mismatch v","signature",e)}t.r==null||!Ji(t.r)?Ht.throwArgumentError("signature missing or invalid r","signature",e):t.r=Gs(t.r,32),t.s==null||!Ji(t.s)?Ht.throwArgumentError("signature missing or invalid s","signature",e):t.s=Gs(t.s,32);const r=cr(t.s);r[0]>=128&&Ht.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const i=Zr(r);t._vs&&(Ji(t._vs)||Ht.throwArgumentError("signature invalid _vs","signature",e),t._vs=Gs(t._vs,32)),t._vs==null?t._vs=i:t._vs!==i&&Ht.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var Xa={exports:{}};const K5={},V5=Object.freeze(Object.defineProperty({__proto__:null,default:K5},Symbol.toStringTag,{value:"Module"})),Ql=k1(V5);var H5=Xa.exports,a0;function W5(){return a0||(a0=1,function(e){(function(t,r){function i(p,u){if(!p)throw new Error(u||"Assertion failed")}function n(p,u){p.super_=u;var d=function(){};d.prototype=u.prototype,p.prototype=new d,p.prototype.constructor=p}function s(p,u,d){if(s.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((u==="le"||u==="be")&&(d=u,u=10),this._init(p||0,u||10,d||"be"))}typeof t=="object"?t.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ql.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,d){return u.cmp(d)>0?u:d},s.min=function(u,d){return u.cmp(d)<0?u:d},s.prototype._init=function(u,d,v){if(typeof u=="number")return this._initNumber(u,d,v);if(typeof u=="object")return this._initArray(u,d,v);d==="hex"&&(d=16),i(d===(d|0)&&d>=2&&d<=36),u=u.toString().replace(/\s+/g,"");var y=0;u[0]==="-"&&(y++,this.negative=1),y<u.length&&(d===16?this._parseHex(u,y,v):(this._parseBase(u,d,y),v==="le"&&this._initArray(this.toArray(),d,v)))},s.prototype._initNumber=function(u,d,v){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(i(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),d,v)},s.prototype._initArray=function(u,d,v){if(i(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var M,x,b=0;if(v==="be")for(y=u.length-1,M=0;y>=0;y-=3)x=u[y]|u[y-1]<<8|u[y-2]<<16,this.words[M]|=x<<b&67108863,this.words[M+1]=x>>>26-b&67108863,b+=24,b>=26&&(b-=26,M++);else if(v==="le")for(y=0,M=0;y<u.length;y+=3)x=u[y]|u[y+1]<<8|u[y+2]<<16,this.words[M]|=x<<b&67108863,this.words[M+1]=x>>>26-b&67108863,b+=24,b>=26&&(b-=26,M++);return this._strip()};function a(p,u){var d=p.charCodeAt(u);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;i(!1,"Invalid character in "+p)}function f(p,u,d){var v=a(p,d);return d-1>=u&&(v|=a(p,d-1)<<4),v}s.prototype._parseHex=function(u,d,v){this.length=Math.ceil((u.length-d)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var M=0,x=0,b;if(v==="be")for(y=u.length-1;y>=d;y-=2)b=f(u,d,y)<<M,this.words[x]|=b&67108863,M>=18?(M-=18,x+=1,this.words[x]|=b>>>26):M+=8;else{var S=u.length-d;for(y=S%2===0?d+1:d;y<u.length;y+=2)b=f(u,d,y)<<M,this.words[x]|=b&67108863,M>=18?(M-=18,x+=1,this.words[x]|=b>>>26):M+=8}this._strip()};function c(p,u,d,v){for(var y=0,M=0,x=Math.min(p.length,d),b=u;b<x;b++){var S=p.charCodeAt(b)-48;y*=v,S>=49?M=S-49+10:S>=17?M=S-17+10:M=S,i(S>=0&&M<v,"Invalid character"),y+=M}return y}s.prototype._parseBase=function(u,d,v){this.words=[0],this.length=1;for(var y=0,M=1;M<=67108863;M*=d)y++;y--,M=M/d|0;for(var x=u.length-v,b=x%y,S=Math.min(x,x-b)+v,m=0,$=v;$<S;$+=y)m=c(u,$,$+y,d),this.imuln(M),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(b!==0){var ee=1;for(m=c(u,$,u.length,d),$=0;$<b;$++)ee*=d;this.imuln(ee),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this._strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var d=0;d<this.length;d++)u.words[d]=this.words[d];u.length=this.length,u.negative=this.negative,u.red=this.red};function l(p,u){p.words=u.words,p.length=u.length,p.negative=u.negative,p.red=u.red}if(s.prototype._move=function(u){l(u,this)},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,d){u=u||10,d=d|0||1;var v;if(u===16||u==="hex"){v="";for(var y=0,M=0,x=0;x<this.length;x++){var b=this.words[x],S=((b<<y|M)&16777215).toString(16);M=b>>>24-y&16777215,y+=2,y>=26&&(y-=26,x--),M!==0||x!==this.length-1?v=w[6-S.length]+S+v:v=S+v}for(M!==0&&(v=M.toString(16)+v);v.length%d!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(u===(u|0)&&u>=2&&u<=36){var m=E[u],$=_[u];v="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var O=ee.modrn($).toString(u);ee=ee.idivn($),ee.isZero()?v=O+v:v=w[m-O.length]+O+v}for(this.isZero()&&(v="0"+v);v.length%d!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(u,d){return this.toArrayLike(o,u,d)}),s.prototype.toArray=function(u,d){return this.toArrayLike(Array,u,d)};var A=function(u,d){return u.allocUnsafe?u.allocUnsafe(d):new u(d)};s.prototype.toArrayLike=function(u,d,v){this._strip();var y=this.byteLength(),M=v||Math.max(1,y);i(y<=M,"byte array longer than desired length"),i(M>0,"Requested array length <= 0");var x=A(u,M),b=d==="le"?"LE":"BE";return this["_toArrayLike"+b](x,y),x},s.prototype._toArrayLikeLE=function(u,d){for(var v=0,y=0,M=0,x=0;M<this.length;M++){var b=this.words[M]<<x|y;u[v++]=b&255,v<u.length&&(u[v++]=b>>8&255),v<u.length&&(u[v++]=b>>16&255),x===6?(v<u.length&&(u[v++]=b>>24&255),y=0,x=0):(y=b>>>24,x+=2)}if(v<u.length)for(u[v++]=y;v<u.length;)u[v++]=0},s.prototype._toArrayLikeBE=function(u,d){for(var v=u.length-1,y=0,M=0,x=0;M<this.length;M++){var b=this.words[M]<<x|y;u[v--]=b&255,v>=0&&(u[v--]=b>>8&255),v>=0&&(u[v--]=b>>16&255),x===6?(v>=0&&(u[v--]=b>>24&255),y=0,x=0):(y=b>>>24,x+=2)}if(v>=0)for(u[v--]=y;v>=0;)u[v--]=0},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var d=u,v=0;return d>=4096&&(v+=13,d>>>=13),d>=64&&(v+=7,d>>>=7),d>=8&&(v+=4,d>>>=4),d>=2&&(v+=2,d>>>=2),v+d},s.prototype._zeroBits=function(u){if(u===0)return 26;var d=u,v=0;return d&8191||(v+=13,d>>>=13),d&127||(v+=7,d>>>=7),d&15||(v+=4,d>>>=4),d&3||(v+=2,d>>>=2),d&1||v++,v},s.prototype.bitLength=function(){var u=this.words[this.length-1],d=this._countBits(u);return(this.length-1)*26+d};function R(p){for(var u=new Array(p.bitLength()),d=0;d<u.length;d++){var v=d/26|0,y=d%26;u[d]=p.words[v]>>>y&1}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,d=0;d<this.length;d++){var v=this._zeroBits(this.words[d]);if(u+=v,v!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var d=0;d<u.length;d++)this.words[d]=this.words[d]|u.words[d];return this._strip()},s.prototype.ior=function(u){return i((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var d;this.length>u.length?d=u:d=this;for(var v=0;v<d.length;v++)this.words[v]=this.words[v]&u.words[v];return this.length=d.length,this._strip()},s.prototype.iand=function(u){return i((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var d,v;this.length>u.length?(d=this,v=u):(d=u,v=this);for(var y=0;y<v.length;y++)this.words[y]=d.words[y]^v.words[y];if(this!==d)for(;y<d.length;y++)this.words[y]=d.words[y];return this.length=d.length,this._strip()},s.prototype.ixor=function(u){return i((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){i(typeof u=="number"&&u>=0);var d=Math.ceil(u/26)|0,v=u%26;this._expand(d),v>0&&d--;for(var y=0;y<d;y++)this.words[y]=~this.words[y]&67108863;return v>0&&(this.words[y]=~this.words[y]&67108863>>26-v),this._strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,d){i(typeof u=="number"&&u>=0);var v=u/26|0,y=u%26;return this._expand(v+1),d?this.words[v]=this.words[v]|1<<y:this.words[v]=this.words[v]&~(1<<y),this._strip()},s.prototype.iadd=function(u){var d;if(this.negative!==0&&u.negative===0)return this.negative=0,d=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,d=this.isub(u),u.negative=1,d._normSign();var v,y;this.length>u.length?(v=this,y=u):(v=u,y=this);for(var M=0,x=0;x<y.length;x++)d=(v.words[x]|0)+(y.words[x]|0)+M,this.words[x]=d&67108863,M=d>>>26;for(;M!==0&&x<v.length;x++)d=(v.words[x]|0)+M,this.words[x]=d&67108863,M=d>>>26;if(this.length=v.length,M!==0)this.words[this.length]=M,this.length++;else if(v!==this)for(;x<v.length;x++)this.words[x]=v.words[x];return this},s.prototype.add=function(u){var d;return u.negative!==0&&this.negative===0?(u.negative=0,d=this.sub(u),u.negative^=1,d):u.negative===0&&this.negative!==0?(this.negative=0,d=u.sub(this),this.negative=1,d):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var d=this.iadd(u);return u.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var v=this.cmp(u);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,M;v>0?(y=this,M=u):(y=u,M=this);for(var x=0,b=0;b<M.length;b++)d=(y.words[b]|0)-(M.words[b]|0)+x,x=d>>26,this.words[b]=d&67108863;for(;x!==0&&b<y.length;b++)d=(y.words[b]|0)+x,x=d>>26,this.words[b]=d&67108863;if(x===0&&b<y.length&&y!==this)for(;b<y.length;b++)this.words[b]=y.words[b];return this.length=Math.max(this.length,b),y!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function N(p,u,d){d.negative=u.negative^p.negative;var v=p.length+u.length|0;d.length=v,v=v-1|0;var y=p.words[0]|0,M=u.words[0]|0,x=y*M,b=x&67108863,S=x/67108864|0;d.words[0]=b;for(var m=1;m<v;m++){for(var $=S>>>26,ee=S&67108863,O=Math.min(m,u.length-1),H=Math.max(0,m-p.length+1);H<=O;H++){var X=m-H|0;y=p.words[X]|0,M=u.words[H]|0,x=y*M+ee,$+=x/67108864|0,ee=x&67108863}d.words[m]=ee|0,S=$|0}return S!==0?d.words[m]=S|0:d.length--,d._strip()}var q=function(u,d,v){var y=u.words,M=d.words,x=v.words,b=0,S,m,$,ee=y[0]|0,O=ee&8191,H=ee>>>13,X=y[1]|0,te=X&8191,ne=X>>>13,ge=y[2]|0,ve=ge&8191,B=ge>>>13,z=y[3]|0,G=z&8191,Z=z>>>13,oe=y[4]|0,ae=oe&8191,ce=oe>>>13,ue=y[5]|0,le=ue&8191,ie=ue>>>13,ye=y[6]|0,pe=ye&8191,he=ye>>>13,_e=y[7]|0,Ae=_e&8191,we=_e>>>13,De=y[8]|0,Fe=De&8191,Se=De>>>13,Ke=y[9]|0,We=Ke&8191,Ce=Ke>>>13,et=M[0]|0,ze=et&8191,Re=et>>>13,at=M[1]|0,dt=at&8191,Ie=at>>>13,st=M[2]|0,$e=st&8191,ke=st>>>13,Ye=M[3]|0,Ge=Ye&8191,Le=Ye>>>13,lt=M[4]|0,ft=lt&8191,Ne=lt>>>13,pt=M[5]|0,mt=pt&8191,Be=pt>>>13,gt=M[6]|0,bt=gt&8191,Ue=gt>>>13,ht=M[7]|0,tt=ht&8191,qe=ht>>>13,ct=M[8]|0,yt=ct&8191,je=ct>>>13,ut=M[9]|0,it=ut&8191,vt=ut>>>13;v.negative=u.negative^d.negative,v.length=19,S=Math.imul(O,ze),m=Math.imul(O,Re),m=m+Math.imul(H,ze)|0,$=Math.imul(H,Re);var Qt=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,S=Math.imul(te,ze),m=Math.imul(te,Re),m=m+Math.imul(ne,ze)|0,$=Math.imul(ne,Re),S=S+Math.imul(O,dt)|0,m=m+Math.imul(O,Ie)|0,m=m+Math.imul(H,dt)|0,$=$+Math.imul(H,Ie)|0;var yr=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(yr>>>26)|0,yr&=67108863,S=Math.imul(ve,ze),m=Math.imul(ve,Re),m=m+Math.imul(B,ze)|0,$=Math.imul(B,Re),S=S+Math.imul(te,dt)|0,m=m+Math.imul(te,Ie)|0,m=m+Math.imul(ne,dt)|0,$=$+Math.imul(ne,Ie)|0,S=S+Math.imul(O,$e)|0,m=m+Math.imul(O,ke)|0,m=m+Math.imul(H,$e)|0,$=$+Math.imul(H,ke)|0;var Jt=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,S=Math.imul(G,ze),m=Math.imul(G,Re),m=m+Math.imul(Z,ze)|0,$=Math.imul(Z,Re),S=S+Math.imul(ve,dt)|0,m=m+Math.imul(ve,Ie)|0,m=m+Math.imul(B,dt)|0,$=$+Math.imul(B,Ie)|0,S=S+Math.imul(te,$e)|0,m=m+Math.imul(te,ke)|0,m=m+Math.imul(ne,$e)|0,$=$+Math.imul(ne,ke)|0,S=S+Math.imul(O,Ge)|0,m=m+Math.imul(O,Le)|0,m=m+Math.imul(H,Ge)|0,$=$+Math.imul(H,Le)|0;var wr=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(wr>>>26)|0,wr&=67108863,S=Math.imul(ae,ze),m=Math.imul(ae,Re),m=m+Math.imul(ce,ze)|0,$=Math.imul(ce,Re),S=S+Math.imul(G,dt)|0,m=m+Math.imul(G,Ie)|0,m=m+Math.imul(Z,dt)|0,$=$+Math.imul(Z,Ie)|0,S=S+Math.imul(ve,$e)|0,m=m+Math.imul(ve,ke)|0,m=m+Math.imul(B,$e)|0,$=$+Math.imul(B,ke)|0,S=S+Math.imul(te,Ge)|0,m=m+Math.imul(te,Le)|0,m=m+Math.imul(ne,Ge)|0,$=$+Math.imul(ne,Le)|0,S=S+Math.imul(O,ft)|0,m=m+Math.imul(O,Ne)|0,m=m+Math.imul(H,ft)|0,$=$+Math.imul(H,Ne)|0;var Rt=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,S=Math.imul(le,ze),m=Math.imul(le,Re),m=m+Math.imul(ie,ze)|0,$=Math.imul(ie,Re),S=S+Math.imul(ae,dt)|0,m=m+Math.imul(ae,Ie)|0,m=m+Math.imul(ce,dt)|0,$=$+Math.imul(ce,Ie)|0,S=S+Math.imul(G,$e)|0,m=m+Math.imul(G,ke)|0,m=m+Math.imul(Z,$e)|0,$=$+Math.imul(Z,ke)|0,S=S+Math.imul(ve,Ge)|0,m=m+Math.imul(ve,Le)|0,m=m+Math.imul(B,Ge)|0,$=$+Math.imul(B,Le)|0,S=S+Math.imul(te,ft)|0,m=m+Math.imul(te,Ne)|0,m=m+Math.imul(ne,ft)|0,$=$+Math.imul(ne,Ne)|0,S=S+Math.imul(O,mt)|0,m=m+Math.imul(O,Be)|0,m=m+Math.imul(H,mt)|0,$=$+Math.imul(H,Be)|0;var Dr=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,S=Math.imul(pe,ze),m=Math.imul(pe,Re),m=m+Math.imul(he,ze)|0,$=Math.imul(he,Re),S=S+Math.imul(le,dt)|0,m=m+Math.imul(le,Ie)|0,m=m+Math.imul(ie,dt)|0,$=$+Math.imul(ie,Ie)|0,S=S+Math.imul(ae,$e)|0,m=m+Math.imul(ae,ke)|0,m=m+Math.imul(ce,$e)|0,$=$+Math.imul(ce,ke)|0,S=S+Math.imul(G,Ge)|0,m=m+Math.imul(G,Le)|0,m=m+Math.imul(Z,Ge)|0,$=$+Math.imul(Z,Le)|0,S=S+Math.imul(ve,ft)|0,m=m+Math.imul(ve,Ne)|0,m=m+Math.imul(B,ft)|0,$=$+Math.imul(B,Ne)|0,S=S+Math.imul(te,mt)|0,m=m+Math.imul(te,Be)|0,m=m+Math.imul(ne,mt)|0,$=$+Math.imul(ne,Be)|0,S=S+Math.imul(O,bt)|0,m=m+Math.imul(O,Ue)|0,m=m+Math.imul(H,bt)|0,$=$+Math.imul(H,Ue)|0;var ii=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(ii>>>26)|0,ii&=67108863,S=Math.imul(Ae,ze),m=Math.imul(Ae,Re),m=m+Math.imul(we,ze)|0,$=Math.imul(we,Re),S=S+Math.imul(pe,dt)|0,m=m+Math.imul(pe,Ie)|0,m=m+Math.imul(he,dt)|0,$=$+Math.imul(he,Ie)|0,S=S+Math.imul(le,$e)|0,m=m+Math.imul(le,ke)|0,m=m+Math.imul(ie,$e)|0,$=$+Math.imul(ie,ke)|0,S=S+Math.imul(ae,Ge)|0,m=m+Math.imul(ae,Le)|0,m=m+Math.imul(ce,Ge)|0,$=$+Math.imul(ce,Le)|0,S=S+Math.imul(G,ft)|0,m=m+Math.imul(G,Ne)|0,m=m+Math.imul(Z,ft)|0,$=$+Math.imul(Z,Ne)|0,S=S+Math.imul(ve,mt)|0,m=m+Math.imul(ve,Be)|0,m=m+Math.imul(B,mt)|0,$=$+Math.imul(B,Be)|0,S=S+Math.imul(te,bt)|0,m=m+Math.imul(te,Ue)|0,m=m+Math.imul(ne,bt)|0,$=$+Math.imul(ne,Ue)|0,S=S+Math.imul(O,tt)|0,m=m+Math.imul(O,qe)|0,m=m+Math.imul(H,tt)|0,$=$+Math.imul(H,qe)|0;var Kr=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,S=Math.imul(Fe,ze),m=Math.imul(Fe,Re),m=m+Math.imul(Se,ze)|0,$=Math.imul(Se,Re),S=S+Math.imul(Ae,dt)|0,m=m+Math.imul(Ae,Ie)|0,m=m+Math.imul(we,dt)|0,$=$+Math.imul(we,Ie)|0,S=S+Math.imul(pe,$e)|0,m=m+Math.imul(pe,ke)|0,m=m+Math.imul(he,$e)|0,$=$+Math.imul(he,ke)|0,S=S+Math.imul(le,Ge)|0,m=m+Math.imul(le,Le)|0,m=m+Math.imul(ie,Ge)|0,$=$+Math.imul(ie,Le)|0,S=S+Math.imul(ae,ft)|0,m=m+Math.imul(ae,Ne)|0,m=m+Math.imul(ce,ft)|0,$=$+Math.imul(ce,Ne)|0,S=S+Math.imul(G,mt)|0,m=m+Math.imul(G,Be)|0,m=m+Math.imul(Z,mt)|0,$=$+Math.imul(Z,Be)|0,S=S+Math.imul(ve,bt)|0,m=m+Math.imul(ve,Ue)|0,m=m+Math.imul(B,bt)|0,$=$+Math.imul(B,Ue)|0,S=S+Math.imul(te,tt)|0,m=m+Math.imul(te,qe)|0,m=m+Math.imul(ne,tt)|0,$=$+Math.imul(ne,qe)|0,S=S+Math.imul(O,yt)|0,m=m+Math.imul(O,je)|0,m=m+Math.imul(H,yt)|0,$=$+Math.imul(H,je)|0;var bi=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(bi>>>26)|0,bi&=67108863,S=Math.imul(We,ze),m=Math.imul(We,Re),m=m+Math.imul(Ce,ze)|0,$=Math.imul(Ce,Re),S=S+Math.imul(Fe,dt)|0,m=m+Math.imul(Fe,Ie)|0,m=m+Math.imul(Se,dt)|0,$=$+Math.imul(Se,Ie)|0,S=S+Math.imul(Ae,$e)|0,m=m+Math.imul(Ae,ke)|0,m=m+Math.imul(we,$e)|0,$=$+Math.imul(we,ke)|0,S=S+Math.imul(pe,Ge)|0,m=m+Math.imul(pe,Le)|0,m=m+Math.imul(he,Ge)|0,$=$+Math.imul(he,Le)|0,S=S+Math.imul(le,ft)|0,m=m+Math.imul(le,Ne)|0,m=m+Math.imul(ie,ft)|0,$=$+Math.imul(ie,Ne)|0,S=S+Math.imul(ae,mt)|0,m=m+Math.imul(ae,Be)|0,m=m+Math.imul(ce,mt)|0,$=$+Math.imul(ce,Be)|0,S=S+Math.imul(G,bt)|0,m=m+Math.imul(G,Ue)|0,m=m+Math.imul(Z,bt)|0,$=$+Math.imul(Z,Ue)|0,S=S+Math.imul(ve,tt)|0,m=m+Math.imul(ve,qe)|0,m=m+Math.imul(B,tt)|0,$=$+Math.imul(B,qe)|0,S=S+Math.imul(te,yt)|0,m=m+Math.imul(te,je)|0,m=m+Math.imul(ne,yt)|0,$=$+Math.imul(ne,je)|0,S=S+Math.imul(O,it)|0,m=m+Math.imul(O,vt)|0,m=m+Math.imul(H,it)|0,$=$+Math.imul(H,vt)|0;var vi=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(vi>>>26)|0,vi&=67108863,S=Math.imul(We,dt),m=Math.imul(We,Ie),m=m+Math.imul(Ce,dt)|0,$=Math.imul(Ce,Ie),S=S+Math.imul(Fe,$e)|0,m=m+Math.imul(Fe,ke)|0,m=m+Math.imul(Se,$e)|0,$=$+Math.imul(Se,ke)|0,S=S+Math.imul(Ae,Ge)|0,m=m+Math.imul(Ae,Le)|0,m=m+Math.imul(we,Ge)|0,$=$+Math.imul(we,Le)|0,S=S+Math.imul(pe,ft)|0,m=m+Math.imul(pe,Ne)|0,m=m+Math.imul(he,ft)|0,$=$+Math.imul(he,Ne)|0,S=S+Math.imul(le,mt)|0,m=m+Math.imul(le,Be)|0,m=m+Math.imul(ie,mt)|0,$=$+Math.imul(ie,Be)|0,S=S+Math.imul(ae,bt)|0,m=m+Math.imul(ae,Ue)|0,m=m+Math.imul(ce,bt)|0,$=$+Math.imul(ce,Ue)|0,S=S+Math.imul(G,tt)|0,m=m+Math.imul(G,qe)|0,m=m+Math.imul(Z,tt)|0,$=$+Math.imul(Z,qe)|0,S=S+Math.imul(ve,yt)|0,m=m+Math.imul(ve,je)|0,m=m+Math.imul(B,yt)|0,$=$+Math.imul(B,je)|0,S=S+Math.imul(te,it)|0,m=m+Math.imul(te,vt)|0,m=m+Math.imul(ne,it)|0,$=$+Math.imul(ne,vt)|0;var Nr=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,S=Math.imul(We,$e),m=Math.imul(We,ke),m=m+Math.imul(Ce,$e)|0,$=Math.imul(Ce,ke),S=S+Math.imul(Fe,Ge)|0,m=m+Math.imul(Fe,Le)|0,m=m+Math.imul(Se,Ge)|0,$=$+Math.imul(Se,Le)|0,S=S+Math.imul(Ae,ft)|0,m=m+Math.imul(Ae,Ne)|0,m=m+Math.imul(we,ft)|0,$=$+Math.imul(we,Ne)|0,S=S+Math.imul(pe,mt)|0,m=m+Math.imul(pe,Be)|0,m=m+Math.imul(he,mt)|0,$=$+Math.imul(he,Be)|0,S=S+Math.imul(le,bt)|0,m=m+Math.imul(le,Ue)|0,m=m+Math.imul(ie,bt)|0,$=$+Math.imul(ie,Ue)|0,S=S+Math.imul(ae,tt)|0,m=m+Math.imul(ae,qe)|0,m=m+Math.imul(ce,tt)|0,$=$+Math.imul(ce,qe)|0,S=S+Math.imul(G,yt)|0,m=m+Math.imul(G,je)|0,m=m+Math.imul(Z,yt)|0,$=$+Math.imul(Z,je)|0,S=S+Math.imul(ve,it)|0,m=m+Math.imul(ve,vt)|0,m=m+Math.imul(B,it)|0,$=$+Math.imul(B,vt)|0;var mi=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(mi>>>26)|0,mi&=67108863,S=Math.imul(We,Ge),m=Math.imul(We,Le),m=m+Math.imul(Ce,Ge)|0,$=Math.imul(Ce,Le),S=S+Math.imul(Fe,ft)|0,m=m+Math.imul(Fe,Ne)|0,m=m+Math.imul(Se,ft)|0,$=$+Math.imul(Se,Ne)|0,S=S+Math.imul(Ae,mt)|0,m=m+Math.imul(Ae,Be)|0,m=m+Math.imul(we,mt)|0,$=$+Math.imul(we,Be)|0,S=S+Math.imul(pe,bt)|0,m=m+Math.imul(pe,Ue)|0,m=m+Math.imul(he,bt)|0,$=$+Math.imul(he,Ue)|0,S=S+Math.imul(le,tt)|0,m=m+Math.imul(le,qe)|0,m=m+Math.imul(ie,tt)|0,$=$+Math.imul(ie,qe)|0,S=S+Math.imul(ae,yt)|0,m=m+Math.imul(ae,je)|0,m=m+Math.imul(ce,yt)|0,$=$+Math.imul(ce,je)|0,S=S+Math.imul(G,it)|0,m=m+Math.imul(G,vt)|0,m=m+Math.imul(Z,it)|0,$=$+Math.imul(Z,vt)|0;var Vr=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,S=Math.imul(We,ft),m=Math.imul(We,Ne),m=m+Math.imul(Ce,ft)|0,$=Math.imul(Ce,Ne),S=S+Math.imul(Fe,mt)|0,m=m+Math.imul(Fe,Be)|0,m=m+Math.imul(Se,mt)|0,$=$+Math.imul(Se,Be)|0,S=S+Math.imul(Ae,bt)|0,m=m+Math.imul(Ae,Ue)|0,m=m+Math.imul(we,bt)|0,$=$+Math.imul(we,Ue)|0,S=S+Math.imul(pe,tt)|0,m=m+Math.imul(pe,qe)|0,m=m+Math.imul(he,tt)|0,$=$+Math.imul(he,qe)|0,S=S+Math.imul(le,yt)|0,m=m+Math.imul(le,je)|0,m=m+Math.imul(ie,yt)|0,$=$+Math.imul(ie,je)|0,S=S+Math.imul(ae,it)|0,m=m+Math.imul(ae,vt)|0,m=m+Math.imul(ce,it)|0,$=$+Math.imul(ce,vt)|0;var nr=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(nr>>>26)|0,nr&=67108863,S=Math.imul(We,mt),m=Math.imul(We,Be),m=m+Math.imul(Ce,mt)|0,$=Math.imul(Ce,Be),S=S+Math.imul(Fe,bt)|0,m=m+Math.imul(Fe,Ue)|0,m=m+Math.imul(Se,bt)|0,$=$+Math.imul(Se,Ue)|0,S=S+Math.imul(Ae,tt)|0,m=m+Math.imul(Ae,qe)|0,m=m+Math.imul(we,tt)|0,$=$+Math.imul(we,qe)|0,S=S+Math.imul(pe,yt)|0,m=m+Math.imul(pe,je)|0,m=m+Math.imul(he,yt)|0,$=$+Math.imul(he,je)|0,S=S+Math.imul(le,it)|0,m=m+Math.imul(le,vt)|0,m=m+Math.imul(ie,it)|0,$=$+Math.imul(ie,vt)|0;var yi=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(yi>>>26)|0,yi&=67108863,S=Math.imul(We,bt),m=Math.imul(We,Ue),m=m+Math.imul(Ce,bt)|0,$=Math.imul(Ce,Ue),S=S+Math.imul(Fe,tt)|0,m=m+Math.imul(Fe,qe)|0,m=m+Math.imul(Se,tt)|0,$=$+Math.imul(Se,qe)|0,S=S+Math.imul(Ae,yt)|0,m=m+Math.imul(Ae,je)|0,m=m+Math.imul(we,yt)|0,$=$+Math.imul(we,je)|0,S=S+Math.imul(pe,it)|0,m=m+Math.imul(pe,vt)|0,m=m+Math.imul(he,it)|0,$=$+Math.imul(he,vt)|0;var wi=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(wi>>>26)|0,wi&=67108863,S=Math.imul(We,tt),m=Math.imul(We,qe),m=m+Math.imul(Ce,tt)|0,$=Math.imul(Ce,qe),S=S+Math.imul(Fe,yt)|0,m=m+Math.imul(Fe,je)|0,m=m+Math.imul(Se,yt)|0,$=$+Math.imul(Se,je)|0,S=S+Math.imul(Ae,it)|0,m=m+Math.imul(Ae,vt)|0,m=m+Math.imul(we,it)|0,$=$+Math.imul(we,vt)|0;var ni=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(ni>>>26)|0,ni&=67108863,S=Math.imul(We,yt),m=Math.imul(We,je),m=m+Math.imul(Ce,yt)|0,$=Math.imul(Ce,je),S=S+Math.imul(Fe,it)|0,m=m+Math.imul(Fe,vt)|0,m=m+Math.imul(Se,it)|0,$=$+Math.imul(Se,vt)|0;var Vn=(b+S|0)+((m&8191)<<13)|0;b=($+(m>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,S=Math.imul(We,it),m=Math.imul(We,vt),m=m+Math.imul(Ce,it)|0,$=Math.imul(Ce,vt);var Ti=(b+S|0)+((m&8191)<<13)|0;return b=($+(m>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,x[0]=Qt,x[1]=yr,x[2]=Jt,x[3]=wr,x[4]=Rt,x[5]=Dr,x[6]=ii,x[7]=Kr,x[8]=bi,x[9]=vi,x[10]=Nr,x[11]=mi,x[12]=Vr,x[13]=nr,x[14]=yi,x[15]=wi,x[16]=ni,x[17]=Vn,x[18]=Ti,b!==0&&(x[19]=b,v.length++),v};Math.imul||(q=N);function U(p,u,d){d.negative=u.negative^p.negative,d.length=p.length+u.length;for(var v=0,y=0,M=0;M<d.length-1;M++){var x=y;y=0;for(var b=v&67108863,S=Math.min(M,u.length-1),m=Math.max(0,M-p.length+1);m<=S;m++){var $=M-m,ee=p.words[$]|0,O=u.words[m]|0,H=ee*O,X=H&67108863;x=x+(H/67108864|0)|0,X=X+b|0,b=X&67108863,x=x+(X>>>26)|0,y+=x>>>26,x&=67108863}d.words[M]=b,v=x,x=y}return v!==0?d.words[M]=v:d.length--,d._strip()}function P(p,u,d){return U(p,u,d)}s.prototype.mulTo=function(u,d){var v,y=this.length+u.length;return this.length===10&&u.length===10?v=q(this,u,d):y<63?v=N(this,u,d):y<1024?v=U(this,u,d):v=P(this,u,d),v},s.prototype.mul=function(u){var d=new s(null);return d.words=new Array(this.length+u.length),this.mulTo(u,d)},s.prototype.mulf=function(u){var d=new s(null);return d.words=new Array(this.length+u.length),P(this,u,d)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){var d=u<0;d&&(u=-u),i(typeof u=="number"),i(u<67108864);for(var v=0,y=0;y<this.length;y++){var M=(this.words[y]|0)*u,x=(M&67108863)+(v&67108863);v>>=26,v+=M/67108864|0,v+=x>>>26,this.words[y]=x&67108863}return v!==0&&(this.words[y]=v,this.length++),d?this.ineg():this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var d=R(u);if(d.length===0)return new s(1);for(var v=this,y=0;y<d.length&&d[y]===0;y++,v=v.sqr());if(++y<d.length)for(var M=v.sqr();y<d.length;y++,M=M.sqr())d[y]!==0&&(v=v.mul(M));return v},s.prototype.iushln=function(u){i(typeof u=="number"&&u>=0);var d=u%26,v=(u-d)/26,y=67108863>>>26-d<<26-d,M;if(d!==0){var x=0;for(M=0;M<this.length;M++){var b=this.words[M]&y,S=(this.words[M]|0)-b<<d;this.words[M]=S|x,x=b>>>26-d}x&&(this.words[M]=x,this.length++)}if(v!==0){for(M=this.length-1;M>=0;M--)this.words[M+v]=this.words[M];for(M=0;M<v;M++)this.words[M]=0;this.length+=v}return this._strip()},s.prototype.ishln=function(u){return i(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,d,v){i(typeof u=="number"&&u>=0);var y;d?y=(d-d%26)/26:y=0;var M=u%26,x=Math.min((u-M)/26,this.length),b=67108863^67108863>>>M<<M,S=v;if(y-=x,y=Math.max(0,y),S){for(var m=0;m<x;m++)S.words[m]=this.words[m];S.length=x}if(x!==0)if(this.length>x)for(this.length-=x,m=0;m<this.length;m++)this.words[m]=this.words[m+x];else this.words[0]=0,this.length=1;var $=0;for(m=this.length-1;m>=0&&($!==0||m>=y);m--){var ee=this.words[m]|0;this.words[m]=$<<26-M|ee>>>M,$=ee&b}return S&&$!==0&&(S.words[S.length++]=$),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(u,d,v){return i(this.negative===0),this.iushrn(u,d,v)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){i(typeof u=="number"&&u>=0);var d=u%26,v=(u-d)/26,y=1<<d;if(this.length<=v)return!1;var M=this.words[v];return!!(M&y)},s.prototype.imaskn=function(u){i(typeof u=="number"&&u>=0);var d=u%26,v=(u-d)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(d!==0&&v++,this.length=Math.min(v,this.length),d!==0){var y=67108863^67108863>>>d<<d;this.words[this.length-1]&=y}return this._strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return i(typeof u=="number"),i(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(u){if(i(typeof u=="number"),i(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,d,v){var y=u.length+v,M;this._expand(y);var x,b=0;for(M=0;M<u.length;M++){x=(this.words[M+v]|0)+b;var S=(u.words[M]|0)*d;x-=S&67108863,b=(x>>26)-(S/67108864|0),this.words[M+v]=x&67108863}for(;M<this.length-v;M++)x=(this.words[M+v]|0)+b,b=x>>26,this.words[M+v]=x&67108863;if(b===0)return this._strip();for(i(b===-1),b=0,M=0;M<this.length;M++)x=-(this.words[M]|0)+b,b=x>>26,this.words[M]=x&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(u,d){var v=this.length-u.length,y=this.clone(),M=u,x=M.words[M.length-1]|0,b=this._countBits(x);v=26-b,v!==0&&(M=M.ushln(v),y.iushln(v),x=M.words[M.length-1]|0);var S=y.length-M.length,m;if(d!=="mod"){m=new s(null),m.length=S+1,m.words=new Array(m.length);for(var $=0;$<m.length;$++)m.words[$]=0}var ee=y.clone()._ishlnsubmul(M,1,S);ee.negative===0&&(y=ee,m&&(m.words[S]=1));for(var O=S-1;O>=0;O--){var H=(y.words[M.length+O]|0)*67108864+(y.words[M.length+O-1]|0);for(H=Math.min(H/x|0,67108863),y._ishlnsubmul(M,H,O);y.negative!==0;)H--,y.negative=0,y._ishlnsubmul(M,1,O),y.isZero()||(y.negative^=1);m&&(m.words[O]=H)}return m&&m._strip(),y._strip(),d!=="div"&&v!==0&&y.iushrn(v),{div:m||null,mod:y}},s.prototype.divmod=function(u,d,v){if(i(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var y,M,x;return this.negative!==0&&u.negative===0?(x=this.neg().divmod(u,d),d!=="mod"&&(y=x.div.neg()),d!=="div"&&(M=x.mod.neg(),v&&M.negative!==0&&M.iadd(u)),{div:y,mod:M}):this.negative===0&&u.negative!==0?(x=this.divmod(u.neg(),d),d!=="mod"&&(y=x.div.neg()),{div:y,mod:x.mod}):this.negative&u.negative?(x=this.neg().divmod(u.neg(),d),d!=="div"&&(M=x.mod.neg(),v&&M.negative!==0&&M.isub(u)),{div:x.div,mod:M}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?d==="div"?{div:this.divn(u.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modrn(u.words[0]))}:this._wordDiv(u,d)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var d=this.divmod(u);if(d.mod.isZero())return d.div;var v=d.div.negative!==0?d.mod.isub(u):d.mod,y=u.ushrn(1),M=u.andln(1),x=v.cmp(y);return x<0||M===1&&x===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modrn=function(u){var d=u<0;d&&(u=-u),i(u<=67108863);for(var v=(1<<26)%u,y=0,M=this.length-1;M>=0;M--)y=(v*y+(this.words[M]|0))%u;return d?-y:y},s.prototype.modn=function(u){return this.modrn(u)},s.prototype.idivn=function(u){var d=u<0;d&&(u=-u),i(u<=67108863);for(var v=0,y=this.length-1;y>=0;y--){var M=(this.words[y]|0)+v*67108864;this.words[y]=M/u|0,v=M%u}return this._strip(),d?this.ineg():this},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){i(u.negative===0),i(!u.isZero());var d=this,v=u.clone();d.negative!==0?d=d.umod(u):d=d.clone();for(var y=new s(1),M=new s(0),x=new s(0),b=new s(1),S=0;d.isEven()&&v.isEven();)d.iushrn(1),v.iushrn(1),++S;for(var m=v.clone(),$=d.clone();!d.isZero();){for(var ee=0,O=1;!(d.words[0]&O)&&ee<26;++ee,O<<=1);if(ee>0)for(d.iushrn(ee);ee-- >0;)(y.isOdd()||M.isOdd())&&(y.iadd(m),M.isub($)),y.iushrn(1),M.iushrn(1);for(var H=0,X=1;!(v.words[0]&X)&&H<26;++H,X<<=1);if(H>0)for(v.iushrn(H);H-- >0;)(x.isOdd()||b.isOdd())&&(x.iadd(m),b.isub($)),x.iushrn(1),b.iushrn(1);d.cmp(v)>=0?(d.isub(v),y.isub(x),M.isub(b)):(v.isub(d),x.isub(y),b.isub(M))}return{a:x,b,gcd:v.iushln(S)}},s.prototype._invmp=function(u){i(u.negative===0),i(!u.isZero());var d=this,v=u.clone();d.negative!==0?d=d.umod(u):d=d.clone();for(var y=new s(1),M=new s(0),x=v.clone();d.cmpn(1)>0&&v.cmpn(1)>0;){for(var b=0,S=1;!(d.words[0]&S)&&b<26;++b,S<<=1);if(b>0)for(d.iushrn(b);b-- >0;)y.isOdd()&&y.iadd(x),y.iushrn(1);for(var m=0,$=1;!(v.words[0]&$)&&m<26;++m,$<<=1);if(m>0)for(v.iushrn(m);m-- >0;)M.isOdd()&&M.iadd(x),M.iushrn(1);d.cmp(v)>=0?(d.isub(v),y.isub(M)):(v.isub(d),M.isub(y))}var ee;return d.cmpn(1)===0?ee=y:ee=M,ee.cmpn(0)<0&&ee.iadd(u),ee},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var d=this.clone(),v=u.clone();d.negative=0,v.negative=0;for(var y=0;d.isEven()&&v.isEven();y++)d.iushrn(1),v.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;v.isEven();)v.iushrn(1);var M=d.cmp(v);if(M<0){var x=d;d=v,v=x}else if(M===0||v.cmpn(1)===0)break;d.isub(v)}while(!0);return v.iushln(y)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){i(typeof u=="number");var d=u%26,v=(u-d)/26,y=1<<d;if(this.length<=v)return this._expand(v+1),this.words[v]|=y,this;for(var M=y,x=v;M!==0&&x<this.length;x++){var b=this.words[x]|0;b+=M,M=b>>>26,b&=67108863,this.words[x]=b}return M!==0&&(this.words[x]=M,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var d=u<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var v;if(this.length>1)v=1;else{d&&(u=-u),i(u<=67108863,"Number is too big");var y=this.words[0]|0;v=y===u?0:y<u?-1:1}return this.negative!==0?-v|0:v},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var d=this.ucmp(u);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var d=0,v=this.length-1;v>=0;v--){var y=this.words[v]|0,M=u.words[v]|0;if(y!==M){y<M?d=-1:y>M&&(d=1);break}}return d},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new C(u)},s.prototype.toRed=function(u){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return i(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return i(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var F={k256:null,p224:null,p192:null,p25519:null};function L(p,u){this.name=p,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},L.prototype.ireduce=function(u){var d=u,v;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),v=d.bitLength();while(v>this.n);var y=v<this.n?-1:d.ucmp(this.p);return y===0?(d.words[0]=0,d.length=1):y>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},L.prototype.split=function(u,d){u.iushrn(this.n,0,d)},L.prototype.imulK=function(u){return u.imul(this.k)};function K(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(K,L),K.prototype.split=function(u,d){for(var v=4194303,y=Math.min(u.length,9),M=0;M<y;M++)d.words[M]=u.words[M];if(d.length=y,u.length<=9){u.words[0]=0,u.length=1;return}var x=u.words[9];for(d.words[d.length++]=x&v,M=10;M<u.length;M++){var b=u.words[M]|0;u.words[M-10]=(b&v)<<4|x>>>22,x=b}x>>>=22,u.words[M-10]=x,x===0&&u.length>10?u.length-=10:u.length-=9},K.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var d=0,v=0;v<u.length;v++){var y=u.words[v]|0;d+=y*977,u.words[v]=d&67108863,d=y*64+(d/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function V(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(V,L);function W(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,L);function Q(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(Q,L),Q.prototype.imulK=function(u){for(var d=0,v=0;v<u.length;v++){var y=(u.words[v]|0)*19+d,M=y&67108863;y>>>=26,u.words[v]=M,d=y}return d!==0&&(u.words[u.length++]=d),u},s._prime=function(u){if(F[u])return F[u];var d;if(u==="k256")d=new K;else if(u==="p224")d=new V;else if(u==="p192")d=new W;else if(u==="p25519")d=new Q;else throw new Error("Unknown prime "+u);return F[u]=d,d};function C(p){if(typeof p=="string"){var u=s._prime(p);this.m=u.p,this.prime=u}else i(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}C.prototype._verify1=function(u){i(u.negative===0,"red works only with positives"),i(u.red,"red works only with red numbers")},C.prototype._verify2=function(u,d){i((u.negative|d.negative)===0,"red works only with positives"),i(u.red&&u.red===d.red,"red works only with red numbers")},C.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(l(u,u.umod(this.m)._forceRed(this)),u)},C.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},C.prototype.add=function(u,d){this._verify2(u,d);var v=u.add(d);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},C.prototype.iadd=function(u,d){this._verify2(u,d);var v=u.iadd(d);return v.cmp(this.m)>=0&&v.isub(this.m),v},C.prototype.sub=function(u,d){this._verify2(u,d);var v=u.sub(d);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},C.prototype.isub=function(u,d){this._verify2(u,d);var v=u.isub(d);return v.cmpn(0)<0&&v.iadd(this.m),v},C.prototype.shl=function(u,d){return this._verify1(u),this.imod(u.ushln(d))},C.prototype.imul=function(u,d){return this._verify2(u,d),this.imod(u.imul(d))},C.prototype.mul=function(u,d){return this._verify2(u,d),this.imod(u.mul(d))},C.prototype.isqr=function(u){return this.imul(u,u.clone())},C.prototype.sqr=function(u){return this.mul(u,u)},C.prototype.sqrt=function(u){if(u.isZero())return u.clone();var d=this.m.andln(3);if(i(d%2===1),d===3){var v=this.m.add(new s(1)).iushrn(2);return this.pow(u,v)}for(var y=this.m.subn(1),M=0;!y.isZero()&&y.andln(1)===0;)M++,y.iushrn(1);i(!y.isZero());var x=new s(1).toRed(this),b=x.redNeg(),S=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new s(2*m*m).toRed(this);this.pow(m,S).cmp(b)!==0;)m.redIAdd(b);for(var $=this.pow(m,y),ee=this.pow(u,y.addn(1).iushrn(1)),O=this.pow(u,y),H=M;O.cmp(x)!==0;){for(var X=O,te=0;X.cmp(x)!==0;te++)X=X.redSqr();i(te<H);var ne=this.pow($,new s(1).iushln(H-te-1));ee=ee.redMul(ne),$=ne.redSqr(),O=O.redMul($),H=te}return ee},C.prototype.invm=function(u){var d=u._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},C.prototype.pow=function(u,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return u.clone();var v=4,y=new Array(1<<v);y[0]=new s(1).toRed(this),y[1]=u;for(var M=2;M<y.length;M++)y[M]=this.mul(y[M-1],u);var x=y[0],b=0,S=0,m=d.bitLength()%26;for(m===0&&(m=26),M=d.length-1;M>=0;M--){for(var $=d.words[M],ee=m-1;ee>=0;ee--){var O=$>>ee&1;if(x!==y[0]&&(x=this.sqr(x)),O===0&&b===0){S=0;continue}b<<=1,b|=O,S++,!(S!==v&&(M!==0||ee!==0))&&(x=this.mul(x,y[b]),S=0,b=0)}m=26}return x},C.prototype.convertTo=function(u){var d=u.umod(this.m);return d===u?d.clone():d},C.prototype.convertFrom=function(u){var d=u.clone();return d.red=null,d},s.mont=function(u){return new g(u)};function g(p){C.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(g,C),g.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},g.prototype.convertFrom=function(u){var d=this.imod(u.mul(this.rinv));return d.red=null,d},g.prototype.imul=function(u,d){if(u.isZero()||d.isZero())return u.words[0]=0,u.length=1,u;var v=u.imul(d),y=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=v.isub(y).iushrn(this.shift),x=M;return M.cmp(this.m)>=0?x=M.isub(this.m):M.cmpn(0)<0&&(x=M.iadd(this.m)),x._forceRed(this)},g.prototype.mul=function(u,d){if(u.isZero()||d.isZero())return new s(0)._forceRed(this);var v=u.mul(d),y=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=v.isub(y).iushrn(this.shift),x=M;return M.cmp(this.m)>=0?x=M.isub(this.m):M.cmpn(0)<0&&(x=M.iadd(this.m)),x._forceRed(this)},g.prototype.invm=function(u){var d=this.imod(u._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(e,H5)}(Xa)),Xa.exports}var G5=W5();const Xe=no(G5);var J5=Xe.BN;function Y5(e){return new J5(e,36).toString(16)}var Wc={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */var f0;function Z5(){return f0||(f0=1,function(e){(function(){var t="input is invalid type",r="finalize already called",i=typeof window=="object",n=i?window:{};n.JS_SHA3_NO_WINDOW&&(i=!1);var s=!i&&typeof self=="object",o=!n.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?n=Oi:s&&(n=self);var a=!n.JS_SHA3_NO_COMMON_JS&&!0&&e.exports,f=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),l=[31,7936,2031616,520093696],h=[4,1024,262144,67108864],w=[1,256,65536,16777216],E=[6,1536,393216,100663296],_=[0,8,16,24],A=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],R=[224,256,384,512],N=[128,256],q=["hex","buffer","arrayBuffer","array","digest"],U={128:168,256:136};(n.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(O){return Object.prototype.toString.call(O)==="[object Array]"}),f&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(O){return typeof O=="object"&&O.buffer&&O.buffer.constructor===ArrayBuffer});for(var P=function(O,H,X){return function(te){return new m(O,H,O).update(te)[X]()}},F=function(O,H,X){return function(te,ne){return new m(O,H,ne).update(te)[X]()}},L=function(O,H,X){return function(te,ne,ge,ve){return u["cshake"+O].update(te,ne,ge,ve)[X]()}},K=function(O,H,X){return function(te,ne,ge,ve){return u["kmac"+O].update(te,ne,ge,ve)[X]()}},V=function(O,H,X,te){for(var ne=0;ne<q.length;++ne){var ge=q[ne];O[ge]=H(X,te,ge)}return O},W=function(O,H){var X=P(O,H,"hex");return X.create=function(){return new m(O,H,O)},X.update=function(te){return X.create().update(te)},V(X,P,O,H)},Q=function(O,H){var X=F(O,H,"hex");return X.create=function(te){return new m(O,H,te)},X.update=function(te,ne){return X.create(ne).update(te)},V(X,F,O,H)},C=function(O,H){var X=U[O],te=L(O,H,"hex");return te.create=function(ne,ge,ve){return!ge&&!ve?u["shake"+O].create(ne):new m(O,H,ne).bytepad([ge,ve],X)},te.update=function(ne,ge,ve,B){return te.create(ge,ve,B).update(ne)},V(te,L,O,H)},g=function(O,H){var X=U[O],te=K(O,H,"hex");return te.create=function(ne,ge,ve){return new $(O,H,ge).bytepad(["KMAC",ve],X).bytepad([ne],X)},te.update=function(ne,ge,ve,B){return te.create(ne,ve,B).update(ge)},V(te,K,O,H)},p=[{name:"keccak",padding:w,bits:R,createMethod:W},{name:"sha3",padding:E,bits:R,createMethod:W},{name:"shake",padding:l,bits:N,createMethod:Q},{name:"cshake",padding:h,bits:N,createMethod:C},{name:"kmac",padding:h,bits:N,createMethod:g}],u={},d=[],v=0;v<p.length;++v)for(var y=p[v],M=y.bits,x=0;x<M.length;++x){var b=y.name+"_"+M[x];if(d.push(b),u[b]=y.createMethod(M[x],y.padding),y.name!=="sha3"){var S=y.name+M[x];d.push(S),u[S]=u[b]}}function m(O,H,X){this.blocks=[],this.s=[],this.padding=H,this.outputBits=X,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(O<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=X>>5,this.extraBytes=(X&31)>>3;for(var te=0;te<50;++te)this.s[te]=0}m.prototype.update=function(O){if(this.finalized)throw new Error(r);var H,X=typeof O;if(X!=="string"){if(X==="object"){if(O===null)throw new Error(t);if(f&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!f||!ArrayBuffer.isView(O)))throw new Error(t)}else throw new Error(t);H=!0}for(var te=this.blocks,ne=this.byteCount,ge=O.length,ve=this.blockCount,B=0,z=this.s,G,Z;B<ge;){if(this.reset)for(this.reset=!1,te[0]=this.block,G=1;G<ve+1;++G)te[G]=0;if(H)for(G=this.start;B<ge&&G<ne;++B)te[G>>2]|=O[B]<<_[G++&3];else for(G=this.start;B<ge&&G<ne;++B)Z=O.charCodeAt(B),Z<128?te[G>>2]|=Z<<_[G++&3]:Z<2048?(te[G>>2]|=(192|Z>>6)<<_[G++&3],te[G>>2]|=(128|Z&63)<<_[G++&3]):Z<55296||Z>=57344?(te[G>>2]|=(224|Z>>12)<<_[G++&3],te[G>>2]|=(128|Z>>6&63)<<_[G++&3],te[G>>2]|=(128|Z&63)<<_[G++&3]):(Z=65536+((Z&1023)<<10|O.charCodeAt(++B)&1023),te[G>>2]|=(240|Z>>18)<<_[G++&3],te[G>>2]|=(128|Z>>12&63)<<_[G++&3],te[G>>2]|=(128|Z>>6&63)<<_[G++&3],te[G>>2]|=(128|Z&63)<<_[G++&3]);if(this.lastByteIndex=G,G>=ne){for(this.start=G-ne,this.block=te[ve],G=0;G<ve;++G)z[G]^=te[G];ee(z),this.reset=!0}else this.start=G}return this},m.prototype.encode=function(O,H){var X=O&255,te=1,ne=[X];for(O=O>>8,X=O&255;X>0;)ne.unshift(X),O=O>>8,X=O&255,++te;return H?ne.push(te):ne.unshift(te),this.update(ne),ne.length},m.prototype.encodeString=function(O){var H,X=typeof O;if(X!=="string"){if(X==="object"){if(O===null)throw new Error(t);if(f&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!f||!ArrayBuffer.isView(O)))throw new Error(t)}else throw new Error(t);H=!0}var te=0,ne=O.length;if(H)te=ne;else for(var ge=0;ge<O.length;++ge){var ve=O.charCodeAt(ge);ve<128?te+=1:ve<2048?te+=2:ve<55296||ve>=57344?te+=3:(ve=65536+((ve&1023)<<10|O.charCodeAt(++ge)&1023),te+=4)}return te+=this.encode(te*8),this.update(O),te},m.prototype.bytepad=function(O,H){for(var X=this.encode(H),te=0;te<O.length;++te)X+=this.encodeString(O[te]);var ne=H-X%H,ge=[];return ge.length=ne,this.update(ge),this},m.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var O=this.blocks,H=this.lastByteIndex,X=this.blockCount,te=this.s;if(O[H>>2]|=this.padding[H&3],this.lastByteIndex===this.byteCount)for(O[0]=O[X],H=1;H<X+1;++H)O[H]=0;for(O[X-1]|=2147483648,H=0;H<X;++H)te[H]^=O[H];ee(te)}},m.prototype.toString=m.prototype.hex=function(){this.finalize();for(var O=this.blockCount,H=this.s,X=this.outputBlocks,te=this.extraBytes,ne=0,ge=0,ve="",B;ge<X;){for(ne=0;ne<O&&ge<X;++ne,++ge)B=H[ne],ve+=c[B>>4&15]+c[B&15]+c[B>>12&15]+c[B>>8&15]+c[B>>20&15]+c[B>>16&15]+c[B>>28&15]+c[B>>24&15];ge%O===0&&(ee(H),ne=0)}return te&&(B=H[ne],ve+=c[B>>4&15]+c[B&15],te>1&&(ve+=c[B>>12&15]+c[B>>8&15]),te>2&&(ve+=c[B>>20&15]+c[B>>16&15])),ve},m.prototype.arrayBuffer=function(){this.finalize();var O=this.blockCount,H=this.s,X=this.outputBlocks,te=this.extraBytes,ne=0,ge=0,ve=this.outputBits>>3,B;te?B=new ArrayBuffer(X+1<<2):B=new ArrayBuffer(ve);for(var z=new Uint32Array(B);ge<X;){for(ne=0;ne<O&&ge<X;++ne,++ge)z[ge]=H[ne];ge%O===0&&ee(H)}return te&&(z[ne]=H[ne],B=B.slice(0,ve)),B},m.prototype.buffer=m.prototype.arrayBuffer,m.prototype.digest=m.prototype.array=function(){this.finalize();for(var O=this.blockCount,H=this.s,X=this.outputBlocks,te=this.extraBytes,ne=0,ge=0,ve=[],B,z;ge<X;){for(ne=0;ne<O&&ge<X;++ne,++ge)B=ge<<2,z=H[ne],ve[B]=z&255,ve[B+1]=z>>8&255,ve[B+2]=z>>16&255,ve[B+3]=z>>24&255;ge%O===0&&ee(H)}return te&&(B=ge<<2,z=H[ne],ve[B]=z&255,te>1&&(ve[B+1]=z>>8&255),te>2&&(ve[B+2]=z>>16&255)),ve};function $(O,H,X){m.call(this,O,H,X)}$.prototype=new m,$.prototype.finalize=function(){return this.encode(this.outputBits,!0),m.prototype.finalize.call(this)};var ee=function(O){var H,X,te,ne,ge,ve,B,z,G,Z,oe,ae,ce,ue,le,ie,ye,pe,he,_e,Ae,we,De,Fe,Se,Ke,We,Ce,et,ze,Re,at,dt,Ie,st,$e,ke,Ye,Ge,Le,lt,ft,Ne,pt,mt,Be,gt,bt,Ue,ht,tt,qe,ct,yt,je,ut,it,vt,Qt,yr,Jt,wr,Rt;for(te=0;te<48;te+=2)ne=O[0]^O[10]^O[20]^O[30]^O[40],ge=O[1]^O[11]^O[21]^O[31]^O[41],ve=O[2]^O[12]^O[22]^O[32]^O[42],B=O[3]^O[13]^O[23]^O[33]^O[43],z=O[4]^O[14]^O[24]^O[34]^O[44],G=O[5]^O[15]^O[25]^O[35]^O[45],Z=O[6]^O[16]^O[26]^O[36]^O[46],oe=O[7]^O[17]^O[27]^O[37]^O[47],ae=O[8]^O[18]^O[28]^O[38]^O[48],ce=O[9]^O[19]^O[29]^O[39]^O[49],H=ae^(ve<<1|B>>>31),X=ce^(B<<1|ve>>>31),O[0]^=H,O[1]^=X,O[10]^=H,O[11]^=X,O[20]^=H,O[21]^=X,O[30]^=H,O[31]^=X,O[40]^=H,O[41]^=X,H=ne^(z<<1|G>>>31),X=ge^(G<<1|z>>>31),O[2]^=H,O[3]^=X,O[12]^=H,O[13]^=X,O[22]^=H,O[23]^=X,O[32]^=H,O[33]^=X,O[42]^=H,O[43]^=X,H=ve^(Z<<1|oe>>>31),X=B^(oe<<1|Z>>>31),O[4]^=H,O[5]^=X,O[14]^=H,O[15]^=X,O[24]^=H,O[25]^=X,O[34]^=H,O[35]^=X,O[44]^=H,O[45]^=X,H=z^(ae<<1|ce>>>31),X=G^(ce<<1|ae>>>31),O[6]^=H,O[7]^=X,O[16]^=H,O[17]^=X,O[26]^=H,O[27]^=X,O[36]^=H,O[37]^=X,O[46]^=H,O[47]^=X,H=Z^(ne<<1|ge>>>31),X=oe^(ge<<1|ne>>>31),O[8]^=H,O[9]^=X,O[18]^=H,O[19]^=X,O[28]^=H,O[29]^=X,O[38]^=H,O[39]^=X,O[48]^=H,O[49]^=X,ue=O[0],le=O[1],Be=O[11]<<4|O[10]>>>28,gt=O[10]<<4|O[11]>>>28,Ce=O[20]<<3|O[21]>>>29,et=O[21]<<3|O[20]>>>29,yr=O[31]<<9|O[30]>>>23,Jt=O[30]<<9|O[31]>>>23,ft=O[40]<<18|O[41]>>>14,Ne=O[41]<<18|O[40]>>>14,Ie=O[2]<<1|O[3]>>>31,st=O[3]<<1|O[2]>>>31,ie=O[13]<<12|O[12]>>>20,ye=O[12]<<12|O[13]>>>20,bt=O[22]<<10|O[23]>>>22,Ue=O[23]<<10|O[22]>>>22,ze=O[33]<<13|O[32]>>>19,Re=O[32]<<13|O[33]>>>19,wr=O[42]<<2|O[43]>>>30,Rt=O[43]<<2|O[42]>>>30,yt=O[5]<<30|O[4]>>>2,je=O[4]<<30|O[5]>>>2,$e=O[14]<<6|O[15]>>>26,ke=O[15]<<6|O[14]>>>26,pe=O[25]<<11|O[24]>>>21,he=O[24]<<11|O[25]>>>21,ht=O[34]<<15|O[35]>>>17,tt=O[35]<<15|O[34]>>>17,at=O[45]<<29|O[44]>>>3,dt=O[44]<<29|O[45]>>>3,Fe=O[6]<<28|O[7]>>>4,Se=O[7]<<28|O[6]>>>4,ut=O[17]<<23|O[16]>>>9,it=O[16]<<23|O[17]>>>9,Ye=O[26]<<25|O[27]>>>7,Ge=O[27]<<25|O[26]>>>7,_e=O[36]<<21|O[37]>>>11,Ae=O[37]<<21|O[36]>>>11,qe=O[47]<<24|O[46]>>>8,ct=O[46]<<24|O[47]>>>8,pt=O[8]<<27|O[9]>>>5,mt=O[9]<<27|O[8]>>>5,Ke=O[18]<<20|O[19]>>>12,We=O[19]<<20|O[18]>>>12,vt=O[29]<<7|O[28]>>>25,Qt=O[28]<<7|O[29]>>>25,Le=O[38]<<8|O[39]>>>24,lt=O[39]<<8|O[38]>>>24,we=O[48]<<14|O[49]>>>18,De=O[49]<<14|O[48]>>>18,O[0]=ue^~ie&pe,O[1]=le^~ye&he,O[10]=Fe^~Ke&Ce,O[11]=Se^~We&et,O[20]=Ie^~$e&Ye,O[21]=st^~ke&Ge,O[30]=pt^~Be&bt,O[31]=mt^~gt&Ue,O[40]=yt^~ut&vt,O[41]=je^~it&Qt,O[2]=ie^~pe&_e,O[3]=ye^~he&Ae,O[12]=Ke^~Ce&ze,O[13]=We^~et&Re,O[22]=$e^~Ye&Le,O[23]=ke^~Ge&lt,O[32]=Be^~bt&ht,O[33]=gt^~Ue&tt,O[42]=ut^~vt&yr,O[43]=it^~Qt&Jt,O[4]=pe^~_e&we,O[5]=he^~Ae&De,O[14]=Ce^~ze&at,O[15]=et^~Re&dt,O[24]=Ye^~Le&ft,O[25]=Ge^~lt&Ne,O[34]=bt^~ht&qe,O[35]=Ue^~tt&ct,O[44]=vt^~yr&wr,O[45]=Qt^~Jt&Rt,O[6]=_e^~we&ue,O[7]=Ae^~De&le,O[16]=ze^~at&Fe,O[17]=Re^~dt&Se,O[26]=Le^~ft&Ie,O[27]=lt^~Ne&st,O[36]=ht^~qe&pt,O[37]=tt^~ct&mt,O[46]=yr^~wr&yt,O[47]=Jt^~Rt&je,O[8]=we^~ue&ie,O[9]=De^~le&ye,O[18]=at^~Fe&Ke,O[19]=dt^~Se&We,O[28]=ft^~Ie&$e,O[29]=Ne^~st&ke,O[38]=qe^~pt&Be,O[39]=ct^~mt&gt,O[48]=wr^~yt&ut,O[49]=Rt^~je&it,O[0]^=A[te],O[1]^=A[te+1]};if(a)e.exports=u;else for(v=0;v<d.length;++v)n[d[v]]=u[d[v]]})()}(Wc)),Wc.exports}var X5=Z5();const Q5=no(X5);function Ab(e){return"0x"+Q5.keccak_256(cr(e))}const e_="address/5.7.0",Po=new Ft(e_);function c0(e){Ji(e,20)||Po.throwArgumentError("invalid address","address",e),e=e.toLowerCase();const t=e.substring(2).split(""),r=new Uint8Array(40);for(let n=0;n<40;n++)r[n]=t[n].charCodeAt(0);const i=cr(Ab(r));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(t[n]=t[n].toUpperCase()),(i[n>>1]&15)>=8&&(t[n+1]=t[n+1].toUpperCase());return"0x"+t.join("")}const t_=9007199254740991;function r_(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}const eh={};for(let e=0;e<10;e++)eh[String(e)]=String(e);for(let e=0;e<26;e++)eh[String.fromCharCode(65+e)]=String(10+e);const u0=Math.floor(r_(t_));function i_(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map(i=>eh[i]).join("");for(;t.length>=u0;){let i=t.substring(0,u0);t=parseInt(i,10)%97+t.substring(i.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function n_(e){let t=null;if(typeof e!="string"&&Po.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))e.substring(0,2)!=="0x"&&(e="0x"+e),t=c0(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Po.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==i_(e)&&Po.throwArgumentError("bad icap checksum","address",e),t=Y5(e.substring(4));t.length<40;)t="0"+t;t=c0("0x"+t)}else Po.throwArgumentError("invalid address","address",e);return t}function _o(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}var Gc={},St={},Jc,l0;function ms(){if(l0)return Jc;l0=1,Jc=e;function e(t,r){if(!t)throw new Error(r||"Assertion failed")}return e.equal=function(r,i,n){if(r!=i)throw new Error(n||"Assertion failed: "+r+" != "+i)},Jc}var Na={exports:{}},h0;function Hf(){return h0||(h0=1,typeof Object.create=="function"?Na.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Na.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}),Na.exports}var d0;function Xi(){if(d0)return St;d0=1;var e=ms(),t=Hf();St.inherits=t;function r(g,p){return(g.charCodeAt(p)&64512)!==55296||p<0||p+1>=g.length?!1:(g.charCodeAt(p+1)&64512)===56320}function i(g,p){if(Array.isArray(g))return g.slice();if(!g)return[];var u=[];if(typeof g=="string")if(p){if(p==="hex")for(g=g.replace(/[^a-z0-9]+/ig,""),g.length%2!==0&&(g="0"+g),v=0;v<g.length;v+=2)u.push(parseInt(g[v]+g[v+1],16))}else for(var d=0,v=0;v<g.length;v++){var y=g.charCodeAt(v);y<128?u[d++]=y:y<2048?(u[d++]=y>>6|192,u[d++]=y&63|128):r(g,v)?(y=65536+((y&1023)<<10)+(g.charCodeAt(++v)&1023),u[d++]=y>>18|240,u[d++]=y>>12&63|128,u[d++]=y>>6&63|128,u[d++]=y&63|128):(u[d++]=y>>12|224,u[d++]=y>>6&63|128,u[d++]=y&63|128)}else for(v=0;v<g.length;v++)u[v]=g[v]|0;return u}St.toArray=i;function n(g){for(var p="",u=0;u<g.length;u++)p+=a(g[u].toString(16));return p}St.toHex=n;function s(g){var p=g>>>24|g>>>8&65280|g<<8&16711680|(g&255)<<24;return p>>>0}St.htonl=s;function o(g,p){for(var u="",d=0;d<g.length;d++){var v=g[d];p==="little"&&(v=s(v)),u+=f(v.toString(16))}return u}St.toHex32=o;function a(g){return g.length===1?"0"+g:g}St.zero2=a;function f(g){return g.length===7?"0"+g:g.length===6?"00"+g:g.length===5?"000"+g:g.length===4?"0000"+g:g.length===3?"00000"+g:g.length===2?"000000"+g:g.length===1?"0000000"+g:g}St.zero8=f;function c(g,p,u,d){var v=u-p;e(v%4===0);for(var y=new Array(v/4),M=0,x=p;M<y.length;M++,x+=4){var b;d==="big"?b=g[x]<<24|g[x+1]<<16|g[x+2]<<8|g[x+3]:b=g[x+3]<<24|g[x+2]<<16|g[x+1]<<8|g[x],y[M]=b>>>0}return y}St.join32=c;function l(g,p){for(var u=new Array(g.length*4),d=0,v=0;d<g.length;d++,v+=4){var y=g[d];p==="big"?(u[v]=y>>>24,u[v+1]=y>>>16&255,u[v+2]=y>>>8&255,u[v+3]=y&255):(u[v+3]=y>>>24,u[v+2]=y>>>16&255,u[v+1]=y>>>8&255,u[v]=y&255)}return u}St.split32=l;function h(g,p){return g>>>p|g<<32-p}St.rotr32=h;function w(g,p){return g<<p|g>>>32-p}St.rotl32=w;function E(g,p){return g+p>>>0}St.sum32=E;function _(g,p,u){return g+p+u>>>0}St.sum32_3=_;function A(g,p,u,d){return g+p+u+d>>>0}St.sum32_4=A;function R(g,p,u,d,v){return g+p+u+d+v>>>0}St.sum32_5=R;function N(g,p,u,d){var v=g[p],y=g[p+1],M=d+y>>>0,x=(M<d?1:0)+u+v;g[p]=x>>>0,g[p+1]=M}St.sum64=N;function q(g,p,u,d){var v=p+d>>>0,y=(v<p?1:0)+g+u;return y>>>0}St.sum64_hi=q;function U(g,p,u,d){var v=p+d;return v>>>0}St.sum64_lo=U;function P(g,p,u,d,v,y,M,x){var b=0,S=p;S=S+d>>>0,b+=S<p?1:0,S=S+y>>>0,b+=S<y?1:0,S=S+x>>>0,b+=S<x?1:0;var m=g+u+v+M+b;return m>>>0}St.sum64_4_hi=P;function F(g,p,u,d,v,y,M,x){var b=p+d+y+x;return b>>>0}St.sum64_4_lo=F;function L(g,p,u,d,v,y,M,x,b,S){var m=0,$=p;$=$+d>>>0,m+=$<p?1:0,$=$+y>>>0,m+=$<y?1:0,$=$+x>>>0,m+=$<x?1:0,$=$+S>>>0,m+=$<S?1:0;var ee=g+u+v+M+b+m;return ee>>>0}St.sum64_5_hi=L;function K(g,p,u,d,v,y,M,x,b,S){var m=p+d+y+x+S;return m>>>0}St.sum64_5_lo=K;function V(g,p,u){var d=p<<32-u|g>>>u;return d>>>0}St.rotr64_hi=V;function W(g,p,u){var d=g<<32-u|p>>>u;return d>>>0}St.rotr64_lo=W;function Q(g,p,u){return g>>>u}St.shr64_hi=Q;function C(g,p,u){var d=g<<32-u|p>>>u;return d>>>0}return St.shr64_lo=C,St}var Yc={},p0;function sa(){if(p0)return Yc;p0=1;var e=Xi(),t=ms();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Yc.BlockHash=r,r.prototype.update=function(n,s){if(n=e.toArray(n,s),this.pending?this.pending=this.pending.concat(n):this.pending=n,this.pendingTotal+=n.length,this.pending.length>=this._delta8){n=this.pending;var o=n.length%this._delta8;this.pending=n.slice(n.length-o,n.length),this.pending.length===0&&(this.pending=null),n=e.join32(n,0,n.length-o,this.endian);for(var a=0;a<n.length;a+=this._delta32)this._update(n,a,a+this._delta32)}return this},r.prototype.digest=function(n){return this.update(this._pad()),t(this.pending===null),this._digest(n)},r.prototype._pad=function(){var n=this.pendingTotal,s=this._delta8,o=s-(n+this.padLength)%s,a=new Array(o+this.padLength);a[0]=128;for(var f=1;f<o;f++)a[f]=0;if(n<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)a[f++]=0;a[f++]=0,a[f++]=0,a[f++]=0,a[f++]=0,a[f++]=n>>>24&255,a[f++]=n>>>16&255,a[f++]=n>>>8&255,a[f++]=n&255}else for(a[f++]=n&255,a[f++]=n>>>8&255,a[f++]=n>>>16&255,a[f++]=n>>>24&255,a[f++]=0,a[f++]=0,a[f++]=0,a[f++]=0,c=8;c<this.padLength;c++)a[f++]=0;return a},Yc}var Qn={},Ui={},g0;function Ib(){if(g0)return Ui;g0=1;var e=Xi(),t=e.rotr32;function r(l,h,w,E){if(l===0)return i(h,w,E);if(l===1||l===3)return s(h,w,E);if(l===2)return n(h,w,E)}Ui.ft_1=r;function i(l,h,w){return l&h^~l&w}Ui.ch32=i;function n(l,h,w){return l&h^l&w^h&w}Ui.maj32=n;function s(l,h,w){return l^h^w}Ui.p32=s;function o(l){return t(l,2)^t(l,13)^t(l,22)}Ui.s0_256=o;function a(l){return t(l,6)^t(l,11)^t(l,25)}Ui.s1_256=a;function f(l){return t(l,7)^t(l,18)^l>>>3}Ui.g0_256=f;function c(l){return t(l,17)^t(l,19)^l>>>10}return Ui.g1_256=c,Ui}var Zc,b0;function s_(){if(b0)return Zc;b0=1;var e=Xi(),t=sa(),r=Ib(),i=e.rotl32,n=e.sum32,s=e.sum32_5,o=r.ft_1,a=t.BlockHash,f=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return e.inherits(c,a),Zc=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(h,w){for(var E=this.W,_=0;_<16;_++)E[_]=h[w+_];for(;_<E.length;_++)E[_]=i(E[_-3]^E[_-8]^E[_-14]^E[_-16],1);var A=this.h[0],R=this.h[1],N=this.h[2],q=this.h[3],U=this.h[4];for(_=0;_<E.length;_++){var P=~~(_/20),F=s(i(A,5),o(P,R,N,q),U,E[_],f[P]);U=q,q=N,N=i(R,30),R=A,A=F}this.h[0]=n(this.h[0],A),this.h[1]=n(this.h[1],R),this.h[2]=n(this.h[2],N),this.h[3]=n(this.h[3],q),this.h[4]=n(this.h[4],U)},c.prototype._digest=function(h){return h==="hex"?e.toHex32(this.h,"big"):e.split32(this.h,"big")},Zc}var Xc,v0;function Db(){if(v0)return Xc;v0=1;var e=Xi(),t=sa(),r=Ib(),i=ms(),n=e.sum32,s=e.sum32_4,o=e.sum32_5,a=r.ch32,f=r.maj32,c=r.s0_256,l=r.s1_256,h=r.g0_256,w=r.g1_256,E=t.BlockHash,_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function A(){if(!(this instanceof A))return new A;E.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_,this.W=new Array(64)}return e.inherits(A,E),Xc=A,A.blockSize=512,A.outSize=256,A.hmacStrength=192,A.padLength=64,A.prototype._update=function(N,q){for(var U=this.W,P=0;P<16;P++)U[P]=N[q+P];for(;P<U.length;P++)U[P]=s(w(U[P-2]),U[P-7],h(U[P-15]),U[P-16]);var F=this.h[0],L=this.h[1],K=this.h[2],V=this.h[3],W=this.h[4],Q=this.h[5],C=this.h[6],g=this.h[7];for(i(this.k.length===U.length),P=0;P<U.length;P++){var p=o(g,l(W),a(W,Q,C),this.k[P],U[P]),u=n(c(F),f(F,L,K));g=C,C=Q,Q=W,W=n(V,p),V=K,K=L,L=F,F=n(p,u)}this.h[0]=n(this.h[0],F),this.h[1]=n(this.h[1],L),this.h[2]=n(this.h[2],K),this.h[3]=n(this.h[3],V),this.h[4]=n(this.h[4],W),this.h[5]=n(this.h[5],Q),this.h[6]=n(this.h[6],C),this.h[7]=n(this.h[7],g)},A.prototype._digest=function(N){return N==="hex"?e.toHex32(this.h,"big"):e.split32(this.h,"big")},Xc}var Qc,m0;function o_(){if(m0)return Qc;m0=1;var e=Xi(),t=Db();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return e.inherits(r,t),Qc=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(n){return n==="hex"?e.toHex32(this.h.slice(0,7),"big"):e.split32(this.h.slice(0,7),"big")},Qc}var eu,y0;function Ob(){if(y0)return eu;y0=1;var e=Xi(),t=sa(),r=ms(),i=e.rotr64_hi,n=e.rotr64_lo,s=e.shr64_hi,o=e.shr64_lo,a=e.sum64,f=e.sum64_hi,c=e.sum64_lo,l=e.sum64_4_hi,h=e.sum64_4_lo,w=e.sum64_5_hi,E=e.sum64_5_lo,_=t.BlockHash,A=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function R(){if(!(this instanceof R))return new R;_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=A,this.W=new Array(160)}e.inherits(R,_),eu=R,R.blockSize=1024,R.outSize=512,R.hmacStrength=192,R.padLength=128,R.prototype._prepareBlock=function(u,d){for(var v=this.W,y=0;y<32;y++)v[y]=u[d+y];for(;y<v.length;y+=2){var M=C(v[y-4],v[y-3]),x=g(v[y-4],v[y-3]),b=v[y-14],S=v[y-13],m=W(v[y-30],v[y-29]),$=Q(v[y-30],v[y-29]),ee=v[y-32],O=v[y-31];v[y]=l(M,x,b,S,m,$,ee,O),v[y+1]=h(M,x,b,S,m,$,ee,O)}},R.prototype._update=function(u,d){this._prepareBlock(u,d);var v=this.W,y=this.h[0],M=this.h[1],x=this.h[2],b=this.h[3],S=this.h[4],m=this.h[5],$=this.h[6],ee=this.h[7],O=this.h[8],H=this.h[9],X=this.h[10],te=this.h[11],ne=this.h[12],ge=this.h[13],ve=this.h[14],B=this.h[15];r(this.k.length===v.length);for(var z=0;z<v.length;z+=2){var G=ve,Z=B,oe=K(O,H),ae=V(O,H),ce=N(O,H,X,te,ne),ue=q(O,H,X,te,ne,ge),le=this.k[z],ie=this.k[z+1],ye=v[z],pe=v[z+1],he=w(G,Z,oe,ae,ce,ue,le,ie,ye,pe),_e=E(G,Z,oe,ae,ce,ue,le,ie,ye,pe);G=F(y,M),Z=L(y,M),oe=U(y,M,x,b,S),ae=P(y,M,x,b,S,m);var Ae=f(G,Z,oe,ae),we=c(G,Z,oe,ae);ve=ne,B=ge,ne=X,ge=te,X=O,te=H,O=f($,ee,he,_e),H=c(ee,ee,he,_e),$=S,ee=m,S=x,m=b,x=y,b=M,y=f(he,_e,Ae,we),M=c(he,_e,Ae,we)}a(this.h,0,y,M),a(this.h,2,x,b),a(this.h,4,S,m),a(this.h,6,$,ee),a(this.h,8,O,H),a(this.h,10,X,te),a(this.h,12,ne,ge),a(this.h,14,ve,B)},R.prototype._digest=function(u){return u==="hex"?e.toHex32(this.h,"big"):e.split32(this.h,"big")};function N(p,u,d,v,y){var M=p&d^~p&y;return M<0&&(M+=4294967296),M}function q(p,u,d,v,y,M){var x=u&v^~u&M;return x<0&&(x+=4294967296),x}function U(p,u,d,v,y){var M=p&d^p&y^d&y;return M<0&&(M+=4294967296),M}function P(p,u,d,v,y,M){var x=u&v^u&M^v&M;return x<0&&(x+=4294967296),x}function F(p,u){var d=i(p,u,28),v=i(u,p,2),y=i(u,p,7),M=d^v^y;return M<0&&(M+=4294967296),M}function L(p,u){var d=n(p,u,28),v=n(u,p,2),y=n(u,p,7),M=d^v^y;return M<0&&(M+=4294967296),M}function K(p,u){var d=i(p,u,14),v=i(p,u,18),y=i(u,p,9),M=d^v^y;return M<0&&(M+=4294967296),M}function V(p,u){var d=n(p,u,14),v=n(p,u,18),y=n(u,p,9),M=d^v^y;return M<0&&(M+=4294967296),M}function W(p,u){var d=i(p,u,1),v=i(p,u,8),y=s(p,u,7),M=d^v^y;return M<0&&(M+=4294967296),M}function Q(p,u){var d=n(p,u,1),v=n(p,u,8),y=o(p,u,7),M=d^v^y;return M<0&&(M+=4294967296),M}function C(p,u){var d=i(p,u,19),v=i(u,p,29),y=s(p,u,6),M=d^v^y;return M<0&&(M+=4294967296),M}function g(p,u){var d=n(p,u,19),v=n(u,p,29),y=o(p,u,6),M=d^v^y;return M<0&&(M+=4294967296),M}return eu}var tu,w0;function a_(){if(w0)return tu;w0=1;var e=Xi(),t=Ob();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return e.inherits(r,t),tu=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(n){return n==="hex"?e.toHex32(this.h.slice(0,12),"big"):e.split32(this.h.slice(0,12),"big")},tu}var _0;function f_(){return _0||(_0=1,Qn.sha1=s_(),Qn.sha224=o_(),Qn.sha256=Db(),Qn.sha384=a_(),Qn.sha512=Ob()),Qn}var ru={},x0;function c_(){if(x0)return ru;x0=1;var e=Xi(),t=sa(),r=e.rotl32,i=e.sum32,n=e.sum32_3,s=e.sum32_4,o=t.BlockHash;function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}e.inherits(a,o),ru.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(R,N){for(var q=this.h[0],U=this.h[1],P=this.h[2],F=this.h[3],L=this.h[4],K=q,V=U,W=P,Q=F,C=L,g=0;g<80;g++){var p=i(r(s(q,f(g,U,P,F),R[h[g]+N],c(g)),E[g]),L);q=L,L=F,F=r(P,10),P=U,U=p,p=i(r(s(K,f(79-g,V,W,Q),R[w[g]+N],l(g)),_[g]),C),K=C,C=Q,Q=r(W,10),W=V,V=p}p=n(this.h[1],P,Q),this.h[1]=n(this.h[2],F,C),this.h[2]=n(this.h[3],L,K),this.h[3]=n(this.h[4],q,V),this.h[4]=n(this.h[0],U,W),this.h[0]=p},a.prototype._digest=function(R){return R==="hex"?e.toHex32(this.h,"little"):e.split32(this.h,"little")};function f(A,R,N,q){return A<=15?R^N^q:A<=31?R&N|~R&q:A<=47?(R|~N)^q:A<=63?R&q|N&~q:R^(N|~q)}function c(A){return A<=15?0:A<=31?1518500249:A<=47?1859775393:A<=63?2400959708:2840853838}function l(A){return A<=15?1352829926:A<=31?1548603684:A<=47?1836072691:A<=63?2053994217:0}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],w=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],E=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ru}var iu,E0;function u_(){if(E0)return iu;E0=1;var e=Xi(),t=ms();function r(i,n,s){if(!(this instanceof r))return new r(i,n,s);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(e.toArray(n,s))}return iu=r,r.prototype._init=function(n){n.length>this.blockSize&&(n=new this.Hash().update(n).digest()),t(n.length<=this.blockSize);for(var s=n.length;s<this.blockSize;s++)n.push(0);for(s=0;s<n.length;s++)n[s]^=54;for(this.inner=new this.Hash().update(n),s=0;s<n.length;s++)n[s]^=106;this.outer=new this.Hash().update(n)},r.prototype.update=function(n,s){return this.inner.update(n,s),this},r.prototype.digest=function(n){return this.outer.update(this.inner.digest()),this.outer.digest(n)},iu}var S0;function Wf(){return S0||(S0=1,function(e){var t=e;t.utils=Xi(),t.common=sa(),t.sha=f_(),t.ripemd=c_(),t.hmac=u_(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Gc)),Gc}var l_=Wf();const cn=no(l_);function ao(e,t,r){return r={path:t,exports:{},require:function(i,n){return h_(i,n??r.path)}},e(r,r.exports),r.exports}function h_(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var th=Pb;function Pb(e,t){if(!e)throw new Error(t||"Assertion failed")}Pb.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)};var Pi=ao(function(e,t){var r=t;function i(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var f=[];if(typeof o!="string"){for(var c=0;c<o.length;c++)f[c]=o[c]|0;return f}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var c=0;c<o.length;c+=2)f.push(parseInt(o[c]+o[c+1],16))}else for(var c=0;c<o.length;c++){var l=o.charCodeAt(c),h=l>>8,w=l&255;h?f.push(h,w):f.push(w)}return f}r.toArray=i;function n(o){return o.length===1?"0"+o:o}r.zero2=n;function s(o){for(var a="",f=0;f<o.length;f++)a+=n(o[f].toString(16));return a}r.toHex=s,r.encode=function(a,f){return f==="hex"?s(a):a}}),ri=ao(function(e,t){var r=t;r.assert=th,r.toArray=Pi.toArray,r.zero2=Pi.zero2,r.toHex=Pi.toHex,r.encode=Pi.encode;function i(f,c,l){var h=new Array(Math.max(f.bitLength(),l)+1);h.fill(0);for(var w=1<<c+1,E=f.clone(),_=0;_<h.length;_++){var A,R=E.andln(w-1);E.isOdd()?(R>(w>>1)-1?A=(w>>1)-R:A=R,E.isubn(A)):A=0,h[_]=A,E.iushrn(1)}return h}r.getNAF=i;function n(f,c){var l=[[],[]];f=f.clone(),c=c.clone();for(var h=0,w=0,E;f.cmpn(-h)>0||c.cmpn(-w)>0;){var _=f.andln(3)+h&3,A=c.andln(3)+w&3;_===3&&(_=-1),A===3&&(A=-1);var R;_&1?(E=f.andln(7)+h&7,(E===3||E===5)&&A===2?R=-_:R=_):R=0,l[0].push(R);var N;A&1?(E=c.andln(7)+w&7,(E===3||E===5)&&_===2?N=-A:N=A):N=0,l[1].push(N),2*h===R+1&&(h=1-h),2*w===N+1&&(w=1-w),f.iushrn(1),c.iushrn(1)}return l}r.getJSF=n;function s(f,c,l){var h="_"+c;f.prototype[c]=function(){return this[h]!==void 0?this[h]:this[h]=l.call(this)}}r.cachedProperty=s;function o(f){return typeof f=="string"?r.toArray(f,"hex"):f}r.parseBytes=o;function a(f){return new Xe(f,"hex","le")}r.intFromLE=a}),xf=ri.getNAF,d_=ri.getJSF,Ef=ri.assert;function zn(e,t){this.type=e,this.p=new Xe(t.p,16),this.red=t.prime?Xe.red(t.prime):Xe.mont(this.p),this.zero=new Xe(0).toRed(this.red),this.one=new Xe(1).toRed(this.red),this.two=new Xe(2).toRed(this.red),this.n=t.n&&new Xe(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ys=zn;zn.prototype.point=function(){throw new Error("Not implemented")};zn.prototype.validate=function(){throw new Error("Not implemented")};zn.prototype._fixedNafMul=function(t,r){Ef(t.precomputed);var i=t._getDoubles(),n=xf(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var o=[],a,f;for(a=0;a<n.length;a+=i.step){f=0;for(var c=a+i.step-1;c>=a;c--)f=(f<<1)+n[c];o.push(f)}for(var l=this.jpoint(null,null,null),h=this.jpoint(null,null,null),w=s;w>0;w--){for(a=0;a<o.length;a++)f=o[a],f===w?h=h.mixedAdd(i.points[a]):f===-w&&(h=h.mixedAdd(i.points[a].neg()));l=l.add(h)}return l.toP()};zn.prototype._wnafMul=function(t,r){var i=4,n=t._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=xf(r,i,this._bitLength),a=this.jpoint(null,null,null),f=o.length-1;f>=0;f--){for(var c=0;f>=0&&o[f]===0;f--)c++;if(f>=0&&c++,a=a.dblp(c),f<0)break;var l=o[f];Ef(l!==0),t.type==="affine"?l>0?a=a.mixedAdd(s[l-1>>1]):a=a.mixedAdd(s[-l-1>>1].neg()):l>0?a=a.add(s[l-1>>1]):a=a.add(s[-l-1>>1].neg())}return t.type==="affine"?a.toP():a};zn.prototype._wnafMulAdd=function(t,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,f=this._wnafT3,c=0,l,h,w;for(l=0;l<n;l++){w=r[l];var E=w._getNAFPoints(t);o[l]=E.wnd,a[l]=E.points}for(l=n-1;l>=1;l-=2){var _=l-1,A=l;if(o[_]!==1||o[A]!==1){f[_]=xf(i[_],o[_],this._bitLength),f[A]=xf(i[A],o[A],this._bitLength),c=Math.max(f[_].length,c),c=Math.max(f[A].length,c);continue}var R=[r[_],null,null,r[A]];r[_].y.cmp(r[A].y)===0?(R[1]=r[_].add(r[A]),R[2]=r[_].toJ().mixedAdd(r[A].neg())):r[_].y.cmp(r[A].y.redNeg())===0?(R[1]=r[_].toJ().mixedAdd(r[A]),R[2]=r[_].add(r[A].neg())):(R[1]=r[_].toJ().mixedAdd(r[A]),R[2]=r[_].toJ().mixedAdd(r[A].neg()));var N=[-3,-1,-5,-7,0,7,5,1,3],q=d_(i[_],i[A]);for(c=Math.max(q[0].length,c),f[_]=new Array(c),f[A]=new Array(c),h=0;h<c;h++){var U=q[0][h]|0,P=q[1][h]|0;f[_][h]=N[(U+1)*3+(P+1)],f[A][h]=0,a[_]=R}}var F=this.jpoint(null,null,null),L=this._wnafT4;for(l=c;l>=0;l--){for(var K=0;l>=0;){var V=!0;for(h=0;h<n;h++)L[h]=f[h][l]|0,L[h]!==0&&(V=!1);if(!V)break;K++,l--}if(l>=0&&K++,F=F.dblp(K),l<0)break;for(h=0;h<n;h++){var W=L[h];W!==0&&(W>0?w=a[h][W-1>>1]:W<0&&(w=a[h][-W-1>>1].neg()),w.type==="affine"?F=F.mixedAdd(w):F=F.add(w))}}for(l=0;l<n;l++)a[l]=null;return s?F:F.toP()};function di(e,t){this.curve=e,this.type=t,this.precomputed=null}zn.BasePoint=di;di.prototype.eq=function(){throw new Error("Not implemented")};di.prototype.validate=function(){return this.curve.validate(this)};zn.prototype.decodePoint=function(t,r){t=ri.toArray(t,r);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){t[0]===6?Ef(t[t.length-1]%2===0):t[0]===7&&Ef(t[t.length-1]%2===1);var n=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return n}else if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")};di.prototype.encodeCompressed=function(t){return this.encode(t,!0)};di.prototype._encode=function(t){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};di.prototype.encode=function(t,r){return ri.encode(this._encode(r),t)};di.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};di.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};di.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=t){for(var o=0;o<t;o++)n=n.dbl();i.push(n)}return{step:t,points:i}};di.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<t)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:t,points:r}};di.prototype._getBeta=function(){return null};di.prototype.dblp=function(t){for(var r=this,i=0;i<t;i++)r=r.dbl();return r};var rh=ao(function(e){typeof Object.create=="function"?e.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(r,i){if(i){r.super_=i;var n=function(){};n.prototype=i.prototype,r.prototype=new n,r.prototype.constructor=r}}}),p_=ri.assert;function pi(e){ys.call(this,"short",e),this.a=new Xe(e.a,16).toRed(this.red),this.b=new Xe(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}rh(pi,ys);var g_=pi;pi.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(t.beta)r=new Xe(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(t.lambda)i=new Xe(t.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],p_(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return t.basis?o=t.basis.map(function(a){return{a:new Xe(a.a,16),b:new Xe(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}};pi.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:Xe.mont(t),i=new Xe(2).toRed(r).redInvm(),n=i.redNeg(),s=new Xe(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]};pi.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=t,n=this.n.clone(),s=new Xe(1),o=new Xe(0),a=new Xe(0),f=new Xe(1),c,l,h,w,E,_,A,R=0,N,q;i.cmpn(0)!==0;){var U=n.div(i);N=n.sub(U.mul(i)),q=a.sub(U.mul(s));var P=f.sub(U.mul(o));if(!h&&N.cmp(r)<0)c=A.neg(),l=s,h=N.neg(),w=q;else if(h&&++R===2)break;A=N,n=i,i=N,a=s,s=q,f=o,o=P}E=N.neg(),_=q;var F=h.sqr().add(w.sqr()),L=E.sqr().add(_.sqr());return L.cmp(F)>=0&&(E=c,_=l),h.negative&&(h=h.neg(),w=w.neg()),E.negative&&(E=E.neg(),_=_.neg()),[{a:h,b:w},{a:E,b:_}]};pi.prototype._endoSplit=function(t){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(t).divRound(this.n),o=i.b.neg().mul(t).divRound(this.n),a=s.mul(i.a),f=o.mul(n.a),c=s.mul(i.b),l=o.mul(n.b),h=t.sub(a).sub(f),w=c.add(l).neg();return{k1:h,k2:w}};pi.prototype.pointFromX=function(t,r){t=new Xe(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(t,n)};pi.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,i=t.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};pi.prototype._endoWnafMulAdd=function(t,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(r[o]),f=t[o],c=f._getBeta();a.k1.negative&&(a.k1.ineg(),f=f.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),n[o*2]=f,n[o*2+1]=c,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var l=this._wnafMulAdd(1,n,s,o*2,i),h=0;h<o*2;h++)n[h]=null,s[h]=null;return l};function hr(e,t,r,i){ys.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Xe(t,16),this.y=new Xe(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}rh(hr,ys.BasePoint);pi.prototype.point=function(t,r,i){return new hr(this,t,r,i)};pi.prototype.pointFromJSON=function(t,r){return hr.fromJSON(this,t,r)};hr.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return r}};hr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};hr.fromJSON=function(t,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=t.point(r[0],r[1],i);if(!r[2])return n;function s(a){return t.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n};hr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};hr.prototype.isInfinity=function(){return this.inf};hr.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(t.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};hr.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=t.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};hr.prototype.getX=function(){return this.x.fromRed()};hr.prototype.getY=function(){return this.y.fromRed()};hr.prototype.mul=function(t){return t=new Xe(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};hr.prototype.mulAdd=function(t,r,i){var n=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)};hr.prototype.jmulAdd=function(t,r,i){var n=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)};hr.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};hr.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};hr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function br(e,t,r,i){ys.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Xe(0)):(this.x=new Xe(t,16),this.y=new Xe(r,16),this.z=new Xe(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}rh(br,ys.BasePoint);pi.prototype.jpoint=function(t,r,i){return new br(this,t,r,i)};br.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(t);return this.curve.point(i,n)};br.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};br.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=t.x.redMul(i),o=this.y.redMul(r.redMul(t.z)),a=t.y.redMul(i.redMul(this.z)),f=n.redSub(s),c=o.redSub(a);if(f.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=f.redSqr(),h=l.redMul(f),w=n.redMul(l),E=c.redSqr().redIAdd(h).redISub(w).redISub(w),_=c.redMul(w.redISub(E)).redISub(o.redMul(h)),A=this.z.redMul(t.z).redMul(f);return this.curve.jpoint(E,_,A)};br.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=t.x.redMul(r),s=this.y,o=t.y.redMul(r).redMul(this.z),a=i.redSub(n),f=s.redSub(o);if(a.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=i.redMul(c),w=f.redSqr().redIAdd(l).redISub(h).redISub(h),E=f.redMul(h.redISub(w)).redISub(s.redMul(l)),_=this.z.redMul(a);return this.curve.jpoint(w,E,_)};br.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<t;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,f=this.z,c=f.redSqr().redSqr(),l=a.redAdd(a);for(r=0;r<t;r++){var h=o.redSqr(),w=l.redSqr(),E=w.redSqr(),_=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c)),A=o.redMul(w),R=_.redSqr().redISub(A.redAdd(A)),N=A.redISub(R),q=_.redMul(N);q=q.redIAdd(q).redISub(E);var U=l.redMul(f);r+1<t&&(c=c.redMul(E)),o=R,f=U,l=q}return this.curve.jpoint(o,l.redMul(s),f)};br.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};br.prototype._zeroDbl=function(){var t,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var f=n.redAdd(n).redIAdd(n),c=f.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),t=c,r=f.redMul(a.redISub(c)).redISub(l),i=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),w=this.y.redSqr(),E=w.redSqr(),_=this.x.redAdd(w).redSqr().redISub(h).redISub(E);_=_.redIAdd(_);var A=h.redAdd(h).redIAdd(h),R=A.redSqr(),N=E.redIAdd(E);N=N.redIAdd(N),N=N.redIAdd(N),t=R.redISub(_).redISub(_),r=A.redMul(_.redISub(t)).redISub(N),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,r,i)};br.prototype._threeDbl=function(){var t,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var f=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=f.redSqr().redISub(a).redISub(a);t=c;var l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),r=f.redMul(a.redISub(c)).redISub(l),i=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),w=this.y.redSqr(),E=this.x.redMul(w),_=this.x.redSub(h).redMul(this.x.redAdd(h));_=_.redAdd(_).redIAdd(_);var A=E.redIAdd(E);A=A.redIAdd(A);var R=A.redAdd(A);t=_.redSqr().redISub(R),i=this.y.redAdd(this.z).redSqr().redISub(w).redISub(h);var N=w.redSqr();N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N),r=_.redMul(A.redISub(t)).redISub(N)}return this.curve.jpoint(t,r,i)};br.prototype._dbl=function(){var t=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),f=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(s)),c=r.redAdd(r);c=c.redIAdd(c);var l=c.redMul(a),h=f.redSqr().redISub(l.redAdd(l)),w=l.redISub(h),E=a.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var _=f.redMul(w).redISub(E),A=i.redAdd(i).redMul(n);return this.curve.jpoint(h,_,A)};br.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=t.redAdd(t).redIAdd(t),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(t).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var f=a.redSqr(),c=n.redIAdd(n);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var l=s.redIAdd(a).redSqr().redISub(o).redISub(f).redISub(c),h=r.redMul(l);h=h.redIAdd(h),h=h.redIAdd(h);var w=this.x.redMul(f).redISub(h);w=w.redIAdd(w),w=w.redIAdd(w);var E=this.y.redMul(l.redMul(c.redISub(l)).redISub(a.redMul(f)));E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var _=this.z.redAdd(a).redSqr().redISub(i).redISub(f);return this.curve.jpoint(w,E,_)};br.prototype.mul=function(t,r){return t=new Xe(t,r),this.curve._wnafMul(this,t)};br.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(n)).cmpn(0)===0};br.prototype.eqXToP=function(t){var r=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=t.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};br.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};br.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Qa=ao(function(e,t){var r=t;r.base=ys,r.short=g_,r.mont=null,r.edwards=null}),ef=ao(function(e,t){var r=t,i=ri.assert;function n(a){a.type==="short"?this.curve=new Qa.short(a):a.type==="edwards"?this.curve=new Qa.edwards(a):this.curve=new Qa.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=n;function s(a,f){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var c=new n(f);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:c}),c}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:cn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:cn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:cn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:cn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:cn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:cn.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:cn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:cn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function qn(e){if(!(this instanceof qn))return new qn(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Pi.toArray(e.entropy,e.entropyEnc||"hex"),r=Pi.toArray(e.nonce,e.nonceEnc||"hex"),i=Pi.toArray(e.pers,e.persEnc||"hex");th(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}var $b=qn;qn.prototype._init=function(t,r,i){var n=t.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};qn.prototype._hmac=function(){return new cn.hmac(this.hash,this.K)};qn.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};qn.prototype.reseed=function(t,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),t=Pi.toArray(t,r),i=Pi.toArray(i,n),th(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1};qn.prototype.generate=function(t,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=Pi.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,t);return this._update(i),this._reseed++,Pi.encode(o,r)};var cl=ri.assert;function Mr(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var ih=Mr;Mr.fromPublic=function(t,r,i){return r instanceof Mr?r:new Mr(t,{pub:r,pubEnc:i})};Mr.fromPrivate=function(t,r,i){return r instanceof Mr?r:new Mr(t,{priv:r,privEnc:i})};Mr.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Mr.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};Mr.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};Mr.prototype._importPrivate=function(t,r){this.priv=new Xe(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Mr.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?cl(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&cl(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};Mr.prototype.derive=function(t){return t.validate()||cl(t.validate(),"public point not validated"),t.mul(this.priv).getX()};Mr.prototype.sign=function(t,r,i){return this.ec.sign(t,this,r,i)};Mr.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};Mr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var b_=ri.assert;function Gf(e,t){if(e instanceof Gf)return e;this._importDER(e,t)||(b_(e.r&&e.s,"Signature without r or s"),this.r=new Xe(e.r,16),this.s=new Xe(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Jf=Gf;function v_(){this.place=0}function nu(e,t){var r=e[t.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,s=0,o=t.place;s<i;s++,o++)n<<=8,n|=e[o],n>>>=0;return n<=127?!1:(t.place=o,n)}function M0(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}Gf.prototype._importDER=function(t,r){t=ri.toArray(t,r);var i=new v_;if(t[i.place++]!==48)return!1;var n=nu(t,i);if(n===!1||n+i.place!==t.length||t[i.place++]!==2)return!1;var s=nu(t,i);if(s===!1)return!1;var o=t.slice(i.place,s+i.place);if(i.place+=s,t[i.place++]!==2)return!1;var a=nu(t,i);if(a===!1||t.length!==a+i.place)return!1;var f=t.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(f[0]===0)if(f[1]&128)f=f.slice(1);else return!1;return this.r=new Xe(o),this.s=new Xe(f),this.recoveryParam=null,!0};function su(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}Gf.prototype.toDER=function(t){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=M0(r),i=M0(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];su(n,r.length),n=n.concat(r),n.push(2),su(n,i.length);var s=n.concat(i),o=[48];return su(o,s.length),o=o.concat(s),ri.encode(o,t)};var m_=function(){throw new Error("unsupported")},Rb=ri.assert;function hi(e){if(!(this instanceof hi))return new hi(e);typeof e=="string"&&(Rb(Object.prototype.hasOwnProperty.call(ef,e),"Unknown curve "+e),e=ef[e]),e instanceof ef.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var y_=hi;hi.prototype.keyPair=function(t){return new ih(this,t)};hi.prototype.keyFromPrivate=function(t,r){return ih.fromPrivate(this,t,r)};hi.prototype.keyFromPublic=function(t,r){return ih.fromPublic(this,t,r)};hi.prototype.genKeyPair=function(t){t||(t={});for(var r=new $b({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||m_(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new Xe(2));;){var s=new Xe(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}};hi.prototype._truncateToN=function(t,r){var i=t.byteLength()*8-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};hi.prototype.sign=function(t,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),t=this._truncateToN(new Xe(t,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=t.toArray("be",s),f=new $b({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new Xe(1)),l=0;;l++){var h=n.k?n.k(l):new Xe(f.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(c)>=0)){var w=this.g.mul(h);if(!w.isInfinity()){var E=w.getX(),_=E.umod(this.n);if(_.cmpn(0)!==0){var A=h.invm(this.n).mul(_.mul(r.getPrivate()).iadd(t));if(A=A.umod(this.n),A.cmpn(0)!==0){var R=(w.getY().isOdd()?1:0)|(E.cmp(_)!==0?2:0);return n.canonical&&A.cmp(this.nh)>0&&(A=this.n.sub(A),R^=1),new Jf({r:_,s:A,recoveryParam:R})}}}}}};hi.prototype.verify=function(t,r,i,n){t=this._truncateToN(new Xe(t,16)),i=this.keyFromPublic(i,n),r=new Jf(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),f=a.mul(t).umod(this.n),c=a.mul(s).umod(this.n),l;return this.curve._maxwellTrick?(l=this.g.jmulAdd(f,i.getPublic(),c),l.isInfinity()?!1:l.eqXToP(s)):(l=this.g.mulAdd(f,i.getPublic(),c),l.isInfinity()?!1:l.getX().umod(this.n).cmp(s)===0)};hi.prototype.recoverPubKey=function(e,t,r,i){Rb((3&r)===r,"The recovery param is more than two bits"),t=new Jf(t,i);var n=this.n,s=new Xe(e),o=t.r,a=t.s,f=r&1,c=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?o=this.curve.pointFromX(o.add(this.curve.n),f):o=this.curve.pointFromX(o,f);var l=t.r.invm(n),h=n.sub(s).mul(l).umod(n),w=a.mul(l).umod(n);return this.g.mulAdd(h,o,w)};hi.prototype.getKeyRecoveryParam=function(e,t,r,i){if(t=new Jf(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(e,t,n)}catch{continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var w_=ao(function(e,t){var r=t;r.version="6.5.4",r.utils=ri,r.rand=function(){throw new Error("unsupported")},r.curve=Qa,r.curves=ef,r.ec=y_,r.eddsa=null}),__=w_.ec;const x_="signing-key/5.7.0",ul=new Ft(x_);let ou=null;function Dn(){return ou||(ou=new __("secp256k1")),ou}class E_{constructor(t){_o(this,"curve","secp256k1"),_o(this,"privateKey",Zr(t)),z5(this.privateKey)!==32&&ul.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Dn().keyFromPrivate(cr(this.privateKey));_o(this,"publicKey","0x"+r.getPublic(!1,"hex")),_o(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),_o(this,"_isSigningKey",!0)}_addPoint(t){const r=Dn().keyFromPublic(cr(this.publicKey)),i=Dn().keyFromPublic(cr(t));return"0x"+r.pub.add(i.pub).encodeCompressed("hex")}signDigest(t){const r=Dn().keyFromPrivate(cr(this.privateKey)),i=cr(t);i.length!==32&&ul.throwArgumentError("bad digest length","digest",t);const n=r.sign(i,{canonical:!0});return Mb({recoveryParam:n.recoveryParam,r:Gs("0x"+n.r.toString(16),32),s:Gs("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const r=Dn().keyFromPrivate(cr(this.privateKey)),i=Dn().keyFromPublic(cr(Cb(t)));return Gs("0x"+r.derive(i.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}}function S_(e,t){const r=Mb(t),i={r:cr(r.r),s:cr(r.s)};return"0x"+Dn().recoverPubKey(cr(e),i,r.recoveryParam).encode("hex",!1)}function Cb(e,t){const r=cr(e);return r.length===32?new E_(r).publicKey:r.length===33?"0x"+Dn().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?Zr(r):ul.throwArgumentError("invalid public or private key","key","[REDACTED]")}var A0;(function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"})(A0||(A0={}));function M_(e){const t=Cb(e);return n_(o0(Ab(o0(t,1)),12))}function A_(e,t){return M_(S_(cr(e),t))}function Tb(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function au(e,t){t||(t=e.reduce((n,s)=>n+s.length,0));const r=Tb(t);let i=0;for(const n of e)r.set(n,i),i+=n.length;return r}function I_(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=e.length,f=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var A=0,R=0,N=0,q=_.length;N!==q&&_[N]===0;)N++,A++;for(var U=(q-N)*l+1>>>0,P=new Uint8Array(U);N!==q;){for(var F=_[N],L=0,K=U-1;(F!==0||L<R)&&K!==-1;K--,L++)F+=256*P[K]>>>0,P[K]=F%a>>>0,F=F/a>>>0;if(F!==0)throw new Error("Non-zero carry");R=L,N++}for(var V=U-R;V!==U&&P[V]===0;)V++;for(var W=f.repeat(A);V<U;++V)W+=e.charAt(P[V]);return W}function w(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var A=0;if(_[A]!==" "){for(var R=0,N=0;_[A]===f;)R++,A++;for(var q=(_.length-A)*c+1>>>0,U=new Uint8Array(q);_[A];){var P=r[_.charCodeAt(A)];if(P===255)return;for(var F=0,L=q-1;(P!==0||F<N)&&L!==-1;L--,F++)P+=a*U[L]>>>0,U[L]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");N=F,A++}if(_[A]!==" "){for(var K=q-N;K!==q&&U[K]===0;)K++;for(var V=new Uint8Array(R+(q-K)),W=R;K!==q;)V[W++]=U[K++];return V}}}function E(_){var A=w(_);if(A)return A;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:w,decode:E}}var D_=I_,O_=D_;const P_=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},$_=e=>new TextEncoder().encode(e),R_=e=>new TextDecoder().decode(e);class C_{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class T_{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Nb(this,t)}}class N_{constructor(t){this.decoders=t}or(t){return Nb(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Nb=(e,t)=>new N_({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class F_{constructor(t,r,i,n){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new C_(t,r,i),this.decoder=new T_(t,r,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Yf=({name:e,prefix:t,encode:r,decode:i})=>new F_(e,t,r,i),oa=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=O_(r,t);return Yf({prefix:e,name:t,encode:i,decode:s=>P_(n(s))})},L_=(e,t,r,i)=>{const n={};for(let l=0;l<t.length;++l)n[t[l]]=l;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,f=0,c=0;for(let l=0;l<s;++l){const h=n[e[l]];if(h===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&f>>a)}if(a>=r||255&f<<8-a)throw new SyntaxError("Unexpected end of data");return o},q_=(e,t,r)=>{const i=t[t.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let f=0;f<e.length;++f)for(a=a<<8|e[f],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},vr=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>Yf({prefix:t,name:e,encode(n){return q_(n,i,r)},decode(n){return L_(n,i,r,e)}}),B_=Yf({prefix:"\0",name:"identity",encode:e=>R_(e),decode:e=>$_(e)}),U_=Object.freeze(Object.defineProperty({__proto__:null,identity:B_},Symbol.toStringTag,{value:"Module"})),k_=vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),j_=Object.freeze(Object.defineProperty({__proto__:null,base2:k_},Symbol.toStringTag,{value:"Module"})),z_=vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),K_=Object.freeze(Object.defineProperty({__proto__:null,base8:z_},Symbol.toStringTag,{value:"Module"})),V_=oa({prefix:"9",name:"base10",alphabet:"0123456789"}),H_=Object.freeze(Object.defineProperty({__proto__:null,base10:V_},Symbol.toStringTag,{value:"Module"})),W_=vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),G_=vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),J_=Object.freeze(Object.defineProperty({__proto__:null,base16:W_,base16upper:G_},Symbol.toStringTag,{value:"Module"})),Y_=vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Z_=vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),X_=vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Q_=vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),e9=vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),t9=vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),r9=vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),i9=vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),n9=vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),s9=Object.freeze(Object.defineProperty({__proto__:null,base32:Y_,base32hex:e9,base32hexpad:r9,base32hexpadupper:i9,base32hexupper:t9,base32pad:X_,base32padupper:Q_,base32upper:Z_,base32z:n9},Symbol.toStringTag,{value:"Module"})),o9=oa({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),a9=oa({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),f9=Object.freeze(Object.defineProperty({__proto__:null,base36:o9,base36upper:a9},Symbol.toStringTag,{value:"Module"})),c9=oa({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),u9=oa({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),l9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:c9,base58flickr:u9},Symbol.toStringTag,{value:"Module"})),h9=vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),d9=vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),p9=vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),g9=vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),b9=Object.freeze(Object.defineProperty({__proto__:null,base64:h9,base64pad:d9,base64url:p9,base64urlpad:g9},Symbol.toStringTag,{value:"Module"})),Fb=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),v9=Fb.reduce((e,t,r)=>(e[r]=t,e),[]),m9=Fb.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function y9(e){return e.reduce((t,r)=>(t+=v9[r],t),"")}function w9(e){const t=[];for(const r of e){const i=m9[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const _9=Yf({prefix:"🚀",name:"base256emoji",encode:y9,decode:w9}),x9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:_9},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const I0={...U_,...j_,...K_,...H_,...J_,...s9,...f9,...l9,...b9,...x9};function Lb(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const D0=Lb("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),fu=Lb("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=Tb(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),qb={utf8:D0,"utf-8":D0,hex:I0.base16,latin1:fu,ascii:fu,binary:fu,...I0};function ci(e,t="utf8"){const r=qb[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function Cr(e,t="utf8"){const r=qb[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var cu={};const E9="6.6.1",S9={version:E9};var uu={},tf={exports:{}},M9=tf.exports,O0;function wn(){return O0||(O0=1,function(e){(function(t,r){function i(C,g){if(!C)throw new Error(g||"Assertion failed")}function n(C,g){C.super_=g;var p=function(){};p.prototype=g.prototype,C.prototype=new p,C.prototype.constructor=C}function s(C,g,p){if(s.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&((g==="le"||g==="be")&&(p=g,g=10),this._init(C||0,g||10,p||"be"))}typeof t=="object"?t.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ql.Buffer}catch{}s.isBN=function(g){return g instanceof s?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===s.wordSize&&Array.isArray(g.words)},s.max=function(g,p){return g.cmp(p)>0?g:p},s.min=function(g,p){return g.cmp(p)<0?g:p},s.prototype._init=function(g,p,u){if(typeof g=="number")return this._initNumber(g,p,u);if(typeof g=="object")return this._initArray(g,p,u);p==="hex"&&(p=16),i(p===(p|0)&&p>=2&&p<=36),g=g.toString().replace(/\s+/g,"");var d=0;g[0]==="-"&&(d++,this.negative=1),d<g.length&&(p===16?this._parseHex(g,d,u):(this._parseBase(g,p,d),u==="le"&&this._initArray(this.toArray(),p,u)))},s.prototype._initNumber=function(g,p,u){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(i(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),u==="le"&&this._initArray(this.toArray(),p,u)},s.prototype._initArray=function(g,p,u){if(i(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var v,y,M=0;if(u==="be")for(d=g.length-1,v=0;d>=0;d-=3)y=g[d]|g[d-1]<<8|g[d-2]<<16,this.words[v]|=y<<M&67108863,this.words[v+1]=y>>>26-M&67108863,M+=24,M>=26&&(M-=26,v++);else if(u==="le")for(d=0,v=0;d<g.length;d+=3)y=g[d]|g[d+1]<<8|g[d+2]<<16,this.words[v]|=y<<M&67108863,this.words[v+1]=y>>>26-M&67108863,M+=24,M>=26&&(M-=26,v++);return this.strip()};function a(C,g){var p=C.charCodeAt(g);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function f(C,g,p){var u=a(C,p);return p-1>=g&&(u|=a(C,p-1)<<4),u}s.prototype._parseHex=function(g,p,u){this.length=Math.ceil((g.length-p)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var v=0,y=0,M;if(u==="be")for(d=g.length-1;d>=p;d-=2)M=f(g,p,d)<<v,this.words[y]|=M&67108863,v>=18?(v-=18,y+=1,this.words[y]|=M>>>26):v+=8;else{var x=g.length-p;for(d=x%2===0?p+1:p;d<g.length;d+=2)M=f(g,p,d)<<v,this.words[y]|=M&67108863,v>=18?(v-=18,y+=1,this.words[y]|=M>>>26):v+=8}this.strip()};function c(C,g,p,u){for(var d=0,v=Math.min(C.length,p),y=g;y<v;y++){var M=C.charCodeAt(y)-48;d*=u,M>=49?d+=M-49+10:M>=17?d+=M-17+10:d+=M}return d}s.prototype._parseBase=function(g,p,u){this.words=[0],this.length=1;for(var d=0,v=1;v<=67108863;v*=p)d++;d--,v=v/p|0;for(var y=g.length-u,M=y%d,x=Math.min(y,y-M)+u,b=0,S=u;S<x;S+=d)b=c(g,S,S+d,p),this.imuln(v),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(M!==0){var m=1;for(b=c(g,S,g.length,p),S=0;S<M;S++)m*=p;this.imuln(m),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this.strip()},s.prototype.copy=function(g){g.words=new Array(this.length);for(var p=0;p<this.length;p++)g.words[p]=this.words[p];g.length=this.length,g.negative=this.negative,g.red=this.red},s.prototype.clone=function(){var g=new s(null);return this.copy(g),g},s.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(g,p){g=g||10,p=p|0||1;var u;if(g===16||g==="hex"){u="";for(var d=0,v=0,y=0;y<this.length;y++){var M=this.words[y],x=((M<<d|v)&16777215).toString(16);v=M>>>24-d&16777215,d+=2,d>=26&&(d-=26,y--),v!==0||y!==this.length-1?u=l[6-x.length]+x+u:u=x+u}for(v!==0&&(u=v.toString(16)+u);u.length%p!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}if(g===(g|0)&&g>=2&&g<=36){var b=h[g],S=w[g];u="";var m=this.clone();for(m.negative=0;!m.isZero();){var $=m.modn(S).toString(g);m=m.idivn(S),m.isZero()?u=$+u:u=l[b-$.length]+$+u}for(this.isZero()&&(u="0"+u);u.length%p!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(g,p){return i(typeof o<"u"),this.toArrayLike(o,g,p)},s.prototype.toArray=function(g,p){return this.toArrayLike(Array,g,p)},s.prototype.toArrayLike=function(g,p,u){var d=this.byteLength(),v=u||Math.max(1,d);i(d<=v,"byte array longer than desired length"),i(v>0,"Requested array length <= 0"),this.strip();var y=p==="le",M=new g(v),x,b,S=this.clone();if(y){for(b=0;!S.isZero();b++)x=S.andln(255),S.iushrn(8),M[b]=x;for(;b<v;b++)M[b]=0}else{for(b=0;b<v-d;b++)M[b]=0;for(b=0;!S.isZero();b++)x=S.andln(255),S.iushrn(8),M[v-b-1]=x}return M},Math.clz32?s.prototype._countBits=function(g){return 32-Math.clz32(g)}:s.prototype._countBits=function(g){var p=g,u=0;return p>=4096&&(u+=13,p>>>=13),p>=64&&(u+=7,p>>>=7),p>=8&&(u+=4,p>>>=4),p>=2&&(u+=2,p>>>=2),u+p},s.prototype._zeroBits=function(g){if(g===0)return 26;var p=g,u=0;return p&8191||(u+=13,p>>>=13),p&127||(u+=7,p>>>=7),p&15||(u+=4,p>>>=4),p&3||(u+=2,p>>>=2),p&1||u++,u},s.prototype.bitLength=function(){var g=this.words[this.length-1],p=this._countBits(g);return(this.length-1)*26+p};function E(C){for(var g=new Array(C.bitLength()),p=0;p<g.length;p++){var u=p/26|0,d=p%26;g[p]=(C.words[u]&1<<d)>>>d}return g}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,p=0;p<this.length;p++){var u=this._zeroBits(this.words[p]);if(g+=u,u!==26)break}return g},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},s.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var p=0;p<g.length;p++)this.words[p]=this.words[p]|g.words[p];return this.strip()},s.prototype.ior=function(g){return i((this.negative|g.negative)===0),this.iuor(g)},s.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},s.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},s.prototype.iuand=function(g){var p;this.length>g.length?p=g:p=this;for(var u=0;u<p.length;u++)this.words[u]=this.words[u]&g.words[u];return this.length=p.length,this.strip()},s.prototype.iand=function(g){return i((this.negative|g.negative)===0),this.iuand(g)},s.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},s.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},s.prototype.iuxor=function(g){var p,u;this.length>g.length?(p=this,u=g):(p=g,u=this);for(var d=0;d<u.length;d++)this.words[d]=p.words[d]^u.words[d];if(this!==p)for(;d<p.length;d++)this.words[d]=p.words[d];return this.length=p.length,this.strip()},s.prototype.ixor=function(g){return i((this.negative|g.negative)===0),this.iuxor(g)},s.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},s.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},s.prototype.inotn=function(g){i(typeof g=="number"&&g>=0);var p=Math.ceil(g/26)|0,u=g%26;this._expand(p),u>0&&p--;for(var d=0;d<p;d++)this.words[d]=~this.words[d]&67108863;return u>0&&(this.words[d]=~this.words[d]&67108863>>26-u),this.strip()},s.prototype.notn=function(g){return this.clone().inotn(g)},s.prototype.setn=function(g,p){i(typeof g=="number"&&g>=0);var u=g/26|0,d=g%26;return this._expand(u+1),p?this.words[u]=this.words[u]|1<<d:this.words[u]=this.words[u]&~(1<<d),this.strip()},s.prototype.iadd=function(g){var p;if(this.negative!==0&&g.negative===0)return this.negative=0,p=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,p=this.isub(g),g.negative=1,p._normSign();var u,d;this.length>g.length?(u=this,d=g):(u=g,d=this);for(var v=0,y=0;y<d.length;y++)p=(u.words[y]|0)+(d.words[y]|0)+v,this.words[y]=p&67108863,v=p>>>26;for(;v!==0&&y<u.length;y++)p=(u.words[y]|0)+v,this.words[y]=p&67108863,v=p>>>26;if(this.length=u.length,v!==0)this.words[this.length]=v,this.length++;else if(u!==this)for(;y<u.length;y++)this.words[y]=u.words[y];return this},s.prototype.add=function(g){var p;return g.negative!==0&&this.negative===0?(g.negative=0,p=this.sub(g),g.negative^=1,p):g.negative===0&&this.negative!==0?(this.negative=0,p=g.sub(this),this.negative=1,p):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},s.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var p=this.iadd(g);return g.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var u=this.cmp(g);if(u===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,v;u>0?(d=this,v=g):(d=g,v=this);for(var y=0,M=0;M<v.length;M++)p=(d.words[M]|0)-(v.words[M]|0)+y,y=p>>26,this.words[M]=p&67108863;for(;y!==0&&M<d.length;M++)p=(d.words[M]|0)+y,y=p>>26,this.words[M]=p&67108863;if(y===0&&M<d.length&&d!==this)for(;M<d.length;M++)this.words[M]=d.words[M];return this.length=Math.max(this.length,M),d!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(g){return this.clone().isub(g)};function _(C,g,p){p.negative=g.negative^C.negative;var u=C.length+g.length|0;p.length=u,u=u-1|0;var d=C.words[0]|0,v=g.words[0]|0,y=d*v,M=y&67108863,x=y/67108864|0;p.words[0]=M;for(var b=1;b<u;b++){for(var S=x>>>26,m=x&67108863,$=Math.min(b,g.length-1),ee=Math.max(0,b-C.length+1);ee<=$;ee++){var O=b-ee|0;d=C.words[O]|0,v=g.words[ee]|0,y=d*v+m,S+=y/67108864|0,m=y&67108863}p.words[b]=m|0,x=S|0}return x!==0?p.words[b]=x|0:p.length--,p.strip()}var A=function(g,p,u){var d=g.words,v=p.words,y=u.words,M=0,x,b,S,m=d[0]|0,$=m&8191,ee=m>>>13,O=d[1]|0,H=O&8191,X=O>>>13,te=d[2]|0,ne=te&8191,ge=te>>>13,ve=d[3]|0,B=ve&8191,z=ve>>>13,G=d[4]|0,Z=G&8191,oe=G>>>13,ae=d[5]|0,ce=ae&8191,ue=ae>>>13,le=d[6]|0,ie=le&8191,ye=le>>>13,pe=d[7]|0,he=pe&8191,_e=pe>>>13,Ae=d[8]|0,we=Ae&8191,De=Ae>>>13,Fe=d[9]|0,Se=Fe&8191,Ke=Fe>>>13,We=v[0]|0,Ce=We&8191,et=We>>>13,ze=v[1]|0,Re=ze&8191,at=ze>>>13,dt=v[2]|0,Ie=dt&8191,st=dt>>>13,$e=v[3]|0,ke=$e&8191,Ye=$e>>>13,Ge=v[4]|0,Le=Ge&8191,lt=Ge>>>13,ft=v[5]|0,Ne=ft&8191,pt=ft>>>13,mt=v[6]|0,Be=mt&8191,gt=mt>>>13,bt=v[7]|0,Ue=bt&8191,ht=bt>>>13,tt=v[8]|0,qe=tt&8191,ct=tt>>>13,yt=v[9]|0,je=yt&8191,ut=yt>>>13;u.negative=g.negative^p.negative,u.length=19,x=Math.imul($,Ce),b=Math.imul($,et),b=b+Math.imul(ee,Ce)|0,S=Math.imul(ee,et);var it=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(it>>>26)|0,it&=67108863,x=Math.imul(H,Ce),b=Math.imul(H,et),b=b+Math.imul(X,Ce)|0,S=Math.imul(X,et),x=x+Math.imul($,Re)|0,b=b+Math.imul($,at)|0,b=b+Math.imul(ee,Re)|0,S=S+Math.imul(ee,at)|0;var vt=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(vt>>>26)|0,vt&=67108863,x=Math.imul(ne,Ce),b=Math.imul(ne,et),b=b+Math.imul(ge,Ce)|0,S=Math.imul(ge,et),x=x+Math.imul(H,Re)|0,b=b+Math.imul(H,at)|0,b=b+Math.imul(X,Re)|0,S=S+Math.imul(X,at)|0,x=x+Math.imul($,Ie)|0,b=b+Math.imul($,st)|0,b=b+Math.imul(ee,Ie)|0,S=S+Math.imul(ee,st)|0;var Qt=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,x=Math.imul(B,Ce),b=Math.imul(B,et),b=b+Math.imul(z,Ce)|0,S=Math.imul(z,et),x=x+Math.imul(ne,Re)|0,b=b+Math.imul(ne,at)|0,b=b+Math.imul(ge,Re)|0,S=S+Math.imul(ge,at)|0,x=x+Math.imul(H,Ie)|0,b=b+Math.imul(H,st)|0,b=b+Math.imul(X,Ie)|0,S=S+Math.imul(X,st)|0,x=x+Math.imul($,ke)|0,b=b+Math.imul($,Ye)|0,b=b+Math.imul(ee,ke)|0,S=S+Math.imul(ee,Ye)|0;var yr=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(yr>>>26)|0,yr&=67108863,x=Math.imul(Z,Ce),b=Math.imul(Z,et),b=b+Math.imul(oe,Ce)|0,S=Math.imul(oe,et),x=x+Math.imul(B,Re)|0,b=b+Math.imul(B,at)|0,b=b+Math.imul(z,Re)|0,S=S+Math.imul(z,at)|0,x=x+Math.imul(ne,Ie)|0,b=b+Math.imul(ne,st)|0,b=b+Math.imul(ge,Ie)|0,S=S+Math.imul(ge,st)|0,x=x+Math.imul(H,ke)|0,b=b+Math.imul(H,Ye)|0,b=b+Math.imul(X,ke)|0,S=S+Math.imul(X,Ye)|0,x=x+Math.imul($,Le)|0,b=b+Math.imul($,lt)|0,b=b+Math.imul(ee,Le)|0,S=S+Math.imul(ee,lt)|0;var Jt=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,x=Math.imul(ce,Ce),b=Math.imul(ce,et),b=b+Math.imul(ue,Ce)|0,S=Math.imul(ue,et),x=x+Math.imul(Z,Re)|0,b=b+Math.imul(Z,at)|0,b=b+Math.imul(oe,Re)|0,S=S+Math.imul(oe,at)|0,x=x+Math.imul(B,Ie)|0,b=b+Math.imul(B,st)|0,b=b+Math.imul(z,Ie)|0,S=S+Math.imul(z,st)|0,x=x+Math.imul(ne,ke)|0,b=b+Math.imul(ne,Ye)|0,b=b+Math.imul(ge,ke)|0,S=S+Math.imul(ge,Ye)|0,x=x+Math.imul(H,Le)|0,b=b+Math.imul(H,lt)|0,b=b+Math.imul(X,Le)|0,S=S+Math.imul(X,lt)|0,x=x+Math.imul($,Ne)|0,b=b+Math.imul($,pt)|0,b=b+Math.imul(ee,Ne)|0,S=S+Math.imul(ee,pt)|0;var wr=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(wr>>>26)|0,wr&=67108863,x=Math.imul(ie,Ce),b=Math.imul(ie,et),b=b+Math.imul(ye,Ce)|0,S=Math.imul(ye,et),x=x+Math.imul(ce,Re)|0,b=b+Math.imul(ce,at)|0,b=b+Math.imul(ue,Re)|0,S=S+Math.imul(ue,at)|0,x=x+Math.imul(Z,Ie)|0,b=b+Math.imul(Z,st)|0,b=b+Math.imul(oe,Ie)|0,S=S+Math.imul(oe,st)|0,x=x+Math.imul(B,ke)|0,b=b+Math.imul(B,Ye)|0,b=b+Math.imul(z,ke)|0,S=S+Math.imul(z,Ye)|0,x=x+Math.imul(ne,Le)|0,b=b+Math.imul(ne,lt)|0,b=b+Math.imul(ge,Le)|0,S=S+Math.imul(ge,lt)|0,x=x+Math.imul(H,Ne)|0,b=b+Math.imul(H,pt)|0,b=b+Math.imul(X,Ne)|0,S=S+Math.imul(X,pt)|0,x=x+Math.imul($,Be)|0,b=b+Math.imul($,gt)|0,b=b+Math.imul(ee,Be)|0,S=S+Math.imul(ee,gt)|0;var Rt=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,x=Math.imul(he,Ce),b=Math.imul(he,et),b=b+Math.imul(_e,Ce)|0,S=Math.imul(_e,et),x=x+Math.imul(ie,Re)|0,b=b+Math.imul(ie,at)|0,b=b+Math.imul(ye,Re)|0,S=S+Math.imul(ye,at)|0,x=x+Math.imul(ce,Ie)|0,b=b+Math.imul(ce,st)|0,b=b+Math.imul(ue,Ie)|0,S=S+Math.imul(ue,st)|0,x=x+Math.imul(Z,ke)|0,b=b+Math.imul(Z,Ye)|0,b=b+Math.imul(oe,ke)|0,S=S+Math.imul(oe,Ye)|0,x=x+Math.imul(B,Le)|0,b=b+Math.imul(B,lt)|0,b=b+Math.imul(z,Le)|0,S=S+Math.imul(z,lt)|0,x=x+Math.imul(ne,Ne)|0,b=b+Math.imul(ne,pt)|0,b=b+Math.imul(ge,Ne)|0,S=S+Math.imul(ge,pt)|0,x=x+Math.imul(H,Be)|0,b=b+Math.imul(H,gt)|0,b=b+Math.imul(X,Be)|0,S=S+Math.imul(X,gt)|0,x=x+Math.imul($,Ue)|0,b=b+Math.imul($,ht)|0,b=b+Math.imul(ee,Ue)|0,S=S+Math.imul(ee,ht)|0;var Dr=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,x=Math.imul(we,Ce),b=Math.imul(we,et),b=b+Math.imul(De,Ce)|0,S=Math.imul(De,et),x=x+Math.imul(he,Re)|0,b=b+Math.imul(he,at)|0,b=b+Math.imul(_e,Re)|0,S=S+Math.imul(_e,at)|0,x=x+Math.imul(ie,Ie)|0,b=b+Math.imul(ie,st)|0,b=b+Math.imul(ye,Ie)|0,S=S+Math.imul(ye,st)|0,x=x+Math.imul(ce,ke)|0,b=b+Math.imul(ce,Ye)|0,b=b+Math.imul(ue,ke)|0,S=S+Math.imul(ue,Ye)|0,x=x+Math.imul(Z,Le)|0,b=b+Math.imul(Z,lt)|0,b=b+Math.imul(oe,Le)|0,S=S+Math.imul(oe,lt)|0,x=x+Math.imul(B,Ne)|0,b=b+Math.imul(B,pt)|0,b=b+Math.imul(z,Ne)|0,S=S+Math.imul(z,pt)|0,x=x+Math.imul(ne,Be)|0,b=b+Math.imul(ne,gt)|0,b=b+Math.imul(ge,Be)|0,S=S+Math.imul(ge,gt)|0,x=x+Math.imul(H,Ue)|0,b=b+Math.imul(H,ht)|0,b=b+Math.imul(X,Ue)|0,S=S+Math.imul(X,ht)|0,x=x+Math.imul($,qe)|0,b=b+Math.imul($,ct)|0,b=b+Math.imul(ee,qe)|0,S=S+Math.imul(ee,ct)|0;var ii=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(ii>>>26)|0,ii&=67108863,x=Math.imul(Se,Ce),b=Math.imul(Se,et),b=b+Math.imul(Ke,Ce)|0,S=Math.imul(Ke,et),x=x+Math.imul(we,Re)|0,b=b+Math.imul(we,at)|0,b=b+Math.imul(De,Re)|0,S=S+Math.imul(De,at)|0,x=x+Math.imul(he,Ie)|0,b=b+Math.imul(he,st)|0,b=b+Math.imul(_e,Ie)|0,S=S+Math.imul(_e,st)|0,x=x+Math.imul(ie,ke)|0,b=b+Math.imul(ie,Ye)|0,b=b+Math.imul(ye,ke)|0,S=S+Math.imul(ye,Ye)|0,x=x+Math.imul(ce,Le)|0,b=b+Math.imul(ce,lt)|0,b=b+Math.imul(ue,Le)|0,S=S+Math.imul(ue,lt)|0,x=x+Math.imul(Z,Ne)|0,b=b+Math.imul(Z,pt)|0,b=b+Math.imul(oe,Ne)|0,S=S+Math.imul(oe,pt)|0,x=x+Math.imul(B,Be)|0,b=b+Math.imul(B,gt)|0,b=b+Math.imul(z,Be)|0,S=S+Math.imul(z,gt)|0,x=x+Math.imul(ne,Ue)|0,b=b+Math.imul(ne,ht)|0,b=b+Math.imul(ge,Ue)|0,S=S+Math.imul(ge,ht)|0,x=x+Math.imul(H,qe)|0,b=b+Math.imul(H,ct)|0,b=b+Math.imul(X,qe)|0,S=S+Math.imul(X,ct)|0,x=x+Math.imul($,je)|0,b=b+Math.imul($,ut)|0,b=b+Math.imul(ee,je)|0,S=S+Math.imul(ee,ut)|0;var Kr=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,x=Math.imul(Se,Re),b=Math.imul(Se,at),b=b+Math.imul(Ke,Re)|0,S=Math.imul(Ke,at),x=x+Math.imul(we,Ie)|0,b=b+Math.imul(we,st)|0,b=b+Math.imul(De,Ie)|0,S=S+Math.imul(De,st)|0,x=x+Math.imul(he,ke)|0,b=b+Math.imul(he,Ye)|0,b=b+Math.imul(_e,ke)|0,S=S+Math.imul(_e,Ye)|0,x=x+Math.imul(ie,Le)|0,b=b+Math.imul(ie,lt)|0,b=b+Math.imul(ye,Le)|0,S=S+Math.imul(ye,lt)|0,x=x+Math.imul(ce,Ne)|0,b=b+Math.imul(ce,pt)|0,b=b+Math.imul(ue,Ne)|0,S=S+Math.imul(ue,pt)|0,x=x+Math.imul(Z,Be)|0,b=b+Math.imul(Z,gt)|0,b=b+Math.imul(oe,Be)|0,S=S+Math.imul(oe,gt)|0,x=x+Math.imul(B,Ue)|0,b=b+Math.imul(B,ht)|0,b=b+Math.imul(z,Ue)|0,S=S+Math.imul(z,ht)|0,x=x+Math.imul(ne,qe)|0,b=b+Math.imul(ne,ct)|0,b=b+Math.imul(ge,qe)|0,S=S+Math.imul(ge,ct)|0,x=x+Math.imul(H,je)|0,b=b+Math.imul(H,ut)|0,b=b+Math.imul(X,je)|0,S=S+Math.imul(X,ut)|0;var bi=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(bi>>>26)|0,bi&=67108863,x=Math.imul(Se,Ie),b=Math.imul(Se,st),b=b+Math.imul(Ke,Ie)|0,S=Math.imul(Ke,st),x=x+Math.imul(we,ke)|0,b=b+Math.imul(we,Ye)|0,b=b+Math.imul(De,ke)|0,S=S+Math.imul(De,Ye)|0,x=x+Math.imul(he,Le)|0,b=b+Math.imul(he,lt)|0,b=b+Math.imul(_e,Le)|0,S=S+Math.imul(_e,lt)|0,x=x+Math.imul(ie,Ne)|0,b=b+Math.imul(ie,pt)|0,b=b+Math.imul(ye,Ne)|0,S=S+Math.imul(ye,pt)|0,x=x+Math.imul(ce,Be)|0,b=b+Math.imul(ce,gt)|0,b=b+Math.imul(ue,Be)|0,S=S+Math.imul(ue,gt)|0,x=x+Math.imul(Z,Ue)|0,b=b+Math.imul(Z,ht)|0,b=b+Math.imul(oe,Ue)|0,S=S+Math.imul(oe,ht)|0,x=x+Math.imul(B,qe)|0,b=b+Math.imul(B,ct)|0,b=b+Math.imul(z,qe)|0,S=S+Math.imul(z,ct)|0,x=x+Math.imul(ne,je)|0,b=b+Math.imul(ne,ut)|0,b=b+Math.imul(ge,je)|0,S=S+Math.imul(ge,ut)|0;var vi=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(vi>>>26)|0,vi&=67108863,x=Math.imul(Se,ke),b=Math.imul(Se,Ye),b=b+Math.imul(Ke,ke)|0,S=Math.imul(Ke,Ye),x=x+Math.imul(we,Le)|0,b=b+Math.imul(we,lt)|0,b=b+Math.imul(De,Le)|0,S=S+Math.imul(De,lt)|0,x=x+Math.imul(he,Ne)|0,b=b+Math.imul(he,pt)|0,b=b+Math.imul(_e,Ne)|0,S=S+Math.imul(_e,pt)|0,x=x+Math.imul(ie,Be)|0,b=b+Math.imul(ie,gt)|0,b=b+Math.imul(ye,Be)|0,S=S+Math.imul(ye,gt)|0,x=x+Math.imul(ce,Ue)|0,b=b+Math.imul(ce,ht)|0,b=b+Math.imul(ue,Ue)|0,S=S+Math.imul(ue,ht)|0,x=x+Math.imul(Z,qe)|0,b=b+Math.imul(Z,ct)|0,b=b+Math.imul(oe,qe)|0,S=S+Math.imul(oe,ct)|0,x=x+Math.imul(B,je)|0,b=b+Math.imul(B,ut)|0,b=b+Math.imul(z,je)|0,S=S+Math.imul(z,ut)|0;var Nr=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,x=Math.imul(Se,Le),b=Math.imul(Se,lt),b=b+Math.imul(Ke,Le)|0,S=Math.imul(Ke,lt),x=x+Math.imul(we,Ne)|0,b=b+Math.imul(we,pt)|0,b=b+Math.imul(De,Ne)|0,S=S+Math.imul(De,pt)|0,x=x+Math.imul(he,Be)|0,b=b+Math.imul(he,gt)|0,b=b+Math.imul(_e,Be)|0,S=S+Math.imul(_e,gt)|0,x=x+Math.imul(ie,Ue)|0,b=b+Math.imul(ie,ht)|0,b=b+Math.imul(ye,Ue)|0,S=S+Math.imul(ye,ht)|0,x=x+Math.imul(ce,qe)|0,b=b+Math.imul(ce,ct)|0,b=b+Math.imul(ue,qe)|0,S=S+Math.imul(ue,ct)|0,x=x+Math.imul(Z,je)|0,b=b+Math.imul(Z,ut)|0,b=b+Math.imul(oe,je)|0,S=S+Math.imul(oe,ut)|0;var mi=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(mi>>>26)|0,mi&=67108863,x=Math.imul(Se,Ne),b=Math.imul(Se,pt),b=b+Math.imul(Ke,Ne)|0,S=Math.imul(Ke,pt),x=x+Math.imul(we,Be)|0,b=b+Math.imul(we,gt)|0,b=b+Math.imul(De,Be)|0,S=S+Math.imul(De,gt)|0,x=x+Math.imul(he,Ue)|0,b=b+Math.imul(he,ht)|0,b=b+Math.imul(_e,Ue)|0,S=S+Math.imul(_e,ht)|0,x=x+Math.imul(ie,qe)|0,b=b+Math.imul(ie,ct)|0,b=b+Math.imul(ye,qe)|0,S=S+Math.imul(ye,ct)|0,x=x+Math.imul(ce,je)|0,b=b+Math.imul(ce,ut)|0,b=b+Math.imul(ue,je)|0,S=S+Math.imul(ue,ut)|0;var Vr=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,x=Math.imul(Se,Be),b=Math.imul(Se,gt),b=b+Math.imul(Ke,Be)|0,S=Math.imul(Ke,gt),x=x+Math.imul(we,Ue)|0,b=b+Math.imul(we,ht)|0,b=b+Math.imul(De,Ue)|0,S=S+Math.imul(De,ht)|0,x=x+Math.imul(he,qe)|0,b=b+Math.imul(he,ct)|0,b=b+Math.imul(_e,qe)|0,S=S+Math.imul(_e,ct)|0,x=x+Math.imul(ie,je)|0,b=b+Math.imul(ie,ut)|0,b=b+Math.imul(ye,je)|0,S=S+Math.imul(ye,ut)|0;var nr=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(nr>>>26)|0,nr&=67108863,x=Math.imul(Se,Ue),b=Math.imul(Se,ht),b=b+Math.imul(Ke,Ue)|0,S=Math.imul(Ke,ht),x=x+Math.imul(we,qe)|0,b=b+Math.imul(we,ct)|0,b=b+Math.imul(De,qe)|0,S=S+Math.imul(De,ct)|0,x=x+Math.imul(he,je)|0,b=b+Math.imul(he,ut)|0,b=b+Math.imul(_e,je)|0,S=S+Math.imul(_e,ut)|0;var yi=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(yi>>>26)|0,yi&=67108863,x=Math.imul(Se,qe),b=Math.imul(Se,ct),b=b+Math.imul(Ke,qe)|0,S=Math.imul(Ke,ct),x=x+Math.imul(we,je)|0,b=b+Math.imul(we,ut)|0,b=b+Math.imul(De,je)|0,S=S+Math.imul(De,ut)|0;var wi=(M+x|0)+((b&8191)<<13)|0;M=(S+(b>>>13)|0)+(wi>>>26)|0,wi&=67108863,x=Math.imul(Se,je),b=Math.imul(Se,ut),b=b+Math.imul(Ke,je)|0,S=Math.imul(Ke,ut);var ni=(M+x|0)+((b&8191)<<13)|0;return M=(S+(b>>>13)|0)+(ni>>>26)|0,ni&=67108863,y[0]=it,y[1]=vt,y[2]=Qt,y[3]=yr,y[4]=Jt,y[5]=wr,y[6]=Rt,y[7]=Dr,y[8]=ii,y[9]=Kr,y[10]=bi,y[11]=vi,y[12]=Nr,y[13]=mi,y[14]=Vr,y[15]=nr,y[16]=yi,y[17]=wi,y[18]=ni,M!==0&&(y[19]=M,u.length++),u};Math.imul||(A=_);function R(C,g,p){p.negative=g.negative^C.negative,p.length=C.length+g.length;for(var u=0,d=0,v=0;v<p.length-1;v++){var y=d;d=0;for(var M=u&67108863,x=Math.min(v,g.length-1),b=Math.max(0,v-C.length+1);b<=x;b++){var S=v-b,m=C.words[S]|0,$=g.words[b]|0,ee=m*$,O=ee&67108863;y=y+(ee/67108864|0)|0,O=O+M|0,M=O&67108863,y=y+(O>>>26)|0,d+=y>>>26,y&=67108863}p.words[v]=M,u=y,y=d}return u!==0?p.words[v]=u:p.length--,p.strip()}function N(C,g,p){var u=new q;return u.mulp(C,g,p)}s.prototype.mulTo=function(g,p){var u,d=this.length+g.length;return this.length===10&&g.length===10?u=A(this,g,p):d<63?u=_(this,g,p):d<1024?u=R(this,g,p):u=N(this,g,p),u};function q(C,g){this.x=C,this.y=g}q.prototype.makeRBT=function(g){for(var p=new Array(g),u=s.prototype._countBits(g)-1,d=0;d<g;d++)p[d]=this.revBin(d,u,g);return p},q.prototype.revBin=function(g,p,u){if(g===0||g===u-1)return g;for(var d=0,v=0;v<p;v++)d|=(g&1)<<p-v-1,g>>=1;return d},q.prototype.permute=function(g,p,u,d,v,y){for(var M=0;M<y;M++)d[M]=p[g[M]],v[M]=u[g[M]]},q.prototype.transform=function(g,p,u,d,v,y){this.permute(y,g,p,u,d,v);for(var M=1;M<v;M<<=1)for(var x=M<<1,b=Math.cos(2*Math.PI/x),S=Math.sin(2*Math.PI/x),m=0;m<v;m+=x)for(var $=b,ee=S,O=0;O<M;O++){var H=u[m+O],X=d[m+O],te=u[m+O+M],ne=d[m+O+M],ge=$*te-ee*ne;ne=$*ne+ee*te,te=ge,u[m+O]=H+te,d[m+O]=X+ne,u[m+O+M]=H-te,d[m+O+M]=X-ne,O!==x&&(ge=b*$-S*ee,ee=b*ee+S*$,$=ge)}},q.prototype.guessLen13b=function(g,p){var u=Math.max(p,g)|1,d=u&1,v=0;for(u=u/2|0;u;u=u>>>1)v++;return 1<<v+1+d},q.prototype.conjugate=function(g,p,u){if(!(u<=1))for(var d=0;d<u/2;d++){var v=g[d];g[d]=g[u-d-1],g[u-d-1]=v,v=p[d],p[d]=-p[u-d-1],p[u-d-1]=-v}},q.prototype.normalize13b=function(g,p){for(var u=0,d=0;d<p/2;d++){var v=Math.round(g[2*d+1]/p)*8192+Math.round(g[2*d]/p)+u;g[d]=v&67108863,v<67108864?u=0:u=v/67108864|0}return g},q.prototype.convert13b=function(g,p,u,d){for(var v=0,y=0;y<p;y++)v=v+(g[y]|0),u[2*y]=v&8191,v=v>>>13,u[2*y+1]=v&8191,v=v>>>13;for(y=2*p;y<d;++y)u[y]=0;i(v===0),i((v&-8192)===0)},q.prototype.stub=function(g){for(var p=new Array(g),u=0;u<g;u++)p[u]=0;return p},q.prototype.mulp=function(g,p,u){var d=2*this.guessLen13b(g.length,p.length),v=this.makeRBT(d),y=this.stub(d),M=new Array(d),x=new Array(d),b=new Array(d),S=new Array(d),m=new Array(d),$=new Array(d),ee=u.words;ee.length=d,this.convert13b(g.words,g.length,M,d),this.convert13b(p.words,p.length,S,d),this.transform(M,y,x,b,d,v),this.transform(S,y,m,$,d,v);for(var O=0;O<d;O++){var H=x[O]*m[O]-b[O]*$[O];b[O]=x[O]*$[O]+b[O]*m[O],x[O]=H}return this.conjugate(x,b,d),this.transform(x,b,ee,y,d,v),this.conjugate(ee,y,d),this.normalize13b(ee,d),u.negative=g.negative^p.negative,u.length=g.length+p.length,u.strip()},s.prototype.mul=function(g){var p=new s(null);return p.words=new Array(this.length+g.length),this.mulTo(g,p)},s.prototype.mulf=function(g){var p=new s(null);return p.words=new Array(this.length+g.length),N(this,g,p)},s.prototype.imul=function(g){return this.clone().mulTo(g,this)},s.prototype.imuln=function(g){i(typeof g=="number"),i(g<67108864);for(var p=0,u=0;u<this.length;u++){var d=(this.words[u]|0)*g,v=(d&67108863)+(p&67108863);p>>=26,p+=d/67108864|0,p+=v>>>26,this.words[u]=v&67108863}return p!==0&&(this.words[u]=p,this.length++),this},s.prototype.muln=function(g){return this.clone().imuln(g)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(g){var p=E(g);if(p.length===0)return new s(1);for(var u=this,d=0;d<p.length&&p[d]===0;d++,u=u.sqr());if(++d<p.length)for(var v=u.sqr();d<p.length;d++,v=v.sqr())p[d]!==0&&(u=u.mul(v));return u},s.prototype.iushln=function(g){i(typeof g=="number"&&g>=0);var p=g%26,u=(g-p)/26,d=67108863>>>26-p<<26-p,v;if(p!==0){var y=0;for(v=0;v<this.length;v++){var M=this.words[v]&d,x=(this.words[v]|0)-M<<p;this.words[v]=x|y,y=M>>>26-p}y&&(this.words[v]=y,this.length++)}if(u!==0){for(v=this.length-1;v>=0;v--)this.words[v+u]=this.words[v];for(v=0;v<u;v++)this.words[v]=0;this.length+=u}return this.strip()},s.prototype.ishln=function(g){return i(this.negative===0),this.iushln(g)},s.prototype.iushrn=function(g,p,u){i(typeof g=="number"&&g>=0);var d;p?d=(p-p%26)/26:d=0;var v=g%26,y=Math.min((g-v)/26,this.length),M=67108863^67108863>>>v<<v,x=u;if(d-=y,d=Math.max(0,d),x){for(var b=0;b<y;b++)x.words[b]=this.words[b];x.length=y}if(y!==0)if(this.length>y)for(this.length-=y,b=0;b<this.length;b++)this.words[b]=this.words[b+y];else this.words[0]=0,this.length=1;var S=0;for(b=this.length-1;b>=0&&(S!==0||b>=d);b--){var m=this.words[b]|0;this.words[b]=S<<26-v|m>>>v,S=m&M}return x&&S!==0&&(x.words[x.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(g,p,u){return i(this.negative===0),this.iushrn(g,p,u)},s.prototype.shln=function(g){return this.clone().ishln(g)},s.prototype.ushln=function(g){return this.clone().iushln(g)},s.prototype.shrn=function(g){return this.clone().ishrn(g)},s.prototype.ushrn=function(g){return this.clone().iushrn(g)},s.prototype.testn=function(g){i(typeof g=="number"&&g>=0);var p=g%26,u=(g-p)/26,d=1<<p;if(this.length<=u)return!1;var v=this.words[u];return!!(v&d)},s.prototype.imaskn=function(g){i(typeof g=="number"&&g>=0);var p=g%26,u=(g-p)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=u)return this;if(p!==0&&u++,this.length=Math.min(u,this.length),p!==0){var d=67108863^67108863>>>p<<p;this.words[this.length-1]&=d}return this.strip()},s.prototype.maskn=function(g){return this.clone().imaskn(g)},s.prototype.iaddn=function(g){return i(typeof g=="number"),i(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},s.prototype._iaddn=function(g){this.words[0]+=g;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(g){if(i(typeof g=="number"),i(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},s.prototype.addn=function(g){return this.clone().iaddn(g)},s.prototype.subn=function(g){return this.clone().isubn(g)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(g,p,u){var d=g.length+u,v;this._expand(d);var y,M=0;for(v=0;v<g.length;v++){y=(this.words[v+u]|0)+M;var x=(g.words[v]|0)*p;y-=x&67108863,M=(y>>26)-(x/67108864|0),this.words[v+u]=y&67108863}for(;v<this.length-u;v++)y=(this.words[v+u]|0)+M,M=y>>26,this.words[v+u]=y&67108863;if(M===0)return this.strip();for(i(M===-1),M=0,v=0;v<this.length;v++)y=-(this.words[v]|0)+M,M=y>>26,this.words[v]=y&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(g,p){var u=this.length-g.length,d=this.clone(),v=g,y=v.words[v.length-1]|0,M=this._countBits(y);u=26-M,u!==0&&(v=v.ushln(u),d.iushln(u),y=v.words[v.length-1]|0);var x=d.length-v.length,b;if(p!=="mod"){b=new s(null),b.length=x+1,b.words=new Array(b.length);for(var S=0;S<b.length;S++)b.words[S]=0}var m=d.clone()._ishlnsubmul(v,1,x);m.negative===0&&(d=m,b&&(b.words[x]=1));for(var $=x-1;$>=0;$--){var ee=(d.words[v.length+$]|0)*67108864+(d.words[v.length+$-1]|0);for(ee=Math.min(ee/y|0,67108863),d._ishlnsubmul(v,ee,$);d.negative!==0;)ee--,d.negative=0,d._ishlnsubmul(v,1,$),d.isZero()||(d.negative^=1);b&&(b.words[$]=ee)}return b&&b.strip(),d.strip(),p!=="div"&&u!==0&&d.iushrn(u),{div:b||null,mod:d}},s.prototype.divmod=function(g,p,u){if(i(!g.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var d,v,y;return this.negative!==0&&g.negative===0?(y=this.neg().divmod(g,p),p!=="mod"&&(d=y.div.neg()),p!=="div"&&(v=y.mod.neg(),u&&v.negative!==0&&v.iadd(g)),{div:d,mod:v}):this.negative===0&&g.negative!==0?(y=this.divmod(g.neg(),p),p!=="mod"&&(d=y.div.neg()),{div:d,mod:y.mod}):this.negative&g.negative?(y=this.neg().divmod(g.neg(),p),p!=="div"&&(v=y.mod.neg(),u&&v.negative!==0&&v.isub(g)),{div:y.div,mod:v}):g.length>this.length||this.cmp(g)<0?{div:new s(0),mod:this}:g.length===1?p==="div"?{div:this.divn(g.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new s(this.modn(g.words[0]))}:this._wordDiv(g,p)},s.prototype.div=function(g){return this.divmod(g,"div",!1).div},s.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},s.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},s.prototype.divRound=function(g){var p=this.divmod(g);if(p.mod.isZero())return p.div;var u=p.div.negative!==0?p.mod.isub(g):p.mod,d=g.ushrn(1),v=g.andln(1),y=u.cmp(d);return y<0||v===1&&y===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modn=function(g){i(g<=67108863);for(var p=(1<<26)%g,u=0,d=this.length-1;d>=0;d--)u=(p*u+(this.words[d]|0))%g;return u},s.prototype.idivn=function(g){i(g<=67108863);for(var p=0,u=this.length-1;u>=0;u--){var d=(this.words[u]|0)+p*67108864;this.words[u]=d/g|0,p=d%g}return this.strip()},s.prototype.divn=function(g){return this.clone().idivn(g)},s.prototype.egcd=function(g){i(g.negative===0),i(!g.isZero());var p=this,u=g.clone();p.negative!==0?p=p.umod(g):p=p.clone();for(var d=new s(1),v=new s(0),y=new s(0),M=new s(1),x=0;p.isEven()&&u.isEven();)p.iushrn(1),u.iushrn(1),++x;for(var b=u.clone(),S=p.clone();!p.isZero();){for(var m=0,$=1;!(p.words[0]&$)&&m<26;++m,$<<=1);if(m>0)for(p.iushrn(m);m-- >0;)(d.isOdd()||v.isOdd())&&(d.iadd(b),v.isub(S)),d.iushrn(1),v.iushrn(1);for(var ee=0,O=1;!(u.words[0]&O)&&ee<26;++ee,O<<=1);if(ee>0)for(u.iushrn(ee);ee-- >0;)(y.isOdd()||M.isOdd())&&(y.iadd(b),M.isub(S)),y.iushrn(1),M.iushrn(1);p.cmp(u)>=0?(p.isub(u),d.isub(y),v.isub(M)):(u.isub(p),y.isub(d),M.isub(v))}return{a:y,b:M,gcd:u.iushln(x)}},s.prototype._invmp=function(g){i(g.negative===0),i(!g.isZero());var p=this,u=g.clone();p.negative!==0?p=p.umod(g):p=p.clone();for(var d=new s(1),v=new s(0),y=u.clone();p.cmpn(1)>0&&u.cmpn(1)>0;){for(var M=0,x=1;!(p.words[0]&x)&&M<26;++M,x<<=1);if(M>0)for(p.iushrn(M);M-- >0;)d.isOdd()&&d.iadd(y),d.iushrn(1);for(var b=0,S=1;!(u.words[0]&S)&&b<26;++b,S<<=1);if(b>0)for(u.iushrn(b);b-- >0;)v.isOdd()&&v.iadd(y),v.iushrn(1);p.cmp(u)>=0?(p.isub(u),d.isub(v)):(u.isub(p),v.isub(d))}var m;return p.cmpn(1)===0?m=d:m=v,m.cmpn(0)<0&&m.iadd(g),m},s.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var p=this.clone(),u=g.clone();p.negative=0,u.negative=0;for(var d=0;p.isEven()&&u.isEven();d++)p.iushrn(1),u.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;u.isEven();)u.iushrn(1);var v=p.cmp(u);if(v<0){var y=p;p=u,u=y}else if(v===0||u.cmpn(1)===0)break;p.isub(u)}while(!0);return u.iushln(d)},s.prototype.invm=function(g){return this.egcd(g).a.umod(g)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(g){return this.words[0]&g},s.prototype.bincn=function(g){i(typeof g=="number");var p=g%26,u=(g-p)/26,d=1<<p;if(this.length<=u)return this._expand(u+1),this.words[u]|=d,this;for(var v=d,y=u;v!==0&&y<this.length;y++){var M=this.words[y]|0;M+=v,v=M>>>26,M&=67108863,this.words[y]=M}return v!==0&&(this.words[y]=v,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(g){var p=g<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var u;if(this.length>1)u=1;else{p&&(g=-g),i(g<=67108863,"Number is too big");var d=this.words[0]|0;u=d===g?0:d<g?-1:1}return this.negative!==0?-u|0:u},s.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var p=this.ucmp(g);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var p=0,u=this.length-1;u>=0;u--){var d=this.words[u]|0,v=g.words[u]|0;if(d!==v){d<v?p=-1:d>v&&(p=1);break}}return p},s.prototype.gtn=function(g){return this.cmpn(g)===1},s.prototype.gt=function(g){return this.cmp(g)===1},s.prototype.gten=function(g){return this.cmpn(g)>=0},s.prototype.gte=function(g){return this.cmp(g)>=0},s.prototype.ltn=function(g){return this.cmpn(g)===-1},s.prototype.lt=function(g){return this.cmp(g)===-1},s.prototype.lten=function(g){return this.cmpn(g)<=0},s.prototype.lte=function(g){return this.cmp(g)<=0},s.prototype.eqn=function(g){return this.cmpn(g)===0},s.prototype.eq=function(g){return this.cmp(g)===0},s.red=function(g){return new W(g)},s.prototype.toRed=function(g){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(g){return this.red=g,this},s.prototype.forceRed=function(g){return i(!this.red,"Already a number in reduction context"),this._forceRed(g)},s.prototype.redAdd=function(g){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},s.prototype.redIAdd=function(g){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},s.prototype.redSub=function(g){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},s.prototype.redISub=function(g){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},s.prototype.redShl=function(g){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},s.prototype.redMul=function(g){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},s.prototype.redIMul=function(g){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(g){return i(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var U={k256:null,p224:null,p192:null,p25519:null};function P(C,g){this.name=C,this.p=new s(g,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var g=new s(null);return g.words=new Array(Math.ceil(this.n/13)),g},P.prototype.ireduce=function(g){var p=g,u;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),u=p.bitLength();while(u>this.n);var d=u<this.n?-1:p.ucmp(this.p);return d===0?(p.words[0]=0,p.length=1):d>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},P.prototype.split=function(g,p){g.iushrn(this.n,0,p)},P.prototype.imulK=function(g){return g.imul(this.k)};function F(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(F,P),F.prototype.split=function(g,p){for(var u=4194303,d=Math.min(g.length,9),v=0;v<d;v++)p.words[v]=g.words[v];if(p.length=d,g.length<=9){g.words[0]=0,g.length=1;return}var y=g.words[9];for(p.words[p.length++]=y&u,v=10;v<g.length;v++){var M=g.words[v]|0;g.words[v-10]=(M&u)<<4|y>>>22,y=M}y>>>=22,g.words[v-10]=y,y===0&&g.length>10?g.length-=10:g.length-=9},F.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var p=0,u=0;u<g.length;u++){var d=g.words[u]|0;p+=d*977,g.words[u]=p&67108863,p=d*64+(p/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function L(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,P);function K(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(K,P);function V(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(V,P),V.prototype.imulK=function(g){for(var p=0,u=0;u<g.length;u++){var d=(g.words[u]|0)*19+p,v=d&67108863;d>>>=26,g.words[u]=v,p=d}return p!==0&&(g.words[g.length++]=p),g},s._prime=function(g){if(U[g])return U[g];var p;if(g==="k256")p=new F;else if(g==="p224")p=new L;else if(g==="p192")p=new K;else if(g==="p25519")p=new V;else throw new Error("Unknown prime "+g);return U[g]=p,p};function W(C){if(typeof C=="string"){var g=s._prime(C);this.m=g.p,this.prime=g}else i(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}W.prototype._verify1=function(g){i(g.negative===0,"red works only with positives"),i(g.red,"red works only with red numbers")},W.prototype._verify2=function(g,p){i((g.negative|p.negative)===0,"red works only with positives"),i(g.red&&g.red===p.red,"red works only with red numbers")},W.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):g.umod(this.m)._forceRed(this)},W.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},W.prototype.add=function(g,p){this._verify2(g,p);var u=g.add(p);return u.cmp(this.m)>=0&&u.isub(this.m),u._forceRed(this)},W.prototype.iadd=function(g,p){this._verify2(g,p);var u=g.iadd(p);return u.cmp(this.m)>=0&&u.isub(this.m),u},W.prototype.sub=function(g,p){this._verify2(g,p);var u=g.sub(p);return u.cmpn(0)<0&&u.iadd(this.m),u._forceRed(this)},W.prototype.isub=function(g,p){this._verify2(g,p);var u=g.isub(p);return u.cmpn(0)<0&&u.iadd(this.m),u},W.prototype.shl=function(g,p){return this._verify1(g),this.imod(g.ushln(p))},W.prototype.imul=function(g,p){return this._verify2(g,p),this.imod(g.imul(p))},W.prototype.mul=function(g,p){return this._verify2(g,p),this.imod(g.mul(p))},W.prototype.isqr=function(g){return this.imul(g,g.clone())},W.prototype.sqr=function(g){return this.mul(g,g)},W.prototype.sqrt=function(g){if(g.isZero())return g.clone();var p=this.m.andln(3);if(i(p%2===1),p===3){var u=this.m.add(new s(1)).iushrn(2);return this.pow(g,u)}for(var d=this.m.subn(1),v=0;!d.isZero()&&d.andln(1)===0;)v++,d.iushrn(1);i(!d.isZero());var y=new s(1).toRed(this),M=y.redNeg(),x=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new s(2*b*b).toRed(this);this.pow(b,x).cmp(M)!==0;)b.redIAdd(M);for(var S=this.pow(b,d),m=this.pow(g,d.addn(1).iushrn(1)),$=this.pow(g,d),ee=v;$.cmp(y)!==0;){for(var O=$,H=0;O.cmp(y)!==0;H++)O=O.redSqr();i(H<ee);var X=this.pow(S,new s(1).iushln(ee-H-1));m=m.redMul(X),S=X.redSqr(),$=$.redMul(S),ee=H}return m},W.prototype.invm=function(g){var p=g._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},W.prototype.pow=function(g,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return g.clone();var u=4,d=new Array(1<<u);d[0]=new s(1).toRed(this),d[1]=g;for(var v=2;v<d.length;v++)d[v]=this.mul(d[v-1],g);var y=d[0],M=0,x=0,b=p.bitLength()%26;for(b===0&&(b=26),v=p.length-1;v>=0;v--){for(var S=p.words[v],m=b-1;m>=0;m--){var $=S>>m&1;if(y!==d[0]&&(y=this.sqr(y)),$===0&&M===0){x=0;continue}M<<=1,M|=$,x++,!(x!==u&&(v!==0||m!==0))&&(y=this.mul(y,d[M]),x=0,M=0)}b=26}return y},W.prototype.convertTo=function(g){var p=g.umod(this.m);return p===g?p.clone():p},W.prototype.convertFrom=function(g){var p=g.clone();return p.red=null,p},s.mont=function(g){return new Q(g)};function Q(C){W.call(this,C),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(Q,W),Q.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},Q.prototype.convertFrom=function(g){var p=this.imod(g.mul(this.rinv));return p.red=null,p},Q.prototype.imul=function(g,p){if(g.isZero()||p.isZero())return g.words[0]=0,g.length=1,g;var u=g.imul(p),d=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=u.isub(d).iushrn(this.shift),y=v;return v.cmp(this.m)>=0?y=v.isub(this.m):v.cmpn(0)<0&&(y=v.iadd(this.m)),y._forceRed(this)},Q.prototype.mul=function(g,p){if(g.isZero()||p.isZero())return new s(0)._forceRed(this);var u=g.mul(p),d=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=u.isub(d).iushrn(this.shift),y=v;return v.cmp(this.m)>=0?y=v.isub(this.m):v.cmpn(0)<0&&(y=v.iadd(this.m)),y._forceRed(this)},Q.prototype.invm=function(g){var p=this.imod(g._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(e,M9)}(tf)),tf.exports}var lu={},P0;function Bb(){return P0||(P0=1,function(e){var t=e;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var f=0;f<s.length;f++)a[f]=s[f]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var f=0;f<s.length;f+=2)a.push(parseInt(s[f]+s[f+1],16))}else for(var f=0;f<s.length;f++){var c=s.charCodeAt(f),l=c>>8,h=c&255;l?a.push(l,h):a.push(h)}return a}t.toArray=r;function i(s){return s.length===1?"0"+s:s}t.zero2=i;function n(s){for(var o="",a=0;a<s.length;a++)o+=i(s[a].toString(16));return o}t.toHex=n,t.encode=function(o,a){return a==="hex"?n(o):o}}(lu)),lu}var $0;function gi(){return $0||($0=1,function(e){var t=e,r=wn(),i=ms(),n=Bb();t.assert=i,t.toArray=n.toArray,t.zero2=n.zero2,t.toHex=n.toHex,t.encode=n.encode;function s(l,h,w){var E=new Array(Math.max(l.bitLength(),w)+1),_;for(_=0;_<E.length;_+=1)E[_]=0;var A=1<<h+1,R=l.clone();for(_=0;_<E.length;_++){var N,q=R.andln(A-1);R.isOdd()?(q>(A>>1)-1?N=(A>>1)-q:N=q,R.isubn(N)):N=0,E[_]=N,R.iushrn(1)}return E}t.getNAF=s;function o(l,h){var w=[[],[]];l=l.clone(),h=h.clone();for(var E=0,_=0,A;l.cmpn(-E)>0||h.cmpn(-_)>0;){var R=l.andln(3)+E&3,N=h.andln(3)+_&3;R===3&&(R=-1),N===3&&(N=-1);var q;R&1?(A=l.andln(7)+E&7,(A===3||A===5)&&N===2?q=-R:q=R):q=0,w[0].push(q);var U;N&1?(A=h.andln(7)+_&7,(A===3||A===5)&&R===2?U=-N:U=N):U=0,w[1].push(U),2*E===q+1&&(E=1-E),2*_===U+1&&(_=1-_),l.iushrn(1),h.iushrn(1)}return w}t.getJSF=o;function a(l,h,w){var E="_"+h;l.prototype[h]=function(){return this[E]!==void 0?this[E]:this[E]=w.call(this)}}t.cachedProperty=a;function f(l){return typeof l=="string"?t.toArray(l,"hex"):l}t.parseBytes=f;function c(l){return new r(l,"hex","le")}t.intFromLE=c}(uu)),uu}var Fa={exports:{}},R0;function Ub(){if(R0)return Fa.exports;R0=1;var e;Fa.exports=function(n){return e||(e=new t(null)),e.generate(n)};function t(i){this.rand=i}if(Fa.exports.Rand=t,t.prototype.generate=function(n){return this._rand(n)},t.prototype._rand=function(n){if(this.rand.getBytes)return this.rand.getBytes(n);for(var s=new Uint8Array(n),o=0;o<s.length;o++)s[o]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?t.prototype._rand=function(n){var s=new Uint8Array(n);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?t.prototype._rand=function(n){var s=new Uint8Array(n);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(t.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=Ql;if(typeof r.randomBytes!="function")throw new Error("Not supported");t.prototype._rand=function(n){return r.randomBytes(n)}}catch{}return Fa.exports}var hu={},du,C0;function Zf(){if(C0)return du;C0=1;var e=wn(),t=gi(),r=t.getNAF,i=t.getJSF,n=t.assert;function s(a,f){this.type=a,this.p=new e(f.p,16),this.red=f.prime?e.red(f.prime):e.mont(this.p),this.zero=new e(0).toRed(this.red),this.one=new e(1).toRed(this.red),this.two=new e(2).toRed(this.red),this.n=f.n&&new e(f.n,16),this.g=f.g&&this.pointFromJSON(f.g,f.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var c=this.n&&this.p.div(this.n);!c||c.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}du=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(f,c){n(f.precomputed);var l=f._getDoubles(),h=r(c,1,this._bitLength),w=(1<<l.step+1)-(l.step%2===0?2:1);w/=3;var E=[],_,A;for(_=0;_<h.length;_+=l.step){A=0;for(var R=_+l.step-1;R>=_;R--)A=(A<<1)+h[R];E.push(A)}for(var N=this.jpoint(null,null,null),q=this.jpoint(null,null,null),U=w;U>0;U--){for(_=0;_<E.length;_++)A=E[_],A===U?q=q.mixedAdd(l.points[_]):A===-U&&(q=q.mixedAdd(l.points[_].neg()));N=N.add(q)}return N.toP()},s.prototype._wnafMul=function(f,c){var l=4,h=f._getNAFPoints(l);l=h.wnd;for(var w=h.points,E=r(c,l,this._bitLength),_=this.jpoint(null,null,null),A=E.length-1;A>=0;A--){for(var R=0;A>=0&&E[A]===0;A--)R++;if(A>=0&&R++,_=_.dblp(R),A<0)break;var N=E[A];n(N!==0),f.type==="affine"?N>0?_=_.mixedAdd(w[N-1>>1]):_=_.mixedAdd(w[-N-1>>1].neg()):N>0?_=_.add(w[N-1>>1]):_=_.add(w[-N-1>>1].neg())}return f.type==="affine"?_.toP():_},s.prototype._wnafMulAdd=function(f,c,l,h,w){var E=this._wnafT1,_=this._wnafT2,A=this._wnafT3,R=0,N,q,U;for(N=0;N<h;N++){U=c[N];var P=U._getNAFPoints(f);E[N]=P.wnd,_[N]=P.points}for(N=h-1;N>=1;N-=2){var F=N-1,L=N;if(E[F]!==1||E[L]!==1){A[F]=r(l[F],E[F],this._bitLength),A[L]=r(l[L],E[L],this._bitLength),R=Math.max(A[F].length,R),R=Math.max(A[L].length,R);continue}var K=[c[F],null,null,c[L]];c[F].y.cmp(c[L].y)===0?(K[1]=c[F].add(c[L]),K[2]=c[F].toJ().mixedAdd(c[L].neg())):c[F].y.cmp(c[L].y.redNeg())===0?(K[1]=c[F].toJ().mixedAdd(c[L]),K[2]=c[F].add(c[L].neg())):(K[1]=c[F].toJ().mixedAdd(c[L]),K[2]=c[F].toJ().mixedAdd(c[L].neg()));var V=[-3,-1,-5,-7,0,7,5,1,3],W=i(l[F],l[L]);for(R=Math.max(W[0].length,R),A[F]=new Array(R),A[L]=new Array(R),q=0;q<R;q++){var Q=W[0][q]|0,C=W[1][q]|0;A[F][q]=V[(Q+1)*3+(C+1)],A[L][q]=0,_[F]=K}}var g=this.jpoint(null,null,null),p=this._wnafT4;for(N=R;N>=0;N--){for(var u=0;N>=0;){var d=!0;for(q=0;q<h;q++)p[q]=A[q][N]|0,p[q]!==0&&(d=!1);if(!d)break;u++,N--}if(N>=0&&u++,g=g.dblp(u),N<0)break;for(q=0;q<h;q++){var v=p[q];v!==0&&(v>0?U=_[q][v-1>>1]:v<0&&(U=_[q][-v-1>>1].neg()),U.type==="affine"?g=g.mixedAdd(U):g=g.add(U))}}for(N=0;N<h;N++)_[N]=null;return w?g:g.toP()};function o(a,f){this.curve=a,this.type=f,this.precomputed=null}return s.BasePoint=o,o.prototype.eq=function(){throw new Error("Not implemented")},o.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(f,c){f=t.toArray(f,c);var l=this.p.byteLength();if((f[0]===4||f[0]===6||f[0]===7)&&f.length-1===2*l){f[0]===6?n(f[f.length-1]%2===0):f[0]===7&&n(f[f.length-1]%2===1);var h=this.point(f.slice(1,1+l),f.slice(1+l,1+2*l));return h}else if((f[0]===2||f[0]===3)&&f.length-1===l)return this.pointFromX(f.slice(1,1+l),f[0]===3);throw new Error("Unknown point format")},o.prototype.encodeCompressed=function(f){return this.encode(f,!0)},o.prototype._encode=function(f){var c=this.curve.p.byteLength(),l=this.getX().toArray("be",c);return f?[this.getY().isEven()?2:3].concat(l):[4].concat(l,this.getY().toArray("be",c))},o.prototype.encode=function(f,c){return t.encode(this._encode(c),f)},o.prototype.precompute=function(f){if(this.precomputed)return this;var c={doubles:null,naf:null,beta:null};return c.naf=this._getNAFPoints(8),c.doubles=this._getDoubles(4,f),c.beta=this._getBeta(),this.precomputed=c,this},o.prototype._hasDoubles=function(f){if(!this.precomputed)return!1;var c=this.precomputed.doubles;return c?c.points.length>=Math.ceil((f.bitLength()+1)/c.step):!1},o.prototype._getDoubles=function(f,c){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var l=[this],h=this,w=0;w<c;w+=f){for(var E=0;E<f;E++)h=h.dbl();l.push(h)}return{step:f,points:l}},o.prototype._getNAFPoints=function(f){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var c=[this],l=(1<<f)-1,h=l===1?null:this.dbl(),w=1;w<l;w++)c[w]=c[w-1].add(h);return{wnd:f,points:c}},o.prototype._getBeta=function(){return null},o.prototype.dblp=function(f){for(var c=this,l=0;l<f;l++)c=c.dbl();return c},du}var pu,T0;function A9(){if(T0)return pu;T0=1;var e=gi(),t=wn(),r=Hf(),i=Zf(),n=e.assert;function s(f){i.call(this,"short",f),this.a=new t(f.a,16).toRed(this.red),this.b=new t(f.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(f),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}r(s,i),pu=s,s.prototype._getEndomorphism=function(c){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var l,h;if(c.beta)l=new t(c.beta,16).toRed(this.red);else{var w=this._getEndoRoots(this.p);l=w[0].cmp(w[1])<0?w[0]:w[1],l=l.toRed(this.red)}if(c.lambda)h=new t(c.lambda,16);else{var E=this._getEndoRoots(this.n);this.g.mul(E[0]).x.cmp(this.g.x.redMul(l))===0?h=E[0]:(h=E[1],n(this.g.mul(h).x.cmp(this.g.x.redMul(l))===0))}var _;return c.basis?_=c.basis.map(function(A){return{a:new t(A.a,16),b:new t(A.b,16)}}):_=this._getEndoBasis(h),{beta:l,lambda:h,basis:_}}},s.prototype._getEndoRoots=function(c){var l=c===this.p?this.red:t.mont(c),h=new t(2).toRed(l).redInvm(),w=h.redNeg(),E=new t(3).toRed(l).redNeg().redSqrt().redMul(h),_=w.redAdd(E).fromRed(),A=w.redSub(E).fromRed();return[_,A]},s.prototype._getEndoBasis=function(c){for(var l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=c,w=this.n.clone(),E=new t(1),_=new t(0),A=new t(0),R=new t(1),N,q,U,P,F,L,K,V=0,W,Q;h.cmpn(0)!==0;){var C=w.div(h);W=w.sub(C.mul(h)),Q=A.sub(C.mul(E));var g=R.sub(C.mul(_));if(!U&&W.cmp(l)<0)N=K.neg(),q=E,U=W.neg(),P=Q;else if(U&&++V===2)break;K=W,w=h,h=W,A=E,E=Q,R=_,_=g}F=W.neg(),L=Q;var p=U.sqr().add(P.sqr()),u=F.sqr().add(L.sqr());return u.cmp(p)>=0&&(F=N,L=q),U.negative&&(U=U.neg(),P=P.neg()),F.negative&&(F=F.neg(),L=L.neg()),[{a:U,b:P},{a:F,b:L}]},s.prototype._endoSplit=function(c){var l=this.endo.basis,h=l[0],w=l[1],E=w.b.mul(c).divRound(this.n),_=h.b.neg().mul(c).divRound(this.n),A=E.mul(h.a),R=_.mul(w.a),N=E.mul(h.b),q=_.mul(w.b),U=c.sub(A).sub(R),P=N.add(q).neg();return{k1:U,k2:P}},s.prototype.pointFromX=function(c,l){c=new t(c,16),c.red||(c=c.toRed(this.red));var h=c.redSqr().redMul(c).redIAdd(c.redMul(this.a)).redIAdd(this.b),w=h.redSqrt();if(w.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");var E=w.fromRed().isOdd();return(l&&!E||!l&&E)&&(w=w.redNeg()),this.point(c,w)},s.prototype.validate=function(c){if(c.inf)return!0;var l=c.x,h=c.y,w=this.a.redMul(l),E=l.redSqr().redMul(l).redIAdd(w).redIAdd(this.b);return h.redSqr().redISub(E).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(c,l,h){for(var w=this._endoWnafT1,E=this._endoWnafT2,_=0;_<c.length;_++){var A=this._endoSplit(l[_]),R=c[_],N=R._getBeta();A.k1.negative&&(A.k1.ineg(),R=R.neg(!0)),A.k2.negative&&(A.k2.ineg(),N=N.neg(!0)),w[_*2]=R,w[_*2+1]=N,E[_*2]=A.k1,E[_*2+1]=A.k2}for(var q=this._wnafMulAdd(1,w,E,_*2,h),U=0;U<_*2;U++)w[U]=null,E[U]=null;return q};function o(f,c,l,h){i.BasePoint.call(this,f,"affine"),c===null&&l===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new t(c,16),this.y=new t(l,16),h&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}r(o,i.BasePoint),s.prototype.point=function(c,l,h){return new o(this,c,l,h)},s.prototype.pointFromJSON=function(c,l){return o.fromJSON(this,c,l)},o.prototype._getBeta=function(){if(this.curve.endo){var c=this.precomputed;if(c&&c.beta)return c.beta;var l=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(c){var h=this.curve,w=function(E){return h.point(E.x.redMul(h.endo.beta),E.y)};c.beta=l,l.precomputed={beta:null,naf:c.naf&&{wnd:c.naf.wnd,points:c.naf.points.map(w)},doubles:c.doubles&&{step:c.doubles.step,points:c.doubles.points.map(w)}}}return l}},o.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},o.fromJSON=function(c,l,h){typeof l=="string"&&(l=JSON.parse(l));var w=c.point(l[0],l[1],h);if(!l[2])return w;function E(A){return c.point(A[0],A[1],h)}var _=l[2];return w.precomputed={beta:null,doubles:_.doubles&&{step:_.doubles.step,points:[w].concat(_.doubles.points.map(E))},naf:_.naf&&{wnd:_.naf.wnd,points:[w].concat(_.naf.points.map(E))}},w},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.inf},o.prototype.add=function(c){if(this.inf)return c;if(c.inf)return this;if(this.eq(c))return this.dbl();if(this.neg().eq(c))return this.curve.point(null,null);if(this.x.cmp(c.x)===0)return this.curve.point(null,null);var l=this.y.redSub(c.y);l.cmpn(0)!==0&&(l=l.redMul(this.x.redSub(c.x).redInvm()));var h=l.redSqr().redISub(this.x).redISub(c.x),w=l.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,w)},o.prototype.dbl=function(){if(this.inf)return this;var c=this.y.redAdd(this.y);if(c.cmpn(0)===0)return this.curve.point(null,null);var l=this.curve.a,h=this.x.redSqr(),w=c.redInvm(),E=h.redAdd(h).redIAdd(h).redIAdd(l).redMul(w),_=E.redSqr().redISub(this.x.redAdd(this.x)),A=E.redMul(this.x.redSub(_)).redISub(this.y);return this.curve.point(_,A)},o.prototype.getX=function(){return this.x.fromRed()},o.prototype.getY=function(){return this.y.fromRed()},o.prototype.mul=function(c){return c=new t(c,16),this.isInfinity()?this:this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve.endo?this.curve._endoWnafMulAdd([this],[c]):this.curve._wnafMul(this,c)},o.prototype.mulAdd=function(c,l,h){var w=[this,l],E=[c,h];return this.curve.endo?this.curve._endoWnafMulAdd(w,E):this.curve._wnafMulAdd(1,w,E,2)},o.prototype.jmulAdd=function(c,l,h){var w=[this,l],E=[c,h];return this.curve.endo?this.curve._endoWnafMulAdd(w,E,!0):this.curve._wnafMulAdd(1,w,E,2,!0)},o.prototype.eq=function(c){return this===c||this.inf===c.inf&&(this.inf||this.x.cmp(c.x)===0&&this.y.cmp(c.y)===0)},o.prototype.neg=function(c){if(this.inf)return this;var l=this.curve.point(this.x,this.y.redNeg());if(c&&this.precomputed){var h=this.precomputed,w=function(E){return E.neg()};l.precomputed={naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(w)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(w)}}}return l},o.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var c=this.curve.jpoint(this.x,this.y,this.curve.one);return c};function a(f,c,l,h){i.BasePoint.call(this,f,"jacobian"),c===null&&l===null&&h===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new t(0)):(this.x=new t(c,16),this.y=new t(l,16),this.z=new t(h,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(a,i.BasePoint),s.prototype.jpoint=function(c,l,h){return new a(this,c,l,h)},a.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var c=this.z.redInvm(),l=c.redSqr(),h=this.x.redMul(l),w=this.y.redMul(l).redMul(c);return this.curve.point(h,w)},a.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},a.prototype.add=function(c){if(this.isInfinity())return c;if(c.isInfinity())return this;var l=c.z.redSqr(),h=this.z.redSqr(),w=this.x.redMul(l),E=c.x.redMul(h),_=this.y.redMul(l.redMul(c.z)),A=c.y.redMul(h.redMul(this.z)),R=w.redSub(E),N=_.redSub(A);if(R.cmpn(0)===0)return N.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var q=R.redSqr(),U=q.redMul(R),P=w.redMul(q),F=N.redSqr().redIAdd(U).redISub(P).redISub(P),L=N.redMul(P.redISub(F)).redISub(_.redMul(U)),K=this.z.redMul(c.z).redMul(R);return this.curve.jpoint(F,L,K)},a.prototype.mixedAdd=function(c){if(this.isInfinity())return c.toJ();if(c.isInfinity())return this;var l=this.z.redSqr(),h=this.x,w=c.x.redMul(l),E=this.y,_=c.y.redMul(l).redMul(this.z),A=h.redSub(w),R=E.redSub(_);if(A.cmpn(0)===0)return R.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var N=A.redSqr(),q=N.redMul(A),U=h.redMul(N),P=R.redSqr().redIAdd(q).redISub(U).redISub(U),F=R.redMul(U.redISub(P)).redISub(E.redMul(q)),L=this.z.redMul(A);return this.curve.jpoint(P,F,L)},a.prototype.dblp=function(c){if(c===0)return this;if(this.isInfinity())return this;if(!c)return this.dbl();var l;if(this.curve.zeroA||this.curve.threeA){var h=this;for(l=0;l<c;l++)h=h.dbl();return h}var w=this.curve.a,E=this.curve.tinv,_=this.x,A=this.y,R=this.z,N=R.redSqr().redSqr(),q=A.redAdd(A);for(l=0;l<c;l++){var U=_.redSqr(),P=q.redSqr(),F=P.redSqr(),L=U.redAdd(U).redIAdd(U).redIAdd(w.redMul(N)),K=_.redMul(P),V=L.redSqr().redISub(K.redAdd(K)),W=K.redISub(V),Q=L.redMul(W);Q=Q.redIAdd(Q).redISub(F);var C=q.redMul(R);l+1<c&&(N=N.redMul(F)),_=V,R=C,q=Q}return this.curve.jpoint(_,q.redMul(E),R)},a.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},a.prototype._zeroDbl=function(){var c,l,h;if(this.zOne){var w=this.x.redSqr(),E=this.y.redSqr(),_=E.redSqr(),A=this.x.redAdd(E).redSqr().redISub(w).redISub(_);A=A.redIAdd(A);var R=w.redAdd(w).redIAdd(w),N=R.redSqr().redISub(A).redISub(A),q=_.redIAdd(_);q=q.redIAdd(q),q=q.redIAdd(q),c=N,l=R.redMul(A.redISub(N)).redISub(q),h=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),P=this.y.redSqr(),F=P.redSqr(),L=this.x.redAdd(P).redSqr().redISub(U).redISub(F);L=L.redIAdd(L);var K=U.redAdd(U).redIAdd(U),V=K.redSqr(),W=F.redIAdd(F);W=W.redIAdd(W),W=W.redIAdd(W),c=V.redISub(L).redISub(L),l=K.redMul(L.redISub(c)).redISub(W),h=this.y.redMul(this.z),h=h.redIAdd(h)}return this.curve.jpoint(c,l,h)},a.prototype._threeDbl=function(){var c,l,h;if(this.zOne){var w=this.x.redSqr(),E=this.y.redSqr(),_=E.redSqr(),A=this.x.redAdd(E).redSqr().redISub(w).redISub(_);A=A.redIAdd(A);var R=w.redAdd(w).redIAdd(w).redIAdd(this.curve.a),N=R.redSqr().redISub(A).redISub(A);c=N;var q=_.redIAdd(_);q=q.redIAdd(q),q=q.redIAdd(q),l=R.redMul(A.redISub(N)).redISub(q),h=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),P=this.y.redSqr(),F=this.x.redMul(P),L=this.x.redSub(U).redMul(this.x.redAdd(U));L=L.redAdd(L).redIAdd(L);var K=F.redIAdd(F);K=K.redIAdd(K);var V=K.redAdd(K);c=L.redSqr().redISub(V),h=this.y.redAdd(this.z).redSqr().redISub(P).redISub(U);var W=P.redSqr();W=W.redIAdd(W),W=W.redIAdd(W),W=W.redIAdd(W),l=L.redMul(K.redISub(c)).redISub(W)}return this.curve.jpoint(c,l,h)},a.prototype._dbl=function(){var c=this.curve.a,l=this.x,h=this.y,w=this.z,E=w.redSqr().redSqr(),_=l.redSqr(),A=h.redSqr(),R=_.redAdd(_).redIAdd(_).redIAdd(c.redMul(E)),N=l.redAdd(l);N=N.redIAdd(N);var q=N.redMul(A),U=R.redSqr().redISub(q.redAdd(q)),P=q.redISub(U),F=A.redSqr();F=F.redIAdd(F),F=F.redIAdd(F),F=F.redIAdd(F);var L=R.redMul(P).redISub(F),K=h.redAdd(h).redMul(w);return this.curve.jpoint(U,L,K)},a.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var c=this.x.redSqr(),l=this.y.redSqr(),h=this.z.redSqr(),w=l.redSqr(),E=c.redAdd(c).redIAdd(c),_=E.redSqr(),A=this.x.redAdd(l).redSqr().redISub(c).redISub(w);A=A.redIAdd(A),A=A.redAdd(A).redIAdd(A),A=A.redISub(_);var R=A.redSqr(),N=w.redIAdd(w);N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N);var q=E.redIAdd(A).redSqr().redISub(_).redISub(R).redISub(N),U=l.redMul(q);U=U.redIAdd(U),U=U.redIAdd(U);var P=this.x.redMul(R).redISub(U);P=P.redIAdd(P),P=P.redIAdd(P);var F=this.y.redMul(q.redMul(N.redISub(q)).redISub(A.redMul(R)));F=F.redIAdd(F),F=F.redIAdd(F),F=F.redIAdd(F);var L=this.z.redAdd(A).redSqr().redISub(h).redISub(R);return this.curve.jpoint(P,F,L)},a.prototype.mul=function(c,l){return c=new t(c,l),this.curve._wnafMul(this,c)},a.prototype.eq=function(c){if(c.type==="affine")return this.eq(c.toJ());if(this===c)return!0;var l=this.z.redSqr(),h=c.z.redSqr();if(this.x.redMul(h).redISub(c.x.redMul(l)).cmpn(0)!==0)return!1;var w=l.redMul(this.z),E=h.redMul(c.z);return this.y.redMul(E).redISub(c.y.redMul(w)).cmpn(0)===0},a.prototype.eqXToP=function(c){var l=this.z.redSqr(),h=c.toRed(this.curve.red).redMul(l);if(this.x.cmp(h)===0)return!0;for(var w=c.clone(),E=this.curve.redN.redMul(l);;){if(w.iadd(this.curve.n),w.cmp(this.curve.p)>=0)return!1;if(h.redIAdd(E),this.x.cmp(h)===0)return!0}},a.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},a.prototype.isInfinity=function(){return this.z.cmpn(0)===0},pu}var gu,N0;function I9(){if(N0)return gu;N0=1;var e=wn(),t=Hf(),r=Zf(),i=gi();function n(o){r.call(this,"mont",o),this.a=new e(o.a,16).toRed(this.red),this.b=new e(o.b,16).toRed(this.red),this.i4=new e(4).toRed(this.red).redInvm(),this.two=new e(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}t(n,r),gu=n,n.prototype.validate=function(a){var f=a.normalize().x,c=f.redSqr(),l=c.redMul(f).redAdd(c.redMul(this.a)).redAdd(f),h=l.redSqrt();return h.redSqr().cmp(l)===0};function s(o,a,f){r.BasePoint.call(this,o,"projective"),a===null&&f===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new e(a,16),this.z=new e(f,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return t(s,r.BasePoint),n.prototype.decodePoint=function(a,f){return this.point(i.toArray(a,f),1)},n.prototype.point=function(a,f){return new s(this,a,f)},n.prototype.pointFromJSON=function(a){return s.fromJSON(this,a)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(a,f){return new s(a,f[0],f[1]||a.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var a=this.x.redAdd(this.z),f=a.redSqr(),c=this.x.redSub(this.z),l=c.redSqr(),h=f.redSub(l),w=f.redMul(l),E=h.redMul(l.redAdd(this.curve.a24.redMul(h)));return this.curve.point(w,E)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(a,f){var c=this.x.redAdd(this.z),l=this.x.redSub(this.z),h=a.x.redAdd(a.z),w=a.x.redSub(a.z),E=w.redMul(c),_=h.redMul(l),A=f.z.redMul(E.redAdd(_).redSqr()),R=f.x.redMul(E.redISub(_).redSqr());return this.curve.point(A,R)},s.prototype.mul=function(a){for(var f=a.clone(),c=this,l=this.curve.point(null,null),h=this,w=[];f.cmpn(0)!==0;f.iushrn(1))w.push(f.andln(1));for(var E=w.length-1;E>=0;E--)w[E]===0?(c=c.diffAdd(l,h),l=l.dbl()):(l=c.diffAdd(l,h),c=c.dbl());return l},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(a){return this.getX().cmp(a.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},gu}var bu,F0;function D9(){if(F0)return bu;F0=1;var e=gi(),t=wn(),r=Hf(),i=Zf(),n=e.assert;function s(a){this.twisted=(a.a|0)!==1,this.mOneA=this.twisted&&(a.a|0)===-1,this.extended=this.mOneA,i.call(this,"edwards",a),this.a=new t(a.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new t(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new t(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),n(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(a.c|0)===1}r(s,i),bu=s,s.prototype._mulA=function(f){return this.mOneA?f.redNeg():this.a.redMul(f)},s.prototype._mulC=function(f){return this.oneC?f:this.c.redMul(f)},s.prototype.jpoint=function(f,c,l,h){return this.point(f,c,l,h)},s.prototype.pointFromX=function(f,c){f=new t(f,16),f.red||(f=f.toRed(this.red));var l=f.redSqr(),h=this.c2.redSub(this.a.redMul(l)),w=this.one.redSub(this.c2.redMul(this.d).redMul(l)),E=h.redMul(w.redInvm()),_=E.redSqrt();if(_.redSqr().redSub(E).cmp(this.zero)!==0)throw new Error("invalid point");var A=_.fromRed().isOdd();return(c&&!A||!c&&A)&&(_=_.redNeg()),this.point(f,_)},s.prototype.pointFromY=function(f,c){f=new t(f,16),f.red||(f=f.toRed(this.red));var l=f.redSqr(),h=l.redSub(this.c2),w=l.redMul(this.d).redMul(this.c2).redSub(this.a),E=h.redMul(w.redInvm());if(E.cmp(this.zero)===0){if(c)throw new Error("invalid point");return this.point(this.zero,f)}var _=E.redSqrt();if(_.redSqr().redSub(E).cmp(this.zero)!==0)throw new Error("invalid point");return _.fromRed().isOdd()!==c&&(_=_.redNeg()),this.point(_,f)},s.prototype.validate=function(f){if(f.isInfinity())return!0;f.normalize();var c=f.x.redSqr(),l=f.y.redSqr(),h=c.redMul(this.a).redAdd(l),w=this.c2.redMul(this.one.redAdd(this.d.redMul(c).redMul(l)));return h.cmp(w)===0};function o(a,f,c,l,h){i.BasePoint.call(this,a,"projective"),f===null&&c===null&&l===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new t(f,16),this.y=new t(c,16),this.z=l?new t(l,16):this.curve.one,this.t=h&&new t(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(o,i.BasePoint),s.prototype.pointFromJSON=function(f){return o.fromJSON(this,f)},s.prototype.point=function(f,c,l,h){return new o(this,f,c,l,h)},o.fromJSON=function(f,c){return new o(f,c[0],c[1],c[2])},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},o.prototype._extDbl=function(){var f=this.x.redSqr(),c=this.y.redSqr(),l=this.z.redSqr();l=l.redIAdd(l);var h=this.curve._mulA(f),w=this.x.redAdd(this.y).redSqr().redISub(f).redISub(c),E=h.redAdd(c),_=E.redSub(l),A=h.redSub(c),R=w.redMul(_),N=E.redMul(A),q=w.redMul(A),U=_.redMul(E);return this.curve.point(R,N,U,q)},o.prototype._projDbl=function(){var f=this.x.redAdd(this.y).redSqr(),c=this.x.redSqr(),l=this.y.redSqr(),h,w,E,_,A,R;if(this.curve.twisted){_=this.curve._mulA(c);var N=_.redAdd(l);this.zOne?(h=f.redSub(c).redSub(l).redMul(N.redSub(this.curve.two)),w=N.redMul(_.redSub(l)),E=N.redSqr().redSub(N).redSub(N)):(A=this.z.redSqr(),R=N.redSub(A).redISub(A),h=f.redSub(c).redISub(l).redMul(R),w=N.redMul(_.redSub(l)),E=N.redMul(R))}else _=c.redAdd(l),A=this.curve._mulC(this.z).redSqr(),R=_.redSub(A).redSub(A),h=this.curve._mulC(f.redISub(_)).redMul(R),w=this.curve._mulC(_).redMul(c.redISub(l)),E=_.redMul(R);return this.curve.point(h,w,E)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},o.prototype._extAdd=function(f){var c=this.y.redSub(this.x).redMul(f.y.redSub(f.x)),l=this.y.redAdd(this.x).redMul(f.y.redAdd(f.x)),h=this.t.redMul(this.curve.dd).redMul(f.t),w=this.z.redMul(f.z.redAdd(f.z)),E=l.redSub(c),_=w.redSub(h),A=w.redAdd(h),R=l.redAdd(c),N=E.redMul(_),q=A.redMul(R),U=E.redMul(R),P=_.redMul(A);return this.curve.point(N,q,P,U)},o.prototype._projAdd=function(f){var c=this.z.redMul(f.z),l=c.redSqr(),h=this.x.redMul(f.x),w=this.y.redMul(f.y),E=this.curve.d.redMul(h).redMul(w),_=l.redSub(E),A=l.redAdd(E),R=this.x.redAdd(this.y).redMul(f.x.redAdd(f.y)).redISub(h).redISub(w),N=c.redMul(_).redMul(R),q,U;return this.curve.twisted?(q=c.redMul(A).redMul(w.redSub(this.curve._mulA(h))),U=_.redMul(A)):(q=c.redMul(A).redMul(w.redSub(h)),U=this.curve._mulC(_).redMul(A)),this.curve.point(N,q,U)},o.prototype.add=function(f){return this.isInfinity()?f:f.isInfinity()?this:this.curve.extended?this._extAdd(f):this._projAdd(f)},o.prototype.mul=function(f){return this._hasDoubles(f)?this.curve._fixedNafMul(this,f):this.curve._wnafMul(this,f)},o.prototype.mulAdd=function(f,c,l){return this.curve._wnafMulAdd(1,[this,c],[f,l],2,!1)},o.prototype.jmulAdd=function(f,c,l){return this.curve._wnafMulAdd(1,[this,c],[f,l],2,!0)},o.prototype.normalize=function(){if(this.zOne)return this;var f=this.z.redInvm();return this.x=this.x.redMul(f),this.y=this.y.redMul(f),this.t&&(this.t=this.t.redMul(f)),this.z=this.curve.one,this.zOne=!0,this},o.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()},o.prototype.getY=function(){return this.normalize(),this.y.fromRed()},o.prototype.eq=function(f){return this===f||this.getX().cmp(f.getX())===0&&this.getY().cmp(f.getY())===0},o.prototype.eqXToP=function(f){var c=f.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(c)===0)return!0;for(var l=f.clone(),h=this.curve.redN.redMul(this.z);;){if(l.iadd(this.curve.n),l.cmp(this.curve.p)>=0)return!1;if(c.redIAdd(h),this.x.cmp(c)===0)return!0}},o.prototype.toP=o.prototype.normalize,o.prototype.mixedAdd=o.prototype.add,bu}var L0;function kb(){return L0||(L0=1,function(e){var t=e;t.base=Zf(),t.short=A9(),t.mont=I9(),t.edwards=D9()}(hu)),hu}var vu={},mu,q0;function O9(){return q0||(q0=1,mu={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),mu}var B0;function nh(){return B0||(B0=1,function(e){var t=e,r=Wf(),i=kb(),n=gi(),s=n.assert;function o(c){c.type==="short"?this.curve=new i.short(c):c.type==="edwards"?this.curve=new i.edwards(c):this.curve=new i.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=o;function a(c,l){Object.defineProperty(t,c,{configurable:!0,enumerable:!0,get:function(){var h=new o(l);return Object.defineProperty(t,c,{configurable:!0,enumerable:!0,value:h}),h}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var f;try{f=O9()}catch{f=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})}(vu)),vu}var yu,U0;function P9(){if(U0)return yu;U0=1;var e=Wf(),t=Bb(),r=ms();function i(n){if(!(this instanceof i))return new i(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=t.toArray(n.entropy,n.entropyEnc||"hex"),o=t.toArray(n.nonce,n.nonceEnc||"hex"),a=t.toArray(n.pers,n.persEnc||"hex");r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,o,a)}return yu=i,i.prototype._init=function(s,o,a){var f=s.concat(o).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var c=0;c<this.V.length;c++)this.K[c]=0,this.V[c]=1;this._update(f),this._reseed=1,this.reseedInterval=281474976710656},i.prototype._hmac=function(){return new e.hmac(this.hash,this.K)},i.prototype._update=function(s){var o=this._hmac().update(this.V).update([0]);s&&(o=o.update(s)),this.K=o.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},i.prototype.reseed=function(s,o,a,f){typeof o!="string"&&(f=a,a=o,o=null),s=t.toArray(s,o),a=t.toArray(a,f),r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(a||[])),this._reseed=1},i.prototype.generate=function(s,o,a,f){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof o!="string"&&(f=a,a=o,o=null),a&&(a=t.toArray(a,f||"hex"),this._update(a));for(var c=[];c.length<s;)this.V=this._hmac().update(this.V).digest(),c=c.concat(this.V);var l=c.slice(0,s);return this._update(a),this._reseed++,t.encode(l,o)},yu}var wu,k0;function $9(){if(k0)return wu;k0=1;var e=wn(),t=gi(),r=t.assert;function i(n,s){this.ec=n,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}return wu=i,i.fromPublic=function(s,o,a){return o instanceof i?o:new i(s,{pub:o,pubEnc:a})},i.fromPrivate=function(s,o,a){return o instanceof i?o:new i(s,{priv:o,privEnc:a})},i.prototype.validate=function(){var s=this.getPublic();return s.isInfinity()?{result:!1,reason:"Invalid public key"}:s.validate()?s.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(s,o){return typeof s=="string"&&(o=s,s=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),o?this.pub.encode(o,s):this.pub},i.prototype.getPrivate=function(s){return s==="hex"?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(s,o){this.priv=new e(s,o||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(s,o){if(s.x||s.y){this.ec.curve.type==="mont"?r(s.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&r(s.x&&s.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(s.x,s.y);return}this.pub=this.ec.curve.decodePoint(s,o)},i.prototype.derive=function(s){return s.validate()||r(s.validate(),"public point not validated"),s.mul(this.priv).getX()},i.prototype.sign=function(s,o,a){return this.ec.sign(s,this,o,a)},i.prototype.verify=function(s,o,a){return this.ec.verify(s,o,this,void 0,a)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},wu}var _u,j0;function R9(){if(j0)return _u;j0=1;var e=wn(),t=gi(),r=t.assert;function i(f,c){if(f instanceof i)return f;this._importDER(f,c)||(r(f.r&&f.s,"Signature without r or s"),this.r=new e(f.r,16),this.s=new e(f.s,16),f.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=f.recoveryParam)}_u=i;function n(){this.place=0}function s(f,c){var l=f[c.place++];if(!(l&128))return l;var h=l&15;if(h===0||h>4||f[c.place]===0)return!1;for(var w=0,E=0,_=c.place;E<h;E++,_++)w<<=8,w|=f[_],w>>>=0;return w<=127?!1:(c.place=_,w)}function o(f){for(var c=0,l=f.length-1;!f[c]&&!(f[c+1]&128)&&c<l;)c++;return c===0?f:f.slice(c)}i.prototype._importDER=function(c,l){c=t.toArray(c,l);var h=new n;if(c[h.place++]!==48)return!1;var w=s(c,h);if(w===!1||w+h.place!==c.length||c[h.place++]!==2)return!1;var E=s(c,h);if(E===!1||c[h.place]&128)return!1;var _=c.slice(h.place,E+h.place);if(h.place+=E,c[h.place++]!==2)return!1;var A=s(c,h);if(A===!1||c.length!==A+h.place||c[h.place]&128)return!1;var R=c.slice(h.place,A+h.place);if(_[0]===0)if(_[1]&128)_=_.slice(1);else return!1;if(R[0]===0)if(R[1]&128)R=R.slice(1);else return!1;return this.r=new e(_),this.s=new e(R),this.recoveryParam=null,!0};function a(f,c){if(c<128){f.push(c);return}var l=1+(Math.log(c)/Math.LN2>>>3);for(f.push(l|128);--l;)f.push(c>>>(l<<3)&255);f.push(c)}return i.prototype.toDER=function(c){var l=this.r.toArray(),h=this.s.toArray();for(l[0]&128&&(l=[0].concat(l)),h[0]&128&&(h=[0].concat(h)),l=o(l),h=o(h);!h[0]&&!(h[1]&128);)h=h.slice(1);var w=[2];a(w,l.length),w=w.concat(l),w.push(2),a(w,h.length);var E=w.concat(h),_=[48];return a(_,E.length),_=_.concat(E),t.encode(_,c)},_u}var xu,z0;function C9(){if(z0)return xu;z0=1;var e=wn(),t=P9(),r=gi(),i=nh(),n=Ub(),s=r.assert,o=$9(),a=R9();function f(c){if(!(this instanceof f))return new f(c);typeof c=="string"&&(s(Object.prototype.hasOwnProperty.call(i,c),"Unknown curve "+c),c=i[c]),c instanceof i.PresetCurve&&(c={curve:c}),this.curve=c.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=c.curve.g,this.g.precompute(c.curve.n.bitLength()+1),this.hash=c.hash||c.curve.hash}return xu=f,f.prototype.keyPair=function(l){return new o(this,l)},f.prototype.keyFromPrivate=function(l,h){return o.fromPrivate(this,l,h)},f.prototype.keyFromPublic=function(l,h){return o.fromPublic(this,l,h)},f.prototype.genKeyPair=function(l){l||(l={});for(var h=new t({hash:this.hash,pers:l.pers,persEnc:l.persEnc||"utf8",entropy:l.entropy||n(this.hash.hmacStrength),entropyEnc:l.entropy&&l.entropyEnc||"utf8",nonce:this.n.toArray()}),w=this.n.byteLength(),E=this.n.sub(new e(2));;){var _=new e(h.generate(w));if(!(_.cmp(E)>0))return _.iaddn(1),this.keyFromPrivate(_)}},f.prototype._truncateToN=function(l,h,w){var E;if(e.isBN(l)||typeof l=="number")l=new e(l,16),E=l.byteLength();else if(typeof l=="object")E=l.length,l=new e(l,16);else{var _=l.toString();E=_.length+1>>>1,l=new e(_,16)}typeof w!="number"&&(w=E*8);var A=w-this.n.bitLength();return A>0&&(l=l.ushrn(A)),!h&&l.cmp(this.n)>=0?l.sub(this.n):l},f.prototype.sign=function(l,h,w,E){if(typeof w=="object"&&(E=w,w=null),E||(E={}),typeof l!="string"&&typeof l!="number"&&!e.isBN(l)){s(typeof l=="object"&&l&&typeof l.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),s(l.length>>>0===l.length);for(var _=0;_<l.length;_++)s((l[_]&255)===l[_])}h=this.keyFromPrivate(h,w),l=this._truncateToN(l,!1,E.msgBitLength),s(!l.isNeg(),"Can not sign a negative message");var A=this.n.byteLength(),R=h.getPrivate().toArray("be",A),N=l.toArray("be",A);s(new e(N).eq(l),"Can not sign message");for(var q=new t({hash:this.hash,entropy:R,nonce:N,pers:E.pers,persEnc:E.persEnc||"utf8"}),U=this.n.sub(new e(1)),P=0;;P++){var F=E.k?E.k(P):new e(q.generate(this.n.byteLength()));if(F=this._truncateToN(F,!0),!(F.cmpn(1)<=0||F.cmp(U)>=0)){var L=this.g.mul(F);if(!L.isInfinity()){var K=L.getX(),V=K.umod(this.n);if(V.cmpn(0)!==0){var W=F.invm(this.n).mul(V.mul(h.getPrivate()).iadd(l));if(W=W.umod(this.n),W.cmpn(0)!==0){var Q=(L.getY().isOdd()?1:0)|(K.cmp(V)!==0?2:0);return E.canonical&&W.cmp(this.nh)>0&&(W=this.n.sub(W),Q^=1),new a({r:V,s:W,recoveryParam:Q})}}}}}},f.prototype.verify=function(l,h,w,E,_){_||(_={}),l=this._truncateToN(l,!1,_.msgBitLength),w=this.keyFromPublic(w,E),h=new a(h,"hex");var A=h.r,R=h.s;if(A.cmpn(1)<0||A.cmp(this.n)>=0||R.cmpn(1)<0||R.cmp(this.n)>=0)return!1;var N=R.invm(this.n),q=N.mul(l).umod(this.n),U=N.mul(A).umod(this.n),P;return this.curve._maxwellTrick?(P=this.g.jmulAdd(q,w.getPublic(),U),P.isInfinity()?!1:P.eqXToP(A)):(P=this.g.mulAdd(q,w.getPublic(),U),P.isInfinity()?!1:P.getX().umod(this.n).cmp(A)===0)},f.prototype.recoverPubKey=function(c,l,h,w){s((3&h)===h,"The recovery param is more than two bits"),l=new a(l,w);var E=this.n,_=new e(c),A=l.r,R=l.s,N=h&1,q=h>>1;if(A.cmp(this.curve.p.umod(this.curve.n))>=0&&q)throw new Error("Unable to find sencond key candinate");q?A=this.curve.pointFromX(A.add(this.curve.n),N):A=this.curve.pointFromX(A,N);var U=l.r.invm(E),P=E.sub(_).mul(U).umod(E),F=R.mul(U).umod(E);return this.g.mulAdd(P,A,F)},f.prototype.getKeyRecoveryParam=function(c,l,h,w){if(l=new a(l,w),l.recoveryParam!==null)return l.recoveryParam;for(var E=0;E<4;E++){var _;try{_=this.recoverPubKey(c,l,E)}catch{continue}if(_.eq(h))return E}throw new Error("Unable to find valid recovery factor")},xu}var Eu,K0;function T9(){if(K0)return Eu;K0=1;var e=gi(),t=e.assert,r=e.parseBytes,i=e.cachedProperty;function n(s,o){this.eddsa=s,this._secret=r(o.secret),s.isPoint(o.pub)?this._pub=o.pub:this._pubBytes=r(o.pub)}return n.fromPublic=function(o,a){return a instanceof n?a:new n(o,{pub:a})},n.fromSecret=function(o,a){return a instanceof n?a:new n(o,{secret:a})},n.prototype.secret=function(){return this._secret},i(n,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),i(n,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),i(n,"privBytes",function(){var o=this.eddsa,a=this.hash(),f=o.encodingLength-1,c=a.slice(0,o.encodingLength);return c[0]&=248,c[f]&=127,c[f]|=64,c}),i(n,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),i(n,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),i(n,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),n.prototype.sign=function(o){return t(this._secret,"KeyPair can only verify"),this.eddsa.sign(o,this)},n.prototype.verify=function(o,a){return this.eddsa.verify(o,a,this)},n.prototype.getSecret=function(o){return t(this._secret,"KeyPair is public only"),e.encode(this.secret(),o)},n.prototype.getPublic=function(o){return e.encode(this.pubBytes(),o)},Eu=n,Eu}var Su,V0;function N9(){if(V0)return Su;V0=1;var e=wn(),t=gi(),r=t.assert,i=t.cachedProperty,n=t.parseBytes;function s(o,a){this.eddsa=o,typeof a!="object"&&(a=n(a)),Array.isArray(a)&&(r(a.length===o.encodingLength*2,"Signature has invalid size"),a={R:a.slice(0,o.encodingLength),S:a.slice(o.encodingLength)}),r(a.R&&a.S,"Signature without R or S"),o.isPoint(a.R)&&(this._R=a.R),a.S instanceof e&&(this._S=a.S),this._Rencoded=Array.isArray(a.R)?a.R:a.Rencoded,this._Sencoded=Array.isArray(a.S)?a.S:a.Sencoded}return i(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),i(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),i(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),i(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return t.encode(this.toBytes(),"hex").toUpperCase()},Su=s,Su}var Mu,H0;function F9(){if(H0)return Mu;H0=1;var e=Wf(),t=nh(),r=gi(),i=r.assert,n=r.parseBytes,s=T9(),o=N9();function a(f){if(i(f==="ed25519","only tested with ed25519 so far"),!(this instanceof a))return new a(f);f=t[f].curve,this.curve=f,this.g=f.g,this.g.precompute(f.n.bitLength()+1),this.pointClass=f.point().constructor,this.encodingLength=Math.ceil(f.n.bitLength()/8),this.hash=e.sha512}return Mu=a,a.prototype.sign=function(c,l){c=n(c);var h=this.keyFromSecret(l),w=this.hashInt(h.messagePrefix(),c),E=this.g.mul(w),_=this.encodePoint(E),A=this.hashInt(_,h.pubBytes(),c).mul(h.priv()),R=w.add(A).umod(this.curve.n);return this.makeSignature({R:E,S:R,Rencoded:_})},a.prototype.verify=function(c,l,h){if(c=n(c),l=this.makeSignature(l),l.S().gte(l.eddsa.curve.n)||l.S().isNeg())return!1;var w=this.keyFromPublic(h),E=this.hashInt(l.Rencoded(),w.pubBytes(),c),_=this.g.mul(l.S()),A=l.R().add(w.pub().mul(E));return A.eq(_)},a.prototype.hashInt=function(){for(var c=this.hash(),l=0;l<arguments.length;l++)c.update(arguments[l]);return r.intFromLE(c.digest()).umod(this.curve.n)},a.prototype.keyFromPublic=function(c){return s.fromPublic(this,c)},a.prototype.keyFromSecret=function(c){return s.fromSecret(this,c)},a.prototype.makeSignature=function(c){return c instanceof o?c:new o(this,c)},a.prototype.encodePoint=function(c){var l=c.getY().toArray("le",this.encodingLength);return l[this.encodingLength-1]|=c.getX().isOdd()?128:0,l},a.prototype.decodePoint=function(c){c=r.parseBytes(c);var l=c.length-1,h=c.slice(0,l).concat(c[l]&-129),w=(c[l]&128)!==0,E=r.intFromLE(h);return this.curve.pointFromY(E,w)},a.prototype.encodeInt=function(c){return c.toArray("le",this.encodingLength)},a.prototype.decodeInt=function(c){return r.intFromLE(c)},a.prototype.isPoint=function(c){return c instanceof this.pointClass},Mu}var W0;function L9(){return W0||(W0=1,function(e){var t=e;t.version=S9.version,t.utils=gi(),t.rand=Ub(),t.curve=kb(),t.curves=nh(),t.ec=C9(),t.eddsa=F9()}(cu)),cu}var q9=L9();const B9={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var U9={};const k9=":";function rf(e){const[t,r]=e.split(k9);return{namespace:t,reference:r}}function jb(e,t){return e.includes(":")?[e]:t.chains||[]}const j9="ReactNative",ti={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},z9="js";function Sf(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Kn(){return!hs.getDocument()&&!!hs.getNavigator()&&navigator.product===j9}function K9(){return Kn()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function V9(){return Kn()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function aa(){return!Sf()&&!!hs.getNavigator()&&!!hs.getDocument()}function fa(){return Kn()?ti.reactNative:Sf()?ti.node:aa()?ti.browser:ti.unknown}function G0(){var e;try{return Kn()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function H9(e,t){const r=new URLSearchParams(e);for(const i of Object.keys(t).sort())if(t.hasOwnProperty(i)){const n=t[i];n!==void 0&&r.set(i,n)}return r.toString()}function zb(){return L5.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function W9(){if(fa()===ti.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:i}=global.Platform;return[r,i].join("-")}const e=P5();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function G9(){var e;const t=fa();return t===ti.browser?[t,((e=hs.getLocation())==null?void 0:e.host)||"unknown"].join(":"):t}function Kb(e,t,r){const i=W9(),n=G9();return[[e,t].join("-"),[z9,r].join("-"),i,n].join("/")}function J9({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:f}){const c=r.split("?"),l=Kb(e,t,i),h={auth:n,ua:l,projectId:s,useOnCloseEvent:o,packageName:f||void 0,bundleId:a||void 0},w=H9(c[1]||"",h);return c[0]+"?"+w}function os(e,t){return e.filter(r=>t.includes(r)).length===e.length}function Vb(e){return Object.fromEntries(e.entries())}function Hb(e){return new Map(Object.entries(e))}function is(e=Ee.FIVE_MINUTES,t){const r=Ee.toMiliseconds(e||Ee.FIVE_MINUTES);let i,n,s,o;return{resolve:a=>{s&&i&&(clearTimeout(s),i(a),o=Promise.resolve(a))},reject:a=>{s&&n&&(clearTimeout(s),n(a))},done:()=>new Promise((a,f)=>{if(o)return a(o);s=setTimeout(()=>{const c=new Error(t);o=Promise.reject(c),f(c)},r),i=a,n=f})}}function Rn(e,t,r){return new Promise(async(i,n)=>{const s=setTimeout(()=>n(new Error(r)),t);try{const o=await e;i(o)}catch(o){n(o)}clearTimeout(s)})}function Wb(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Y9(e){return Wb("topic",e)}function Z9(e){return Wb("id",e)}function Gb(e){const[t,r]=e.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")i.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function rr(e,t){return Ee.fromMiliseconds(Date.now()+Ee.toMiliseconds(e))}function On(e){return Date.now()>=Ee.toMiliseconds(e)}function ot(e,t){return`${e}${t?`:${t}`:""}`}function Cn(e=[],t=[]){return[...new Set([...e,...t])]}async function X9({id:e,topic:t,wcDeepLink:r}){var i;try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r,s=n==null?void 0:n.href;if(typeof s!="string")return;const o=Q9(s,e,t),a=fa();if(a===ti.browser){if(!((i=hs.getDocument())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}e7(o)}else a===ti.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(n){console.error(n)}}function Q9(e,t,r){const i=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let n=`${e}`;if(e.startsWith("https://t.me")){const s=e.includes("?")?"&startapp=":"?startapp=";n=`${n}${s}${n7(i,!0)}`}else n=`${n}/wc?${i}`;return n}function e7(e){let t="_self";i7()?t="_top":(r7()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function t7(e,t){let r="";try{if(aa()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(i){console.error(i)}return r}function J0(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),i=r.indexOf(t);return r[i+2]}function Y0(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function sh(){return typeof process<"u"&&U9.IS_VITEST==="true"}function r7(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function i7(){try{return window.self!==window.top}catch{return!1}}function n7(e,t=!1){const r=Buffer.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}function Jb(e){return Buffer.from(e,"base64").toString("utf-8")}function s7(e){return new Promise(t=>setTimeout(t,e))}function Jo(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function o7(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Xf(e,...t){if(!o7(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function oh(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Jo(e.outputLen),Jo(e.blockLen)}function eo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Yb(e,t){Xf(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const La=BigInt(2**32-1),Z0=BigInt(32);function a7(e,t=!1){return t?{h:Number(e&La),l:Number(e>>Z0&La)}:{h:Number(e>>Z0&La)|0,l:Number(e&La)|0}}function f7(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:s,l:o}=a7(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}const c7=(e,t,r)=>e<<r|t>>>32-r,u7=(e,t,r)=>t<<r|e>>>32-r,l7=(e,t,r)=>t<<r-32|e>>>64-r,h7=(e,t,r)=>e<<r-32|t>>>64-r,Ts=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function d7(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Au(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ki(e,t){return e<<32-t|e>>>t}const X0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function p7(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Q0(e){for(let t=0;t<e.length;t++)e[t]=p7(e[t])}function g7(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function to(e){return typeof e=="string"&&(e=g7(e)),Xf(e),e}let ah=class{clone(){return this._cloneInto()}};function Zb(e){const t=i=>e().update(to(i)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ca(e=32){if(Ts&&typeof Ts.getRandomValues=="function")return Ts.getRandomValues(new Uint8Array(e));if(Ts&&typeof Ts.randomBytes=="function")return Ts.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Xb=[],Qb=[],ev=[],b7=BigInt(0),xo=BigInt(1),v7=BigInt(2),m7=BigInt(7),y7=BigInt(256),w7=BigInt(113);for(let e=0,t=xo,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],Xb.push(2*(5*i+r)),Qb.push((e+1)*(e+2)/2%64);let n=b7;for(let s=0;s<7;s++)t=(t<<xo^(t>>m7)*w7)%y7,t&v7&&(n^=xo<<(xo<<BigInt(s))-xo);ev.push(n)}const[_7,x7]=f7(ev,!0),ep=(e,t,r)=>r>32?l7(e,t,r):c7(e,t,r),tp=(e,t,r)=>r>32?h7(e,t,r):u7(e,t,r);function E7(e,t=24){const r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let o=0;o<10;o++)r[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,f=(o+2)%10,c=r[f],l=r[f+1],h=ep(c,l,1)^r[a],w=tp(c,l,1)^r[a+1];for(let E=0;E<50;E+=10)e[o+E]^=h,e[o+E+1]^=w}let n=e[2],s=e[3];for(let o=0;o<24;o++){const a=Qb[o],f=ep(n,s,a),c=tp(n,s,a),l=Xb[o];n=e[l],s=e[l+1],e[l]=f,e[l+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=_7[i],e[1]^=x7[i]}r.fill(0)}let S7=class tv extends ah{constructor(t,r,i,n=!1,s=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=i,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Jo(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=d7(this.state)}keccak(){X0||Q0(this.state32),E7(this.state32,this.rounds),X0||Q0(this.state32),this.posOut=0,this.pos=0}update(t){eo(this);const{blockLen:r,state:i}=this;t=to(t);const n=t.length;for(let s=0;s<n;){const o=Math.min(r-this.pos,n-s);for(let a=0;a<o;a++)i[this.pos++]^=t[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:r,pos:i,blockLen:n}=this;t[i]^=r,r&128&&i===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){eo(this,!1),Xf(t),this.finish();const r=this.state,{blockLen:i}=this;for(let n=0,s=t.length;n<s;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,s-n);t.set(r.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Jo(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Yb(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:r,suffix:i,outputLen:n,rounds:s,enableXOF:o}=this;return t||(t=new tv(r,i,n,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=i,t.outputLen=n,t.enableXOF=o,t.destroyed=this.destroyed,t}};const M7=(e,t,r)=>Zb(()=>new S7(t,e,r)),A7=M7(1,136,256/8),I7="https://rpc.walletconnect.org/v1";function rv(e){const t=`Ethereum Signed Message:
${e.length}`,r=new TextEncoder().encode(t+e);return"0x"+Buffer.from(A7(r)).toString("hex")}async function D7(e,t,r,i,n,s){switch(r.t){case"eip191":return O7(e,t,r.s);case"eip1271":return await P7(e,t,r.s,i,n,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function O7(e,t,r){return A_(rv(t),r).toLowerCase()===e.toLowerCase()}async function P7(e,t,r,i,n,s){const o=rf(i);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{const a="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",l=r.substring(2),h=rv(t).substring(2),w=a+h+f+c+l,E=await fetch(`${s||I7}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:$7(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:w},"latest"]})}),{result:_}=await E.json();return _?_.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function $7(){return Date.now()+Math.floor(Math.random()*1e3)}var R7=Object.defineProperty,C7=Object.defineProperties,T7=Object.getOwnPropertyDescriptors,rp=Object.getOwnPropertySymbols,N7=Object.prototype.hasOwnProperty,F7=Object.prototype.propertyIsEnumerable,ip=(e,t,r)=>t in e?R7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L7=(e,t)=>{for(var r in t||(t={}))N7.call(t,r)&&ip(e,r,t[r]);if(rp)for(var r of rp(t))F7.call(t,r)&&ip(e,r,t[r]);return e},q7=(e,t)=>C7(e,T7(t));const B7="did:pkh:",fh=e=>e==null?void 0:e.split(":"),U7=e=>{const t=e&&fh(e);if(t)return e.includes(B7)?t[3]:t[1]},ll=e=>{const t=e&&fh(e);if(t)return t[2]+":"+t[3]},Mf=e=>{const t=e&&fh(e);if(t)return t.pop()};async function np(e){const{cacao:t,projectId:r}=e,{s:i,p:n}=t,s=iv(n,n.iss),o=Mf(n.iss);return await D7(o,s,i,ll(n.iss),r)}const iv=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,i=Mf(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${U7(t)}`,f=`Nonce: ${e.nonce}`,c=`Issued At: ${e.iat}`,l=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,w=e.requestId?`Request ID: ${e.requestId}`:void 0,E=e.resources?`Resources:${e.resources.map(A=>`
- ${A}`).join("")}`:void 0,_=nf(e.resources);if(_){const A=Yo(_);n=J7(n,A)}return[r,i,"",n,"",s,o,a,f,c,l,h,w,E].filter(A=>A!=null).join(`
`)};function k7(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function j7(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function ds(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(r=>{const i=e.att[r];if(Array.isArray(i))throw new Error(`Resource must be an object: ${r}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(i).forEach(n=>{const s=i[n];if(!Array.isArray(s))throw new Error(`Ability limits ${n} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${n} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${n}) must be an array of objects, found: ${o}`)})})})}function z7(e,t,r,i={}){return r==null||r.sort((n,s)=>n.localeCompare(s)),{att:{[e]:K7(t,r,i)}}}function K7(e,t,r={}){t=t==null?void 0:t.sort((n,s)=>n.localeCompare(s));const i=t.map(n=>({[`${e}/${n}`]:[r]}));return Object.assign({},...i)}function nv(e){return ds(e),`urn:recap:${k7(e).replace(/=/g,"")}`}function Yo(e){const t=j7(e.replace("urn:recap:",""));return ds(t),t}function V7(e,t,r){const i=z7(e,t,r);return nv(i)}function H7(e){return e&&e.includes("urn:recap:")}function W7(e,t){const r=Yo(e),i=Yo(t),n=G7(r,i);return nv(n)}function G7(e,t){ds(e),ds(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort((n,s)=>n.localeCompare(s)),i={att:{}};return r.forEach(n=>{var s,o;Object.keys(((s=e.att)==null?void 0:s[n])||{}).concat(Object.keys(((o=t.att)==null?void 0:o[n])||{})).sort((a,f)=>a.localeCompare(f)).forEach(a=>{var f,c;i.att[n]=q7(L7({},i.att[n]),{[a]:((f=e.att[n])==null?void 0:f[a])||((c=t.att[n])==null?void 0:c[a])})})}),i}function J7(e="",t){ds(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const i=[];let n=0;Object.keys(t.att).forEach(a=>{const f=Object.keys(t.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));f.sort((h,w)=>h.action.localeCompare(w.action));const c={};f.forEach(h=>{c[h.ability]||(c[h.ability]=[]),c[h.ability].push(h.action)});const l=Object.keys(c).map(h=>(n++,`(${n}) '${h}': '${c[h].join("', '")}' for '${a}'.`));i.push(l.join(", ").replace(".,","."))});const s=i.join(" "),o=`${r}${s}`;return`${e?e+" ":""}${o}`}function sp(e){var t;const r=Yo(e);ds(r);const i=(t=r.att)==null?void 0:t.eip155;return i?Object.keys(i).map(n=>n.split("/")[1]):[]}function op(e){const t=Yo(e);ds(t);const r=[];return Object.values(t.att).forEach(i=>{Object.values(i).forEach(n=>{var s;(s=n==null?void 0:n[0])!=null&&s.chains&&r.push(n[0].chains)})}),[...new Set(r.flat())]}function nf(e){if(!e)return;const t=e==null?void 0:e[e.length-1];return H7(t)?t:void 0}function Iu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function sv(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Xr(e,...t){if(!sv(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ap(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Y7(e,t){Xr(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function fp(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}const Fn=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Z7=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),X7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!X7)throw new Error("Non little-endian hardware is not supported");function Q7(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function hl(e){if(typeof e=="string")e=Q7(e);else if(sv(e))e=dl(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function ex(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function tx(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return r===0}const rx=(e,t)=>{function r(i,...n){if(Xr(i),e.nonceLength!==void 0){const c=n[0];if(!c)throw new Error("nonce / iv required");e.varSizeNonce?Xr(c):Xr(c,e.nonceLength)}const s=e.tagLength;s&&n[1]!==void 0&&Xr(n[1]);const o=t(i,...n),a=(c,l)=>{if(l!==void 0){if(c!==2)throw new Error("cipher output not supported");Xr(l)}};let f=!1;return{encrypt(c,l){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,Xr(c),a(o.encrypt.length,l),o.encrypt(c,l)},decrypt(c,l){if(Xr(c),s&&c.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,l),o.decrypt(c,l)}}}return Object.assign(r,e),r};function cp(e,t,r=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!ix(t))throw new Error("invalid output, must be aligned");return t}function up(e,t,r,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s);e.setUint32(t+4,o,i),e.setUint32(t+0,a,i)}function ix(e){return e.byteOffset%4===0}function dl(e){return Uint8Array.from(e)}function ro(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const ov=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),nx=ov("expand 16-byte k"),sx=ov("expand 32-byte k"),ox=Fn(nx),ax=Fn(sx);function wt(e,t){return e<<t|e>>>32-t}function pl(e){return e.byteOffset%4===0}const qa=64,fx=16,av=2**32-1,lp=new Uint32Array;function cx(e,t,r,i,n,s,o,a){const f=n.length,c=new Uint8Array(qa),l=Fn(c),h=pl(n)&&pl(s),w=h?Fn(n):lp,E=h?Fn(s):lp;for(let _=0;_<f;o++){if(e(t,r,i,l,o,a),o>=av)throw new Error("arx: counter overflow");const A=Math.min(qa,f-_);if(h&&A===qa){const R=_/4;if(_%4!==0)throw new Error("arx: invalid block position");for(let N=0,q;N<fx;N++)q=R+N,E[q]=w[q]^l[N];_+=qa;continue}for(let R=0,N;R<A;R++)N=_+R,s[N]=n[N]^c[R];_+=A}}function ux(e,t){const{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=ex({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Iu(n),Iu(o),fp(s),fp(r),(a,f,c,l,h=0)=>{Xr(a),Xr(f),Xr(c);const w=c.length;if(l===void 0&&(l=new Uint8Array(w)),Xr(l),Iu(h),h<0||h>=av)throw new Error("arx: counter overflow");if(l.length<w)throw new Error(`arx: output (${l.length}) is shorter than data (${w})`);const E=[];let _=a.length,A,R;if(_===32)E.push(A=dl(a)),R=ax;else if(_===16&&r)A=new Uint8Array(32),A.set(a),A.set(a,16),R=ox,E.push(A);else throw new Error(`arx: invalid 32-byte key, got length=${_}`);pl(f)||E.push(f=dl(f));const N=Fn(A);if(i){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(R,N,Fn(f.subarray(0,16)),N),f=f.subarray(16)}const q=16-n;if(q!==f.length)throw new Error(`arx: nonce must be ${q} or 16 bytes`);if(q!==12){const P=new Uint8Array(12);P.set(f,s?0:12-f.length),f=P,E.push(f)}const U=Fn(f);return cx(e,R,N,U,c,l,h,o),ro(...E),l}}const dr=(e,t)=>e[t++]&255|(e[t++]&255)<<8;let lx=class{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=hl(t),Xr(t,32);const r=dr(t,0),i=dr(t,2),n=dr(t,4),s=dr(t,6),o=dr(t,8),a=dr(t,10),f=dr(t,12),c=dr(t,14);this.r[0]=r&8191,this.r[1]=(r>>>13|i<<3)&8191,this.r[2]=(i>>>10|n<<6)&7939,this.r[3]=(n>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|f<<5)&8065,this.r[8]=(f>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let l=0;l<8;l++)this.pad[l]=dr(t,16+2*l)}process(t,r,i=!1){const n=i?0:2048,{h:s,r:o}=this,a=o[0],f=o[1],c=o[2],l=o[3],h=o[4],w=o[5],E=o[6],_=o[7],A=o[8],R=o[9],N=dr(t,r+0),q=dr(t,r+2),U=dr(t,r+4),P=dr(t,r+6),F=dr(t,r+8),L=dr(t,r+10),K=dr(t,r+12),V=dr(t,r+14);let W=s[0]+(N&8191),Q=s[1]+((N>>>13|q<<3)&8191),C=s[2]+((q>>>10|U<<6)&8191),g=s[3]+((U>>>7|P<<9)&8191),p=s[4]+((P>>>4|F<<12)&8191),u=s[5]+(F>>>1&8191),d=s[6]+((F>>>14|L<<2)&8191),v=s[7]+((L>>>11|K<<5)&8191),y=s[8]+((K>>>8|V<<8)&8191),M=s[9]+(V>>>5|n),x=0,b=x+W*a+Q*(5*R)+C*(5*A)+g*(5*_)+p*(5*E);x=b>>>13,b&=8191,b+=u*(5*w)+d*(5*h)+v*(5*l)+y*(5*c)+M*(5*f),x+=b>>>13,b&=8191;let S=x+W*f+Q*a+C*(5*R)+g*(5*A)+p*(5*_);x=S>>>13,S&=8191,S+=u*(5*E)+d*(5*w)+v*(5*h)+y*(5*l)+M*(5*c),x+=S>>>13,S&=8191;let m=x+W*c+Q*f+C*a+g*(5*R)+p*(5*A);x=m>>>13,m&=8191,m+=u*(5*_)+d*(5*E)+v*(5*w)+y*(5*h)+M*(5*l),x+=m>>>13,m&=8191;let $=x+W*l+Q*c+C*f+g*a+p*(5*R);x=$>>>13,$&=8191,$+=u*(5*A)+d*(5*_)+v*(5*E)+y*(5*w)+M*(5*h),x+=$>>>13,$&=8191;let ee=x+W*h+Q*l+C*c+g*f+p*a;x=ee>>>13,ee&=8191,ee+=u*(5*R)+d*(5*A)+v*(5*_)+y*(5*E)+M*(5*w),x+=ee>>>13,ee&=8191;let O=x+W*w+Q*h+C*l+g*c+p*f;x=O>>>13,O&=8191,O+=u*a+d*(5*R)+v*(5*A)+y*(5*_)+M*(5*E),x+=O>>>13,O&=8191;let H=x+W*E+Q*w+C*h+g*l+p*c;x=H>>>13,H&=8191,H+=u*f+d*a+v*(5*R)+y*(5*A)+M*(5*_),x+=H>>>13,H&=8191;let X=x+W*_+Q*E+C*w+g*h+p*l;x=X>>>13,X&=8191,X+=u*c+d*f+v*a+y*(5*R)+M*(5*A),x+=X>>>13,X&=8191;let te=x+W*A+Q*_+C*E+g*w+p*h;x=te>>>13,te&=8191,te+=u*l+d*c+v*f+y*a+M*(5*R),x+=te>>>13,te&=8191;let ne=x+W*R+Q*A+C*_+g*E+p*w;x=ne>>>13,ne&=8191,ne+=u*h+d*l+v*c+y*f+M*a,x+=ne>>>13,ne&=8191,x=(x<<2)+x|0,x=x+b|0,b=x&8191,x=x>>>13,S+=x,s[0]=b,s[1]=S,s[2]=m,s[3]=$,s[4]=ee,s[5]=O,s[6]=H,s[7]=X,s[8]=te,s[9]=ne}finalize(){const{h:t,pad:r}=this,i=new Uint16Array(10);let n=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=n,n=t[a]>>>13,t[a]&=8191;t[0]+=n*5,n=t[0]>>>13,t[0]&=8191,t[1]+=n,n=t[1]>>>13,t[1]&=8191,t[2]+=n,i[0]=t[0]+5,n=i[0]>>>13,i[0]&=8191;for(let a=1;a<10;a++)i[a]=t[a]+n,n=i[a]>>>13,i[a]&=8191;i[9]-=8192;let s=(n^1)-1;for(let a=0;a<10;a++)i[a]&=s;s=~s;for(let a=0;a<10;a++)t[a]=t[a]&s|i[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let o=t[0]+r[0];t[0]=o&65535;for(let a=1;a<8;a++)o=(t[a]+r[a]|0)+(o>>>16)|0,t[a]=o&65535;ro(i)}update(t){ap(this);const{buffer:r,blockLen:i}=this;t=hl(t);const n=t.length;for(let s=0;s<n;){const o=Math.min(i-this.pos,n-s);if(o===i){for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){ro(this.h,this.r,this.buffer,this.pad)}digestInto(t){ap(this),Y7(t,this),this.finished=!0;const{buffer:r,h:i}=this;let{pos:n}=this;if(n){for(r[n++]=1;n<16;n++)r[n]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)t[s++]=i[o]>>>0,t[s++]=i[o]>>>8;return t}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const i=t.slice(0,r);return this.destroy(),i}};function hx(e){const t=(i,n)=>e(n).update(hl(i)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=i=>e(i),t}const dx=hx(e=>new lx(e));function px(e,t,r,i,n,s=20){let o=e[0],a=e[1],f=e[2],c=e[3],l=t[0],h=t[1],w=t[2],E=t[3],_=t[4],A=t[5],R=t[6],N=t[7],q=n,U=r[0],P=r[1],F=r[2],L=o,K=a,V=f,W=c,Q=l,C=h,g=w,p=E,u=_,d=A,v=R,y=N,M=q,x=U,b=P,S=F;for(let $=0;$<s;$+=2)L=L+Q|0,M=wt(M^L,16),u=u+M|0,Q=wt(Q^u,12),L=L+Q|0,M=wt(M^L,8),u=u+M|0,Q=wt(Q^u,7),K=K+C|0,x=wt(x^K,16),d=d+x|0,C=wt(C^d,12),K=K+C|0,x=wt(x^K,8),d=d+x|0,C=wt(C^d,7),V=V+g|0,b=wt(b^V,16),v=v+b|0,g=wt(g^v,12),V=V+g|0,b=wt(b^V,8),v=v+b|0,g=wt(g^v,7),W=W+p|0,S=wt(S^W,16),y=y+S|0,p=wt(p^y,12),W=W+p|0,S=wt(S^W,8),y=y+S|0,p=wt(p^y,7),L=L+C|0,S=wt(S^L,16),v=v+S|0,C=wt(C^v,12),L=L+C|0,S=wt(S^L,8),v=v+S|0,C=wt(C^v,7),K=K+g|0,M=wt(M^K,16),y=y+M|0,g=wt(g^y,12),K=K+g|0,M=wt(M^K,8),y=y+M|0,g=wt(g^y,7),V=V+p|0,x=wt(x^V,16),u=u+x|0,p=wt(p^u,12),V=V+p|0,x=wt(x^V,8),u=u+x|0,p=wt(p^u,7),W=W+Q|0,b=wt(b^W,16),d=d+b|0,Q=wt(Q^d,12),W=W+Q|0,b=wt(b^W,8),d=d+b|0,Q=wt(Q^d,7);let m=0;i[m++]=o+L|0,i[m++]=a+K|0,i[m++]=f+V|0,i[m++]=c+W|0,i[m++]=l+Q|0,i[m++]=h+C|0,i[m++]=w+g|0,i[m++]=E+p|0,i[m++]=_+u|0,i[m++]=A+d|0,i[m++]=R+v|0,i[m++]=N+y|0,i[m++]=q+M|0,i[m++]=U+x|0,i[m++]=P+b|0,i[m++]=F+S|0}const gx=ux(px,{counterRight:!1,counterLength:4,allowShortKeys:!1}),bx=new Uint8Array(16),hp=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(bx.subarray(r))},vx=new Uint8Array(32);function dp(e,t,r,i,n){const s=e(t,r,vx),o=dx.create(s);n&&hp(o,n),hp(o,i);const a=new Uint8Array(16),f=Z7(a);up(f,0,BigInt(n?n.length:0),!0),up(f,8,BigInt(i.length),!0),o.update(a);const c=o.digest();return ro(s,a),c}const mx=e=>(t,r,i)=>({encrypt(n,s){const o=n.length;s=cp(o+16,s,!1),s.set(n);const a=s.subarray(0,-16);e(t,r,a,a,1);const f=dp(e,t,r,a,i);return s.set(f,o),ro(f),s},decrypt(n,s){s=cp(n.length-16,s,!1);const o=n.subarray(0,-16),a=n.subarray(-16),f=dp(e,t,r,o,i);if(!tx(a,f))throw new Error("invalid tag");return s.set(n.subarray(0,-16)),e(t,r,s,s,1),ro(f),s}}),fv=rx({blockSize:64,nonceLength:12,tagLength:16},mx(gx));class cv extends ah{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,oh(t);const i=to(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?t.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return eo(this),this.iHash.update(t),this}digestInto(t){eo(this),Xf(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:i,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=n,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ch=(e,t,r)=>new cv(e,t).update(r).digest();ch.create=(e,t)=>new cv(e,t);function yx(e,t,r){return oh(e),r===void 0&&(r=new Uint8Array(e.outputLen)),ch(e,to(r),to(t))}const Du=new Uint8Array([0]),pp=new Uint8Array;function wx(e,t,r,i=32){if(oh(e),Jo(i),i>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const n=Math.ceil(i/e.outputLen);r===void 0&&(r=pp);const s=new Uint8Array(n*e.outputLen),o=ch.create(e,t),a=o._cloneInto(),f=new Uint8Array(o.outputLen);for(let c=0;c<n;c++)Du[0]=c+1,a.update(c===0?pp:f).update(r).update(Du).digestInto(f),s.set(f,e.outputLen*c),o._cloneInto(a);return o.destroy(),a.destroy(),f.fill(0),Du.fill(0),s.slice(0,i)}const _x=(e,t,r,i,n)=>wx(e,yx(e,t,r),i,n);function xx(e,t,r,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),f=i?4:0,c=i?0:4;e.setUint32(t+f,o,i),e.setUint32(t+c,a,i)}function Ex(e,t,r){return e&t^~e&r}function Sx(e,t,r){return e&t^e&r^t&r}let Mx=class extends ah{constructor(t,r,i,n){super(),this.blockLen=t,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Au(this.buffer)}update(t){eo(this);const{view:r,buffer:i,blockLen:n}=this;t=to(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);if(a===n){const f=Au(t);for(;n<=s-o;o+=n)this.process(f,o);continue}i.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){eo(this),Yb(t,this),this.finished=!0;const{buffer:r,view:i,blockLen:n,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let h=o;h<n;h++)r[h]=0;xx(i,n-8,BigInt(this.length*8),s),this.process(i,0);const a=Au(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=f/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,l[h],s)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return t.length=n,t.pos=a,t.finished=s,t.destroyed=o,n%r&&t.buffer.set(i),t}};const Ax=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mn=new Uint32Array(64);let Ix=class extends Mx{constructor(){super(64,32,8,!1),this.A=Sn[0]|0,this.B=Sn[1]|0,this.C=Sn[2]|0,this.D=Sn[3]|0,this.E=Sn[4]|0,this.F=Sn[5]|0,this.G=Sn[6]|0,this.H=Sn[7]|0}get(){const{A:t,B:r,C:i,D:n,E:s,F:o,G:a,H:f}=this;return[t,r,i,n,s,o,a,f]}set(t,r,i,n,s,o,a,f){this.A=t|0,this.B=r|0,this.C=i|0,this.D=n|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=f|0}process(t,r){for(let h=0;h<16;h++,r+=4)Mn[h]=t.getUint32(r,!1);for(let h=16;h<64;h++){const w=Mn[h-15],E=Mn[h-2],_=ki(w,7)^ki(w,18)^w>>>3,A=ki(E,17)^ki(E,19)^E>>>10;Mn[h]=A+Mn[h-7]+_+Mn[h-16]|0}let{A:i,B:n,C:s,D:o,E:a,F:f,G:c,H:l}=this;for(let h=0;h<64;h++){const w=ki(a,6)^ki(a,11)^ki(a,25),E=l+w+Ex(a,f,c)+Ax[h]+Mn[h]|0,_=(ki(i,2)^ki(i,13)^ki(i,22))+Sx(i,n,s)|0;l=c,c=f,f=a,a=o+E|0,o=s,s=n,n=i,i=E+_|0}i=i+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(i,n,s,o,a,f,c,l)}roundClean(){Mn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Qf=Zb(()=>new Ix);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uv=BigInt(0);function uh(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function lv(e){if(!uh(e))throw new Error("Uint8Array expected")}const Dx=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ox(e){lv(e);let t="";for(let r=0;r<e.length;r++)t+=Dx[e[r]];return t}function Px(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?uv:BigInt("0x"+e)}const on={_0:48,_9:57,A:65,F:70,a:97,f:102};function gp(e){if(e>=on._0&&e<=on._9)return e-on._0;if(e>=on.A&&e<=on.F)return e-(on.A-10);if(e>=on.a&&e<=on.f)return e-(on.a-10)}function hv(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){const o=gp(e.charCodeAt(s)),a=gp(e.charCodeAt(s+1));if(o===void 0||a===void 0){const f=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+s)}i[n]=o*16+a}return i}function bp(e){return lv(e),Px(Ox(Uint8Array.from(e).reverse()))}function $x(e,t){return hv(e.toString(16).padStart(t*2,"0"))}function Rx(e,t){return $x(e,t).reverse()}function vp(e,t,r){let i;if(typeof t=="string")try{i=hv(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(uh(t))i=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const n=i.length;if(typeof r=="number"&&n!==r)throw new Error(e+" of length "+r+" expected, got "+n);return i}const Ou=e=>typeof e=="bigint"&&uv<=e;function Cx(e,t,r){return Ou(e)&&Ou(t)&&Ou(r)&&t<=e&&e<r}function mp(e,t,r,i){if(!Cx(t,r,i))throw new Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}const Tx={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||uh(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Nx(e,t,r={}){const i=(n,s,o)=>{const a=Tx[s];if(typeof a!="function")throw new Error("invalid validator function");const f=e[n];if(!(o&&f===void 0)&&!a(f,e))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+f)};for(const[n,s]of Object.entries(t))i(n,s,!1);for(const[n,s]of Object.entries(r))i(n,s,!0);return e}const ks=BigInt(0),Ba=BigInt(1);function dv(e,t){const r=e%t;return r>=ks?r:t+r}function Fx(e,t,r){if(t<ks)throw new Error("invalid exponent, negatives unsupported");if(r<=ks)throw new Error("invalid modulus");if(r===Ba)return ks;let i=Ba;for(;t>ks;)t&Ba&&(i=i*e%r),e=e*e%r,t>>=Ba;return i}function Ii(e,t,r){let i=e;for(;t-- >ks;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Ns=BigInt(0),Pu=BigInt(1);function Lx(e){return Nx(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}function qx(e){const t=Lx(e),{P:r}=t,i=q=>dv(q,r),n=t.montgomeryBits,s=Math.ceil(n/8),o=t.nByteLength,a=t.adjustScalarBytes||(q=>q),f=t.powPminus2||(q=>Fx(q,r-BigInt(2),r));function c(q,U,P){const F=i(q*(U-P));return U=i(U-F),P=i(P+F),[U,P]}const l=(t.a-BigInt(2))/BigInt(4);function h(q,U){mp("u",q,Ns,r),mp("scalar",U,Ns,r);const P=U,F=q;let L=Pu,K=Ns,V=q,W=Pu,Q=Ns,C;for(let p=BigInt(n-1);p>=Ns;p--){const u=P>>p&Pu;Q^=u,C=c(Q,L,V),L=C[0],V=C[1],C=c(Q,K,W),K=C[0],W=C[1],Q=u;const d=L+K,v=i(d*d),y=L-K,M=i(y*y),x=v-M,b=V+W,S=V-W,m=i(S*d),$=i(b*y),ee=m+$,O=m-$;V=i(ee*ee),W=i(F*i(O*O)),L=i(v*M),K=i(x*(v+i(l*x)))}C=c(Q,L,V),L=C[0],V=C[1],C=c(Q,K,W),K=C[0],W=C[1];const g=f(K);return i(L*g)}function w(q){return Rx(i(q),s)}function E(q){const U=vp("u coordinate",q,s);return o===32&&(U[31]&=127),bp(U)}function _(q){const U=vp("scalar",q),P=U.length;if(P!==s&&P!==o){let F=""+s+" or "+o;throw new Error("invalid scalar, expected "+F+" bytes, got "+P)}return bp(a(U))}function A(q,U){const P=E(U),F=_(q),L=h(P,F);if(L===Ns)throw new Error("invalid private or public key received");return w(L)}const R=w(t.Gu);function N(q){return A(q,R)}return{scalarMult:A,scalarMultBase:N,getSharedSecret:(q,U)=>A(q,U),getPublicKey:q=>N(q),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:R}}const gl=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Bx=BigInt(1),yp=BigInt(2),Ux=BigInt(3),kx=BigInt(5);BigInt(8);function jx(e){const t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=gl,o=e*e%s*e%s,a=Ii(o,yp,s)*o%s,f=Ii(a,Bx,s)*e%s,c=Ii(f,kx,s)*f%s,l=Ii(c,t,s)*c%s,h=Ii(l,r,s)*l%s,w=Ii(h,i,s)*h%s,E=Ii(w,n,s)*w%s,_=Ii(E,n,s)*w%s,A=Ii(_,t,s)*c%s;return{pow_p_5_8:Ii(A,yp,s)*e%s,b2:o}}function zx(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const bl=qx({P:gl,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=gl,{pow_p_5_8:r,b2:i}=jx(e);return dv(Ii(r,Ux,t)*i,t)},adjustScalarBytes:zx,randomBytes:ca}),pv="base10",Ar="base16",Tn="base64pad",Eo="base64url",ua="utf8",gv=0,vn=1,la=2,Kx=0,wp=1,Uo=12,lh=32;function Vx(){const e=bl.utils.randomPrivateKey(),t=bl.getPublicKey(e);return{privateKey:Cr(e,Ar),publicKey:Cr(t,Ar)}}function vl(){const e=ca(lh);return Cr(e,Ar)}function Hx(e,t){const r=bl.getSharedSecret(ci(e,Ar),ci(t,Ar)),i=_x(Qf,r,void 0,void 0,lh);return Cr(i,Ar)}function sf(e){const t=Qf(ci(e,Ar));return Cr(t,Ar)}function dn(e){const t=Qf(ci(e,ua));return Cr(t,Ar)}function bv(e){return ci(`${e}`,pv)}function ps(e){return Number(Cr(e,pv))}function Wx(e){const t=bv(typeof e.type<"u"?e.type:gv);if(ps(t)===vn&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?ci(e.senderPublicKey,Ar):void 0,i=typeof e.iv<"u"?ci(e.iv,Ar):ca(Uo),n=ci(e.symKey,Ar),s=fv(n,i).encrypt(ci(e.message,ua));return vv({type:t,sealed:s,iv:i,senderPublicKey:r,encoding:e.encoding})}function Gx(e){const t=ci(e.symKey,Ar),{sealed:r,iv:i}=Zo(e),n=fv(t,i).decrypt(r);if(n===null)throw new Error("Failed to decrypt");return Cr(n,ua)}function Jx(e,t){const r=bv(la),i=ca(Uo),n=ci(e,ua);return vv({type:r,sealed:n,iv:i,encoding:t})}function Yx(e,t){const{sealed:r}=Zo({encoded:e,encoding:t});return Cr(r,ua)}function vv(e){const{encoding:t=Tn}=e;if(ps(e.type)===la)return Cr(au([e.type,e.sealed]),t);if(ps(e.type)===vn){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Cr(au([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return Cr(au([e.type,e.iv,e.sealed]),t)}function Zo(e){const{encoded:t,encoding:r=Tn}=e,i=ci(t,r),n=i.slice(Kx,wp),s=wp;if(ps(n)===vn){const c=s+lh,l=c+Uo,h=i.slice(s,c),w=i.slice(c,l),E=i.slice(l);return{type:n,sealed:E,iv:w,senderPublicKey:h}}if(ps(n)===la){const c=i.slice(s),l=ca(Uo);return{type:n,sealed:c,iv:l}}const o=s+Uo,a=i.slice(s,o),f=i.slice(o);return{type:n,sealed:f,iv:a}}function Zx(e,t){const r=Zo({encoded:e,encoding:t==null?void 0:t.encoding});return mv({type:ps(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Cr(r.senderPublicKey,Ar):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function mv(e){const t=(e==null?void 0:e.type)||gv;if(t===vn){if(typeof(e==null?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(e==null?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e==null?void 0:e.senderPublicKey,receiverPublicKey:e==null?void 0:e.receiverPublicKey}}function _p(e){return e.type===vn&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function xp(e){return e.type===la}function Xx(e){return new q9.ec("p256").keyFromPublic({x:Buffer.from(e.x,"base64").toString("hex"),y:Buffer.from(e.y,"base64").toString("hex")},"hex")}function Qx(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const r=t.length%4;return r>0&&(t+="=".repeat(4-r)),t}function eE(e){return Buffer.from(Qx(e),"base64")}function tE(e,t){const[r,i,n]=e.split("."),s=eE(n);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),f=`${r}.${i}`,c=Qf(f),l=Xx(t),h=Cr(c,Ar);if(!l.verify(h,{r:o,s:a}))throw new Error("Invalid signature");return al(e).payload}const rE="irn";function Af(e){return(e==null?void 0:e.relay)||{protocol:rE}}function $o(e){const t=B9[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function iE(e,t="-"){const r={},i="relay"+t;return Object.keys(e).forEach(n=>{if(n.startsWith(i)){const s=n.replace(i,""),o=e[n];r[s]=o}}),r}function Ep(e){if(!e.includes("wc:")){const c=Jb(e);c!=null&&c.includes("wc:")&&(e=c)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,i=e.substring(0,t),n=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((c,l)=>{a[l]=c});const f=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:i,topic:nE(n[0]),version:parseInt(n[1],10),symKey:a.symKey,relay:iE(a),methods:f,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function nE(e){return e.startsWith("//")?e.substring(2):e}function sE(e,t="-"){const r="relay",i={};return Object.keys(e).forEach(n=>{const s=r+t+n;e[n]&&(i[s]=e[n])}),i}function Sp(e){const t=new URLSearchParams,r=sE(e.relay);Object.keys(r).sort().forEach(n=>{t.set(n,r[n])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const i=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${i}`}function Ua(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}var oE=Object.defineProperty,aE=Object.defineProperties,fE=Object.getOwnPropertyDescriptors,Mp=Object.getOwnPropertySymbols,cE=Object.prototype.hasOwnProperty,uE=Object.prototype.propertyIsEnumerable,Ap=(e,t,r)=>t in e?oE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lE=(e,t)=>{for(var r in t||(t={}))cE.call(t,r)&&Ap(e,r,t[r]);if(Mp)for(var r of Mp(t))uE.call(t,r)&&Ap(e,r,t[r]);return e},hE=(e,t)=>aE(e,fE(t));function fo(e){const t=[];return e.forEach(r=>{const[i,n]=r.split(":");t.push(`${i}:${n}`)}),t}function dE(e){const t=[];return Object.values(e).forEach(r=>{t.push(...fo(r.accounts))}),t}function pE(e,t){const r=[];return Object.values(e).forEach(i=>{fo(i.accounts).includes(t)&&r.push(...i.methods)}),r}function gE(e,t){const r=[];return Object.values(e).forEach(i=>{fo(i.accounts).includes(t)&&r.push(...i.events)}),r}function bE(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:r={}},supportedNamespaces:i}=e,n=Ip(t),s=Ip(r),o={};Object.keys(i).forEach(c=>{const l=i[c].chains,h=i[c].methods,w=i[c].events,E=i[c].accounts;l.forEach(_=>{if(!E.some(A=>A.includes(_)))throw new Error(`No accounts provided for chain ${_} in namespace ${c}`)}),o[c]={chains:l,methods:h,events:w,accounts:E}});const a=ml(t,o,"approve()");if(a)throw new Error(a.message);const f={};return!Object.keys(t).length&&!Object.keys(r).length?o:(Object.keys(n).forEach(c=>{const l=i[c].chains.filter(_=>{var A,R;return(R=(A=n[c])==null?void 0:A.chains)==null?void 0:R.includes(_)}),h=i[c].methods.filter(_=>{var A,R;return(R=(A=n[c])==null?void 0:A.methods)==null?void 0:R.includes(_)}),w=i[c].events.filter(_=>{var A,R;return(R=(A=n[c])==null?void 0:A.events)==null?void 0:R.includes(_)}),E=l.map(_=>i[c].accounts.filter(A=>A.includes(`${_}:`))).flat();f[c]={chains:l,methods:h,events:w,accounts:E}}),Object.keys(s).forEach(c=>{var l,h,w,E,_,A;if(!i[c])return;const R=(h=(l=s[c])==null?void 0:l.chains)==null?void 0:h.filter(P=>i[c].chains.includes(P)),N=i[c].methods.filter(P=>{var F,L;return(L=(F=s[c])==null?void 0:F.methods)==null?void 0:L.includes(P)}),q=i[c].events.filter(P=>{var F,L;return(L=(F=s[c])==null?void 0:F.events)==null?void 0:L.includes(P)}),U=R==null?void 0:R.map(P=>i[c].accounts.filter(F=>F.includes(`${P}:`))).flat();f[c]={chains:Cn((w=f[c])==null?void 0:w.chains,R),methods:Cn((E=f[c])==null?void 0:E.methods,N),events:Cn((_=f[c])==null?void 0:_.events,q),accounts:Cn((A=f[c])==null?void 0:A.accounts,U)}}),f)}function yv(e){return e.includes(":")}function vE(e){return yv(e)?e.split(":")[0]:e}function Ip(e){var t,r,i;const n={};if(!Xo(e))return n;for(const[s,o]of Object.entries(e)){const a=yv(s)?[s]:o.chains,f=o.methods||[],c=o.events||[],l=vE(s);n[l]=hE(lE({},n[l]),{chains:Cn(a,(t=n[l])==null?void 0:t.chains),methods:Cn(f,(r=n[l])==null?void 0:r.methods),events:Cn(c,(i=n[l])==null?void 0:i.events)})}return n}function mE(e){const t={};return e==null||e.forEach(r=>{const[i,n]=r.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[]}),t[i].accounts.push(r),t[i].chains.push(`${i}:${n}`)}),t}function Dp(e,t){t=t.map(i=>i.replace("did:pkh:",""));const r=mE(t);for(const[i,n]of Object.entries(r))n.methods?n.methods=Cn(n.methods,e):n.methods=e,n.events=["chainChanged","accountsChanged"];return r}const yE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},wE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Me(e,t){const{message:r,code:i}=wE[e];return{message:t?`${r} ${t}`:r,code:i}}function Dt(e,t){const{message:r,code:i}=yE[e];return{message:t?`${r} ${t}`:r,code:i}}function ec(e,t){return!!Array.isArray(e)}function Xo(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Rr(e){return typeof e>"u"}function Wt(e,t){return t&&Rr(e)?!0:typeof e=="string"&&!!e.trim().length}function hh(e,t){return t&&Rr(e)?!0:typeof e=="number"&&!isNaN(e)}function _E(e,t){const{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r);let s=!0;return os(n,i)?(i.forEach(o=>{const{accounts:a,methods:f,events:c}=e.namespaces[o],l=fo(a),h=r[o];(!os(jb(o,h),l)||!os(h.methods,f)||!os(h.events,c))&&(s=!1)}),s):!1}function If(e){return Wt(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function xE(e){if(Wt(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&If(r)}}return!1}function EE(e){function t(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Wt(e,!1)){if(t(e))return!0;const r=Jb(e);return t(r)}}catch{}return!1}function SE(e){var t;return(t=e==null?void 0:e.proposer)==null?void 0:t.publicKey}function ME(e){return e==null?void 0:e.topic}function AE(e,t){let r=null;return Wt(e==null?void 0:e.publicKey,!1)||(r=Me("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Op(e){let t=!0;return ec(e)?e.length&&(t=e.every(r=>Wt(r,!1))):t=!1,t}function IE(e,t,r){let i=null;return ec(t)&&t.length?t.forEach(n=>{i||If(n)||(i=Dt("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):If(e)||(i=Dt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function DE(e,t,r){let i=null;return Object.entries(e).forEach(([n,s])=>{if(i)return;const o=IE(n,jb(n,s),`${t} ${r}`);o&&(i=o)}),i}function OE(e,t){let r=null;return ec(e)?e.forEach(i=>{r||xE(i)||(r=Dt("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=Dt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function PE(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const n=OE(i==null?void 0:i.accounts,`${t} namespace`);n&&(r=n)}),r}function $E(e,t){let r=null;return Op(e==null?void 0:e.methods)?Op(e==null?void 0:e.events)||(r=Dt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Dt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function wv(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const n=$E(i,`${t}, namespace`);n&&(r=n)}),r}function RE(e,t,r){let i=null;if(e&&Xo(e)){const n=wv(e,t);n&&(i=n);const s=DE(e,t,r);s&&(i=s)}else i=Me("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}function $u(e,t){let r=null;if(e&&Xo(e)){const i=wv(e,t);i&&(r=i);const n=PE(e,t);n&&(r=n)}else r=Me("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function _v(e){return Wt(e.protocol,!0)}function CE(e,t){let r=!1;return e?e&&ec(e)&&e.length&&e.forEach(i=>{r=_v(i)}):r=!0,r}function TE(e){return typeof e=="number"}function kr(e){return typeof e<"u"&&typeof e!==null}function NE(e){return!(!e||typeof e!="object"||!e.code||!hh(e.code,!1)||!e.message||!Wt(e.message,!1))}function FE(e){return!(Rr(e)||!Wt(e.method,!1))}function LE(e){return!(Rr(e)||Rr(e.result)&&Rr(e.error)||!hh(e.id,!1)||!Wt(e.jsonrpc,!1))}function qE(e){return!(Rr(e)||!Wt(e.name,!1))}function Pp(e,t){return!(!If(t)||!dE(e).includes(t))}function BE(e,t,r){return Wt(r,!1)?pE(e,t).includes(r):!1}function UE(e,t,r){return Wt(r,!1)?gE(e,t).includes(r):!1}function ml(e,t,r){let i=null;const n=kE(e),s=jE(t),o=Object.keys(n),a=Object.keys(s),f=$p(Object.keys(e)),c=$p(Object.keys(t)),l=f.filter(h=>!c.includes(h));return l.length&&(i=Me("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(t).toString()}`)),os(o,a)||(i=Me("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(h=>{if(!h.includes(":")||i)return;const w=fo(t[h].accounts);w.includes(h)||(i=Me("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${w.toString()}`))}),o.forEach(h=>{i||(os(n[h].methods,s[h].methods)?os(n[h].events,s[h].events)||(i=Me("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):i=Me("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),i}function kE(e){const t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:(i=e[r].chains)==null||i.forEach(n=>{t[n]={methods:e[r].methods,events:e[r].events}})}),t}function $p(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function jE(e){const t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{const i=fo(e[r].accounts);i==null||i.forEach(n=>{t[n]={accounts:e[r].accounts.filter(s=>s.includes(`${n}:`)),methods:e[r].methods,events:e[r].events}})}}),t}function zE(e,t){return hh(e,!1)&&e<=t.max&&e>=t.min}function Rp(){const e=fa();return new Promise(t=>{switch(e){case ti.browser:t(KE());break;case ti.reactNative:t(VE());break;case ti.node:t(HE());break;default:t(!0)}})}function KE(){return aa()&&(navigator==null?void 0:navigator.onLine)}async function VE(){if(Kn()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e==null?void 0:e.isConnected}return!0}function HE(){return!0}function WE(e){switch(fa()){case ti.browser:GE(e);break;case ti.reactNative:JE(e);break}}function GE(e){!Kn()&&aa()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function JE(e){Kn()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(t=>e(t==null?void 0:t.isConnected)))}const Ru={};class So{static get(t){return Ru[t]}static set(t,r){Ru[t]=r}static delete(t){delete Ru[t]}}const YE="PARSE_ERROR",ZE="INVALID_REQUEST",XE="METHOD_NOT_FOUND",QE="INVALID_PARAMS",xv="INTERNAL_ERROR",dh="SERVER_ERROR",eS=[-32700,-32600,-32601,-32602,-32603],ko={[YE]:{code:-32700,message:"Parse error"},[ZE]:{code:-32600,message:"Invalid Request"},[XE]:{code:-32601,message:"Method not found"},[QE]:{code:-32602,message:"Invalid params"},[xv]:{code:-32603,message:"Internal error"},[dh]:{code:-32e3,message:"Server error"}},Ev=dh;function tS(e){return eS.includes(e)}function Cp(e){return Object.keys(ko).includes(e)?ko[e]:ko[Ev]}function rS(e){const t=Object.values(ko).find(r=>r.code===e);return t||ko[Ev]}function iS(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var Cu={},an={},Tp;function nS(){if(Tp)return an;Tp=1,Object.defineProperty(an,"__esModule",{value:!0}),an.isBrowserCryptoAvailable=an.getSubtleCrypto=an.getBrowerCrypto=void 0;function e(){return(Oi==null?void 0:Oi.crypto)||(Oi==null?void 0:Oi.msCrypto)||{}}an.getBrowerCrypto=e;function t(){const i=e();return i.subtle||i.webkitSubtle}an.getSubtleCrypto=t;function r(){return!!e()&&!!t()}return an.isBrowserCryptoAvailable=r,an}var fn={},Np;function sS(){if(Np)return fn;Np=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.isBrowser=fn.isNode=fn.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}fn.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}fn.isNode=t;function r(){return!e()&&!t()}return fn.isBrowser=r,fn}var Fp;function oS(){return Fp||(Fp=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ta;t.__exportStar(nS(),e),t.__exportStar(sS(),e)}(Cu)),Cu}var aS=oS();function hn(e=3){const t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function as(e=6){return BigInt(hn(e))}function fs(e,t,r){return{id:r||hn(),jsonrpc:"2.0",method:e,params:t}}function ph(e,t){return{id:e,jsonrpc:"2.0",result:t}}function gh(e,t,r){return{id:e,jsonrpc:"2.0",error:fS(t)}}function fS(e,t){return typeof e>"u"?Cp(xv):(typeof e=="string"&&(e=Object.assign(Object.assign({},Cp(dh)),{message:e})),tS(e.code)&&(e=rS(e.code)),e)}class cS{}class uS extends cS{constructor(){super()}}class lS extends uS{constructor(t){super()}}const hS="^wss?:";function dS(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function pS(e,t){const r=dS(e);return typeof r>"u"?!1:new RegExp(t).test(r)}function Lp(e){return pS(e,hS)}function gS(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function Sv(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function bh(e){return Sv(e)&&"method"in e}function tc(e){return Sv(e)&&(Hi(e)||fi(e))}function Hi(e){return"result"in e}function fi(e){return"error"in e}let bS=class extends lS{constructor(t){super(t),this.events=new Ci.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(fs(t.method,t.params||[],t.id||as().toString()),r)}async requestStrict(t,r){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(s){n(s)}this.events.on(`${t.id}`,s=>{fi(s)?n(s.error):i(s.result)});try{await this.connection.send(t,r)}catch(s){n(s)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),tc(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const vS=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),mS=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",qp=e=>e.split("?")[0],Bp=10,yS=vS();let wS=class{constructor(t){if(this.url=t,this.events=new Ci.EventEmitter,this.registering=!1,!Lp(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ls(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!Lp(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),n(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,i)=>{const n=aS.isReactNative()?void 0:{rejectUnauthorized:!gS(t)},s=new yS(t,[],n);mS()?s.onerror=o=>{const a=o;i(this.emitError(a.error))}:s.on("error",o=>{i(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?Qs(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const i=this.parseError(r),n=i.message||i.toString(),s=gh(t,n);this.events.emit("payload",s)}parseError(t,r=this.url){return iS(t,qp(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Bp&&this.events.setMaxListeners(Bp)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${qp(this.url)}`));return this.events.emit("register_error",r),r}};var Ro={exports:{}};Ro.exports;var Up;function _S(){return Up||(Up=1,function(e,t){var r=200,i="__lodash_hash_undefined__",n=1,s=2,o=9007199254740991,a="[object Arguments]",f="[object Array]",c="[object AsyncFunction]",l="[object Boolean]",h="[object Date]",w="[object Error]",E="[object Function]",_="[object GeneratorFunction]",A="[object Map]",R="[object Number]",N="[object Null]",q="[object Object]",U="[object Promise]",P="[object Proxy]",F="[object RegExp]",L="[object Set]",K="[object String]",V="[object Symbol]",W="[object Undefined]",Q="[object WeakMap]",C="[object ArrayBuffer]",g="[object DataView]",p="[object Float32Array]",u="[object Float64Array]",d="[object Int8Array]",v="[object Int16Array]",y="[object Int32Array]",M="[object Uint8Array]",x="[object Uint8ClampedArray]",b="[object Uint16Array]",S="[object Uint32Array]",m=/[\\^$.*+?()[\]{}|]/g,$=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,O={};O[p]=O[u]=O[d]=O[v]=O[y]=O[M]=O[x]=O[b]=O[S]=!0,O[a]=O[f]=O[C]=O[l]=O[g]=O[h]=O[w]=O[E]=O[A]=O[R]=O[q]=O[F]=O[L]=O[K]=O[Q]=!1;var H=typeof Oi=="object"&&Oi&&Oi.Object===Object&&Oi,X=typeof self=="object"&&self&&self.Object===Object&&self,te=H||X||Function("return this")(),ne=t&&!t.nodeType&&t,ge=ne&&!0&&e&&!e.nodeType&&e,ve=ge&&ge.exports===ne,B=ve&&H.process,z=function(){try{return B&&B.binding&&B.binding("util")}catch{}}(),G=z&&z.isTypedArray;function Z(j,Y){for(var de=-1,Oe=j==null?0:j.length,Et=0,Ze=[];++de<Oe;){var Tt=j[de];Y(Tt,de,j)&&(Ze[Et++]=Tt)}return Ze}function oe(j,Y){for(var de=-1,Oe=Y.length,Et=j.length;++de<Oe;)j[Et+de]=Y[de];return j}function ae(j,Y){for(var de=-1,Oe=j==null?0:j.length;++de<Oe;)if(Y(j[de],de,j))return!0;return!1}function ce(j,Y){for(var de=-1,Oe=Array(j);++de<j;)Oe[de]=Y(de);return Oe}function ue(j){return function(Y){return j(Y)}}function le(j,Y){return j.has(Y)}function ie(j,Y){return j==null?void 0:j[Y]}function ye(j){var Y=-1,de=Array(j.size);return j.forEach(function(Oe,Et){de[++Y]=[Et,Oe]}),de}function pe(j,Y){return function(de){return j(Y(de))}}function he(j){var Y=-1,de=Array(j.size);return j.forEach(function(Oe){de[++Y]=Oe}),de}var _e=Array.prototype,Ae=Function.prototype,we=Object.prototype,De=te["__core-js_shared__"],Fe=Ae.toString,Se=we.hasOwnProperty,Ke=function(){var j=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}(),We=we.toString,Ce=RegExp("^"+Fe.call(Se).replace(m,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=ve?te.Buffer:void 0,ze=te.Symbol,Re=te.Uint8Array,at=we.propertyIsEnumerable,dt=_e.splice,Ie=ze?ze.toStringTag:void 0,st=Object.getOwnPropertySymbols,$e=et?et.isBuffer:void 0,ke=pe(Object.keys,Object),Ye=Ni(te,"DataView"),Ge=Ni(te,"Map"),Le=Ni(te,"Promise"),lt=Ni(te,"Set"),ft=Ni(te,"WeakMap"),Ne=Ni(Object,"create"),pt=en(Ye),mt=en(Ge),Be=en(Le),gt=en(lt),bt=en(ft),Ue=ze?ze.prototype:void 0,ht=Ue?Ue.valueOf:void 0;function tt(j){var Y=-1,de=j==null?0:j.length;for(this.clear();++Y<de;){var Oe=j[Y];this.set(Oe[0],Oe[1])}}function qe(){this.__data__=Ne?Ne(null):{},this.size=0}function ct(j){var Y=this.has(j)&&delete this.__data__[j];return this.size-=Y?1:0,Y}function yt(j){var Y=this.__data__;if(Ne){var de=Y[j];return de===i?void 0:de}return Se.call(Y,j)?Y[j]:void 0}function je(j){var Y=this.__data__;return Ne?Y[j]!==void 0:Se.call(Y,j)}function ut(j,Y){var de=this.__data__;return this.size+=this.has(j)?0:1,de[j]=Ne&&Y===void 0?i:Y,this}tt.prototype.clear=qe,tt.prototype.delete=ct,tt.prototype.get=yt,tt.prototype.has=je,tt.prototype.set=ut;function it(j){var Y=-1,de=j==null?0:j.length;for(this.clear();++Y<de;){var Oe=j[Y];this.set(Oe[0],Oe[1])}}function vt(){this.__data__=[],this.size=0}function Qt(j){var Y=this.__data__,de=_s(Y,j);if(de<0)return!1;var Oe=Y.length-1;return de==Oe?Y.pop():dt.call(Y,de,1),--this.size,!0}function yr(j){var Y=this.__data__,de=_s(Y,j);return de<0?void 0:Y[de][1]}function Jt(j){return _s(this.__data__,j)>-1}function wr(j,Y){var de=this.__data__,Oe=_s(de,j);return Oe<0?(++this.size,de.push([j,Y])):de[Oe][1]=Y,this}it.prototype.clear=vt,it.prototype.delete=Qt,it.prototype.get=yr,it.prototype.has=Jt,it.prototype.set=wr;function Rt(j){var Y=-1,de=j==null?0:j.length;for(this.clear();++Y<de;){var Oe=j[Y];this.set(Oe[0],Oe[1])}}function Dr(){this.size=0,this.__data__={hash:new tt,map:new(Ge||it),string:new tt}}function ii(j){var Y=Ms(this,j).delete(j);return this.size-=Y?1:0,Y}function Kr(j){return Ms(this,j).get(j)}function bi(j){return Ms(this,j).has(j)}function vi(j,Y){var de=Ms(this,j),Oe=de.size;return de.set(j,Y),this.size+=de.size==Oe?0:1,this}Rt.prototype.clear=Dr,Rt.prototype.delete=ii,Rt.prototype.get=Kr,Rt.prototype.has=bi,Rt.prototype.set=vi;function Nr(j){var Y=-1,de=j==null?0:j.length;for(this.__data__=new Rt;++Y<de;)this.add(j[Y])}function mi(j){return this.__data__.set(j,i),this}function Vr(j){return this.__data__.has(j)}Nr.prototype.add=Nr.prototype.push=mi,Nr.prototype.has=Vr;function nr(j){var Y=this.__data__=new it(j);this.size=Y.size}function yi(){this.__data__=new it,this.size=0}function wi(j){var Y=this.__data__,de=Y.delete(j);return this.size=Y.size,de}function ni(j){return this.__data__.get(j)}function Vn(j){return this.__data__.has(j)}function Ti(j,Y){var de=this.__data__;if(de instanceof it){var Oe=de.__data__;if(!Ge||Oe.length<r-1)return Oe.push([j,Y]),this.size=++de.size,this;de=this.__data__=new Rt(Oe)}return de.set(j,Y),this.size=de.size,this}nr.prototype.clear=yi,nr.prototype.delete=wi,nr.prototype.get=ni,nr.prototype.has=Vn,nr.prototype.set=Ti;function da(j,Y){var de=As(j),Oe=!de&&uc(j),Et=!de&&!Oe&&Hn(j),Ze=!de&&!Oe&&!Et&&wa(j),Tt=de||Oe||Et||Ze,Yt=Tt?ce(j.length,String):[],er=Yt.length;for(var Nt in j)Se.call(j,Nt)&&!(Tt&&(Nt=="length"||Et&&(Nt=="offset"||Nt=="parent")||Ze&&(Nt=="buffer"||Nt=="byteLength"||Nt=="byteOffset")||fc(Nt,er)))&&Yt.push(Nt);return Yt}function _s(j,Y){for(var de=j.length;de--;)if(si(j[de][0],Y))return de;return-1}function xs(j,Y,de){var Oe=Y(j);return As(j)?Oe:oe(Oe,de(j))}function _n(j){return j==null?j===void 0?W:N:Ie&&Ie in Object(j)?ac(j):cc(j)}function Ct(j){return Wn(j)&&_n(j)==a}function pa(j,Y,de,Oe,Et){return j===Y?!0:j==null||Y==null||!Wn(j)&&!Wn(Y)?j!==j&&Y!==Y:nc(j,Y,de,Oe,pa,Et)}function nc(j,Y,de,Oe,Et,Ze){var Tt=As(j),Yt=As(Y),er=Tt?f:Fi(j),Nt=Yt?f:Fi(Y);er=er==a?q:er,Nt=Nt==a?q:Nt;var Or=er==q,Wr=Nt==q,sr=er==Nt;if(sr&&Hn(j)){if(!Hn(Y))return!1;Tt=!0,Or=!1}if(sr&&!Or)return Ze||(Ze=new nr),Tt||wa(j)?co(j,Y,de,Oe,Et,Ze):Es(j,Y,er,de,Oe,Et,Ze);if(!(de&n)){var Lr=Or&&Se.call(j,"__wrapped__"),qr=Wr&&Se.call(Y,"__wrapped__");if(Lr||qr){var Li=Lr?j.value():j,_i=qr?Y.value():Y;return Ze||(Ze=new nr),Et(Li,_i,de,Oe,Ze)}}return sr?(Ze||(Ze=new nr),oc(j,Y,de,Oe,Et,Ze)):!1}function Hr(j){if(!ya(j)||Fr(j))return!1;var Y=Is(j)?Ce:$;return Y.test(en(j))}function sc(j){return Wn(j)&&ma(j.length)&&!!O[_n(j)]}function ga(j){if(!uo(j))return ke(j);var Y=[];for(var de in Object(j))Se.call(j,de)&&de!="constructor"&&Y.push(de);return Y}function co(j,Y,de,Oe,Et,Ze){var Tt=de&n,Yt=j.length,er=Y.length;if(Yt!=er&&!(Tt&&er>Yt))return!1;var Nt=Ze.get(j);if(Nt&&Ze.get(Y))return Nt==Y;var Or=-1,Wr=!0,sr=de&s?new Nr:void 0;for(Ze.set(j,Y),Ze.set(Y,j);++Or<Yt;){var Lr=j[Or],qr=Y[Or];if(Oe)var Li=Tt?Oe(qr,Lr,Or,Y,j,Ze):Oe(Lr,qr,Or,j,Y,Ze);if(Li!==void 0){if(Li)continue;Wr=!1;break}if(sr){if(!ae(Y,function(_i,xi){if(!le(sr,xi)&&(Lr===_i||Et(Lr,_i,de,Oe,Ze)))return sr.push(xi)})){Wr=!1;break}}else if(!(Lr===qr||Et(Lr,qr,de,Oe,Ze))){Wr=!1;break}}return Ze.delete(j),Ze.delete(Y),Wr}function Es(j,Y,de,Oe,Et,Ze,Tt){switch(de){case g:if(j.byteLength!=Y.byteLength||j.byteOffset!=Y.byteOffset)return!1;j=j.buffer,Y=Y.buffer;case C:return!(j.byteLength!=Y.byteLength||!Ze(new Re(j),new Re(Y)));case l:case h:case R:return si(+j,+Y);case w:return j.name==Y.name&&j.message==Y.message;case F:case K:return j==Y+"";case A:var Yt=ye;case L:var er=Oe&n;if(Yt||(Yt=he),j.size!=Y.size&&!er)return!1;var Nt=Tt.get(j);if(Nt)return Nt==Y;Oe|=s,Tt.set(j,Y);var Or=co(Yt(j),Yt(Y),Oe,Et,Ze,Tt);return Tt.delete(j),Or;case V:if(ht)return ht.call(j)==ht.call(Y)}return!1}function oc(j,Y,de,Oe,Et,Ze){var Tt=de&n,Yt=Ss(j),er=Yt.length,Nt=Ss(Y),Or=Nt.length;if(er!=Or&&!Tt)return!1;for(var Wr=er;Wr--;){var sr=Yt[Wr];if(!(Tt?sr in Y:Se.call(Y,sr)))return!1}var Lr=Ze.get(j);if(Lr&&Ze.get(Y))return Lr==Y;var qr=!0;Ze.set(j,Y),Ze.set(Y,j);for(var Li=Tt;++Wr<er;){sr=Yt[Wr];var _i=j[sr],xi=Y[sr];if(Oe)var xa=Tt?Oe(xi,_i,sr,Y,j,Ze):Oe(_i,xi,sr,j,Y,Ze);if(!(xa===void 0?_i===xi||Et(_i,xi,de,Oe,Ze):xa)){qr=!1;break}Li||(Li=sr=="constructor")}if(qr&&!Li){var Ds=j.constructor,Os=Y.constructor;Ds!=Os&&"constructor"in j&&"constructor"in Y&&!(typeof Ds=="function"&&Ds instanceof Ds&&typeof Os=="function"&&Os instanceof Os)&&(qr=!1)}return Ze.delete(j),Ze.delete(Y),qr}function Ss(j){return xs(j,dc,ba)}function Ms(j,Y){var de=j.__data__;return va(Y)?de[typeof Y=="string"?"string":"hash"]:de.map}function Ni(j,Y){var de=ie(j,Y);return Hr(de)?de:void 0}function ac(j){var Y=Se.call(j,Ie),de=j[Ie];try{j[Ie]=void 0;var Oe=!0}catch{}var Et=We.call(j);return Oe&&(Y?j[Ie]=de:delete j[Ie]),Et}var ba=st?function(j){return j==null?[]:(j=Object(j),Z(st(j),function(Y){return at.call(j,Y)}))}:pc,Fi=_n;(Ye&&Fi(new Ye(new ArrayBuffer(1)))!=g||Ge&&Fi(new Ge)!=A||Le&&Fi(Le.resolve())!=U||lt&&Fi(new lt)!=L||ft&&Fi(new ft)!=Q)&&(Fi=function(j){var Y=_n(j),de=Y==q?j.constructor:void 0,Oe=de?en(de):"";if(Oe)switch(Oe){case pt:return g;case mt:return A;case Be:return U;case gt:return L;case bt:return Q}return Y});function fc(j,Y){return Y=Y??o,!!Y&&(typeof j=="number"||ee.test(j))&&j>-1&&j%1==0&&j<Y}function va(j){var Y=typeof j;return Y=="string"||Y=="number"||Y=="symbol"||Y=="boolean"?j!=="__proto__":j===null}function Fr(j){return!!Ke&&Ke in j}function uo(j){var Y=j&&j.constructor,de=typeof Y=="function"&&Y.prototype||we;return j===de}function cc(j){return We.call(j)}function en(j){if(j!=null){try{return Fe.call(j)}catch{}try{return j+""}catch{}}return""}function si(j,Y){return j===Y||j!==j&&Y!==Y}var uc=Ct(function(){return arguments}())?Ct:function(j){return Wn(j)&&Se.call(j,"callee")&&!at.call(j,"callee")},As=Array.isArray;function lc(j){return j!=null&&ma(j.length)&&!Is(j)}var Hn=$e||_a;function hc(j,Y){return pa(j,Y)}function Is(j){if(!ya(j))return!1;var Y=_n(j);return Y==E||Y==_||Y==c||Y==P}function ma(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=o}function ya(j){var Y=typeof j;return j!=null&&(Y=="object"||Y=="function")}function Wn(j){return j!=null&&typeof j=="object"}var wa=G?ue(G):sc;function dc(j){return lc(j)?da(j):ga(j)}function pc(){return[]}function _a(){return!1}e.exports=hc}(Ro,Ro.exports)),Ro.exports}var xS=_S();const ES=no(xS),Mv="wc",Av=2,yl="core",Zi=`${Mv}@2:${yl}:`,SS={logger:"error"},MS={database:":memory:"},AS="crypto",kp="client_ed25519_seed",IS=Ee.ONE_DAY,DS="keychain",OS="0.3",PS="messages",$S="0.3",jp=Ee.SIX_HOURS,RS="publisher",Iv="irn",CS="error",Dv="wss://relay.walletconnect.org",TS="relayer",ur={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},NS="_subscription",oi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},FS=.1,wl="2.18.0",Pt={link_mode:"link_mode",relay:"relay"},LS="0.3",qS="WALLETCONNECT_CLIENT_ID",zp="WALLETCONNECT_LINK_MODE_APPS",Jr={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},BS="subscription",US="0.3",kS=Ee.FIVE_SECONDS*1e3,jS="pairing",zS="0.3",Mo={wc_pairingDelete:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ee.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ee.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:0}}},ss={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Si={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},KS="history",VS="0.3",HS="expirer",ai={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},WS="0.3",GS="verify-api",JS="https://verify.walletconnect.com",Ov="https://verify.walletconnect.org",jo=Ov,YS=`${jo}/v3`,ZS=[JS,Ov],XS="echo",QS="https://echo.walletconnect.com",Ki={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},un={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},Mi={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},es={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},ts={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ao={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},eM=.1,tM="event-client",rM=86400,iM="https://pulse.walletconnect.org/batch";function nM(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=e.length,f=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var A=0,R=0,N=0,q=_.length;N!==q&&_[N]===0;)N++,A++;for(var U=(q-N)*l+1>>>0,P=new Uint8Array(U);N!==q;){for(var F=_[N],L=0,K=U-1;(F!==0||L<R)&&K!==-1;K--,L++)F+=256*P[K]>>>0,P[K]=F%a>>>0,F=F/a>>>0;if(F!==0)throw new Error("Non-zero carry");R=L,N++}for(var V=U-R;V!==U&&P[V]===0;)V++;for(var W=f.repeat(A);V<U;++V)W+=e.charAt(P[V]);return W}function w(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var A=0;if(_[A]!==" "){for(var R=0,N=0;_[A]===f;)R++,A++;for(var q=(_.length-A)*c+1>>>0,U=new Uint8Array(q);_[A];){var P=r[_.charCodeAt(A)];if(P===255)return;for(var F=0,L=q-1;(P!==0||F<N)&&L!==-1;L--,F++)P+=a*U[L]>>>0,U[L]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");N=F,A++}if(_[A]!==" "){for(var K=q-N;K!==q&&U[K]===0;)K++;for(var V=new Uint8Array(R+(q-K)),W=R;K!==q;)V[W++]=U[K++];return V}}}function E(_){var A=w(_);if(A)return A;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:w,decode:E}}var sM=nM,oM=sM;const Pv=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},aM=e=>new TextEncoder().encode(e),fM=e=>new TextDecoder().decode(e);class cM{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class uM{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return $v(this,t)}}class lM{constructor(t){this.decoders=t}or(t){return $v(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $v=(e,t)=>new lM({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class hM{constructor(t,r,i,n){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new cM(t,r,i),this.decoder=new uM(t,r,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const rc=({name:e,prefix:t,encode:r,decode:i})=>new hM(e,t,r,i),ha=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=oM(r,t);return rc({prefix:e,name:t,encode:i,decode:s=>Pv(n(s))})},dM=(e,t,r,i)=>{const n={};for(let l=0;l<t.length;++l)n[t[l]]=l;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,f=0,c=0;for(let l=0;l<s;++l){const h=n[e[l]];if(h===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&f>>a)}if(a>=r||255&f<<8-a)throw new SyntaxError("Unexpected end of data");return o},pM=(e,t,r)=>{const i=t[t.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let f=0;f<e.length;++f)for(a=a<<8|e[f],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},mr=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>rc({prefix:t,name:e,encode(n){return pM(n,i,r)},decode(n){return dM(n,i,r,e)}}),gM=rc({prefix:"\0",name:"identity",encode:e=>fM(e),decode:e=>aM(e)});var bM=Object.freeze({__proto__:null,identity:gM});const vM=mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var mM=Object.freeze({__proto__:null,base2:vM});const yM=mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var wM=Object.freeze({__proto__:null,base8:yM});const _M=ha({prefix:"9",name:"base10",alphabet:"0123456789"});var xM=Object.freeze({__proto__:null,base10:_M});const EM=mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),SM=mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var MM=Object.freeze({__proto__:null,base16:EM,base16upper:SM});const AM=mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IM=mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),DM=mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),OM=mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),PM=mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$M=mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),RM=mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),CM=mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),TM=mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var NM=Object.freeze({__proto__:null,base32:AM,base32upper:IM,base32pad:DM,base32padupper:OM,base32hex:PM,base32hexupper:$M,base32hexpad:RM,base32hexpadupper:CM,base32z:TM});const FM=ha({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),LM=ha({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qM=Object.freeze({__proto__:null,base36:FM,base36upper:LM});const BM=ha({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),UM=ha({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kM=Object.freeze({__proto__:null,base58btc:BM,base58flickr:UM});const jM=mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zM=mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),KM=mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),VM=mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var HM=Object.freeze({__proto__:null,base64:jM,base64pad:zM,base64url:KM,base64urlpad:VM});const Rv=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),WM=Rv.reduce((e,t,r)=>(e[r]=t,e),[]),GM=Rv.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function JM(e){return e.reduce((t,r)=>(t+=WM[r],t),"")}function YM(e){const t=[];for(const r of e){const i=GM[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const ZM=rc({prefix:"🚀",name:"base256emoji",encode:JM,decode:YM});var XM=Object.freeze({__proto__:null,base256emoji:ZM}),QM=Cv,Kp=128,eA=-128,tA=Math.pow(2,31);function Cv(e,t,r){t=t||[],r=r||0;for(var i=r;e>=tA;)t[r++]=e&255|Kp,e/=128;for(;e&eA;)t[r++]=e&255|Kp,e>>>=7;return t[r]=e|0,Cv.bytes=r-i+1,t}var rA=_l,iA=128,Vp=127;function _l(e,i){var r=0,i=i||0,n=0,s=i,o,a=e.length;do{if(s>=a)throw _l.bytes=0,new RangeError("Could not decode varint");o=e[s++],r+=n<28?(o&Vp)<<n:(o&Vp)*Math.pow(2,n),n+=7}while(o>=iA);return _l.bytes=s-i,r}var nA=Math.pow(2,7),sA=Math.pow(2,14),oA=Math.pow(2,21),aA=Math.pow(2,28),fA=Math.pow(2,35),cA=Math.pow(2,42),uA=Math.pow(2,49),lA=Math.pow(2,56),hA=Math.pow(2,63),dA=function(e){return e<nA?1:e<sA?2:e<oA?3:e<aA?4:e<fA?5:e<cA?6:e<uA?7:e<lA?8:e<hA?9:10},pA={encode:QM,decode:rA,encodingLength:dA},Tv=pA;const Hp=(e,t,r=0)=>(Tv.encode(e,t,r),t),Wp=e=>Tv.encodingLength(e),xl=(e,t)=>{const r=t.byteLength,i=Wp(e),n=i+Wp(r),s=new Uint8Array(n+r);return Hp(e,s,0),Hp(r,s,i),s.set(t,n),new gA(e,r,t,s)};let gA=class{constructor(t,r,i,n){this.code=t,this.size=r,this.digest=i,this.bytes=n}};const Nv=({name:e,code:t,encode:r})=>new bA(e,t,r);let bA=class{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?xl(this.code,r):r.then(i=>xl(this.code,i))}else throw Error("Unknown type, must be binary type")}};const Fv=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),vA=Nv({name:"sha2-256",code:18,encode:Fv("SHA-256")}),mA=Nv({name:"sha2-512",code:19,encode:Fv("SHA-512")});var yA=Object.freeze({__proto__:null,sha256:vA,sha512:mA});const Lv=0,wA="identity",qv=Pv,_A=e=>xl(Lv,qv(e)),xA={code:Lv,name:wA,encode:qv,digest:_A};var EA=Object.freeze({__proto__:null,identity:xA});new TextEncoder,new TextDecoder;const Gp={...bM,...mM,...wM,...xM,...MM,...NM,...qM,...kM,...HM,...XM};({...yA,...EA});function SA(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Bv(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const Jp=Bv("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Tu=Bv("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=SA(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),MA={utf8:Jp,"utf-8":Jp,hex:Gp.base16,latin1:Tu,ascii:Tu,binary:Tu,...Gp};function AA(e,t="utf8"){const r=MA[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}class IA{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=DS,this.version=OS,this.initialized=!1,this.storagePrefix=Zi,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()},this.get=i=>{this.isInitialized();const n=this.keychain.get(i);if(typeof n>"u"){const{message:s}=Me("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return n},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=t,this.logger=Tr(r,this.name)}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Vb(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Hb(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}}class DA{constructor(t,r,i){this.core=t,this.logger=r,this.name=AS,this.randomSessionIdentifier=vl(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=async()=>{this.isInitialized();const n=await this.getClientSeed(),s=Gd(n);return xb(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const n=Vx();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=async n=>{this.isInitialized();const s=await this.getClientSeed(),o=Gd(s),a=this.randomSessionIdentifier;return await _5(a,n,IS,o)},this.generateSharedKey=(n,s,o)=>{this.isInitialized();const a=this.getPrivateKey(n),f=Hx(a,s);return this.setSymKey(f,o)},this.setSymKey=async(n,s)=>{this.isInitialized();const o=s||sf(n);return await this.keychain.set(o,n),o},this.deleteKeyPair=async n=>{this.isInitialized(),await this.keychain.del(n)},this.deleteSymKey=async n=>{this.isInitialized(),await this.keychain.del(n)},this.encode=async(n,s,o)=>{this.isInitialized();const a=mv(o),f=ls(s);if(xp(a))return Jx(f,o==null?void 0:o.encoding);if(_p(a)){const w=a.senderPublicKey,E=a.receiverPublicKey;n=await this.generateSharedKey(w,E)}const c=this.getSymKey(n),{type:l,senderPublicKey:h}=a;return Wx({type:l,symKey:c,message:f,senderPublicKey:h,encoding:o==null?void 0:o.encoding})},this.decode=async(n,s,o)=>{this.isInitialized();const a=Zx(s,o);if(xp(a)){const f=Yx(s,o==null?void 0:o.encoding);return Qs(f)}if(_p(a)){const f=a.receiverPublicKey,c=a.senderPublicKey;n=await this.generateSharedKey(f,c)}try{const f=this.getSymKey(n),c=Gx({symKey:f,encoded:s,encoding:o==null?void 0:o.encoding});return Qs(c)}catch(f){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${await this.getClientId()}'`),this.logger.error(f)}},this.getPayloadType=(n,s=Tn)=>{const o=Zo({encoded:n,encoding:s});return ps(o.type)},this.getPayloadSenderPublicKey=(n,s=Tn)=>{const o=Zo({encoded:n,encoding:s});return o.senderPublicKey?Cr(o.senderPublicKey,Ar):void 0},this.core=t,this.logger=Tr(r,this.name),this.keychain=i||new IA(this.core,this.logger)}get context(){return jr(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(kp)}catch{t=vl(),await this.keychain.set(kp,t)}return AA(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}}class OA extends _6{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=PS,this.version=$S,this.initialized=!1,this.storagePrefix=Zi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,n)=>{this.isInitialized();const s=dn(n);let o=this.messages.get(i);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=n,this.messages.set(i,o),await this.persist()),s},this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();const s=this.get(i),o=dn(n);return typeof s[o]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Tr(t,this.name),this.core=r}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Vb(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Hb(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}}var PA=Object.defineProperty,$A=Object.defineProperties,RA=Object.getOwnPropertyDescriptors,Yp=Object.getOwnPropertySymbols,CA=Object.prototype.hasOwnProperty,TA=Object.prototype.propertyIsEnumerable,Zp=(e,t,r)=>t in e?PA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xp=(e,t)=>{for(var r in t||(t={}))CA.call(t,r)&&Zp(e,r,t[r]);if(Yp)for(var r of Yp(t))TA.call(t,r)&&Zp(e,r,t[r]);return e},Qp=(e,t)=>$A(e,RA(t));class NA extends x6{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new Ci.EventEmitter,this.name=RS,this.queue=new Map,this.publishTimeout=Ee.toMiliseconds(Ee.ONE_MINUTE),this.initialPublishTimeout=Ee.toMiliseconds(Ee.ONE_SECOND*15),this.needsTransportRestart=!1,this.publish=async(i,n,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:s}});const a=(s==null?void 0:s.ttl)||jp,f=Af(s),c=(s==null?void 0:s.prompt)||!1,l=(s==null?void 0:s.tag)||0,h=(s==null?void 0:s.id)||as().toString(),w={topic:i,message:n,opts:{ttl:a,relay:f,prompt:c,tag:l,id:h,attestation:s==null?void 0:s.attestation}},E=`Failed to publish payload, please try again. id:${h} tag:${l}`;try{const _=new Promise(async A=>{const R=({id:q})=>{w.opts.id===q&&(this.removeRequestFromQueue(q),this.relayer.events.removeListener(ur.publish,R),A(w))};this.relayer.events.on(ur.publish,R);const N=Rn(new Promise((q,U)=>{this.rpcPublish({topic:i,message:n,ttl:a,prompt:c,tag:l,id:h,attestation:s==null?void 0:s.attestation}).then(q).catch(P=>{this.logger.warn(P,P==null?void 0:P.message),U(P)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${l}`);try{await N,this.events.removeListener(ur.publish,R)}catch(q){this.queue.set(h,Qp(Xp({},w),{attempt:1})),this.logger.warn(q,q==null?void 0:q.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:i,message:n,opts:s}}),await Rn(_,this.publishTimeout,E)}catch(_){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(_),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw _}finally{this.queue.delete(h)}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=t,this.logger=Tr(r,this.name),this.registerEventListeners()}get context(){return jr(this.logger)}async rpcPublish(t){var r,i,n,s;const{topic:o,message:a,ttl:f=jp,prompt:c,tag:l,id:h,attestation:w}=t,E={method:$o(Af().protocol).publish,params:{topic:o,message:a,ttl:f,prompt:c,tag:l,attestation:w},id:h};Rr((r=E.params)==null?void 0:r.prompt)&&((i=E.params)==null||delete i.prompt),Rr((n=E.params)==null?void 0:n.tag)&&((s=E.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:E});const _=await this.relayer.request(E);return this.relayer.events.emit(ur.publish,t),this.logger.debug("Successfully Published Payload"),_}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async(t,r)=>{const i=t.attempt+1;this.queue.set(r,Qp(Xp({},t),{attempt:i}));const{topic:n,message:s,opts:o,attestation:a}=t;this.logger.warn({},`Publisher: queue->publishing: ${t.opts.id}, tag: ${t.opts.tag}, attempt: ${i}`),await this.rpcPublish({topic:n,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a}),this.logger.warn({},`Publisher: queue->published: ${t.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(so.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ur.connection_stalled);return}this.checkQueue()}),this.relayer.on(ur.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}class FA{constructor(){this.map=new Map,this.set=(t,r)=>{const i=this.get(t);this.exists(t,r)||this.map.set(t,[...i,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const i=this.get(t);if(!this.exists(t,r))return;const n=i.filter(s=>s!==r);if(!n.length){this.map.delete(t);return}this.map.set(t,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var LA=Object.defineProperty,qA=Object.defineProperties,BA=Object.getOwnPropertyDescriptors,eg=Object.getOwnPropertySymbols,UA=Object.prototype.hasOwnProperty,kA=Object.prototype.propertyIsEnumerable,tg=(e,t,r)=>t in e?LA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Io=(e,t)=>{for(var r in t||(t={}))UA.call(t,r)&&tg(e,r,t[r]);if(eg)for(var r of eg(t))kA.call(t,r)&&tg(e,r,t[r]);return e},Nu=(e,t)=>qA(e,BA(t));let jA=class extends M6{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new FA,this.events=new Ci.EventEmitter,this.name=BS,this.version=US,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Zi,this.subscribeTimeout=Ee.toMiliseconds(Ee.ONE_MINUTE),this.initialSubscribeTimeout=Ee.toMiliseconds(Ee.ONE_SECOND*15),this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(i,n)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{const s=Af(n),o={topic:i,relay:s,transportType:n==null?void 0:n.transportType};this.pending.set(i,o);const a=await this.rpcSubscribe(i,s,n);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),typeof(n==null?void 0:n.id)<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const n=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((s,o)=>{const a=new Ee.Watch;a.start(n);const f=setInterval(()=>{(!this.pending.has(i)&&this.topics.includes(i)||this.cached.some(c=>c.topic===i))&&(clearInterval(f),a.stop(n),s(!0)),a.elapsed(n)>=kS&&(clearInterval(f),a.stop(n),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{await this.restore(),await this.onRestart()},this.checkPending=async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const i=[];this.pending.forEach(n=>{i.push(n)}),await this.batchSubscribe(i)},this.registerEventListeners=()=>{this.relayer.core.heartbeat.on(so.pulse,async()=>{await this.checkPending()}),this.events.on(Jr.created,async i=>{const n=Jr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:i}),await this.persist()}),this.events.on(Jr.deleted,async i=>{const n=Jr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:i}),await this.persist()})},this.relayer=t,this.logger=Tr(r,this.name),this.clientId=""}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let i=!1;try{i=this.getSubscription(t).topic===r}catch{}return i}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const i=this.topicMap.get(t);await Promise.all(i.map(async n=>await this.unsubscribeById(t,n,r)))}async unsubscribeById(t,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:i}});try{const n=Af(i);await this.rpcUnsubscribe(t,r,n);const s=Dt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(t,r,i){var n;(i==null?void 0:i.transportType)===Pt.relay&&await this.restartToComplete();const s={method:$o(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(n=i==null?void 0:i.internal)==null?void 0:n.throwOnFailedPublish;try{const a=this.getSubscriptionId(t);if((i==null?void 0:i.transportType)===Pt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(l=>this.logger.warn(l))},Ee.toMiliseconds(Ee.ONE_SECOND)),a;const f=new Promise(async l=>{const h=w=>{w.topic===t&&(this.events.removeListener(Jr.created,h),l(w.id))};this.events.on(Jr.created,h);try{const w=await Rn(new Promise((E,_)=>{this.relayer.request(s).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),_(A)}).then(E)}),this.initialSubscribeTimeout,`Subscribing to ${t} failed, please try again`);this.events.removeListener(Jr.created,h),l(w)}catch{}}),c=await Rn(f,this.subscribeTimeout,`Subscribing to ${t} failed, please try again`);if(!c&&o)throw new Error(`Subscribing to ${t} failed, please try again`);return c?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ur.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,i={method:$o(r.protocol).batchSubscribe,params:{topics:t.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await Rn(new Promise(n=>{this.relayer.request(i).catch(s=>this.logger.warn(s)).then(n)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ur.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const r=t[0].relay,i={method:$o(r.protocol).batchFetchMessages,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let n;try{n=await await Rn(new Promise((s,o)=>{this.relayer.request(i).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ur.connection_stalled)}return n}rpcUnsubscribe(t,r,i){const n={method:$o(i.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(t,r){this.setSubscription(t,Nu(Io({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,Io({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,i),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r)}addSubscription(t,r){this.subscriptions.set(t,Io({},r)),this.topicMap.set(r.topic,t),this.events.emit(Jr.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:i}=Me("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(i)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const i=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(i.topic,t),this.events.emit(Jr.deleted,Nu(Io({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Jr.sync)}async onRestart(){if(this.cached.length){const t=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<r;i++){const n=t.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Jr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=Me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){t.length&&(await this.rpcBatchSubscribe(t),this.onBatchSubscribe(t.map(r=>Nu(Io({},r),{id:this.getSubscriptionId(r.topic)}))))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const r=await this.rpcBatchFetchMessages(t);r&&r.messages&&(await s7(Ee.toMiliseconds(Ee.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen()}getSubscriptionId(t){return dn(t+this.clientId)}};var zA=Object.defineProperty,rg=Object.getOwnPropertySymbols,KA=Object.prototype.hasOwnProperty,VA=Object.prototype.propertyIsEnumerable,ig=(e,t,r)=>t in e?zA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ng=(e,t)=>{for(var r in t||(t={}))KA.call(t,r)&&ig(e,r,t[r]);if(rg)for(var r of rg(t))VA.call(t,r)&&ig(e,r,t[r]);return e};let HA=class extends E6{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Ci.EventEmitter,this.name=TS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1,this.heartBeatTimeout=Ee.toMiliseconds(Ee.THIRTY_SECONDS+Ee.FIVE_SECONDS),this.requestsInFlight=[],this.connectTimeout=Ee.toMiliseconds(Ee.ONE_SECOND*15),this.request=async r=>{var i,n;this.logger.debug("Publishing Request Payload");const s=r.id||as().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - publishing...");const o=`${s}:${((n=r.params)==null?void 0:n.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}},this.resetPingTimeout=()=>{if(Sf())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,n;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(n=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||n.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r,r==null?void 0:r.message)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(ur.connect)},this.onDisconnectHandler=()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.fatal(r,`Fatal socket error: ${r==null?void 0:r.message}`),this.events.emit(ur.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(oi.payload,this.onPayloadHandler),this.provider.on(oi.connect,this.onConnectHandler),this.provider.on(oi.disconnect,this.onDisconnectHandler),this.provider.on(oi.error,this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Tr(t.logger,this.name):jf(Kl({level:t.logger||CS})),this.messages=new OA(this.logger,t.core),this.subscriber=new jA(this,this.logger),this.publisher=new NA(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||Dv,this.projectId=t.projectId,K9()?this.packageName=G0():V9()&&(this.bundleId=G0()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(t){this.logger.warn(t,t==null?void 0:t.message)}}get context(){return jr(this.logger)}get connected(){var t,r,i;return((i=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===1}get connecting(){var t,r,i;return((i=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===0}async publish(t,r,i){this.isInitialized(),await this.publisher.publish(t,r,i),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now(),transportType:Pt.relay})}async subscribe(t,r){var i,n,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish)>"u"?!0:(n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"",f;const c=l=>{l.topic===t&&(this.subscriber.off(Jr.created,c),f())};return await Promise.all([new Promise(l=>{f=l,this.subscriber.on(Jr.created,c)}),new Promise(async(l,h)=>{a=await this.subscriber.subscribe(t,ng({internal:{throwOnFailedPublish:o}},r)).catch(w=>{o&&h(w)})||a,l()})]),a}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Rn(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,i)=>{await this.connect(t).then(r).catch(i).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(t){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Rp())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if((t==null?void 0:t.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=t.sort((i,n)=>i.publishedAt-n.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const i of r)try{await this.onMessageEvent(i)}catch(n){this.logger.warn(n,"Error while processing batch message event: "+(n==null?void 0:n.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(t,r){const{topic:i}=t;if(!r.sessionExists){const n=rr(Ee.FIVE_MINUTES),s={topic:i,expiry:n,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,s)}this.events.emit(ur.message,t),await this.recordMessageEvent(t)}async connect(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(i,n)=>{const s=()=>{n(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(oi.disconnect,s),await Rn(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{n(o)}).finally(()=>{this.provider.off(oi.disconnect,s),clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),await new Promise(async(o,a)=>{const f=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(oi.disconnect,f),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(oi.disconnect,f)})}),this.hasExperiencedNetworkDisruption=!1,i()})}catch(i){await this.subscriber.stop();const n=i;this.logger.warn({},n.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(i=>setTimeout(i,Ee.toMiliseconds(r*1))),r++}}startPingTimeout(){var t,r,i,n,s;if(Sf())try{(r=(t=this.provider)==null?void 0:t.connection)!=null&&r.socket&&((s=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new bS(new wS(J9({sdkVersion:wl,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:i}=t;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(t){const{topic:r,message:i}=t;if(!i||i.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.warn(`Ignoring message for non-subscribed topic ${r}`),!0;const n=this.messages.has(r,i);return n&&this.logger.warn(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),bh(t)){if(!t.method.endsWith(NS))return;const r=t.params,{topic:i,message:n,publishedAt:s,attestation:o}=r.data,a={topic:i,message:n,publishedAt:s,transportType:Pt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(ng({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(t),await this.onMessageEvent(a)}else tc(t)&&this.events.emit(ur.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(ur.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=ph(t.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(oi.payload,this.onPayloadHandler),this.provider.off(oi.connect,this.onConnectHandler),this.provider.off(oi.disconnect,this.onDisconnectHandler),this.provider.off(oi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await Rp();WE(async r=>{t!==r&&(t=r,r?await this.transportOpen().catch(i=>this.logger.error(i,i==null?void 0:i.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),clearTimeout(this.pingTimeout),this.events.emit(ur.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||this.connectPromise||(this.reconnectTimeout=setTimeout(async()=>{clearTimeout(this.reconnectTimeout),await this.transportOpen().catch(t=>this.logger.error(t,t==null?void 0:t.message))},Ee.toMiliseconds(FS))))}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.transportOpen()}};var WA=Object.defineProperty,sg=Object.getOwnPropertySymbols,GA=Object.prototype.hasOwnProperty,JA=Object.prototype.propertyIsEnumerable,og=(e,t,r)=>t in e?WA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ag=(e,t)=>{for(var r in t||(t={}))GA.call(t,r)&&og(e,r,t[r]);if(sg)for(var r of sg(t))JA.call(t,r)&&og(e,r,t[r]);return e};let ws=class extends S6{constructor(t,r,i,n=Zi,s=void 0){super(t,r,i,n),this.core=t,this.logger=r,this.name=i,this.map=new Map,this.version=LS,this.cached=[],this.initialized=!1,this.storagePrefix=Zi,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Rr(o)?this.map.set(this.getKey(o),o):SE(o)?this.map.set(o.id,o):ME(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(f=>ES(a[f],o[f]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const f=ag(ag({},this.getData(o)),a);this.map.set(o,f),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())},this.logger=Tr(r,this.name),this.storagePrefix=n,this.getKey=s}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){if(this.recentlyDeleted.includes(t)){const{message:n}=Me("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}const{message:i}=Me("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=Me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}},YA=class{constructor(t,r){this.core=t,this.logger=r,this.name=jS,this.version=zS,this.events=new j1,this.initialized=!1,this.storagePrefix=Zi,this.ignoredPayloadTypes=[vn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const n=vl(),s=await this.core.crypto.setSymKey(n),o=rr(Ee.FIVE_MINUTES),a={protocol:Iv},f={topic:s,expiry:o,relay:a,active:!1,methods:i==null?void 0:i.methods},c=Sp({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:n,relay:a,expiryTimestamp:o,methods:i==null?void 0:i.methods});return this.events.emit(ss.create,f),this.core.expirer.set(s,o),await this.pairings.set(s,f),await this.core.relayer.subscribe(s,{transportType:i==null?void 0:i.transportType}),{topic:s,uri:c}},this.pair=async i=>{this.isInitialized();const n=this.core.eventClient.createEvent({properties:{topic:i==null?void 0:i.uri,trace:[Ki.pairing_started]}});this.isValidPair(i,n);const{topic:s,symKey:o,relay:a,expiryTimestamp:f,methods:c}=Ep(i.uri);n.props.properties.topic=s,n.addTrace(Ki.pairing_uri_validation_success),n.addTrace(Ki.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(s)){if(l=this.pairings.get(s),n.addTrace(Ki.existing_pairing),l.active)throw n.setError(un.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);n.addTrace(Ki.pairing_not_expired)}const h=f||rr(Ee.FIVE_MINUTES),w={topic:s,relay:a,expiry:h,active:!1,methods:c};this.core.expirer.set(s,h),await this.pairings.set(s,w),n.addTrace(Ki.store_new_pairing),i.activatePairing&&await this.activate({topic:s}),this.events.emit(ss.create,w),n.addTrace(Ki.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),n.addTrace(Ki.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{n.setError(un.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(E){throw n.setError(un.subscribe_pairing_topic_failure),E}return n.addTrace(Ki.subscribe_pairing_topic_success),w},this.activate=async({topic:i})=>{this.isInitialized();const n=rr(Ee.FIVE_MINUTES);this.core.expirer.set(i,n),await this.pairings.update(i,{active:!0,expiry:n})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:n}=i;if(this.pairings.keys.includes(n)){const s=await this.sendRequest(n,"wc_pairingPing",{}),{done:o,resolve:a,reject:f}=is();this.events.once(ot("pairing_ping",s),({error:c})=>{c?f(c):a()}),await o()}},this.updateExpiry=async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})},this.updateMetadata=async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",Dt("USER_DISCONNECTED")),await this.deletePairing(n))},this.formatUriFromPairing=i=>{this.isInitialized();const{topic:n,relay:s,expiry:o,methods:a}=i,f=this.core.crypto.keychain.get(n);return Sp({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:f,relay:s,expiryTimestamp:o,methods:a})},this.sendRequest=async(i,n,s)=>{const o=fs(n,s),a=await this.core.crypto.encode(i,o),f=Mo[n].req;return this.core.history.set(i,o),this.core.relayer.publish(i,a,f),o.id},this.sendResult=async(i,n,s)=>{const o=ph(i,s),a=await this.core.crypto.encode(n,o),f=await this.core.history.get(n,i),c=Mo[f.request.method].res;await this.core.relayer.publish(n,a,c),await this.core.history.resolve(o)},this.sendError=async(i,n,s)=>{const o=gh(i,s),a=await this.core.crypto.encode(n,o),f=await this.core.history.get(n,i),c=Mo[f.request.method]?Mo[f.request.method].res:Mo.unregistered_method.res;await this.core.relayer.publish(n,a,c),await this.core.history.resolve(o)},this.deletePairing=async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Dt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(n=>On(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))},this.onRelayEventRequest=i=>{const{topic:n,payload:s}=i;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(n,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,s);default:return this.onUnknownRpcMethodRequest(n,s)}},this.onRelayEventResponse=async i=>{const{topic:n,payload:s}=i,o=(await this.core.history.get(n,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(n,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(i,n)=>{const{id:s}=n;try{this.isValidPing({topic:i}),await this.sendResult(s,i,!0),this.events.emit(ss.ping,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onPairingPingResponse=(i,n)=>{const{id:s}=n;setTimeout(()=>{Hi(n)?this.events.emit(ot("pairing_ping",s),{}):fi(n)&&this.events.emit(ot("pairing_ping",s),{error:n.error})},500)},this.onPairingDeleteRequest=async(i,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(ss.delete,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(i,n)=>{const{id:s,method:o}=n;try{if(this.registeredMethods.includes(o))return;const a=Dt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,i,a),this.logger.error(a)}catch(a){await this.sendError(s,i,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Dt("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,n)=>{var s;if(!kr(i)){const{message:a}=Me("MISSING_OR_INVALID",`pair() params: ${i}`);throw n.setError(un.malformed_pairing_uri),new Error(a)}if(!EE(i.uri)){const{message:a}=Me("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw n.setError(un.malformed_pairing_uri),new Error(a)}const o=Ep(i==null?void 0:i.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=Me("MISSING_OR_INVALID","pair() uri#relay-protocol");throw n.setError(un.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Me("MISSING_OR_INVALID","pair() uri#symKey");throw n.setError(un.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Ee.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){n.setError(un.pairing_expired);const{message:a}=Me("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}},this.isValidPing=async i=>{if(!kr(i)){const{message:s}=Me("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidDisconnect=async i=>{if(!kr(i)){const{message:s}=Me("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async i=>{if(!Wt(i,!1)){const{message:n}=Me("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){const{message:n}=Me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(On(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:n}=Me("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}},this.core=t,this.logger=Tr(r,this.name),this.pairings=new ws(this.core,this.logger,this.name,this.storagePrefix)}get context(){return jr(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(ur.message,async t=>{const{topic:r,message:i,transportType:n}=t;if(!this.pairings.keys.includes(r)||n===Pt.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(r,i);try{bh(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):tc(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(ai.expired,async t=>{const{topic:r}=Gb(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(ss.expire,{topic:r}))})}},ZA=class extends w6{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new Ci.EventEmitter,this.name=KS,this.version=VS,this.cached=[],this.initialized=!1,this.storagePrefix=Zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,n,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:s}),this.records.has(n.id))return;const o={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:s,expiry:rr(Ee.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Si.created,o)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=fi(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.persist(),this.events.emit(Si.updated,n))},this.get=async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n)),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(s=>{if(s.topic===i){if(typeof n<"u"&&s.id!==n)return;this.records.delete(s.id),this.events.emit(Si.deleted,s)}}),this.persist()},this.exists=async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Tr(r,this.name)}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:fs(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(i)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:i}=Me("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Si.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=Me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Si.created,t=>{const r=Si.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})}),this.events.on(Si.updated,t=>{const r=Si.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})}),this.events.on(Si.deleted,t=>{const r=Si.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})}),this.core.heartbeat.on(so.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(r=>{Ee.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Si.deleted,r,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}},XA=class extends A6{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new Ci.EventEmitter,this.name=HS,this.version=WS,this.cached=[],this.initialized=!1,this.storagePrefix=Zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();const s=this.formatTarget(i),o={target:s,expiry:n};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(ai.created,{target:s,expiration:o})},this.get=i=>{this.isInitialized();const n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){const n=this.formatTarget(i),s=this.getExpiration(n);this.expirations.delete(n),this.events.emit(ai.deleted,{target:n,expiration:s})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Tr(r,this.name)}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return Y9(t);if(typeof t=="number")return Z9(t);const{message:r}=Me("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ai.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=Me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:i}=Me("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(i),new Error(i)}return r}checkExpiry(t,r){const{expiry:i}=r;Ee.toMiliseconds(i)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(ai.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(so.pulse,()=>this.checkExpirations()),this.events.on(ai.created,t=>{const r=ai.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(ai.expired,t=>{const r=ai.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(ai.deleted,t=>{const r=ai.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}},QA=class extends I6{constructor(t,r,i){super(t,r,i),this.core=t,this.logger=r,this.store=i,this.name=GS,this.verifyUrlV3=YS,this.storagePrefix=Zi,this.version=Av,this.init=async()=>{var n;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ee.toMiliseconds((n=this.publicKey)==null?void 0:n.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async n=>{if(!aa()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=n,f=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const c=hs.getDocument(),l=this.startAbortTimer(Ee.ONE_SECOND*5),h=await new Promise((w,E)=>{const _=()=>{window.removeEventListener("message",R),c.body.removeChild(A),E("attestation aborted")};this.abortController.signal.addEventListener("abort",_);const A=c.createElement("iframe");A.src=f,A.style.display="none",A.addEventListener("error",_,{signal:this.abortController.signal});const R=N=>{if(N.data&&typeof N.data=="string")try{const q=JSON.parse(N.data);if(q.type==="verify_attestation"){if(al(q.attestation).payload.id!==o)return;clearInterval(l),c.body.removeChild(A),this.abortController.signal.removeEventListener("abort",_),window.removeEventListener("message",R),w(q.attestation===null?"":q.attestation)}}catch(q){this.logger.warn(q)}};c.body.appendChild(A),window.addEventListener("message",R,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(c){this.logger.warn(c)}return""},this.resolve=async n=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=n;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(al(s).payload.id!==a)return;const c=await this.isValidJwtAttestation(s);if(c){if(!c.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return c}}if(!o)return;const f=this.getVerifyUrl(n==null?void 0:n.verifyUrl);return this.fetchAttestation(o,f)},this.fetchAttestation=async(n,s)=>{this.logger.debug(`resolving attestation: ${n} from url: ${s}`);const o=this.startAbortTimer(Ee.ONE_SECOND*5),a=await fetch(`${s}/attestation/${n}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0},this.getVerifyUrl=n=>{let s=n||jo;return ZS.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${jo}`),s=jo),s},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const n=this.startAbortTimer(Ee.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(n),await s.json()}catch(n){this.logger.warn(n)}},this.persistPublicKey=async n=>{this.logger.debug("persisting public key to local storage",n),await this.store.setItem(this.storeKey,n),this.publicKey=n},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async n=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(n,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(n,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const n=await this.fetchPromise;return this.fetchPromise=void 0,n},this.validateAttestation=(n,s)=>{const o=tE(n,s.publicKey),a={hasExpired:Ee.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}},this.logger=Tr(r,this.name),this.abortController=new AbortController,this.isDevEnv=sh(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return jr(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ee.toMiliseconds(t))}},eI=class extends D6{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.context=XS,this.registerDeviceToken=async i=>{const{clientId:n,token:s,notificationType:o,enableEncrypted:a=!1}=i,f=`${QS}/${this.projectId}/clients`;await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:o,token:s,always_raw:a})})},this.logger=Tr(r,this.context)}};var tI=Object.defineProperty,fg=Object.getOwnPropertySymbols,rI=Object.prototype.hasOwnProperty,iI=Object.prototype.propertyIsEnumerable,cg=(e,t,r)=>t in e?tI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Do=(e,t)=>{for(var r in t||(t={}))rI.call(t,r)&&cg(e,r,t[r]);if(fg)for(var r of fg(t))iI.call(t,r)&&cg(e,r,t[r]);return e};let nI=class extends O6{constructor(t,r,i=!0){super(t,r,i),this.core=t,this.logger=r,this.context=tM,this.storagePrefix=Zi,this.storageVersion=eM,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!sh())try{const n={eventId:Y0(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Kb(this.core.relayer.protocol,this.core.relayer.version,wl)}}};await this.sendEvent([n])}catch(n){this.logger.warn(n)}},this.createEvent=n=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:f}}=n,c=Y0(),l=this.core.projectId||"",h=Date.now(),w=Do({eventId:c,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:f}},bundleId:l,domain:this.getAppDomain()},this.setMethods(c));return this.telemetryEnabled&&(this.events.set(c,w),this.shouldPersist=!0),w},this.getEvent=n=>{const{eventId:s,topic:o}=n;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(f=>f.props.properties.topic===o);if(a)return Do(Do({},a),this.setMethods(a.eventId))},this.deleteEvent=n=>{const{eventId:s}=n;this.events.delete(s),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(so.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(n=>{Ee.fromMiliseconds(Date.now())-Ee.fromMiliseconds(n.timestamp)>rM&&(this.events.delete(n.eventId),this.shouldPersist=!0)})})},this.setMethods=n=>({addTrace:s=>this.addTrace(n,s),setError:s=>this.setError(n,s)}),this.addTrace=(n,s)=>{const o=this.events.get(n);o&&(o.props.properties.trace.push(s),this.events.set(n,o),this.shouldPersist=!0)},this.setError=(n,s)=>{const o=this.events.get(n);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(n,o),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const n=await this.core.storage.getItem(this.storageKey)||[];if(!n.length)return;n.forEach(s=>{this.events.set(s.eventId,Do(Do({},s),this.setMethods(s.eventId)))})}catch(n){this.logger.warn(n)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const n=[];for(const[s,o]of this.events)o.props.type&&n.push(o);if(n.length!==0)try{if((await this.sendEvent(n)).ok)for(const s of n)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}},this.sendEvent=async n=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${iM}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${wl}${s}`,{method:"POST",body:JSON.stringify(n)})},this.getAppDomain=()=>zb().url,this.logger=Tr(r,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var sI=Object.defineProperty,ug=Object.getOwnPropertySymbols,oI=Object.prototype.hasOwnProperty,aI=Object.prototype.propertyIsEnumerable,lg=(e,t,r)=>t in e?sI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hg=(e,t)=>{for(var r in t||(t={}))oI.call(t,r)&&lg(e,r,t[r]);if(ug)for(var r of ug(t))aI.call(t,r)&&lg(e,r,t[r]);return e};let fI=class Uv extends y6{constructor(t){var r;super(t),this.protocol=Mv,this.version=Av,this.name=yl,this.events=new Ci.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.dispatchEnvelope=({topic:o,message:a,sessionExists:f})=>{if(!o||!a)return;const c={topic:o,message:a,publishedAt:Date.now(),transportType:Pt.link_mode};this.relayer.onLinkMessageEvent(c,{sessionExists:f})},this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||Dv,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const i=Kl({level:typeof(t==null?void 0:t.logger)=="string"&&t.logger?t.logger:SS.logger,name:yl}),{logger:n,chunkLoggerController:s}=m6({opts:i,maxSizeInBytes:t==null?void 0:t.maxLogBlobSizeInBytes,loggerOverride:t==null?void 0:t.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Tr(n,this.name),this.heartbeat=new _3,this.crypto=new DA(this,this.logger,t==null?void 0:t.keychain),this.history=new ZA(this,this.logger),this.expirer=new XA(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new t6(hg(hg({},MS),t==null?void 0:t.storageOptions)),this.relayer=new HA({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new YA(this,this.logger),this.verify=new QA(this,this.logger,this.storage),this.echoClient=new eI(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new nI(this,this.logger,t==null?void 0:t.telemetryEnabled)}static async init(t){const r=new Uv(t);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(qS,i),r}get context(){return jr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(t){this.linkModeSupportedApps.includes(t)||(this.linkModeSupportedApps.push(t),await this.storage.setItem(zp,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(zp)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};const Df=fI,kv="wc",jv=2,zv="client",vh=`${kv}@${jv}:${zv}:`,Fu={name:zv,logger:"error"},dg="WALLETCONNECT_DEEPLINK_CHOICE",cI="proposal",uI="Proposal expired",lI="session",Fs=Ee.SEVEN_DAYS,hI="engine",ar={wc_sessionPropose:{req:{ttl:Ee.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ee.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ee.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ee.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ee.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1119}}},Lu={min:Ee.FIVE_MINUTES,max:Ee.SEVEN_DAYS},ji={idle:"IDLE",active:"ACTIVE"},dI="request",pI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],gI="wc",bI="auth",vI="authKeys",mI="pairingTopics",yI="requests",ic=`${gI}@${1.5}:${bI}:`,of=`${ic}:PUB_KEY`;var wI=Object.defineProperty,_I=Object.defineProperties,xI=Object.getOwnPropertyDescriptors,pg=Object.getOwnPropertySymbols,EI=Object.prototype.hasOwnProperty,SI=Object.prototype.propertyIsEnumerable,gg=(e,t,r)=>t in e?wI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Kt=(e,t)=>{for(var r in t||(t={}))EI.call(t,r)&&gg(e,r,t[r]);if(pg)for(var r of pg(t))SI.call(t,r)&&gg(e,r,t[r]);return e},Ai=(e,t)=>_I(e,xI(t));class MI extends $6{constructor(t){super(t),this.name=hI,this.events=new j1,this.initialized=!1,this.requestQueue={state:ji.idle,queue:[]},this.sessionRequestQueue={state:ji.idle,queue:[]},this.requestQueueDelay=Ee.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ar)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ee.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=Ai(Kt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:f}=i;let c=n,l,h=!1;try{if(c){const P=this.client.core.pairing.pairings.get(c);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=P.active}}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),P}if(!c||!h){const{topic:P,uri:F}=await this.client.core.pairing.create();c=P,l=F}if(!c){const{message:P}=Me("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(P)}const w=await this.client.core.crypto.generateKeyPair(),E=ar.wc_sessionPropose.req.ttl||Ee.FIVE_MINUTES,_=rr(E),A=Kt({requiredNamespaces:s,optionalNamespaces:o,relays:f??[{protocol:Iv}],proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:_,pairingTopic:c},a&&{sessionProperties:a}),{reject:R,resolve:N,done:q}=is(E,uI);this.events.once(ot("session_connect"),async({error:P,session:F})=>{if(P)R(P);else if(F){F.self.publicKey=w;const L=Ai(Kt({},F),{pairingTopic:A.pairingTopic,requiredNamespaces:A.requiredNamespaces,optionalNamespaces:A.optionalNamespaces,transportType:Pt.relay});await this.client.session.set(F.topic,L),await this.setExpiry(F.topic,F.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:F.peer.metadata}),this.cleanupDuplicatePairings(L),N(L)}});const U=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:A,throwOnFailedPublish:!0});return await this.setProposal(U,Kt({id:U},A)),{uri:l,approval:q}},this.pair=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async r=>{var i,n,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(i=r==null?void 0:r.id)==null?void 0:i.toString(),trace:[Mi.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(V){throw o.setError(es.no_internet_connection),V}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(V){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(es.proposal_not_found),V}try{await this.isValidApprove(r)}catch(V){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(es.session_approve_namespace_validation_failure),V}const{id:a,relayProtocol:f,namespaces:c,sessionProperties:l,sessionConfig:h}=r,w=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:E,proposer:_,requiredNamespaces:A,optionalNamespaces:R}=w;let N=(n=this.client.core.eventClient)==null?void 0:n.getEvent({topic:E});N||(N=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Mi.session_approve_started,properties:{topic:E,trace:[Mi.session_approve_started,Mi.session_namespaces_validation_success]}}));const q=await this.client.core.crypto.generateKeyPair(),U=_.publicKey,P=await this.client.core.crypto.generateSharedKey(q,U),F=Kt(Kt({relay:{protocol:f??"irn"},namespaces:c,controller:{publicKey:q,metadata:this.client.metadata},expiry:rr(Fs)},l&&{sessionProperties:l}),h&&{sessionConfig:h}),L=Pt.relay;N.addTrace(Mi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:L})}catch(V){throw N.setError(es.subscribe_session_topic_failure),V}N.addTrace(Mi.subscribe_session_topic_success);const K=Ai(Kt({},F),{topic:P,requiredNamespaces:A,optionalNamespaces:R,pairingTopic:E,acknowledged:!1,self:F.controller,peer:{publicKey:_.publicKey,metadata:_.metadata},controller:q,transportType:Pt.relay});await this.client.session.set(P,K),N.addTrace(Mi.store_session);try{N.addTrace(Mi.publishing_session_settle),await this.sendRequest({topic:P,method:"wc_sessionSettle",params:F,throwOnFailedPublish:!0}).catch(V=>{throw N==null||N.setError(es.session_settle_publish_failure),V}),N.addTrace(Mi.session_settle_publish_success),N.addTrace(Mi.publishing_session_approve),await this.sendResult({id:a,topic:E,result:{relay:{protocol:f??"irn"},responderPublicKey:q},throwOnFailedPublish:!0}).catch(V=>{throw N==null||N.setError(es.session_approve_publish_failure),V}),N.addTrace(Mi.session_approve_publish_success)}catch(V){throw this.client.logger.error(V),this.client.session.delete(P,Dt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),V}return this.client.core.eventClient.deleteEvent({eventId:N.eventId}),await this.client.core.pairing.updateMetadata({topic:E,metadata:_.metadata}),await this.client.proposal.delete(a,Dt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:E}),await this.setExpiry(P,rr(Fs)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}},this.reject=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:i,reason:n}=r;let s;try{s=this.client.proposal.get(i).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),o}s&&(await this.sendError({id:i,topic:s,error:n,rpcOpts:ar.wc_sessionPropose.reject}),await this.client.proposal.delete(i,Dt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:i,namespaces:n}=r,{done:s,resolve:o,reject:a}=is(),f=hn(),c=as().toString(),l=this.client.session.get(i).namespaces;return this.events.once(ot("session_update",f),({error:h})=>{h?a(h):o()}),await this.client.session.update(i,{namespaces:n}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:f,relayRpcId:c}).catch(h=>{this.client.logger.error(h),this.client.session.update(i,{namespaces:l}),a(h)}),{acknowledged:s}},this.extend=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(f){throw this.client.logger.error("extend() -> isValidExtend() failed"),f}const{topic:i}=r,n=hn(),{done:s,resolve:o,reject:a}=is();return this.events.once(ot("session_extend",n),({error:f})=>{f?a(f):o()}),await this.setExpiry(i,rr(Fs)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch(f=>{a(f)}),{acknowledged:s}},this.request=async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(_){throw this.client.logger.error("request() -> isValidRequest() failed"),_}const{chainId:i,request:n,topic:s,expiry:o=ar.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Pt.relay&&await this.confirmOnlineStateOrThrow();const f=hn(),c=as().toString(),{done:l,resolve:h,reject:w}=is(o,"Request expired. Please try again.");this.events.once(ot("session_request",f),({error:_,result:A})=>{_?w(_):h(A)});const E=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);return E?(await this.sendRequest({clientRpcId:f,relayRpcId:c,topic:s,method:"wc_sessionRequest",params:{request:Ai(Kt({},n),{expiryTimestamp:rr(o)}),chainId:i},expiry:o,throwOnFailedPublish:!0,appLink:E}).catch(_=>w(_)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:f}),await l()):await Promise.all([new Promise(async _=>{await this.sendRequest({clientRpcId:f,relayRpcId:c,topic:s,method:"wc_sessionRequest",params:{request:Ai(Kt({},n),{expiryTimestamp:rr(o)}),chainId:i},expiry:o,throwOnFailedPublish:!0}).catch(A=>w(A)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:f}),_()}),new Promise(async _=>{var A;if(!((A=a.sessionConfig)!=null&&A.disableDeepLink)){const R=await t7(this.client.core.storage,dg);await X9({id:f,topic:s,wcDeepLink:R})}_()}),l()]).then(_=>_[2])},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:i,response:n}=r,{id:s}=n,o=this.client.session.get(i);o.transportType===Pt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Hi(n)?await this.sendResult({id:s,topic:i,result:n.result,throwOnFailedPublish:!0,appLink:a}):fi(n)&&await this.sendError({id:s,topic:i,error:n.error,appLink:a}),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}const{topic:i}=r;if(this.client.session.keys.includes(i)){const n=hn(),s=as().toString(),{done:o,resolve:a,reject:f}=is();this.events.once(ot("session_ping",n),({error:c})=>{c?f(c):a()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:n,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(i)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:i}))},this.emit=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:i,event:n,chainId:s}=r,o=as().toString(),a=hn();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:n,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})},this.disconnect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:i}=r;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:Dt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:n}=Me("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(n)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>_E(i,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(r,i)=>{var n;this.isInitialized(),this.isValidAuthenticate(r);const s=i&&this.client.core.linkModeSupportedApps.includes(i)&&((n=this.client.metadata.redirect)==null?void 0:n.linkMode),o=s?Pt.link_mode:Pt.relay;o===Pt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:f="",uri:c,domain:l,nonce:h,type:w,exp:E,nbf:_,methods:A=[],expiry:R}=r,N=[...r.resources||[]],{topic:q,uri:U}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:q,uri:U}});const P=await this.client.core.crypto.generateKeyPair(),F=sf(P);if(await Promise.all([this.client.auth.authKeys.set(of,{responseTopic:F,publicKey:P}),this.client.auth.pairingTopics.set(F,{topic:F,pairingTopic:q})]),await this.client.core.relayer.subscribe(F,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${q}`),A.length>0){const{namespace:M}=rf(a[0]);let x=V7(M,"request",A);nf(N)&&(x=W7(x,N.pop())),N.push(x)}const L=R&&R>ar.wc_sessionAuthenticate.req.ttl?R:ar.wc_sessionAuthenticate.req.ttl,K={authPayload:{type:w??"caip122",chains:a,statement:f,aud:c,domain:l,version:"1",nonce:h,iat:new Date().toISOString(),exp:E,nbf:_,resources:N},requester:{publicKey:P,metadata:this.client.metadata},expiryTimestamp:rr(L)},V={eip155:{chains:a,methods:[...new Set(["personal_sign",...A])],events:["chainChanged","accountsChanged"]}},W={requiredNamespaces:{},optionalNamespaces:V,relays:[{protocol:"irn"}],pairingTopic:q,proposer:{publicKey:P,metadata:this.client.metadata},expiryTimestamp:rr(ar.wc_sessionPropose.req.ttl)},{done:Q,resolve:C,reject:g}=is(L,"Request expired"),p=async({error:M,session:x})=>{if(this.events.off(ot("session_request",d),u),M)g(M);else if(x){x.self.publicKey=P,await this.client.session.set(x.topic,x),await this.setExpiry(x.topic,x.expiry),q&&await this.client.core.pairing.updateMetadata({topic:q,metadata:x.peer.metadata});const b=this.client.session.get(x.topic);await this.deleteProposal(v),C({session:b})}},u=async M=>{var x,b,S;if(await this.deletePendingAuthRequest(d,{message:"fulfilled",code:0}),M.error){const te=Dt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===te.code?void 0:(this.events.off(ot("session_connect"),p),g(M.error.message))}await this.deleteProposal(v),this.events.off(ot("session_connect"),p);const{cacaos:m,responder:$}=M.result,ee=[],O=[];for(const te of m){await np({cacao:te,projectId:this.client.core.projectId})||(this.client.logger.error(te,"Signature verification failed"),g(Dt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ne}=te,ge=nf(ne.resources),ve=[ll(ne.iss)],B=Mf(ne.iss);if(ge){const z=sp(ge),G=op(ge);ee.push(...z),ve.push(...G)}for(const z of ve)O.push(`${z}:${B}`)}const H=await this.client.core.crypto.generateSharedKey(P,$.publicKey);let X;ee.length>0&&(X={topic:H,acknowledged:!0,self:{publicKey:P,metadata:this.client.metadata},peer:$,controller:$.publicKey,expiry:rr(Fs),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:q,namespaces:Dp([...new Set(ee)],[...new Set(O)]),transportType:o},await this.client.core.relayer.subscribe(H,{transportType:o}),await this.client.session.set(H,X),q&&await this.client.core.pairing.updateMetadata({topic:q,metadata:$.metadata}),X=this.client.session.get(H)),(x=this.client.metadata.redirect)!=null&&x.linkMode&&(b=$.metadata.redirect)!=null&&b.linkMode&&(S=$.metadata.redirect)!=null&&S.universal&&i&&(this.client.core.addLinkModeSupportedApp($.metadata.redirect.universal),this.client.session.update(H,{transportType:Pt.link_mode})),C({auths:m,session:X})},d=hn(),v=hn();this.events.once(ot("session_connect"),p),this.events.once(ot("session_request",d),u);let y;try{if(s){const M=fs("wc_sessionAuthenticate",K,d);this.client.core.history.set(q,M);const x=await this.client.core.crypto.encode("",M,{type:la,encoding:Eo});y=Ua(i,q,x)}else await Promise.all([this.sendRequest({topic:q,method:"wc_sessionAuthenticate",params:K,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:d}),this.sendRequest({topic:q,method:"wc_sessionPropose",params:W,expiry:ar.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:v})])}catch(M){throw this.events.off(ot("session_connect"),p),this.events.off(ot("session_request",d),u),M}return await this.setProposal(v,Kt({id:v},W)),await this.setAuthRequest(d,{request:Ai(Kt({},K),{verifyContext:{}}),pairingTopic:q,transportType:o}),{uri:y??U,response:Q}},this.approveSessionAuthenticate=async r=>{const{id:i,auths:n}=r,s=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[ts.authenticated_session_approve_started]}});try{this.isInitialized()}catch(R){throw s.setError(Ao.no_internet_connection),R}const o=this.getPendingAuthRequest(i);if(!o)throw s.setError(Ao.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const a=o.transportType||Pt.relay;a===Pt.relay&&await this.confirmOnlineStateOrThrow();const f=o.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),l=sf(f),h={type:vn,receiverPublicKey:f,senderPublicKey:c},w=[],E=[];for(const R of n){if(!await np({cacao:R,projectId:this.client.core.projectId})){s.setError(Ao.invalid_cacao);const F=Dt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:l,error:F,encodeOpts:h}),new Error(F.message)}s.addTrace(ts.cacaos_verified);const{p:N}=R,q=nf(N.resources),U=[ll(N.iss)],P=Mf(N.iss);if(q){const F=sp(q),L=op(q);w.push(...F),U.push(...L)}for(const F of U)E.push(`${F}:${P}`)}const _=await this.client.core.crypto.generateSharedKey(c,f);s.addTrace(ts.create_authenticated_session_topic);let A;if((w==null?void 0:w.length)>0){A={topic:_,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:f,metadata:o.requester.metadata},controller:f,expiry:rr(Fs),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Dp([...new Set(w)],[...new Set(E)]),transportType:a},s.addTrace(ts.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:a})}catch(R){throw s.setError(Ao.subscribe_authenticated_session_topic_failure),R}s.addTrace(ts.subscribe_authenticated_session_topic_success),await this.client.session.set(_,A),s.addTrace(ts.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(ts.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:i,result:{cacaos:n,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(R){throw s.setError(Ao.authenticated_session_approve_publish_failure),R}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:A}},this.rejectSessionAuthenticate=async r=>{this.isInitialized();const{id:i,reason:n}=r,s=this.getPendingAuthRequest(i);if(!s)throw new Error(`Could not find pending auth request with id ${i}`);s.transportType===Pt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),f=sf(o),c={type:vn,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:i,topic:f,error:n,encodeOpts:c,rpcOpts:ar.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,Dt("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();const{request:i,iss:n}=r;return iv(i,n)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const i=this.client.core.pairing.pairings.get(r.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async r=>{var i;const{topic:n,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:f}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,Dt("USER_DISCONNECTED")),this.addToRecentlyDeleted(n,"session"),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),s||this.client.core.expirer.del(n),this.client.core.storage.removeItem(dg).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===n&&this.deletePendingSessionRequest(c.id,Dt("USER_DISCONNECTED"))}),n===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=ji.idle),o&&this.client.events.emit("session_delete",{id:a,topic:n})},this.deleteProposal=async(r,i)=>{if(i)try{const n=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:n.pairingTopic});s==null||s.setError(es.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Dt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),n&&(this.sessionRequestQueue.state=ji.idle,this.client.events.emit("session_request_expire",{id:r}))},this.deletePendingAuthRequest=async(r,i,n=!1)=>{await Promise.all([this.client.auth.requests.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,i),await this.client.session.update(r,{expiry:i}))},this.setProposal=async(r,i)=>{this.client.core.expirer.set(r,rr(ar.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,i)},this.setAuthRequest=async(r,i)=>{const{request:n,pairingTopic:s,transportType:o=Pt.relay}=i;this.client.core.expirer.set(r,n.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:n.authPayload,requester:n.requester,expiryTimestamp:n.expiryTimestamp,id:r,pairingTopic:s,verifyContext:n.verifyContext,transportType:o})},this.setPendingSessionRequest=async r=>{const{id:i,topic:n,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||rr(ar.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,a),await this.client.pendingRequest.set(i,{id:i,topic:n,params:s,verifyContext:o})},this.sendRequest=async r=>{const{topic:i,method:n,params:s,expiry:o,relayRpcId:a,clientRpcId:f,throwOnFailedPublish:c,appLink:l}=r,h=fs(n,s,f);let w;const E=!!l;try{const R=E?Eo:Tn;w=await this.client.core.crypto.encode(i,h,{encoding:R})}catch(R){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),R}let _;if(pI.includes(n)){const R=dn(JSON.stringify(h)),N=dn(w);_=await this.client.core.verify.register({id:N,decryptedId:R})}const A=ar[n].req;if(A.attestation=_,o&&(A.ttl=o),a&&(A.id=a),this.client.core.history.set(i,h),E){const R=Ua(l,i,w);await global.Linking.openURL(R,this.client.name)}else{const R=ar[n].req;o&&(R.ttl=o),a&&(R.id=a),c?(R.internal=Ai(Kt({},R.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,w,R)):this.client.core.relayer.publish(i,w,R).catch(N=>this.client.logger.error(N))}return h.id},this.sendResult=async r=>{const{id:i,topic:n,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:f}=r,c=ph(i,s);let l;const h=f&&typeof(global==null?void 0:global.Linking)<"u";try{const E=h?Eo:Tn;l=await this.client.core.crypto.encode(n,c,Ai(Kt({},a||{}),{encoding:E}))}catch(E){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),E}let w;try{w=await this.client.core.history.get(n,i)}catch(E){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${i}) failed`),E}if(h){const E=Ua(f,n,l);await global.Linking.openURL(E,this.client.name)}else{const E=ar[w.request.method].res;o?(E.internal=Ai(Kt({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,l,E)):this.client.core.relayer.publish(n,l,E).catch(_=>this.client.logger.error(_))}await this.client.core.history.resolve(c)},this.sendError=async r=>{const{id:i,topic:n,error:s,encodeOpts:o,rpcOpts:a,appLink:f}=r,c=gh(i,s);let l;const h=f&&typeof(global==null?void 0:global.Linking)<"u";try{const E=h?Eo:Tn;l=await this.client.core.crypto.encode(n,c,Ai(Kt({},o||{}),{encoding:E}))}catch(E){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),E}let w;try{w=await this.client.core.history.get(n,i)}catch(E){throw this.client.logger.error(`sendError() -> history.get(${n}, ${i}) failed`),E}if(h){const E=Ua(f,n,l);await global.Linking.openURL(E,this.client.name)}else{const E=a||ar[w.request.method].res;this.client.core.relayer.publish(n,l,E)}await this.client.core.history.resolve(c)},this.cleanup=async()=>{const r=[],i=[];this.client.session.getAll().forEach(n=>{let s=!1;On(n.expiry)&&(s=!0),this.client.core.crypto.keychain.has(n.topic)||(s=!0),s&&r.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{On(n.expiryTimestamp)&&i.push(n.id)}),await Promise.all([...r.map(n=>this.deleteSession({topic:n})),...i.map(n=>this.deleteProposal(n))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===ji.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ji.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=ji.idle},this.processRequest=async r=>{const{topic:i,payload:n,attestation:s,transportType:o,encryptedId:a}=r,f=n.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:f}))switch(f){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:n,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,n);case"wc_sessionPing":return await this.onSessionPingRequest(i,n);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(i,n);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=async r=>{const{topic:i,payload:n,transportType:s}=r,o=(await this.client.core.history.get(i,n.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:i}=r,{message:n}=Me("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.shouldIgnorePairingRequest=r=>{const{topic:i,requestMethod:n}=r,s=this.expectedPairingMethodMap.get(i);return!s||s.includes(n)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async r=>{const{topic:i,payload:n,attestation:s,encryptedId:o}=r,{params:a,id:f}=n;try{const c=this.client.core.eventClient.getEvent({topic:i});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),c==null||c.setError(un.proposal_listener_not_found)),this.isValidConnect(Kt({},n.params));const l=a.expiryTimestamp||rr(ar.wc_sessionPropose.req.ttl),h=Kt({id:f,pairingTopic:i,expiryTimestamp:l},a);await this.setProposal(f,h);const w=await this.getVerifyContext({attestationId:s,hash:dn(JSON.stringify(n)),encryptedId:o,metadata:h.proposer.metadata});c==null||c.addTrace(Ki.emit_session_proposal),this.client.events.emit("session_proposal",{id:f,params:h,verifyContext:w})}catch(c){await this.sendError({id:f,topic:i,error:c,rpcOpts:ar.wc_sessionPropose.autoReject}),this.client.logger.error(c)}},this.onSessionProposeResponse=async(r,i,n)=>{const{id:s}=i;if(Hi(i)){const{result:o}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const f=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const c=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const l=await this.client.core.crypto.generateSharedKey(f,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});const h=await this.client.core.relayer.subscribe(l,{transportType:n});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(fi(i)){await this.client.proposal.delete(s,Dt("USER_DISCONNECTED"));const o=ot("session_connect");if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(ot("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(r,i)=>{const{id:n,params:s}=i;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:f,namespaces:c,sessionProperties:l,sessionConfig:h}=i.params,w=Ai(Kt(Kt({topic:r,relay:o,expiry:f,namespaces:c,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),h&&{sessionConfig:h}),{transportType:Pt.relay}),E=ot("session_connect");if(this.events.listenerCount(E)===0)throw new Error(`emitting ${E} without any listeners 997`);this.events.emit(ot("session_connect"),{session:w}),await this.sendResult({id:i.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,i)=>{const{id:n}=i;Hi(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(ot("session_approve",n),{})):fi(i)&&(await this.client.session.delete(r,Dt("USER_DISCONNECTED")),this.events.emit(ot("session_approve",n),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{const{params:n,id:s}=i;try{const o=`${r}_session_update`,a=So.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:Dt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Kt({topic:r},n));try{So.set(o,s),await this.client.session.update(r,{namespaces:n.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(f){throw So.delete(o),f}this.client.events.emit("session_update",{id:s,topic:r,params:n})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,i)=>i.toString().slice(0,-3)<r.toString().slice(0,-3),this.onSessionUpdateResponse=(r,i)=>{const{id:n}=i,s=ot("session_update",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Hi(i)?this.events.emit(ot("session_update",n),{}):fi(i)&&this.events.emit(ot("session_update",n),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{const{id:n}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,rr(Fs)),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,i)=>{const{id:n}=i,s=ot("session_extend",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Hi(i)?this.events.emit(ot("session_extend",n),{}):fi(i)&&this.events.emit(ot("session_extend",n),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{const{id:n}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(r,i)=>{const{id:n}=i,s=ot("session_ping",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{Hi(i)?this.events.emit(ot("session_ping",n),{}):fi(i)&&this.events.emit(ot("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(ur.publish,async()=>{s(await this.deleteSession({topic:r,id:n}))})}),this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Dt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async r=>{var i,n,s;const{topic:o,payload:a,attestation:f,encryptedId:c,transportType:l}=r,{id:h,params:w}=a;try{await this.isValidRequest(Kt({topic:o},w));const E=this.client.session.get(o),_=await this.getVerifyContext({attestationId:f,hash:dn(JSON.stringify(fs("wc_sessionRequest",w,h))),encryptedId:c,metadata:E.peer.metadata,transportType:l}),A={id:h,topic:o,params:w,verifyContext:_};await this.setPendingSessionRequest(A),l===Pt.link_mode&&(i=E.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((n=E.peer.metadata.redirect)==null?void 0:n.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(A):(this.addSessionRequestToSessionRequestQueue(A),this.processSessionRequestQueue())}catch(E){await this.sendError({id:h,topic:o,error:E}),this.client.logger.error(E)}},this.onSessionRequestResponse=(r,i)=>{const{id:n}=i,s=ot("session_request",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Hi(i)?this.events.emit(ot("session_request",n),{result:i.result}):fi(i)&&this.events.emit(ot("session_request",n),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{const{id:n,params:s}=i;try{const o=`${r}_session_event_${s.event.name}`,a=So.get(o);if(a&&this.isRequestOutOfSync(a,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(Kt({topic:r},s)),this.client.events.emit("session_event",{id:n,topic:r,params:s}),So.set(o,n)}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionAuthenticateResponse=(r,i)=>{const{id:n}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:i}),Hi(i)?this.events.emit(ot("session_request",n),{result:i.result}):fi(i)&&this.events.emit(ot("session_request",n),{error:i.error})},this.onSessionAuthenticateRequest=async r=>{var i;const{topic:n,payload:s,attestation:o,encryptedId:a,transportType:f}=r;try{const{requester:c,authPayload:l,expiryTimestamp:h}=s.params,w=await this.getVerifyContext({attestationId:o,hash:dn(JSON.stringify(s)),encryptedId:a,metadata:c.metadata,transportType:f}),E={requester:c,pairingTopic:n,id:s.id,authPayload:l,verifyContext:w,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:E,pairingTopic:n,transportType:f}),f===Pt.link_mode&&(i=c.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:n,params:s.params,id:s.id,verifyContext:w})}catch(c){this.client.logger.error(c);const l=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),w=this.getAppLinkIfEnabled(s.params.requester.metadata,f),E={type:vn,receiverPublicKey:l,senderPublicKey:h};await this.sendError({id:s.id,topic:n,error:c,encodeOpts:E,rpcOpts:ar.wc_sessionAuthenticate.autoReject,appLink:w})}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ji.idle,this.processSessionRequestQueue()},Ee.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:i})=>{const n=this.client.core.history.pending;n.length>0&&n.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=ot("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(ot("session_request",s.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ji.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ji.active,this.emitSessionRequest(r)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const i=this.client.proposal.getAll().find(n=>n.pairingTopic===r.topic);i&&this.onSessionProposeRequest({topic:r.topic,payload:fs("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async r=>{if(!kr(r)){const{message:f}=Me("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(f)}const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Rr(i)||await this.isValidPairingTopic(i),!CE(a)){const{message:f}=Me("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(f)}!Rr(n)&&Xo(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!Rr(s)&&Xo(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Rr(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,i)=>{const n=RE(r,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=async r=>{if(!kr(r))throw new Error(Me("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:i,namespaces:n,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const a=this.client.proposal.get(i),f=$u(n,"approve()");if(f)throw new Error(f.message);const c=ml(a.requiredNamespaces,n,"approve()");if(c)throw new Error(c.message);if(!Wt(s,!0)){const{message:l}=Me("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(l)}Rr(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!kr(r)){const{message:s}=Me("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:i,reason:n}=r;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!NE(n)){const{message:s}=Me("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!kr(r)){const{message:c}=Me("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(c)}const{relay:i,controller:n,namespaces:s,expiry:o}=r;if(!_v(i)){const{message:c}=Me("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(c)}const a=AE(n,"onSessionSettleRequest()");if(a)throw new Error(a.message);const f=$u(s,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(On(o)){const{message:c}=Me("EXPIRED","onSessionSettleRequest()");throw new Error(c)}},this.isValidUpdate=async r=>{if(!kr(r)){const{message:f}=Me("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(f)}const{topic:i,namespaces:n}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const s=this.client.session.get(i),o=$u(n,"update()");if(o)throw new Error(o.message);const a=ml(s.requiredNamespaces,n,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!kr(r)){const{message:n}=Me("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(n)}const{topic:i}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!kr(r)){const{message:f}=Me("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(f)}const{topic:i,request:n,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:a}=this.client.session.get(i);if(!Pp(a,s)){const{message:f}=Me("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(f)}if(!FE(n)){const{message:f}=Me("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(f)}if(!BE(a,s,n.method)){const{message:f}=Me("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(f)}if(o&&!zE(o,Lu)){const{message:f}=Me("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Lu.min} and ${Lu.max}`);throw new Error(f)}},this.isValidRespond=async r=>{var i;if(!kr(r)){const{message:o}=Me("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:n,response:s}=r;try{await this.isValidSessionTopic(n)}catch(o){throw(i=r==null?void 0:r.response)!=null&&i.id&&this.cleanupAfterResponse(r),o}if(!LE(s)){const{message:o}=Me("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!kr(r)){const{message:n}=Me("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!kr(r)){const{message:a}=Me("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:i,event:n,chainId:s}=r;await this.isValidSessionTopic(i);const{namespaces:o}=this.client.session.get(i);if(!Pp(o,s)){const{message:a}=Me("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!qE(n)){const{message:a}=Me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}if(!UE(o,s,n.name)){const{message:a}=Me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!kr(r)){const{message:n}=Me("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=r=>{const{chains:i,uri:n,domain:s,nonce:o}=r;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!Wt(n,!1))throw new Error("uri is required parameter");if(!Wt(s,!1))throw new Error("domain is required parameter");if(!Wt(o,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(f=>rf(f).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=rf(i[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async r=>{const{attestationId:i,hash:n,encryptedId:s,metadata:o,transportType:a}=r,f={verified:{verifyUrl:o.verifyUrl||jo,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Pt.link_mode){const l=this.getAppLinkIfEnabled(o,a);return f.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",f}const c=await this.client.core.verify.resolve({attestationId:i,hash:n,encryptedId:s,verifyUrl:o.verifyUrl});c&&(f.verified.origin=c.origin,f.verified.isScam=c.isScam,f.verified.validation=c.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.warn(c)}return this.client.logger.debug(`Verify context: ${JSON.stringify(f)}`),f},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(n=>{if(!Wt(n,!1)){const{message:s}=Me("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(s)}})},this.getPendingAuthRequest=r=>{const i=this.client.auth.requests.get(r);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(r,i)=>{if(this.recentlyDeletedMap.set(r,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let n=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(n++>=s)break;this.recentlyDeletedMap.delete(o)}}},this.checkRecentlyDeleted=r=>{const i=this.recentlyDeletedMap.get(r);if(i){const{message:n}=Me("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${r}`);throw new Error(n)}},this.isLinkModeEnabled=(r,i)=>{var n,s,o,a,f,c,l,h,w;return!r||i!==Pt.link_mode?!1:((s=(n=this.client.metadata)==null?void 0:n.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((c=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:c.universal)!==""&&((l=r==null?void 0:r.redirect)==null?void 0:l.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((w=r==null?void 0:r.redirect)==null?void 0:w.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(r,i)=>{var n;return this.isLinkModeEnabled(r,i)?(n=r==null?void 0:r.redirect)==null?void 0:n.universal:void 0},this.handleLinkModeMessage=({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const i=J0(r,"topic")||"",n=decodeURIComponent(J0(r,"wc_ev")||""),s=this.client.session.keys.includes(i);s&&this.client.session.update(i,{transportType:Pt.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:n,sessionExists:s})},this.registerLinkModeListeners=async()=>{var r;if(sh()||Kn()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const i=global==null?void 0:global.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const n=await i.getInitialURL();n&&setTimeout(()=>{this.handleLinkModeMessage({url:n})},50)}}}}isInitialized(){if(!this.initialized){const{message:t}=Me("NOT_INITIALIZED",this.name);throw new Error(t)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ur.message,t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):this.onRelayMessage(t)})}async onRelayMessage(t){const{topic:r,message:i,attestation:n,transportType:s}=t,{publicKey:o}=this.client.auth.authKeys.keys.includes(of)?this.client.auth.authKeys.get(of):{publicKey:void 0},a=await this.client.core.crypto.decode(r,i,{receiverPublicKey:o,encoding:s===Pt.link_mode?Eo:Tn});try{bh(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a,attestation:n,transportType:s,encryptedId:dn(i)})):tc(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})}catch(f){this.client.logger.error(f)}}registerExpirerEvents(){this.client.core.expirer.on(ai.expired,async t=>{const{topic:r,id:i}=Gb(t.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,Me("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,Me("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(ss.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(ss.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!Wt(t,!1)){const{message:r}=Me("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=Me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(On(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=Me("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!Wt(t,!1)){const{message:r}=Me("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:r}=Me("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(On(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:r}=Me("EXPIRED",`session topic: ${t}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(t)){const{message:r}=Me("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Wt(t,!1)){const{message:r}=Me("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=Me("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!TE(t)){const{message:r}=Me("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=Me("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(On(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:r}=Me("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class AI extends ws{constructor(t,r){super(t,r,cI,vh),this.core=t,this.logger=r}}class Kv extends ws{constructor(t,r){super(t,r,lI,vh),this.core=t,this.logger=r}}class II extends ws{constructor(t,r){super(t,r,dI,vh,i=>i.id),this.core=t,this.logger=r}}class DI extends ws{constructor(t,r){super(t,r,vI,ic,()=>of),this.core=t,this.logger=r}}class OI extends ws{constructor(t,r){super(t,r,mI,ic),this.core=t,this.logger=r}}class PI extends ws{constructor(t,r){super(t,r,yI,ic,i=>i.id),this.core=t,this.logger=r}}class $I{constructor(t,r){this.core=t,this.logger=r,this.authKeys=new DI(this.core,this.logger),this.pairingTopics=new OI(this.core,this.logger),this.requests=new PI(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class mh extends P6{constructor(t){super(t),this.protocol=kv,this.version=jv,this.name=Fu.name,this.events=new Ci.EventEmitter,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}},this.update=async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}},this.request=async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}},this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async(i,n)=>{try{return await this.engine.authenticate(i,n)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(n){throw this.logger.error(n.message),n}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.name=(t==null?void 0:t.name)||Fu.name,this.metadata=(t==null?void 0:t.metadata)||zb(),this.signConfig=t==null?void 0:t.signConfig;const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:jf(Kl({level:(t==null?void 0:t.logger)||Fu.logger}));this.core=(t==null?void 0:t.core)||new Df(t),this.logger=Tr(r,this.name),this.session=new Kv(this.core,this.logger),this.proposal=new AI(this.core,this.logger),this.pendingRequest=new II(this.core,this.logger),this.engine=new MI(this),this.auth=new $I(this.core,this.logger)}static async init(t){const r=new mh(t);return await r.initialize(),r}get context(){return jr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Ee.toMiliseconds(Ee.ONE_SECOND))}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const RI=Kv,CI=mh;var El={exports:{}},Js=typeof Reflect=="object"?Reflect:null,bg=Js&&typeof Js.apply=="function"?Js.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},af;Js&&typeof Js.ownKeys=="function"?af=Js.ownKeys:Object.getOwnPropertySymbols?af=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:af=function(e){return Object.getOwnPropertyNames(e)};function TI(e){console&&console.warn&&console.warn(e)}var vg=Number.isNaN||function(e){return e!==e};function Mt(){Mt.init.call(this)}El.exports=Mt,El.exports.once=qI,Mt.EventEmitter=Mt,Mt.prototype._events=void 0,Mt.prototype._eventsCount=0,Mt.prototype._maxListeners=void 0;var mg=10;function ff(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Mt,"defaultMaxListeners",{enumerable:!0,get:function(){return mg},set:function(e){if(typeof e!="number"||e<0||vg(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");mg=e}}),Mt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Mt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||vg(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Vv(e){return e._maxListeners===void 0?Mt.defaultMaxListeners:e._maxListeners}Mt.prototype.getMaxListeners=function(){return Vv(this)},Mt.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",n=this._events;if(n!==void 0)i=i&&n.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=n[e];if(a===void 0)return!1;if(typeof a=="function")bg(a,this,t);else for(var f=a.length,c=Hv(a,f),r=0;r<f;++r)bg(c[r],this,t);return!0};function yg(e,t,r,i){var n,s,o;if(ff(r),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),o===void 0)o=s[t]=r,++e._eventsCount;else if(typeof o=="function"?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=Vv(e),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,TI(a)}return e}Mt.prototype.addListener=function(e,t){return yg(this,e,t,!1)},Mt.prototype.on=Mt.prototype.addListener,Mt.prototype.prependListener=function(e,t){return yg(this,e,t,!0)};function NI(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wg(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=NI.bind(i);return n.listener=r,i.wrapFn=n,n}Mt.prototype.once=function(e,t){return ff(t),this.on(e,wg(this,e,t)),this},Mt.prototype.prependOnceListener=function(e,t){return ff(t),this.prependListener(e,wg(this,e,t)),this},Mt.prototype.removeListener=function(e,t){var r,i,n,s,o;if(ff(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;n===0?r.shift():FI(r,n),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||t)}return this},Mt.prototype.off=Mt.prototype.removeListener,Mt.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var n=Object.keys(r),s;for(i=0;i<n.length;++i)s=n[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function _g(e,t,r){var i=e._events;if(i===void 0)return[];var n=i[t];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?LI(n):Hv(n,n.length)}Mt.prototype.listeners=function(e){return _g(this,e,!0)},Mt.prototype.rawListeners=function(e){return _g(this,e,!1)},Mt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):xg.call(e,t)},Mt.prototype.listenerCount=xg;function xg(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Mt.prototype.eventNames=function(){return this._eventsCount>0?af(this._events):[]};function Hv(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function FI(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function LI(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function qI(e,t){return new Promise(function(r,i){function n(o){e.removeListener(t,s),i(o)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",n),r([].slice.call(arguments))}Wv(e,t,s,{once:!0}),t!=="error"&&BI(e,n,{once:!0})})}function BI(e,t,r){typeof e.on=="function"&&Wv(e,"error",t,r)}function Wv(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(s){i.once&&e.removeEventListener(t,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}const UI="WalletKit";class kI{constructor(t){this.opts=t}}class jI{constructor(t){this.client=t}}var zI=Object.defineProperty,KI=Object.defineProperties,VI=Object.getOwnPropertyDescriptors,Eg=Object.getOwnPropertySymbols,HI=Object.prototype.hasOwnProperty,WI=Object.prototype.propertyIsEnumerable,Sg=(e,t,r)=>t in e?zI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,GI=(e,t)=>{for(var r in t||(t={}))HI.call(t,r)&&Sg(e,r,t[r]);if(Eg)for(var r of Eg(t))WI.call(t,r)&&Sg(e,r,t[r]);return e},JI=(e,t)=>KI(e,VI(t));class YI extends jI{constructor(t){super(t),this.init=async()=>{this.signClient=await CI.init({core:this.client.core,metadata:this.client.metadata,signConfig:this.client.signConfig}),this.signClient.core.eventClient.init().catch(r=>{this.client.logger.warn(r)})},this.pair=async r=>{await this.client.core.pairing.pair(r)},this.approveSession=async r=>{const{topic:i,acknowledged:n}=await this.signClient.approve(JI(GI({},r),{id:r.id,namespaces:r.namespaces,sessionProperties:r.sessionProperties,sessionConfig:r.sessionConfig}));return await n(),this.signClient.session.get(i)},this.rejectSession=async r=>await this.signClient.reject(r),this.updateSession=async r=>await this.signClient.update(r),this.extendSession=async r=>await this.signClient.extend(r),this.respondSessionRequest=async r=>await this.signClient.respond(r),this.disconnectSession=async r=>await this.signClient.disconnect(r),this.emitSessionEvent=async r=>await this.signClient.emit(r),this.getActiveSessions=()=>this.signClient.session.getAll().reduce((r,i)=>(r[i.topic]=i,r),{}),this.getPendingSessionProposals=()=>this.signClient.proposal.getAll(),this.getPendingSessionRequests=()=>this.signClient.getPendingSessionRequests(),this.approveSessionAuthenticate=async r=>await this.signClient.approveSessionAuthenticate(r),this.rejectSessionAuthenticate=async r=>await this.signClient.rejectSessionAuthenticate(r),this.formatAuthMessage=r=>this.signClient.formatAuthMessage(r),this.registerDeviceToken=r=>this.client.core.echoClient.registerDeviceToken(r),this.on=(r,i)=>(this.setEvent(r,"off"),this.setEvent(r,"on"),this.client.events.on(r,i)),this.once=(r,i)=>(this.setEvent(r,"off"),this.setEvent(r,"once"),this.client.events.once(r,i)),this.off=(r,i)=>(this.setEvent(r,"off"),this.client.events.off(r,i)),this.removeListener=(r,i)=>(this.setEvent(r,"removeListener"),this.client.events.removeListener(r,i)),this.onSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onSessionProposal=r=>{this.client.events.emit("session_proposal",r)},this.onSessionDelete=r=>{this.client.events.emit("session_delete",r)},this.onProposalExpire=r=>{this.client.events.emit("proposal_expire",r)},this.onSessionRequestExpire=r=>{this.client.events.emit("session_request_expire",r)},this.onSessionRequestAuthenticate=r=>{this.client.events.emit("session_authenticate",r)},this.setEvent=(r,i)=>{switch(r){case"session_request":this.signClient.events[i]("session_request",this.onSessionRequest);break;case"session_proposal":this.signClient.events[i]("session_proposal",this.onSessionProposal);break;case"session_delete":this.signClient.events[i]("session_delete",this.onSessionDelete);break;case"proposal_expire":this.signClient.events[i]("proposal_expire",this.onProposalExpire);break;case"session_request_expire":this.signClient.events[i]("session_request_expire",this.onSessionRequestExpire);break;case"session_authenticate":this.signClient.events[i]("session_authenticate",this.onSessionRequestAuthenticate);break}},this.signClient={}}}const ZI={decryptMessage:async e=>{const t={core:new Df({storageOptions:e.storageOptions,storage:e.storage})};await t.core.crypto.init();const r=t.core.crypto.decode(e.topic,e.encryptedMessage);return t.core=null,r},getMetadata:async e=>{const t={core:new Df({storageOptions:e.storageOptions,storage:e.storage}),sessionStore:null};t.sessionStore=new RI(t.core,t.core.logger),await t.sessionStore.init();const r=t.sessionStore.get(e.topic),i=r==null?void 0:r.peer.metadata;return t.core=null,t.sessionStore=null,i}},Gv=class extends kI{constructor(e){super(e),this.events=new El.exports,this.on=(t,r)=>this.engine.on(t,r),this.once=(t,r)=>this.engine.once(t,r),this.off=(t,r)=>this.engine.off(t,r),this.removeListener=(t,r)=>this.engine.removeListener(t,r),this.pair=async t=>{try{return await this.engine.pair(t)}catch(r){throw this.logger.error(r.message),r}},this.approveSession=async t=>{try{return await this.engine.approveSession(t)}catch(r){throw this.logger.error(r.message),r}},this.rejectSession=async t=>{try{return await this.engine.rejectSession(t)}catch(r){throw this.logger.error(r.message),r}},this.updateSession=async t=>{try{return await this.engine.updateSession(t)}catch(r){throw this.logger.error(r.message),r}},this.extendSession=async t=>{try{return await this.engine.extendSession(t)}catch(r){throw this.logger.error(r.message),r}},this.respondSessionRequest=async t=>{try{return await this.engine.respondSessionRequest(t)}catch(r){throw this.logger.error(r.message),r}},this.disconnectSession=async t=>{try{return await this.engine.disconnectSession(t)}catch(r){throw this.logger.error(r.message),r}},this.emitSessionEvent=async t=>{try{return await this.engine.emitSessionEvent(t)}catch(r){throw this.logger.error(r.message),r}},this.getActiveSessions=()=>{try{return this.engine.getActiveSessions()}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionProposals=()=>{try{return this.engine.getPendingSessionProposals()}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(t){throw this.logger.error(t.message),t}},this.registerDeviceToken=t=>{try{return this.engine.registerDeviceToken(t)}catch(r){throw this.logger.error(r.message),r}},this.approveSessionAuthenticate=t=>{try{return this.engine.approveSessionAuthenticate(t)}catch(r){throw this.logger.error(r.message),r}},this.rejectSessionAuthenticate=t=>{try{return this.engine.rejectSessionAuthenticate(t)}catch(r){throw this.logger.error(r.message),r}},this.formatAuthMessage=t=>{try{return this.engine.formatAuthMessage(t)}catch(r){throw this.logger.error(r.message),r}},this.metadata=e.metadata,this.name=e.name||UI,this.signConfig=e.signConfig,this.core=e.core,this.logger=this.core.logger,this.engine=new YI(this)}static async init(e){const t=new Gv(e);return await t.initialize(),t}async initialize(){this.logger.trace("Initialized");try{await this.engine.init(),this.logger.info("WalletKit Initialization Success")}catch(e){throw this.logger.info("WalletKit Initialization Failure"),this.logger.error(e.message),e}}};let Jv=Gv;Jv.notifications=ZI;const XI=Jv;var Yv=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Mg=(e,t,r)=>(Yv(e,t,"read from private field"),r?r.call(e):t.get(e)),QI=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},eD=(e,t,r,i)=>(Yv(e,t,"write to private field"),t.set(e,r),r);const Zv=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],tD=[...Zv,["unknown"]].map(e=>e[0]),cf=new Map(Zv);function rD(e){for(const[t,r]of cf)if(e===r)return t;return"unknown"}function iD(e){if(Xv(e))return{width:e.naturalWidth,height:e.naturalHeight};if(Qv(e))return{width:e.width.baseVal.value,height:e.height.baseVal.value};if(em(e))return{width:e.videoWidth,height:e.videoHeight};if(rm(e))return{width:e.width,height:e.height};if(nm(e))return{width:e.displayWidth,height:e.displayHeight};if(tm(e))return{width:e.width,height:e.height};if(im(e))return{width:e.width,height:e.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Xv(e){try{return e instanceof HTMLImageElement}catch{return!1}}function Qv(e){try{return e instanceof SVGImageElement}catch{return!1}}function em(e){try{return e instanceof HTMLVideoElement}catch{return!1}}function tm(e){try{return e instanceof HTMLCanvasElement}catch{return!1}}function rm(e){try{return e instanceof ImageBitmap}catch{return!1}}function im(e){try{return e instanceof OffscreenCanvas}catch{return!1}}function nm(e){try{return e instanceof VideoFrame}catch{return!1}}function sm(e){try{return e instanceof Blob}catch{return!1}}function nD(e){try{return e instanceof ImageData}catch{return!1}}function sD(e,t){try{const r=new OffscreenCanvas(e,t);if(r.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return r;throw void 0}catch{const i=document.createElement("canvas");return i.width=e,i.height=t,i}}async function om(e){if(Xv(e)&&!await cD(e))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Qv(e)&&!await uD(e))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(nm(e)&&lD(e))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(em(e)&&(e.readyState===0||e.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(rm(e)&&dD(e))throw new DOMException("The image source is detached.","InvalidStateError");const{width:t,height:r}=iD(e);if(t===0||r===0)return null;const i=sD(t,r).getContext("2d");i.drawImage(e,0,0);try{return i.getImageData(0,0,t,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function oD(e){let t;try{if(globalThis.createImageBitmap)t=await createImageBitmap(e);else if(globalThis.Image){t=new Image;let r="";try{r=URL.createObjectURL(e),t.src=r,await t.decode()}finally{URL.revokeObjectURL(r)}}else return e}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await om(t)}function aD(e){const{width:t,height:r}=e;if(t===0||r===0)return null;const i=e.getContext("2d");try{return i.getImageData(0,0,t,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function fD(e){if(sm(e))return await oD(e);if(nD(e)){if(hD(e))throw new DOMException("The image data has been detached.","InvalidStateError");return e}return tm(e)||im(e)?aD(e):await om(e)}async function cD(e){try{return await e.decode(),!0}catch{return!1}}async function uD(e){var t;try{return await((t=e.decode)==null?void 0:t.call(e)),!0}catch{return!1}}function lD(e){return e.format===null}function hD(e){return e.data.buffer.byteLength===0}function dD(e){return e.width===0&&e.height===0}function Ag(e,t){return e instanceof DOMException?new DOMException(`${t}: ${e.message}`,e.name):e instanceof Error?new e.constructor(`${t}: ${e.message}`):new Error(`${t}: ${e}`)}const Ig=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function pD(e){return e.join("|")}function gD(e){const t=Dg(e);let r=0,i=Ig.length-1;for(;r<=i;){const n=Math.floor((r+i)/2),s=Ig[n],o=Dg(s);if(o===t)return s;o<t?r=n+1:i=n-1}return"None"}function Dg(e){return e.toLowerCase().replace(/_-\[\]/g,"")}function bD(e,t){return e.Binarizer[t]}function vD(e,t){return e.CharacterSet[t]}const mD=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function yD(e){return mD[e.value]}function wD(e,t){return e.EanAddOnSymbol[t]}function _D(e,t){return e.TextMode[t]}const io={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function am(e,t){return{...t,formats:pD(t.formats),binarizer:bD(e,t.binarizer),eanAddOnSymbol:wD(e,t.eanAddOnSymbol),textMode:_D(e,t.textMode),characterSet:vD(e,t.characterSet)}}function fm(e){return{...e,format:gD(e.format),eccLevel:e.eccLevel,contentType:yD(e.contentType)}}const xD={locateFile:(e,t)=>{const r=e.match(/_(.+?)\.wasm$/);return r?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${r[1]}/${e}`:t+e}};let Og=new WeakMap;function yh(e,t){var r;const i=Og.get(e);if(i!=null&&i.modulePromise&&t===void 0)return i.modulePromise;const n=(r=i==null?void 0:i.moduleOverrides)!=null?r:xD,s=e({...n});return Og.set(e,{moduleOverrides:n,modulePromise:s}),s}async function ED(e,t,r=io){const i={...io,...r},n=await yh(e),{size:s}=t,o=new Uint8Array(await t.arrayBuffer()),a=n._malloc(s);n.HEAPU8.set(o,a);const f=n.readBarcodesFromImage(a,s,am(n,i));n._free(a);const c=[];for(let l=0;l<f.size();++l)c.push(fm(f.get(l)));return c}async function SD(e,t,r=io){const i={...io,...r},n=await yh(e),{data:s,width:o,height:a,data:{byteLength:f}}=t,c=n._malloc(f);n.HEAPU8.set(s,c);const l=n.readBarcodesFromPixmap(c,o,a,am(n,i));n._free(c);const h=[];for(let w=0;w<l.size();++w)h.push(fm(l.get(w)));return h}({...io,formats:[...io.formats]});var wh=(()=>{var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(t={}){var r=t,i,n;r.ready=new Promise((I,D)=>{i=I,n=D});var s=Object.assign({},r),o="./this.program",a=typeof window=="object",f=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var c="";function l(I){return r.locateFile?r.locateFile(I,c):c+I}var h;(a||f)&&(f?c=self.location.href:typeof document<"u"&&document.currentScript&&(c=document.currentScript.src),e&&(c=e),c.indexOf("blob:")!==0?c=c.substr(0,c.replace(/[?#].*/,"").lastIndexOf("/")+1):c="",f&&(h=I=>{var D=new XMLHttpRequest;return D.open("GET",I,!1),D.responseType="arraybuffer",D.send(null),new Uint8Array(D.response)})),r.print||console.log.bind(console);var w=r.printErr||console.error.bind(console);Object.assign(r,s),s=null,r.arguments&&r.arguments,r.thisProgram&&(o=r.thisProgram),r.quit&&r.quit;var E;r.wasmBinary&&(E=r.wasmBinary),typeof WebAssembly!="object"&&m("no native wasm support detected");var _,A=!1,R,N,q,U,P,F,L,K;function V(){var I=_.buffer;r.HEAP8=R=new Int8Array(I),r.HEAP16=q=new Int16Array(I),r.HEAPU8=N=new Uint8Array(I),r.HEAPU16=U=new Uint16Array(I),r.HEAP32=P=new Int32Array(I),r.HEAPU32=F=new Uint32Array(I),r.HEAPF32=L=new Float32Array(I),r.HEAPF64=K=new Float64Array(I)}var W=[],Q=[],C=[];function g(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)d(r.preRun.shift());ve(W)}function p(){ve(Q)}function u(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)y(r.postRun.shift());ve(C)}function d(I){W.unshift(I)}function v(I){Q.unshift(I)}function y(I){C.unshift(I)}var M=0,x=null;function b(I){var D;M++,(D=r.monitorRunDependencies)===null||D===void 0||D.call(r,M)}function S(I){var D;if(M--,(D=r.monitorRunDependencies)===null||D===void 0||D.call(r,M),M==0&&x){var T=x;x=null,T()}}function m(I){var D;(D=r.onAbort)===null||D===void 0||D.call(r,I),I="Aborted("+I+")",w(I),A=!0,I+=". Build with -sASSERTIONS for more info.";var T=new WebAssembly.RuntimeError(I);throw n(T),T}var $="data:application/octet-stream;base64,",ee=I=>I.startsWith($),O;O="zxing_reader.wasm",ee(O)||(O=l(O));function H(I){if(I==O&&E)return new Uint8Array(E);if(h)return h(I);throw"both async and sync fetching of the wasm failed"}function X(I){return!E&&(a||f)&&typeof fetch=="function"?fetch(I,{credentials:"same-origin"}).then(D=>{if(!D.ok)throw"failed to load wasm binary file at '"+I+"'";return D.arrayBuffer()}).catch(()=>H(I)):Promise.resolve().then(()=>H(I))}function te(I,D,T){return X(I).then(k=>WebAssembly.instantiate(k,D)).then(k=>k).then(T,k=>{w(`failed to asynchronously prepare wasm: ${k}`),m(k)})}function ne(I,D,T,k){return!I&&typeof WebAssembly.instantiateStreaming=="function"&&!ee(D)&&typeof fetch=="function"?fetch(D,{credentials:"same-origin"}).then(J=>{var re=WebAssembly.instantiateStreaming(J,T);return re.then(k,function(se){return w(`wasm streaming compile failed: ${se}`),w("falling back to ArrayBuffer instantiation"),te(D,T,k)})}):te(D,T,k)}function ge(){var I={a:Jm};function D(k,J){return Vt=k.exports,_=Vt.ia,V(),_n=Vt.ma,v(Vt.ja),S(),Vt}b();function T(k){D(k.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(I,D)}catch(k){w(`Module.instantiateWasm callback failed with error: ${k}`),n(k)}return ne(E,O,I,T).catch(n),{}}var ve=I=>{for(;I.length>0;)I.shift()(r)};r.noExitRuntime;var B=[],z=0,G=I=>{var D=new ae(I);return D.get_caught()||(D.set_caught(!0),z--),D.set_rethrown(!1),B.push(D),Ah(D.excPtr),D.get_exception_ptr()},Z=0,oe=()=>{Lt(0,0);var I=B.pop();Mh(I.excPtr),Z=0};function ae(I){this.excPtr=I,this.ptr=I-24,this.set_type=function(D){F[this.ptr+4>>2]=D},this.get_type=function(){return F[this.ptr+4>>2]},this.set_destructor=function(D){F[this.ptr+8>>2]=D},this.get_destructor=function(){return F[this.ptr+8>>2]},this.set_caught=function(D){D=D?1:0,R[this.ptr+12>>0]=D},this.get_caught=function(){return R[this.ptr+12>>0]!=0},this.set_rethrown=function(D){D=D?1:0,R[this.ptr+13>>0]=D},this.get_rethrown=function(){return R[this.ptr+13>>0]!=0},this.init=function(D,T){this.set_adjusted_ptr(0),this.set_type(D),this.set_destructor(T)},this.set_adjusted_ptr=function(D){F[this.ptr+16>>2]=D},this.get_adjusted_ptr=function(){return F[this.ptr+16>>2]},this.get_exception_ptr=function(){var D=Dh(this.get_type());if(D)return F[this.excPtr>>2];var T=this.get_adjusted_ptr();return T!==0?T:this.excPtr}}var ce=I=>{throw Z||(Z=I),Z},ue=I=>{var D=Z;if(!D)return ho(0),0;var T=new ae(D);T.set_adjusted_ptr(D);var k=T.get_type();if(!k)return ho(0),D;for(var J in I){var re=I[J];if(re===0||re===k)break;var se=T.ptr+16;if(Ih(re,k,se))return ho(re),D}return ho(k),D},le=()=>ue([]),ie=I=>ue([I]),ye=(I,D)=>ue([I,D]),pe=()=>{var I=B.pop();I||m("no exception to throw");var D=I.excPtr;throw I.get_rethrown()||(B.push(I),I.set_rethrown(!0),I.set_caught(!1),z++),Z=D,Z},he=(I,D,T)=>{var k=new ae(I);throw k.init(D,T),Z=I,z++,Z},_e=()=>z,Ae={},we=I=>{for(;I.length;){var D=I.pop(),T=I.pop();T(D)}};function De(I){return this.fromWireType(P[I>>2])}var Fe={},Se={},Ke={},We,Ce=I=>{throw new We(I)},et=(I,D,T)=>{I.forEach(function(fe){Ke[fe]=D});function k(fe){var be=T(fe);be.length!==I.length&&Ce("Mismatched type converter count");for(var xe=0;xe<I.length;++xe)Ye(I[xe],be[xe])}var J=new Array(D.length),re=[],se=0;D.forEach((fe,be)=>{Se.hasOwnProperty(fe)?J[be]=Se[fe]:(re.push(fe),Fe.hasOwnProperty(fe)||(Fe[fe]=[]),Fe[fe].push(()=>{J[be]=Se[fe],++se,se===re.length&&k(J)}))}),re.length===0&&k(J)},ze=I=>{var D=Ae[I];delete Ae[I];var T=D.rawConstructor,k=D.rawDestructor,J=D.fields,re=J.map(se=>se.getterReturnType).concat(J.map(se=>se.setterArgumentType));et([I],re,se=>{var fe={};return J.forEach((be,xe)=>{var Pe=be.fieldName,Ve=se[xe],He=be.getter,rt=be.getterContext,qt=se[xe+J.length],jt=be.setter,At=be.setterContext;fe[Pe]={read:or=>Ve.fromWireType(He(rt,or)),write:(or,me)=>{var Te=[];jt(At,or,qt.toWireType(Te,me)),we(Te)}}}),[{name:D.name,fromWireType:be=>{var xe={};for(var Pe in fe)xe[Pe]=fe[Pe].read(be);return k(be),xe},toWireType:(be,xe)=>{for(var Pe in fe)if(!(Pe in xe))throw new TypeError(`Missing field: "${Pe}"`);var Ve=T();for(Pe in fe)fe[Pe].write(Ve,xe[Pe]);return be!==null&&be.push(k,Ve),Ve},argPackAdvance:Ge,readValueFromPointer:De,destructorFunction:k}]})},Re=(I,D,T,k,J)=>{},at=()=>{for(var I=new Array(256),D=0;D<256;++D)I[D]=String.fromCharCode(D);dt=I},dt,Ie=I=>{for(var D="",T=I;N[T];)D+=dt[N[T++]];return D},st,$e=I=>{throw new st(I)};function ke(I,D){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var k=D.name;if(I||$e(`type "${k}" must have a positive integer typeid pointer`),Se.hasOwnProperty(I)){if(T.ignoreDuplicateRegistrations)return;$e(`Cannot register type '${k}' twice`)}if(Se[I]=D,delete Ke[I],Fe.hasOwnProperty(I)){var J=Fe[I];delete Fe[I],J.forEach(re=>re())}}function Ye(I,D){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in D))throw new TypeError("registerType registeredInstance requires argPackAdvance");return ke(I,D,T)}var Ge=8,Le=(I,D,T,k)=>{D=Ie(D),Ye(I,{name:D,fromWireType:function(J){return!!J},toWireType:function(J,re){return re?T:k},argPackAdvance:Ge,readValueFromPointer:function(J){return this.fromWireType(N[J])},destructorFunction:null})},lt=I=>({count:I.count,deleteScheduled:I.deleteScheduled,preservePointerOnDelete:I.preservePointerOnDelete,ptr:I.ptr,ptrType:I.ptrType,smartPtr:I.smartPtr,smartPtrType:I.smartPtrType}),ft=I=>{function D(T){return T.$$.ptrType.registeredClass.name}$e(D(I)+" instance already deleted")},Ne=!1,pt=I=>{},mt=I=>{I.smartPtr?I.smartPtrType.rawDestructor(I.smartPtr):I.ptrType.registeredClass.rawDestructor(I.ptr)},Be=I=>{I.count.value-=1;var D=I.count.value===0;D&&mt(I)},gt=(I,D,T)=>{if(D===T)return I;if(T.baseClass===void 0)return null;var k=gt(I,D,T.baseClass);return k===null?null:T.downcast(k)},bt={},Ue=()=>Object.keys(ut).length,ht=()=>{var I=[];for(var D in ut)ut.hasOwnProperty(D)&&I.push(ut[D]);return I},tt=[],qe=()=>{for(;tt.length;){var I=tt.pop();I.$$.deleteScheduled=!1,I.delete()}},ct,yt=I=>{ct=I,tt.length&&ct&&ct(qe)},je=()=>{r.getInheritedInstanceCount=Ue,r.getLiveInheritedInstances=ht,r.flushPendingDeletes=qe,r.setDelayFunction=yt},ut={},it=(I,D)=>{for(D===void 0&&$e("ptr should not be undefined");I.baseClass;)D=I.upcast(D),I=I.baseClass;return D},vt=(I,D)=>(D=it(I,D),ut[D]),Qt=(I,D)=>{(!D.ptrType||!D.ptr)&&Ce("makeClassHandle requires ptr and ptrType");var T=!!D.smartPtrType,k=!!D.smartPtr;return T!==k&&Ce("Both smartPtrType and smartPtr must be specified"),D.count={value:1},Jt(Object.create(I,{$$:{value:D,writable:!0}}))};function yr(I){var D=this.getPointee(I);if(!D)return this.destructor(I),null;var T=vt(this.registeredClass,D);if(T!==void 0){if(T.$$.count.value===0)return T.$$.ptr=D,T.$$.smartPtr=I,T.clone();var k=T.clone();return this.destructor(I),k}function J(){return this.isSmartPointer?Qt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:D,smartPtrType:this,smartPtr:I}):Qt(this.registeredClass.instancePrototype,{ptrType:this,ptr:I})}var re=this.registeredClass.getActualType(D),se=bt[re];if(!se)return J.call(this);var fe;this.isConst?fe=se.constPointerType:fe=se.pointerType;var be=gt(D,this.registeredClass,fe.registeredClass);return be===null?J.call(this):this.isSmartPointer?Qt(fe.registeredClass.instancePrototype,{ptrType:fe,ptr:be,smartPtrType:this,smartPtr:I}):Qt(fe.registeredClass.instancePrototype,{ptrType:fe,ptr:be})}var Jt=I=>typeof FinalizationRegistry>"u"?(Jt=D=>D,I):(Ne=new FinalizationRegistry(D=>{Be(D.$$)}),Jt=D=>{var T=D.$$,k=!!T.smartPtr;if(k){var J={$$:T};Ne.register(D,J,D)}return D},pt=D=>Ne.unregister(D),Jt(I)),wr=()=>{Object.assign(Rt.prototype,{isAliasOf(I){if(!(this instanceof Rt)||!(I instanceof Rt))return!1;var D=this.$$.ptrType.registeredClass,T=this.$$.ptr;I.$$=I.$$;for(var k=I.$$.ptrType.registeredClass,J=I.$$.ptr;D.baseClass;)T=D.upcast(T),D=D.baseClass;for(;k.baseClass;)J=k.upcast(J),k=k.baseClass;return D===k&&T===J},clone(){if(this.$$.ptr||ft(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var I=Jt(Object.create(Object.getPrototypeOf(this),{$$:{value:lt(this.$$)}}));return I.$$.count.value+=1,I.$$.deleteScheduled=!1,I},delete(){this.$$.ptr||ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&$e("Object already scheduled for deletion"),pt(this),Be(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&$e("Object already scheduled for deletion"),tt.push(this),tt.length===1&&ct&&ct(qe),this.$$.deleteScheduled=!0,this}})};function Rt(){}var Dr=(I,D)=>Object.defineProperty(D,"name",{value:I}),ii=(I,D,T)=>{if(I[D].overloadTable===void 0){var k=I[D];I[D]=function(){return I[D].overloadTable.hasOwnProperty(arguments.length)||$e(`Function '${T}' called with an invalid number of arguments (${arguments.length}) - expects one of (${I[D].overloadTable})!`),I[D].overloadTable[arguments.length].apply(this,arguments)},I[D].overloadTable=[],I[D].overloadTable[k.argCount]=k}},Kr=(I,D,T)=>{r.hasOwnProperty(I)?((T===void 0||r[I].overloadTable!==void 0&&r[I].overloadTable[T]!==void 0)&&$e(`Cannot register public name '${I}' twice`),ii(r,I,I),r.hasOwnProperty(T)&&$e(`Cannot register multiple overloads of a function with the same number of arguments (${T})!`),r[I].overloadTable[T]=D):(r[I]=D,T!==void 0&&(r[I].numArguments=T))},bi=48,vi=57,Nr=I=>{if(I===void 0)return"_unknown";I=I.replace(/[^a-zA-Z0-9_]/g,"$");var D=I.charCodeAt(0);return D>=bi&&D<=vi?`_${I}`:I};function mi(I,D,T,k,J,re,se,fe){this.name=I,this.constructor=D,this.instancePrototype=T,this.rawDestructor=k,this.baseClass=J,this.getActualType=re,this.upcast=se,this.downcast=fe,this.pureVirtualFunctions=[]}var Vr=(I,D,T)=>{for(;D!==T;)D.upcast||$e(`Expected null or instance of ${T.name}, got an instance of ${D.name}`),I=D.upcast(I),D=D.baseClass;return I};function nr(I,D){if(D===null)return this.isReference&&$e(`null is not a valid ${this.name}`),0;D.$$||$e(`Cannot pass "${Is(D)}" as a ${this.name}`),D.$$.ptr||$e(`Cannot pass deleted object as a pointer of type ${this.name}`);var T=D.$$.ptrType.registeredClass,k=Vr(D.$$.ptr,T,this.registeredClass);return k}function yi(I,D){var T;if(D===null)return this.isReference&&$e(`null is not a valid ${this.name}`),this.isSmartPointer?(T=this.rawConstructor(),I!==null&&I.push(this.rawDestructor,T),T):0;(!D||!D.$$)&&$e(`Cannot pass "${Is(D)}" as a ${this.name}`),D.$$.ptr||$e(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&D.$$.ptrType.isConst&&$e(`Cannot convert argument of type ${D.$$.smartPtrType?D.$$.smartPtrType.name:D.$$.ptrType.name} to parameter type ${this.name}`);var k=D.$$.ptrType.registeredClass;if(T=Vr(D.$$.ptr,k,this.registeredClass),this.isSmartPointer)switch(D.$$.smartPtr===void 0&&$e("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:D.$$.smartPtrType===this?T=D.$$.smartPtr:$e(`Cannot convert argument of type ${D.$$.smartPtrType?D.$$.smartPtrType.name:D.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:T=D.$$.smartPtr;break;case 2:if(D.$$.smartPtrType===this)T=D.$$.smartPtr;else{var J=D.clone();T=this.rawShare(T,si.toHandle(()=>J.delete())),I!==null&&I.push(this.rawDestructor,T)}break;default:$e("Unsupporting sharing policy")}return T}function wi(I,D){if(D===null)return this.isReference&&$e(`null is not a valid ${this.name}`),0;D.$$||$e(`Cannot pass "${Is(D)}" as a ${this.name}`),D.$$.ptr||$e(`Cannot pass deleted object as a pointer of type ${this.name}`),D.$$.ptrType.isConst&&$e(`Cannot convert argument of type ${D.$$.ptrType.name} to parameter type ${this.name}`);var T=D.$$.ptrType.registeredClass,k=Vr(D.$$.ptr,T,this.registeredClass);return k}function ni(I){return this.fromWireType(F[I>>2])}var Vn=()=>{Object.assign(Ti.prototype,{getPointee(I){return this.rawGetPointee&&(I=this.rawGetPointee(I)),I},destructor(I){var D;(D=this.rawDestructor)===null||D===void 0||D.call(this,I)},argPackAdvance:Ge,readValueFromPointer:ni,deleteObject(I){I!==null&&I.delete()},fromWireType:yr})};function Ti(I,D,T,k,J,re,se,fe,be,xe,Pe){this.name=I,this.registeredClass=D,this.isReference=T,this.isConst=k,this.isSmartPointer=J,this.pointeeType=re,this.sharingPolicy=se,this.rawGetPointee=fe,this.rawConstructor=be,this.rawShare=xe,this.rawDestructor=Pe,!J&&D.baseClass===void 0?k?(this.toWireType=nr,this.destructorFunction=null):(this.toWireType=wi,this.destructorFunction=null):this.toWireType=yi}var da=(I,D,T)=>{r.hasOwnProperty(I)||Ce("Replacing nonexistant public symbol"),r[I].overloadTable!==void 0&&T!==void 0?r[I].overloadTable[T]=D:(r[I]=D,r[I].argCount=T)},_s=(I,D,T)=>{var k=r["dynCall_"+I];return T&&T.length?k.apply(null,[D].concat(T)):k.call(null,D)},xs=[],_n,Ct=I=>{var D=xs[I];return D||(I>=xs.length&&(xs.length=I+1),xs[I]=D=_n.get(I)),D},pa=(I,D,T)=>{if(I.includes("j"))return _s(I,D,T);var k=Ct(D).apply(null,T);return k},nc=(I,D)=>{var T=[];return function(){return T.length=0,Object.assign(T,arguments),pa(I,D,T)}},Hr=(I,D)=>{I=Ie(I);function T(){return I.includes("j")?nc(I,D):Ct(D)}var k=T();return typeof k!="function"&&$e(`unknown function pointer with signature ${I}: ${D}`),k},sc=(I,D)=>{var T=Dr(D,function(k){this.name=D,this.message=k;var J=new Error(k).stack;J!==void 0&&(this.stack=this.toString()+`
`+J.replace(/^Error(:[^\n]*)?\n/,""))});return T.prototype=Object.create(I.prototype),T.prototype.constructor=T,T.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},T},ga,co=I=>{var D=Sh(I),T=Ie(D);return tn(D),T},Es=(I,D)=>{var T=[],k={};function J(re){if(!k[re]&&!Se[re]){if(Ke[re]){Ke[re].forEach(J);return}T.push(re),k[re]=!0}}throw D.forEach(J),new ga(`${I}: `+T.map(co).join([", "]))},oc=(I,D,T,k,J,re,se,fe,be,xe,Pe,Ve,He)=>{Pe=Ie(Pe),re=Hr(J,re),fe&&(fe=Hr(se,fe)),xe&&(xe=Hr(be,xe)),He=Hr(Ve,He);var rt=Nr(Pe);Kr(rt,function(){Es(`Cannot construct ${Pe} due to unbound types`,[k])}),et([I,D,T],k?[k]:[],function(qt){qt=qt[0];var jt,At;k?(jt=qt.registeredClass,At=jt.instancePrototype):At=Rt.prototype;var or=Dr(Pe,function(){if(Object.getPrototypeOf(this)!==me)throw new st("Use 'new' to construct "+Pe);if(Te.constructor_body===void 0)throw new st(Pe+" has no accessible constructor");var Rh=Te.constructor_body[arguments.length];if(Rh===void 0)throw new st(`Tried to invoke ctor of ${Pe} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(Te.constructor_body).toString()}) parameters instead!`);return Rh.apply(this,arguments)}),me=Object.create(At,{constructor:{value:or}});or.prototype=me;var Te=new mi(Pe,or,me,He,jt,re,fe,xe);if(Te.baseClass){var zt,tr;(tr=(zt=Te.baseClass).__derivedClasses)!==null&&tr!==void 0||(zt.__derivedClasses=[]),Te.baseClass.__derivedClasses.push(Te)}var Ps=new Ti(Pe,Te,!0,!1,!1),Ma=new Ti(Pe+"*",Te,!1,!1,!1),$h=new Ti(Pe+" const*",Te,!1,!0,!1);return bt[I]={pointerType:Ma,constPointerType:$h},da(rt,or),[Ps,Ma,$h]})},Ss=(I,D)=>{for(var T=[],k=0;k<I;k++)T.push(F[D+k*4>>2]);return T};function Ms(I){for(var D=1;D<I.length;++D)if(I[D]!==null&&I[D].destructorFunction===void 0)return!0;return!1}function Ni(I,D,T,k,J,re){var se=D.length;se<2&&$e("argTypes array size mismatch! Must at least get return value and 'this' types!");var fe=D[1]!==null&&T!==null,be=Ms(D),xe=D[0].name!=="void",Pe=se-2,Ve=new Array(Pe),He=[],rt=[],qt=function(){arguments.length!==Pe&&$e(`function ${I} called with ${arguments.length} arguments, expected ${Pe}`),rt.length=0;var jt;He.length=fe?2:1,He[0]=J,fe&&(jt=D[1].toWireType(rt,this),He[1]=jt);for(var At=0;At<Pe;++At)Ve[At]=D[At+2].toWireType(rt,arguments[At]),He.push(Ve[At]);var or=k.apply(null,He);function me(Te){if(be)we(rt);else for(var zt=fe?1:2;zt<D.length;zt++){var tr=zt===1?jt:Ve[zt-2];D[zt].destructorFunction!==null&&D[zt].destructorFunction(tr)}if(xe)return D[0].fromWireType(Te)}return me(or)};return Dr(I,qt)}var ac=(I,D,T,k,J,re)=>{var se=Ss(D,T);J=Hr(k,J),et([],[I],function(fe){fe=fe[0];var be=`constructor ${fe.name}`;if(fe.registeredClass.constructor_body===void 0&&(fe.registeredClass.constructor_body=[]),fe.registeredClass.constructor_body[D-1]!==void 0)throw new st(`Cannot register multiple constructors with identical number of parameters (${D-1}) for class '${fe.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return fe.registeredClass.constructor_body[D-1]=()=>{Es(`Cannot construct ${fe.name} due to unbound types`,se)},et([],se,xe=>(xe.splice(1,0,null),fe.registeredClass.constructor_body[D-1]=Ni(be,xe,null,J,re),[])),[]})},ba=I=>{I=I.trim();const D=I.indexOf("(");return D!==-1?I.substr(0,D):I},Fi=(I,D,T,k,J,re,se,fe,be)=>{var xe=Ss(T,k);D=Ie(D),D=ba(D),re=Hr(J,re),et([],[I],function(Pe){Pe=Pe[0];var Ve=`${Pe.name}.${D}`;D.startsWith("@@")&&(D=Symbol[D.substring(2)]),fe&&Pe.registeredClass.pureVirtualFunctions.push(D);function He(){Es(`Cannot call ${Ve} due to unbound types`,xe)}var rt=Pe.registeredClass.instancePrototype,qt=rt[D];return qt===void 0||qt.overloadTable===void 0&&qt.className!==Pe.name&&qt.argCount===T-2?(He.argCount=T-2,He.className=Pe.name,rt[D]=He):(ii(rt,D,Ve),rt[D].overloadTable[T-2]=He),et([],xe,function(jt){var At=Ni(Ve,jt,Pe,re,se);return rt[D].overloadTable===void 0?(At.argCount=T-2,rt[D]=At):rt[D].overloadTable[T-2]=At,[]}),[]})};function fc(){Object.assign(va.prototype,{get(I){return this.allocated[I]},has(I){return this.allocated[I]!==void 0},allocate(I){var D=this.freelist.pop()||this.allocated.length;return this.allocated[D]=I,D},free(I){this.allocated[I]=void 0,this.freelist.push(I)}})}function va(){this.allocated=[void 0],this.freelist=[]}var Fr=new va,uo=I=>{I>=Fr.reserved&&--Fr.get(I).refcount===0&&Fr.free(I)},cc=()=>{for(var I=0,D=Fr.reserved;D<Fr.allocated.length;++D)Fr.allocated[D]!==void 0&&++I;return I},en=()=>{Fr.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),Fr.reserved=Fr.allocated.length,r.count_emval_handles=cc},si={toValue:I=>(I||$e("Cannot use deleted val. handle = "+I),Fr.get(I).value),toHandle:I=>{switch(I){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Fr.allocate({refcount:1,value:I})}}},uc=(I,D)=>{D=Ie(D),Ye(I,{name:D,fromWireType:T=>{var k=si.toValue(T);return uo(T),k},toWireType:(T,k)=>si.toHandle(k),argPackAdvance:Ge,readValueFromPointer:De,destructorFunction:null})},As=(I,D,T)=>{switch(D){case 1:return T?function(k){return this.fromWireType(R[k>>0])}:function(k){return this.fromWireType(N[k>>0])};case 2:return T?function(k){return this.fromWireType(q[k>>1])}:function(k){return this.fromWireType(U[k>>1])};case 4:return T?function(k){return this.fromWireType(P[k>>2])}:function(k){return this.fromWireType(F[k>>2])};default:throw new TypeError(`invalid integer width (${D}): ${I}`)}},lc=(I,D,T,k)=>{D=Ie(D);function J(){}J.values={},Ye(I,{name:D,constructor:J,fromWireType:function(re){return this.constructor.values[re]},toWireType:(re,se)=>se.value,argPackAdvance:Ge,readValueFromPointer:As(D,T,k),destructorFunction:null}),Kr(D,J)},Hn=(I,D)=>{var T=Se[I];return T===void 0&&$e(D+" has unknown type "+co(I)),T},hc=(I,D,T)=>{var k=Hn(I,"enum");D=Ie(D);var J=k.constructor,re=Object.create(k.constructor.prototype,{value:{value:T},constructor:{value:Dr(`${k.name}_${D}`,function(){})}});J.values[T]=re,J[D]=re},Is=I=>{if(I===null)return"null";var D=typeof I;return D==="object"||D==="array"||D==="function"?I.toString():""+I},ma=(I,D)=>{switch(D){case 4:return function(T){return this.fromWireType(L[T>>2])};case 8:return function(T){return this.fromWireType(K[T>>3])};default:throw new TypeError(`invalid float width (${D}): ${I}`)}},ya=(I,D,T)=>{D=Ie(D),Ye(I,{name:D,fromWireType:k=>k,toWireType:(k,J)=>J,argPackAdvance:Ge,readValueFromPointer:ma(D,T),destructorFunction:null})},Wn=(I,D,T,k,J,re,se)=>{var fe=Ss(D,T);I=Ie(I),I=ba(I),J=Hr(k,J),Kr(I,function(){Es(`Cannot call ${I} due to unbound types`,fe)},D-1),et([],fe,function(be){var xe=[be[0],null].concat(be.slice(1));return da(I,Ni(I,xe,null,J,re),D-1),[]})},wa=(I,D,T)=>{switch(D){case 1:return T?k=>R[k>>0]:k=>N[k>>0];case 2:return T?k=>q[k>>1]:k=>U[k>>1];case 4:return T?k=>P[k>>2]:k=>F[k>>2];default:throw new TypeError(`invalid integer width (${D}): ${I}`)}},dc=(I,D,T,k,J)=>{D=Ie(D);var re=Pe=>Pe;if(k===0){var se=32-8*T;re=Pe=>Pe<<se>>>se}var fe=D.includes("unsigned"),be=(Pe,Ve)=>{},xe;fe?xe=function(Pe,Ve){return be(Ve,this.name),Ve>>>0}:xe=function(Pe,Ve){return be(Ve,this.name),Ve},Ye(I,{name:D,fromWireType:re,toWireType:xe,argPackAdvance:Ge,readValueFromPointer:wa(D,T,k!==0),destructorFunction:null})},pc=(I,D,T)=>{var k=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],J=k[D];function re(se){var fe=F[se>>2],be=F[se+4>>2];return new J(R.buffer,be,fe)}T=Ie(T),Ye(I,{name:T,fromWireType:re,argPackAdvance:Ge,readValueFromPointer:re},{ignoreDuplicateRegistrations:!0})},_a=(I,D,T,k)=>{if(!(k>0))return 0;for(var J=T,re=T+k-1,se=0;se<I.length;++se){var fe=I.charCodeAt(se);if(fe>=55296&&fe<=57343){var be=I.charCodeAt(++se);fe=65536+((fe&1023)<<10)|be&1023}if(fe<=127){if(T>=re)break;D[T++]=fe}else if(fe<=2047){if(T+1>=re)break;D[T++]=192|fe>>6,D[T++]=128|fe&63}else if(fe<=65535){if(T+2>=re)break;D[T++]=224|fe>>12,D[T++]=128|fe>>6&63,D[T++]=128|fe&63}else{if(T+3>=re)break;D[T++]=240|fe>>18,D[T++]=128|fe>>12&63,D[T++]=128|fe>>6&63,D[T++]=128|fe&63}}return D[T]=0,T-J},j=(I,D,T)=>_a(I,N,D,T),Y=I=>{for(var D=0,T=0;T<I.length;++T){var k=I.charCodeAt(T);k<=127?D++:k<=2047?D+=2:k>=55296&&k<=57343?(D+=4,++T):D+=3}return D},de=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Oe=(I,D,T)=>{for(var k=D+T,J=D;I[J]&&!(J>=k);)++J;if(J-D>16&&I.buffer&&de)return de.decode(I.subarray(D,J));for(var re="";D<J;){var se=I[D++];if(!(se&128)){re+=String.fromCharCode(se);continue}var fe=I[D++]&63;if((se&224)==192){re+=String.fromCharCode((se&31)<<6|fe);continue}var be=I[D++]&63;if((se&240)==224?se=(se&15)<<12|fe<<6|be:se=(se&7)<<18|fe<<12|be<<6|I[D++]&63,se<65536)re+=String.fromCharCode(se);else{var xe=se-65536;re+=String.fromCharCode(55296|xe>>10,56320|xe&1023)}}return re},Et=(I,D)=>I?Oe(N,I,D):"",Ze=(I,D)=>{D=Ie(D);var T=D==="std::string";Ye(I,{name:D,fromWireType(k){var J=F[k>>2],re=k+4,se;if(T)for(var fe=re,be=0;be<=J;++be){var xe=re+be;if(be==J||N[xe]==0){var Pe=xe-fe,Ve=Et(fe,Pe);se===void 0?se=Ve:(se+="\0",se+=Ve),fe=xe+1}}else{for(var He=new Array(J),be=0;be<J;++be)He[be]=String.fromCharCode(N[re+be]);se=He.join("")}return tn(k),se},toWireType(k,J){J instanceof ArrayBuffer&&(J=new Uint8Array(J));var re,se=typeof J=="string";se||J instanceof Uint8Array||J instanceof Uint8ClampedArray||J instanceof Int8Array||$e("Cannot pass non-string to std::string"),T&&se?re=Y(J):re=J.length;var fe=bc(4+re+1),be=fe+4;if(F[fe>>2]=re,T&&se)j(J,be,re+1);else if(se)for(var xe=0;xe<re;++xe){var Pe=J.charCodeAt(xe);Pe>255&&(tn(be),$e("String has UTF-16 code units that do not fit in 8 bits")),N[be+xe]=Pe}else for(var xe=0;xe<re;++xe)N[be+xe]=J[xe];return k!==null&&k.push(tn,fe),fe},argPackAdvance:Ge,readValueFromPointer:ni,destructorFunction(k){tn(k)}})},Tt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Yt=(I,D)=>{for(var T=I,k=T>>1,J=k+D/2;!(k>=J)&&U[k];)++k;if(T=k<<1,T-I>32&&Tt)return Tt.decode(N.subarray(I,T));for(var re="",se=0;!(se>=D/2);++se){var fe=q[I+se*2>>1];if(fe==0)break;re+=String.fromCharCode(fe)}return re},er=(I,D,T)=>{var k;if((k=T)!==null&&k!==void 0||(T=2147483647),T<2)return 0;T-=2;for(var J=D,re=T<I.length*2?T/2:I.length,se=0;se<re;++se){var fe=I.charCodeAt(se);q[D>>1]=fe,D+=2}return q[D>>1]=0,D-J},Nt=I=>I.length*2,Or=(I,D)=>{for(var T=0,k="";!(T>=D/4);){var J=P[I+T*4>>2];if(J==0)break;if(++T,J>=65536){var re=J-65536;k+=String.fromCharCode(55296|re>>10,56320|re&1023)}else k+=String.fromCharCode(J)}return k},Wr=(I,D,T)=>{var k;if((k=T)!==null&&k!==void 0||(T=2147483647),T<4)return 0;for(var J=D,re=J+T-4,se=0;se<I.length;++se){var fe=I.charCodeAt(se);if(fe>=55296&&fe<=57343){var be=I.charCodeAt(++se);fe=65536+((fe&1023)<<10)|be&1023}if(P[D>>2]=fe,D+=4,D+4>re)break}return P[D>>2]=0,D-J},sr=I=>{for(var D=0,T=0;T<I.length;++T){var k=I.charCodeAt(T);k>=55296&&k<=57343&&++T,D+=4}return D},Lr=(I,D,T)=>{T=Ie(T);var k,J,re,se,fe;D===2?(k=Yt,J=er,se=Nt,re=()=>U,fe=1):D===4&&(k=Or,J=Wr,se=sr,re=()=>F,fe=2),Ye(I,{name:T,fromWireType:be=>{for(var xe=F[be>>2],Pe=re(),Ve,He=be+4,rt=0;rt<=xe;++rt){var qt=be+4+rt*D;if(rt==xe||Pe[qt>>fe]==0){var jt=qt-He,At=k(He,jt);Ve===void 0?Ve=At:(Ve+="\0",Ve+=At),He=qt+D}}return tn(be),Ve},toWireType:(be,xe)=>{typeof xe!="string"&&$e(`Cannot pass non-string to C++ string type ${T}`);var Pe=se(xe),Ve=bc(4+Pe+D);return F[Ve>>2]=Pe>>fe,J(xe,Ve+4,Pe+D),be!==null&&be.push(tn,Ve),Ve},argPackAdvance:Ge,readValueFromPointer:De,destructorFunction(be){tn(be)}})},qr=(I,D,T,k,J,re)=>{Ae[I]={name:Ie(D),rawConstructor:Hr(T,k),rawDestructor:Hr(J,re),fields:[]}},Li=(I,D,T,k,J,re,se,fe,be,xe)=>{Ae[I].fields.push({fieldName:Ie(D),getterReturnType:T,getter:Hr(k,J),getterContext:re,setterArgumentType:se,setter:Hr(fe,be),setterContext:xe})},_i=(I,D)=>{D=Ie(D),Ye(I,{isVoid:!0,name:D,argPackAdvance:0,fromWireType:()=>{},toWireType:(T,k)=>{}})},xi=[],xa=(I,D,T,k)=>(I=xi[I],D=si.toValue(D),I(null,D,T,k)),Ds={},Os=I=>{var D=Ds[I];return D===void 0?Ie(I):D},_h=()=>{if(typeof globalThis=="object")return globalThis;function I(D){D.$$$embind_global$$$=D;var T=typeof $$$embind_global$$$=="object"&&D.$$$embind_global$$$==D;return T||delete D.$$$embind_global$$$,T}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&I(global)?$$$embind_global$$$=global:typeof self=="object"&&I(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Sm=I=>I===0?si.toHandle(_h()):(I=Os(I),si.toHandle(_h()[I])),Mm=I=>{var D=xi.length;return xi.push(I),D},Am=(I,D)=>{for(var T=new Array(I),k=0;k<I;++k)T[k]=Hn(F[D+k*4>>2],"parameter "+k);return T},Im=Reflect.construct,Dm=(I,D,T)=>{var k=[],J=I.toWireType(k,T);return k.length&&(F[D>>2]=si.toHandle(k)),J},Om=(I,D,T)=>{var k=Am(I,D),J=k.shift();I--;var re=new Array(I),se=(be,xe,Pe,Ve)=>{for(var He=0,rt=0;rt<I;++rt)re[rt]=k[rt].readValueFromPointer(Ve+He),He+=k[rt].argPackAdvance;for(var qt=T===1?Im(xe,re):xe.apply(be,re),rt=0;rt<I;++rt){var jt,At;(jt=(At=k[rt]).deleteObject)===null||jt===void 0||jt.call(At,re[rt])}return Dm(J,Pe,qt)},fe=`methodCaller<(${k.map(be=>be.name).join(", ")}) => ${J.name}>`;return Mm(Dr(fe,se))},Pm=I=>{I>4&&(Fr.get(I).refcount+=1)},$m=I=>{var D=si.toValue(I);we(D),uo(I)},Rm=(I,D)=>{I=Hn(I,"_emval_take_value");var T=I.readValueFromPointer(D);return si.toHandle(T)},Cm=()=>{m("")},Tm=(I,D,T)=>N.copyWithin(I,D,D+T),Nm=()=>2147483648,Fm=I=>{var D=_.buffer,T=(I-D.byteLength+65535)/65536;try{return _.grow(T),V(),1}catch{}},Lm=I=>{var D=N.length;I>>>=0;var T=Nm();if(I>T)return!1;for(var k=(be,xe)=>be+(xe-be%xe)%xe,J=1;J<=4;J*=2){var re=D*(1+.2/J);re=Math.min(re,I+100663296);var se=Math.min(T,k(Math.max(I,re),65536)),fe=Fm(se);if(fe)return!0}return!1},gc={},qm=()=>o||"./this.program",lo=()=>{if(!lo.strings){var I=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",D={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:I,_:qm()};for(var T in gc)gc[T]===void 0?delete D[T]:D[T]=gc[T];var k=[];for(var T in D)k.push(`${T}=${D[T]}`);lo.strings=k}return lo.strings},Bm=(I,D)=>{for(var T=0;T<I.length;++T)R[D++>>0]=I.charCodeAt(T);R[D>>0]=0},Um=(I,D)=>{var T=0;return lo().forEach((k,J)=>{var re=D+T;F[I+J*4>>2]=re,Bm(k,re),T+=k.length+1}),0},km=(I,D)=>{var T=lo();F[I>>2]=T.length;var k=0;return T.forEach(J=>k+=J.length+1),F[D>>2]=k,0},jm=I=>I,Ea=I=>I%4===0&&(I%100!==0||I%400===0),zm=(I,D)=>{for(var T=0,k=0;k<=D;T+=I[k++]);return T},xh=[31,29,31,30,31,30,31,31,30,31,30,31],Eh=[31,28,31,30,31,30,31,31,30,31,30,31],Km=(I,D)=>{for(var T=new Date(I.getTime());D>0;){var k=Ea(T.getFullYear()),J=T.getMonth(),re=(k?xh:Eh)[J];if(D>re-T.getDate())D-=re-T.getDate()+1,T.setDate(1),J<11?T.setMonth(J+1):(T.setMonth(0),T.setFullYear(T.getFullYear()+1));else return T.setDate(T.getDate()+D),T}return T};function Vm(I,D,T){var k=Y(I)+1,J=new Array(k);return _a(I,J,0,J.length),J}var Hm=(I,D)=>{R.set(I,D)},Wm=(I,D,T,k)=>{var J=F[k+40>>2],re={tm_sec:P[k>>2],tm_min:P[k+4>>2],tm_hour:P[k+8>>2],tm_mday:P[k+12>>2],tm_mon:P[k+16>>2],tm_year:P[k+20>>2],tm_wday:P[k+24>>2],tm_yday:P[k+28>>2],tm_isdst:P[k+32>>2],tm_gmtoff:P[k+36>>2],tm_zone:J?Et(J):""},se=Et(T),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var be in fe)se=se.replace(new RegExp(be,"g"),fe[be]);var xe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Pe=["January","February","March","April","May","June","July","August","September","October","November","December"];function Ve(me,Te,zt){for(var tr=typeof me=="number"?me.toString():me||"";tr.length<Te;)tr=zt[0]+tr;return tr}function He(me,Te){return Ve(me,Te,"0")}function rt(me,Te){function zt(Ps){return Ps<0?-1:Ps>0?1:0}var tr;return(tr=zt(me.getFullYear()-Te.getFullYear()))===0&&(tr=zt(me.getMonth()-Te.getMonth()))===0&&(tr=zt(me.getDate()-Te.getDate())),tr}function qt(me){switch(me.getDay()){case 0:return new Date(me.getFullYear()-1,11,29);case 1:return me;case 2:return new Date(me.getFullYear(),0,3);case 3:return new Date(me.getFullYear(),0,2);case 4:return new Date(me.getFullYear(),0,1);case 5:return new Date(me.getFullYear()-1,11,31);case 6:return new Date(me.getFullYear()-1,11,30)}}function jt(me){var Te=Km(new Date(me.tm_year+1900,0,1),me.tm_yday),zt=new Date(Te.getFullYear(),0,4),tr=new Date(Te.getFullYear()+1,0,4),Ps=qt(zt),Ma=qt(tr);return rt(Ps,Te)<=0?rt(Ma,Te)<=0?Te.getFullYear()+1:Te.getFullYear():Te.getFullYear()-1}var At={"%a":me=>xe[me.tm_wday].substring(0,3),"%A":me=>xe[me.tm_wday],"%b":me=>Pe[me.tm_mon].substring(0,3),"%B":me=>Pe[me.tm_mon],"%C":me=>{var Te=me.tm_year+1900;return He(Te/100|0,2)},"%d":me=>He(me.tm_mday,2),"%e":me=>Ve(me.tm_mday,2," "),"%g":me=>jt(me).toString().substring(2),"%G":me=>jt(me),"%H":me=>He(me.tm_hour,2),"%I":me=>{var Te=me.tm_hour;return Te==0?Te=12:Te>12&&(Te-=12),He(Te,2)},"%j":me=>He(me.tm_mday+zm(Ea(me.tm_year+1900)?xh:Eh,me.tm_mon-1),3),"%m":me=>He(me.tm_mon+1,2),"%M":me=>He(me.tm_min,2),"%n":()=>`
`,"%p":me=>me.tm_hour>=0&&me.tm_hour<12?"AM":"PM","%S":me=>He(me.tm_sec,2),"%t":()=>"	","%u":me=>me.tm_wday||7,"%U":me=>{var Te=me.tm_yday+7-me.tm_wday;return He(Math.floor(Te/7),2)},"%V":me=>{var Te=Math.floor((me.tm_yday+7-(me.tm_wday+6)%7)/7);if((me.tm_wday+371-me.tm_yday-2)%7<=2&&Te++,Te){if(Te==53){var zt=(me.tm_wday+371-me.tm_yday)%7;zt!=4&&(zt!=3||!Ea(me.tm_year))&&(Te=1)}}else{Te=52;var tr=(me.tm_wday+7-me.tm_yday-1)%7;(tr==4||tr==5&&Ea(me.tm_year%400-1))&&Te++}return He(Te,2)},"%w":me=>me.tm_wday,"%W":me=>{var Te=me.tm_yday+7-(me.tm_wday+6)%7;return He(Math.floor(Te/7),2)},"%y":me=>(me.tm_year+1900).toString().substring(2),"%Y":me=>me.tm_year+1900,"%z":me=>{var Te=me.tm_gmtoff,zt=Te>=0;return Te=Math.abs(Te)/60,Te=Te/60*100+Te%60,(zt?"+":"-")+("0000"+Te).slice(-4)},"%Z":me=>me.tm_zone,"%%":()=>"%"};se=se.replace(/%%/g,"\0\0");for(var be in At)se.includes(be)&&(se=se.replace(new RegExp(be,"g"),At[be](re)));se=se.replace(/\0\0/g,"%");var or=Vm(se);return or.length>D?0:(Hm(or,I),or.length-1)},Gm=(I,D,T,k,J)=>Wm(I,D,T,k);We=r.InternalError=class extends Error{constructor(I){super(I),this.name="InternalError"}},at(),st=r.BindingError=class extends Error{constructor(I){super(I),this.name="BindingError"}},wr(),je(),Vn(),ga=r.UnboundTypeError=sc(Error,"UnboundTypeError"),fc(),en();var Jm={s:G,u:oe,b:le,g:ie,q:ye,J:pe,f:he,V:_e,d:ce,da:ze,Q:Re,_:Le,ca:oc,ba:ac,w:Fi,Y:uc,x:lc,h:hc,L:ya,M:Wn,t:dc,o:pc,K:Ze,C:Lr,A:qr,ea:Li,$:_i,R:xa,ha:uo,fa:Sm,Z:Om,N:Pm,O:$m,aa:Rm,B:Cm,X:Tm,W:Lm,T:Um,U:km,E:ly,D:ey,F:uy,n:hy,a:Ym,e:ry,m:Qm,k:ny,H:fy,v:oy,G:cy,z:py,P:by,l:iy,j:ty,c:Xm,p:Zm,I:ay,r:dy,i:sy,y:gy,ga:jm,S:Gm},Vt=ge(),tn=r._free=I=>(tn=r._free=Vt.ka)(I),bc=r._malloc=I=>(bc=r._malloc=Vt.la)(I),Sh=I=>(Sh=Vt.na)(I),Lt=(I,D)=>(Lt=Vt.oa)(I,D),ho=I=>(ho=Vt.pa)(I),Ut=()=>(Ut=Vt.qa)(),kt=I=>(kt=Vt.ra)(I),Mh=I=>(Mh=Vt.sa)(I),Ah=I=>(Ah=Vt.ta)(I),Ih=(I,D,T)=>(Ih=Vt.ua)(I,D,T),Dh=I=>(Dh=Vt.va)(I);r.dynCall_viijii=(I,D,T,k,J,re,se)=>(r.dynCall_viijii=Vt.wa)(I,D,T,k,J,re,se);var Oh=r.dynCall_jiiii=(I,D,T,k,J)=>(Oh=r.dynCall_jiiii=Vt.xa)(I,D,T,k,J);r.dynCall_iiiiij=(I,D,T,k,J,re,se)=>(r.dynCall_iiiiij=Vt.ya)(I,D,T,k,J,re,se),r.dynCall_iiiiijj=(I,D,T,k,J,re,se,fe,be)=>(r.dynCall_iiiiijj=Vt.za)(I,D,T,k,J,re,se,fe,be),r.dynCall_iiiiiijj=(I,D,T,k,J,re,se,fe,be,xe)=>(r.dynCall_iiiiiijj=Vt.Aa)(I,D,T,k,J,re,se,fe,be,xe);function Ym(I,D){var T=Ut();try{return Ct(I)(D)}catch(k){if(kt(T),k!==k+0)throw k;Lt(1,0)}}function Zm(I,D,T,k){var J=Ut();try{Ct(I)(D,T,k)}catch(re){if(kt(J),re!==re+0)throw re;Lt(1,0)}}function Xm(I,D,T){var k=Ut();try{Ct(I)(D,T)}catch(J){if(kt(k),J!==J+0)throw J;Lt(1,0)}}function Qm(I,D,T,k){var J=Ut();try{return Ct(I)(D,T,k)}catch(re){if(kt(J),re!==re+0)throw re;Lt(1,0)}}function ey(I,D,T,k,J){var re=Ut();try{return Ct(I)(D,T,k,J)}catch(se){if(kt(re),se!==se+0)throw se;Lt(1,0)}}function ty(I,D){var T=Ut();try{Ct(I)(D)}catch(k){if(kt(T),k!==k+0)throw k;Lt(1,0)}}function ry(I,D,T){var k=Ut();try{return Ct(I)(D,T)}catch(J){if(kt(k),J!==J+0)throw J;Lt(1,0)}}function iy(I){var D=Ut();try{Ct(I)()}catch(T){if(kt(D),T!==T+0)throw T;Lt(1,0)}}function ny(I,D,T,k,J){var re=Ut();try{return Ct(I)(D,T,k,J)}catch(se){if(kt(re),se!==se+0)throw se;Lt(1,0)}}function sy(I,D,T,k,J,re,se,fe,be,xe,Pe){var Ve=Ut();try{Ct(I)(D,T,k,J,re,se,fe,be,xe,Pe)}catch(He){if(kt(Ve),He!==He+0)throw He;Lt(1,0)}}function oy(I,D,T,k,J,re,se){var fe=Ut();try{return Ct(I)(D,T,k,J,re,se)}catch(be){if(kt(fe),be!==be+0)throw be;Lt(1,0)}}function ay(I,D,T,k,J){var re=Ut();try{Ct(I)(D,T,k,J)}catch(se){if(kt(re),se!==se+0)throw se;Lt(1,0)}}function fy(I,D,T,k,J,re){var se=Ut();try{return Ct(I)(D,T,k,J,re)}catch(fe){if(kt(se),fe!==fe+0)throw fe;Lt(1,0)}}function cy(I,D,T,k,J,re,se,fe){var be=Ut();try{return Ct(I)(D,T,k,J,re,se,fe)}catch(xe){if(kt(be),xe!==xe+0)throw xe;Lt(1,0)}}function uy(I,D,T,k){var J=Ut();try{return Ct(I)(D,T,k)}catch(re){if(kt(J),re!==re+0)throw re;Lt(1,0)}}function ly(I,D,T,k){var J=Ut();try{return Ct(I)(D,T,k)}catch(re){if(kt(J),re!==re+0)throw re;Lt(1,0)}}function hy(I){var D=Ut();try{return Ct(I)()}catch(T){if(kt(D),T!==T+0)throw T;Lt(1,0)}}function dy(I,D,T,k,J,re,se,fe){var be=Ut();try{Ct(I)(D,T,k,J,re,se,fe)}catch(xe){if(kt(be),xe!==xe+0)throw xe;Lt(1,0)}}function py(I,D,T,k,J,re,se,fe,be,xe,Pe,Ve){var He=Ut();try{return Ct(I)(D,T,k,J,re,se,fe,be,xe,Pe,Ve)}catch(rt){if(kt(He),rt!==rt+0)throw rt;Lt(1,0)}}function gy(I,D,T,k,J,re,se,fe,be,xe,Pe,Ve,He,rt,qt,jt){var At=Ut();try{Ct(I)(D,T,k,J,re,se,fe,be,xe,Pe,Ve,He,rt,qt,jt)}catch(or){if(kt(At),or!==or+0)throw or;Lt(1,0)}}function by(I,D,T,k,J){var re=Ut();try{return Oh(I,D,T,k,J)}catch(se){if(kt(re),se!==se+0)throw se;Lt(1,0)}}var Sa;x=function I(){Sa||Ph(),Sa||(x=I)};function Ph(){if(M>0||(g(),M>0))return;function I(){Sa||(Sa=!0,r.calledRun=!0,!A&&(p(),i(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),u()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),I()},1)):I()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Ph(),t.ready}})();function MD(e){return yh(wh,e)}async function AD(e,t){return ED(wh,e,t)}async function ID(e,t){return SD(wh,e,t)}var Co;class Pg extends EventTarget{constructor(t={}){var r;super(),QI(this,Co,void 0);try{const i=(r=t==null?void 0:t.formats)==null?void 0:r.filter(n=>n!=="unknown");if((i==null?void 0:i.length)===0)throw new TypeError("Hint option provided, but is empty.");i==null||i.forEach(n=>{if(!cf.has(n))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${n}' is not a valid enum value of type BarcodeFormat.`)}),eD(this,Co,i??[]),MD().then(n=>{this.dispatchEvent(new CustomEvent("load",{detail:n}))}).catch(n=>{this.dispatchEvent(new CustomEvent("error",{detail:n}))})}catch(i){throw Ag(i,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return tD.filter(t=>t!=="unknown")}async detect(t){try{const r=await fD(t);if(r===null)return[];let i;try{sm(r)?i=await AD(r,{tryHarder:!0,formats:Mg(this,Co).map(n=>cf.get(n))}):i=await ID(r,{tryHarder:!0,formats:Mg(this,Co).map(n=>cf.get(n))})}catch(n){throw console.error(n),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return i.map(n=>{const{topLeft:{x:s,y:o},topRight:{x:a,y:f},bottomLeft:{x:c,y:l},bottomRight:{x:h,y:w}}=n.position,E=Math.min(s,a,c,h),_=Math.min(o,f,l,w),A=Math.max(s,a,c,h),R=Math.max(o,f,l,w);return{boundingBox:new DOMRectReadOnly(E,_,A-E,R-_),rawValue:n.text,format:rD(n.format),cornerPoints:[{x:s,y:o},{x:a,y:f},{x:h,y:w},{x:c,y:l}]}})}catch(r){throw Ag(r,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Co=new WeakMap;const cm=(e,t,r="error")=>{let i,n;const s=new Promise((o,a)=>{i=o,n=a,e.addEventListener(t,i),e.addEventListener(r,n)});return s.finally(()=>{e.removeEventListener(t,i),e.removeEventListener(r,n)}),s},$g=e=>new Promise(t=>setTimeout(t,e));class um extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class DD extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class OD extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let lm;async function PD(e){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new Pg({formats:e});const t=await window.BarcodeDetector.getSupportedFormats(),r=e.filter(i=>!t.includes(i));return r.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(r)}. Will use polyfill.`),new Pg({formats:e})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:e}))}async function hm(e){lm=await PD(e)}const $D=async(e,{detectHandler:t,locateHandler:r,minDelay:i,formats:n})=>{console.debug("[vue-qrcode-reader] start scanning"),await hm(n);const s=o=>async a=>{if(e.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:f,contentBefore:c,lastScanHadContent:l}=o;if(a-f<i)window.requestAnimationFrame(s(o));else{const h=await lm.detect(e),w=h.some(A=>!c.includes(A.rawValue));w&&t(h);const E=h.length>0;E&&r(h),!E&&l&&r(h);const _={lastScanned:a,lastScanHadContent:E,contentBefore:w?h.map(A=>A.rawValue):c};window.requestAnimationFrame(s(_))}}};s({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var dm={},zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.compactObject=bm;zr.deprecated=UD;var RD=zr.detectBrowser=kD;zr.disableLog=LD;zr.disableWarnings=qD;zr.extractVersion=uf;zr.filterStats=jD;zr.log=BD;zr.walkStats=Of;zr.wrapPeerConnectionEvent=FD;function CD(e,t,r){return t=TD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TD(e){var t=ND(e,"string");return Bn(t)==="symbol"?t:String(t)}function ND(e,t){if(Bn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(Bn(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bn(e){"@babel/helpers - typeof";return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(e)}var pm=!0,gm=!0;function uf(e,t,r){var i=e.match(t);return i&&i.length>=r&&parseInt(i[r],10)}function FD(e,t,r){if(e.RTCPeerConnection){var i=e.RTCPeerConnection.prototype,n=i.addEventListener;i.addEventListener=function(o,a){if(o!==t)return n.apply(this,arguments);var f=function(c){var l=r(c);l&&(a.handleEvent?a.handleEvent(l):a(l))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,f),n.apply(this,[o,f])};var s=i.removeEventListener;i.removeEventListener=function(o,a){if(o!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(a))return s.apply(this,arguments);var f=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,f])},Object.defineProperty(i,"on"+t,{get:function(){return this["_on"+t]},set:function(o){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),o&&this.addEventListener(t,this["_on"+t]=o)},enumerable:!0,configurable:!0})}}function LD(e){return typeof e!="boolean"?new Error("Argument type: "+Bn(e)+". Please use a boolean."):(pm=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function qD(e){return typeof e!="boolean"?new Error("Argument type: "+Bn(e)+". Please use a boolean."):(gm=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function BD(){if((typeof window>"u"?"undefined":Bn(window))==="object"){if(pm)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function UD(e,t){gm&&console.warn(e+" is deprecated, please use "+t+" instead.")}function kD(e){var t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;var r=e.navigator;if(r.mozGetUserMedia)t.browser="firefox",t.version=uf(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=uf(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=uf(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function Rg(e){return Object.prototype.toString.call(e)==="[object Object]"}function bm(e){return Rg(e)?Object.keys(e).reduce(function(t,r){var i=Rg(e[r]),n=i?bm(e[r]):e[r],s=i&&!Object.keys(n).length;return n===void 0||s?t:Object.assign(t,CD({},r,n))},{}):e}function Of(e,t,r){!t||r.has(t.id)||(r.set(t.id,t),Object.keys(t).forEach(function(i){i.endsWith("Id")?Of(e,e.get(t[i]),r):i.endsWith("Ids")&&t[i].forEach(function(n){Of(e,e.get(n),r)})}))}function jD(e,t,r){var i=r?"outbound-rtp":"inbound-rtp",n=new Map;if(t===null)return n;var s=[];return e.forEach(function(o){o.type==="track"&&o.trackIdentifier===t.id&&s.push(o)}),s.forEach(function(o){e.forEach(function(a){a.type===i&&a.trackId===o.id&&Of(e,a,n)})}),n}Object.defineProperty(dm,"__esModule",{value:!0});var zD=dm.shimGetUserMedia=HD,KD=VD(zr);function vm(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(vm=function(i){return i?r:t})(e)}function VD(e,t){if(e.__esModule)return e;if(e===null||$n(e)!=="object"&&typeof e!="function")return{default:e};var r=vm(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}function $n(e){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(e)}var Cg=KD.log;function HD(e,t){var r=e&&e.navigator;if(r.mediaDevices){var i=function(f){if($n(f)!=="object"||f.mandatory||f.optional)return f;var c={};return Object.keys(f).forEach(function(l){if(!(l==="require"||l==="advanced"||l==="mediaSource")){var h=$n(f[l])==="object"?f[l]:{ideal:f[l]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);var w=function(_,A){return _?_+A.charAt(0).toUpperCase()+A.slice(1):A==="deviceId"?"sourceId":A};if(h.ideal!==void 0){c.optional=c.optional||[];var E={};typeof h.ideal=="number"?(E[w("min",l)]=h.ideal,c.optional.push(E),E={},E[w("max",l)]=h.ideal,c.optional.push(E)):(E[w("",l)]=h.ideal,c.optional.push(E))}h.exact!==void 0&&typeof h.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[w("",l)]=h.exact):["min","max"].forEach(function(_){h[_]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[w(_,l)]=h[_])})}}),f.advanced&&(c.optional=(c.optional||[]).concat(f.advanced)),c},n=function(f,c){if(t.version>=61)return c(f);if(f=JSON.parse(JSON.stringify(f)),f&&$n(f.audio)==="object"){var l=function(_,A,R){A in _&&!(R in _)&&(_[R]=_[A],delete _[A])};f=JSON.parse(JSON.stringify(f)),l(f.audio,"autoGainControl","googAutoGainControl"),l(f.audio,"noiseSuppression","googNoiseSuppression"),f.audio=i(f.audio)}if(f&&$n(f.video)==="object"){var h=f.video.facingMode;h=h&&($n(h)==="object"?h:{ideal:h});var w=t.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!w)){delete f.video.facingMode;var E;if(h.exact==="environment"||h.ideal==="environment"?E=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(E=["front"]),E)return r.mediaDevices.enumerateDevices().then(function(_){_=_.filter(function(R){return R.kind==="videoinput"});var A=_.find(function(R){return E.some(function(N){return R.label.toLowerCase().includes(N)})});return!A&&_.length&&E.includes("back")&&(A=_[_.length-1]),A&&(f.video.deviceId=h.exact?{exact:A.deviceId}:{ideal:A.deviceId}),f.video=i(f.video),Cg("chrome: "+JSON.stringify(f)),c(f)})}f.video=i(f.video)}return Cg("chrome: "+JSON.stringify(f)),c(f)},s=function(f){return t.version>=64?f:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[f.name]||f.name,message:f.message,constraint:f.constraint||f.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},o=function(f,c,l){n(f,function(h){r.webkitGetUserMedia(h,c,function(w){l&&l(s(w))})})};if(r.getUserMedia=o.bind(r),r.mediaDevices.getUserMedia){var a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(f){return n(f,function(c){return a(c).then(function(l){if(c.audio&&!l.getAudioTracks().length||c.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(function(h){h.stop()}),new DOMException("","NotFoundError");return l},function(l){return Promise.reject(s(l))})})}}}}var mm={};Object.defineProperty(mm,"__esModule",{value:!0});var WD=mm.shimGetUserMedia=YD,GD=JD(zr);function ym(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(ym=function(i){return i?r:t})(e)}function JD(e,t){if(e.__esModule)return e;if(e===null||Ys(e)!=="object"&&typeof e!="function")return{default:e};var r=ym(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}function Ys(e){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(e)}function YD(e,t){var r=e&&e.navigator,i=e&&e.MediaStreamTrack;if(r.getUserMedia=function(f,c,l){GD.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(f).then(c,l)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var n=function(f,c,l){c in f&&!(l in f)&&(f[l]=f[c],delete f[c])},s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(f){return Ys(f)==="object"&&Ys(f.audio)==="object"&&(f=JSON.parse(JSON.stringify(f)),n(f.audio,"autoGainControl","mozAutoGainControl"),n(f.audio,"noiseSuppression","mozNoiseSuppression")),s(f)},i&&i.prototype.getSettings){var o=i.prototype.getSettings;i.prototype.getSettings=function(){var f=o.apply(this,arguments);return n(f,"mozAutoGainControl","autoGainControl"),n(f,"mozNoiseSuppression","noiseSuppression"),f}}if(i&&i.prototype.applyConstraints){var a=i.prototype.applyConstraints;i.prototype.applyConstraints=function(f){return this.kind==="audio"&&Ys(f)==="object"&&(f=JSON.parse(JSON.stringify(f)),n(f,"autoGainControl","mozAutoGainControl"),n(f,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[f])}}}}var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.shimAudioContext=oO;Qi.shimCallbacksAPI=tO;Qi.shimConstraints=xm;Qi.shimCreateOfferLegacy=sO;var ZD=Qi.shimGetUserMedia=rO;Qi.shimLocalStreamsAPI=QD;Qi.shimRTCIceServerUrls=iO;Qi.shimRemoteStreamsAPI=eO;Qi.shimTrackEventTransceiver=nO;var wm=XD(zr);function _m(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(_m=function(i){return i?r:t})(e)}function XD(e,t){if(e.__esModule)return e;if(e===null||Un(e)!=="object"&&typeof e!="function")return{default:e};var r=_m(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}function Un(e){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un(e)}function QD(e){if(!(Un(e)!=="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(function(n){return t.call(i,n,r)}),r.getVideoTracks().forEach(function(n){return t.call(i,n,r)})},e.RTCPeerConnection.prototype.addTrack=function(r){for(var i=this,n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s&&s.forEach(function(a){i._localStreams?i._localStreams.includes(a)||i._localStreams.push(a):i._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){var i=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(r);if(n!==-1){this._localStreams.splice(n,1);var s=r.getTracks();this.getSenders().forEach(function(o){s.includes(o.track)&&i.removeTrack(o)})}})}}function eO(e){if(!(Un(e)!=="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(r){var i=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(function(s){if(i._remoteStreams||(i._remoteStreams=[]),!i._remoteStreams.includes(s)){i._remoteStreams.push(s);var o=new Event("addstream");o.stream=s,i.dispatchEvent(o)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(n){if(r._remoteStreams||(r._remoteStreams=[]),!(r._remoteStreams.indexOf(n)>=0)){r._remoteStreams.push(n);var s=new Event("addstream");s.stream=n,r.dispatchEvent(s)}})}),t.apply(r,arguments)}}}function tO(e){if(!(Un(e)!=="object"||!e.RTCPeerConnection)){var t=e.RTCPeerConnection.prototype,r=t.createOffer,i=t.createAnswer,n=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(f,c){var l=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[l]);return c?(h.then(f,c),Promise.resolve()):h},t.createAnswer=function(f,c){var l=arguments.length>=2?arguments[2]:arguments[0],h=i.apply(this,[l]);return c?(h.then(f,c),Promise.resolve()):h};var a=function(f,c,l){var h=n.apply(this,[f]);return l?(h.then(c,l),Promise.resolve()):h};t.setLocalDescription=a,a=function(f,c,l){var h=s.apply(this,[f]);return l?(h.then(c,l),Promise.resolve()):h},t.setRemoteDescription=a,a=function(f,c,l){var h=o.apply(this,[f]);return l?(h.then(c,l),Promise.resolve()):h},t.addIceCandidate=a}}function rO(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,i=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(n){return i(xm(n))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(n,s,o){t.mediaDevices.getUserMedia(n).then(s,o)}).bind(t))}function xm(e){return e&&e.video!==void 0?Object.assign({},e,{video:wm.compactObject(e.video)}):e}function iO(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){for(var n=[],s=0;s<r.iceServers.length;s++){var o=r.iceServers[s];o.urls===void 0&&o.url?(wm.deprecated("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,n.push(o)):n.push(r.iceServers[s])}r.iceServers=n}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function nO(e){Un(e)==="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function sO(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);var i=this.getTransceivers().find(function(s){return s.receiver.track.kind==="audio"});r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);var n=this.getTransceivers().find(function(s){return s.receiver.track.kind==="video"});r.offerToReceiveVideo===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):r.offerToReceiveVideo===!0&&!n&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function oO(e){Un(e)!=="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const aO=e=>{let t=!1,r;return(...i)=>(t||(r=e(i),t=!0),r)};function zi(e,t){if(e===!1)throw new Error(t??"assertion failure")}function Tg(e){throw new Error("this code should be unreachable")}const fO=aO(()=>{const e=RD(window);switch(e.browser){case"chrome":zD(window,e);break;case"firefox":WD(window,e);break;case"safari":ZD(window,e);break;default:throw new um}});let Zs=Promise.resolve({type:"stop",data:{}});async function Ng(e,t,r){var i,n,s;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(t)),window.isSecureContext!==!0)throw new DD;if(((i=navigator==null?void 0:navigator.mediaDevices)==null?void 0:i.getUserMedia)===void 0)throw new um;fO(),console.debug("[vue-qrcode-reader] calling getUserMedia");const o=await navigator.mediaDevices.getUserMedia({audio:!1,video:t});e.srcObject!==void 0?e.srcObject=o:e.mozSrcObject!==void 0?e.mozSrcObject=o:window.URL.createObjectURL?e.src=window.URL.createObjectURL(o):window.webkitURL?e.src=window.webkitURL.createObjectURL(o):e.src=o.id,e.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([cm(e,"loadeddata"),$g(6e3).then(()=>{throw new OD})]),console.debug("[vue-qrcode-reader] video element loaded"),await $g(500);const[a]=o.getVideoTracks(),f=(s=(n=a==null?void 0:a.getCapabilities)==null?void 0:n.call(a))!=null?s:{};let c=!1;return r&&f.torch&&(await a.applyConstraints({advanced:[{torch:!0}]}),c=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:e,stream:o,capabilities:f,constraints:t,isTorchOn:c}}}async function cO(e,{constraints:t,torch:r,restart:i=!1}){Zs=Zs.then(s=>{if(s.type==="start"){const{data:{videoEl:o,stream:a,constraints:f,isTorchOn:c}}=s;return!i&&e===o&&t===f&&r===c?s:Em(o,a,c).then(()=>Ng(e,t,r))}else if(s.type==="stop"||s.type==="failed")return Ng(e,t,r);Tg()}).catch(s=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${s}"`),{type:"failed",error:s}));const n=await Zs;if(n.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(n.type==="failed")throw n.error;if(n.type==="start")return n.data.capabilities;Tg()}async function Em(e,t,r){console.debug("[vue-qrcode-reader] stopping camera"),e.src="",e.srcObject=null,e.load(),await cm(e,"error");for(const i of t.getTracks())r!=null||await i.applyConstraints({advanced:[{torch:!1}]}),t.removeTrack(i),i.stop();return{type:"stop",data:{}}}async function ka(){if(Zs=Zs.then(e=>{if(e.type==="stop"||e.type==="failed")return e;const{data:{videoEl:t,stream:r,isTorchOn:i}}=e;return Em(t,r,i)}),(await Zs).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const uO=l2({__name:"QrcodeStream",props:{constraints:{default:()=>({facingMode:"environment"})},formats:{default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function,default:void 0}},emits:["detect","camera-on","camera-off","error"],setup(e,{emit:t}){const r=e,i=t,n=Gn(r.constraints),s=Gn(r.formats);Pn(()=>r.constraints,(U,P)=>{JSON.stringify(U)!==JSON.stringify(P)&&(n.value=U)},{deep:!0}),Pn(()=>r.formats,(U,P)=>{JSON.stringify(U)!==JSON.stringify(P)&&(s.value=U)},{deep:!0});const o=Gn(),a=Gn(),f=Gn(),c=Gn(!1),l=Gn(!1);g1(()=>{l.value=!0}),Bl(()=>{ka()});const h=Ha(()=>({torch:r.torch,constraints:n.value,shouldStream:l.value&&!r.paused}));Pn(h,async U=>{const P=f.value;zi(P!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const F=o.value;zi(F!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const L=F.getContext("2d");if(zi(L!==null,"if cavnas is defined, canvas 2d context should also be non-null"),U.shouldStream){ka(),c.value=!1;try{const K=await cO(P,U);l.value?(c.value=!0,i("camera-on",K)):await ka()}catch(K){i("error",K)}}else F.width=P.videoWidth,F.height=P.videoHeight,L.drawImage(P,0,0,P.videoWidth,P.videoHeight),ka(),c.value=!1,i("camera-off")},{deep:!0}),Pn(s,async U=>{l.value&&await hm(U)});const w=Ha(()=>h.value.shouldStream&&c.value);Pn(w,U=>{if(U){zi(o.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),E(o.value),zi(a.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),E(a.value);const P=()=>r.track===void 0?500:40;zi(f.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),$D(f.value,{detectHandler:F=>i("detect",F),formats:s.value,locateHandler:_,minDelay:P()})}});const E=U=>{const P=U.getContext("2d");zi(P!==null,"canvas 2d context should always be non-null"),P.clearRect(0,0,U.width,U.height)},_=U=>{const P=a.value;zi(P!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const F=f.value;if(zi(F!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),U.length===0||r.track===void 0)E(P);else{const L=F.offsetWidth,K=F.offsetHeight,V=F.videoWidth,W=F.videoHeight,Q=Math.max(L/V,K/W),C=V*Q,g=W*Q,p=C/V,u=g/W,d=(L-C)/2,v=(K-g)/2,y=({x:S,y:m})=>({x:Math.floor(S*p),y:Math.floor(m*u)}),M=({x:S,y:m})=>({x:Math.floor(S+d),y:Math.floor(m+v)}),x=U.map(S=>{const{boundingBox:m,cornerPoints:$}=S,{x:ee,y:O}=M(y({x:m.x,y:m.y})),{x:H,y:X}=y({x:m.width,y:m.height});return{...S,cornerPoints:$.map(te=>M(y(te))),boundingBox:DOMRectReadOnly.fromRect({x:ee,y:O,width:H,height:X})}});P.width=F.offsetWidth,P.height=F.offsetHeight;const b=P.getContext("2d");zi(b!==null,"canvas 2d context should always be non-null"),r.track(x,b)}},A={width:"100%",height:"100%",position:"relative","z-index":"0"},R={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},N={width:"100%",height:"100%","object-fit":"cover"},q=Ha(()=>w.value?N:{...N,visibility:"hidden",position:"absolute"});return(U,P)=>(bn(),qs("div",{style:A},[Zt("video",{ref_key:"videoRef",ref:f,style:Nf(q.value),autoplay:"",muted:"",playsinline:""},null,4),l1(Zt("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:o,style:N},null,512),[[Ew,!w.value]]),Zt("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:a,style:R},null,512),Zt("div",{style:R},[D2(U.$slots,"default")])]))}}),lO=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},hO={components:{QrcodeStream:uO},data(){return{walletKit:null,core:null,walletUri:"",walletConnected:!1,walletAddress:null,session:null,namespace:null,errorMessage:null,activeSessions:[]}},async created(){this.core=new Df({projectId:"4f88dfdcec8f22c4e7ea1368c35eba3b"});try{this.walletKit=await XI.init({core:this.core,metadata:{name:"My Vue App",description:"A Vue.js app with WalletConnect",url:"https://my-vue-app.com",icons:[]}}),this.walletKit.on("session_proposal",this.onSessionProposal),this.getActiveSessions()}catch(e){console.error("Error initializing WalletKit:",e),this.errorMessage="Failed to initialize WalletKit."}},methods:{async onSessionProposal({id:e,params:t}){try{const r=bE({proposal:t,supportedNamespaces:{eip155:{chains:["eip155:1","eip155:137"],methods:["eth_sendTransaction","personal_sign"],events:["accountsChanged","chainChanged"],accounts:["eip155:1:0x887b295ffE6CE717eF6F1496AbE818e0e84b1700","eip155:137:0x887b295ffE6CE717eF6F1496AbE818e0e84b1700"]}}}),i=await this.walletKit.approveSession({id:e,namespaces:r});this.updateSessionState(i)}catch(r){console.error("Error during session proposal handling:",r),this.errorMessage="Session proposal rejected or error occurred.",await this.walletKit.rejectSession({id:t.id,reason:Dt("USER_REJECTED")})}},async connectWithUri(){try{if(!this.walletUri)return;const e=await this.walletKit.pair({uri:this.walletUri});this.getActiveSessions(),this.updateSessionState(e)}catch(e){console.error("Error connecting with URI:",e),this.errorMessage="Error while connecting with WalletConnect URI."}},async disconnectWallet(){try{const e=this.walletKit.getActiveSessions();if(e.length>0){const t=e[0];await this.walletKit.disconnectSession({topic:t.topic})}this.resetSessionState()}catch(e){console.error("Error disconnecting:",e)}},async disconnectSession(e){try{await this.walletKit.disconnectSession({topic:e}),this.getActiveSessions()}catch(t){console.error("Error disconnecting session:",t)}},async getActiveSessions(){try{this.activeSessions=this.walletKit.getActiveSessions()}catch(e){console.error("Error getting active sessions:",e)}},updateSessionState(e){e?(this.walletAddress=e.accounts?e.accounts[0]:null,this.namespace=e.namespaces,this.walletConnected=!0,this.session=e,this.errorMessage=null):this.errorMessage="Failed to establish session."},resetSessionState(){this.walletConnected=!1,this.walletAddress=null,this.session=null,this.namespace=null},onQrCodeScanned(e){this.walletUri=e,this.connectWithUri()}}},dO={class:"container bg-green-900/20 w-screen max-w-3xl mx-auto p-8"},pO={class:"mb-6"},gO={class:"flex justify-center mb-6"},bO={class:"flex justify-center space-x-4 mb-8"},vO=["disabled"],mO={class:"w-full max-w-xl mx-auto p-6 border relative rounded-lg shadow-lg bg-white mb-8"},yO={class:"space-y-4 relative"},wO={class:"text-sm font-mono max-w-full font-medium text-blue-700"},_O={class:"text-gray-700"},xO=["onClick"],EO={key:0,class:"mt-6 text-red-500 text-center"};function SO(e,t,r,i,n,s){const o=S2("qrcode-stream");return bn(),qs("div",dO,[t[6]||(t[6]=Zt("h2",{class:"text-xl font-bold text-center mb-8 text-gray-200"},"Wallet Connect",-1)),Zt("div",pO,[l1(Zt("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>n.walletUri=a),placeholder:"Enter WalletConnect URI",class:"p-4 rounded-lg w-full bg-white opacity-50 focus:outline-none focus:ring focus:ring-blue-400 text-gray-800 backdrop-blur-sm"},null,512),[[qw,n.walletUri]])]),Zt("div",gO,[Ri(o,{onDecode:s.onQrCodeScanned,class:"w-64 h-64 border rounded-lg"},null,8,["onDecode"])]),Zt("div",bO,[Zt("button",{onClick:t[1]||(t[1]=(...a)=>s.connectWithUri&&s.connectWithUri(...a)),disabled:!n.walletUri,class:"bg-blue-500 w-full text-white p-3 whitespace-nowrap rounded-lg hover:bg-blue-600 focus:outline-none disabled:bg-gray-500"}," Connect Wallet ",8,vO),n.walletConnected?(bn(),qs("button",{key:0,onClick:t[2]||(t[2]=(...a)=>s.disconnectWallet&&s.disconnectWallet(...a)),class:"bg-red-500 text-white p-3 rounded-lg w-32 hover:bg-red-600 focus:outline-none"}," Disconnect ")):Wh("",!0)]),Zt("div",mO,[t[4]||(t[4]=Zt("h3",{class:"text-2xl font-semibold mb-4 text-blue-600"},"Active Sessions:",-1)),Zt("ul",yO,[(bn(!0),qs(Qr,null,I2(n.activeSessions,(a,f)=>(bn(),qs("li",{key:f,class:"p-4 text-clip bg-gray-50 rounded-lg shadow-sm"},[Zt("p",wO,"Session ID: "+za(f),1),Zt("p",_O,[t[3]||(t[3]=Zt("span",{class:"font-semibold"},"Relay Protocol:",-1)),Ju(" "+za(a.relay.protocol),1)]),Zt("button",{onClick:c=>s.disconnectSession(a.topic),class:"bg-red-500 text-white p-2 rounded-lg mt-4 hover:bg-red-600 focus:outline-none"}," Disconnect Session ",8,xO)]))),128))])]),n.errorMessage?(bn(),qs("div",EO,[t[5]||(t[5]=Zt("span",{class:"font-medium"},"Error:",-1)),Ju(" "+za(n.errorMessage),1)])):Wh("",!0)])}const MO=lO(hO,[["render",SO],["__scopeId","data-v-435697b2"]]);kw(MO).mount("#app");
